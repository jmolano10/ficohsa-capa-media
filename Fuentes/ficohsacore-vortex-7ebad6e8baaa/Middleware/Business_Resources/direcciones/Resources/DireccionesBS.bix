<?xml version="1.0" encoding="UTF-8"?>
<con:businessServiceEntry xmlns:con="http://xmlns.oracle.com/servicebus/business/config" xmlns:oper="http://xmlns.oracle.com/servicebus/business/operations" xmlns:oper1="http://xmlns.oracle.com/servicebus/operations" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
    <con:coreEntry>
        <con2:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType" xmlns:con="http://www.bea.com/wli/sb/services/bindings/config" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:env="http://www.bea.com/wli/config/env" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con2="http://xmlns.oracle.com/servicebus/business/config">
            <con:wsdl ref="Middleware/Business_Resources/direcciones/Resources/Direcciones"/>
            <con:port>
                <con:name>T24WebServicesImplPort</con:name>
                <con:namespace>T24WebServicesImpl</con:namespace>
            </con:port>
            <con:WSI-compliant>false</con:WSI-compliant>
        </con2:binding>
        <oper:operations enabled="true">
            <oper:messageTracing enabled="false">
                <oper1:detailsLevel>terse</oper1:detailsLevel>
                <oper1:maxSize>8192</oper1:maxSize>
            </oper:messageTracing>
            <oper:throttling enabled="false">
                <oper:capacity>0</oper:capacity>
                <oper:maxQueueLength>0</oper:maxQueueLength>
                <oper:timeToLive>0</oper:timeToLive>
            </oper:throttling>
            <oper:monitoring enabled="true" aggregationInterval="360"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:resultCachingEnabled>true</oper:resultCachingEnabled>
        </oper:operations>
        <con:ws-policy xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:env="http://www.bea.com/wli/config/env" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
        </con:ws-policy>
        <con:pageAttachments isEnabled="false"/>
        <con:result-caching isSupported="true">
            <con:expressionContext xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:env="http://www.bea.com/wli/config/env" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <con:userNsDecl prefix="t24" namespace="T24WebServicesImpl" xmlns:con="http://www.bea.com/wli/sb/stages/config"/>
            </con:expressionContext>
            <con:tokenExpression xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:env="http://www.bea.com/wli/config/env" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">if(fn:exists($body/t24:Consultadecoloniaobarrio)) then (
fn:string-join((fn:string($body/t24:Consultadecoloniaobarrio/WSNEIGHBORHOODLISTType/enquiryInputCollection[1]/criteriaValue/text()),
fn:string($body/t24:Consultadecoloniaobarrio/WSNEIGHBORHOODLISTType/enquiryInputCollection[2]/criteriaValue/text()),
fn:string($body/t24:Consultadecoloniaobarrio/WSNEIGHBORHOODLISTType/enquiryInputCollection[3]/criteriaValue/text()),
fn:string($body/t24:Consultadecoloniaobarrio/WSNEIGHBORHOODLISTType/enquiryInputCollection[4]/criteriaValue/text())),'')
) else if (fn:exists($body/t24:Consultadedepartamentos)) then (
fn:string-join((fn:string($body/t24:Consultadedepartamentos/WSSTATELISTType/enquiryInputCollection[1]/criteriaValue/text()),
fn:string($body/t24:Consultadedepartamentos/WSSTATELISTType/enquiryInputCollection[2]/criteriaValue/text())),'')
) else if (fn:exists($body/t24:Consultademunicipios)) then (
fn:string-join((fn:string($body/t24:Consultademunicipios/WSCITYLISTType/enquiryInputCollection[1]/criteriaValue/text()),
fn:string($body/t24:Consultademunicipios/WSCITYLISTType/enquiryInputCollection[2]/criteriaValue/text()),
fn:string($body/t24:Consultademunicipios/WSCITYLISTType/enquiryInputCollection[3]/criteriaValue/text())),'')
) else if (fn:exists($body/t24:Consultadepaises)) then (
fn:string($body/t24:Consultadepaises/WSCOUNTRYLISTType/enquiryInputCollection/criteriaValue/text())
)
else()</con:xqueryText>
            </con:tokenExpression>
            <con:ttlExpression source="request">
                <con1:xqueryText>let $horaInicio := xs:time("08:01:00") 
let $horaFin := xs:time("18:01:00")
let $horaActual := fn:current-time()
let $segInicio := (fn:hours-from-time($horaInicio) * 3600) + (fn:minutes-from-time($horaInicio) * 60) + (fn:seconds-from-time($horaInicio))
let $segFin := (fn:hours-from-time($horaFin) * 3600) + (fn:minutes-from-time($horaFin) * 60) + (fn:seconds-from-time($horaFin))
let $segActual := xs:integer((fn:hours-from-time($horaActual) * 3600) + (fn:minutes-from-time($horaActual) * 60) + (fn:seconds-from-time($horaActual)))

let $tiempoCache := (
if ($segActual >= $segInicio and $segActual &lt;= $segFin) then
86400 - $segActual
 else (-1)
)return $tiempoCache</con1:xqueryText>
            </con:ttlExpression>
        </con:result-caching>
    </con:coreEntry>
    <con:endpointConfig xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:env="http://www.bea.com/wli/config/env" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <tran:provider-id>http</tran:provider-id>
        <tran:inbound>false</tran:inbound>
        <tran:URI>
            <env:value>http://mwomnicanal:7030/svcDirecciones/services</env:value>
        </tran:URI>
        <tran:outbound-properties>
            <tran:load-balancing-algorithm>none</tran:load-balancing-algorithm>
            <tran:retry-count>0</tran:retry-count>
            <tran:retry-interval>0</tran:retry-interval>
            <tran:retry-application-errors>true</tran:retry-application-errors>
            <tran:delay-interval-configuration isEnabled="false">
                <tran:delay-interval>0</tran:delay-interval>
            </tran:delay-interval-configuration>
        </tran:outbound-properties>
        <tran:provider-specific xsi:type="http:HttpEndPointConfiguration">
            <http:outbound-properties>
                <http:request-method>POST</http:request-method>
                <http:timeout>60</http:timeout>
                <http:connection-timeout>50</http:connection-timeout>
                <http:follow-redirects>false</http:follow-redirects>
                <http:chunked-streaming-mode>true</http:chunked-streaming-mode>
                <http:session-sctikiness enabled="false" session-id-name="JSESSIONID"/>
            </http:outbound-properties>
            <http:dispatch-policy>weblogic.wsee.mdb.DispatchPolicy</http:dispatch-policy>
            <http:compression>
                <http:compression-support>false</http:compression-support>
            </http:compression>
        </tran:provider-specific>
    </con:endpointConfig>
</con:businessServiceEntry>