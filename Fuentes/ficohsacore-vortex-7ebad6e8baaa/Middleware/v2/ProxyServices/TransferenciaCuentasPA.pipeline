<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/TransferenciaCuentas/wsdl/transferenciaCuentasPS"/>
            <con:binding>
                <con:name>transferenciaCuentasPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/transferenciaCuentasPS/</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con:router errorHandler="_onErrorHandler-4883812616632862928--4d983abb.17533af18e7.-7956" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
        <con:pipeline type="request" name="PA01_TransferenciaCuentas_request">
            <con3:stage name="FlujoEntrada" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/stages/config" xmlns:con6="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con5="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config">
                <con3:context>
                    <con:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/registrarUsoServicio" prefix="osb2"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/transferenciasType" prefix="tran"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con7:ifThenElse xmlns:con7="http://www.bea.com/wli/sb/stages/transform/config">
                        <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77ec</con:id>
                        <con7:case>
                            <con7:condition>
                                <con:xqueryText>(: element &lt;REGIONAL_DETAILS> exists :)
string(data($body/tran:transferenciaCuentasRequest/REGIONAL_DETAILS))</con:xqueryText>
                            </con7:condition>
                            <con7:actions>
                                <con7:wsCallout>
                                    <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-776c</con:id>
                                    <con7:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/transferenciaIntergrupal/biz/transferenciaIntergrupal_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con7:operation>transferenciaIntergrupal</con7:operation>
                                    <con7:request>
                                        <con7:body>REQtransferenciaIntergrupal</con7:body>
                                    </con7:request>
                                    <con7:response>
                                        <con7:body>RSPtransferenciaIntergrupal</con7:body>
                                    </con7:response>
                                    <con7:requestTransform>
                                        <con7:assign varName="REQtransferenciaIntergrupal">
                                            <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7733</con:id>
                                            <con7:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaIntergrupalPAIn"/>
                                                    <con:param name="transferenciaCuentasRequest">
                                                        <con:path>$body/tran:transferenciaCuentasRequest</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con7:expr>
                                        </con7:assign>
                                    </con7:requestTransform>
                                    <con7:responseTransform/>
                                </con7:wsCallout>
                            </con7:actions>
                        </con7:case>
                        <con7:default>
                            <con7:assign varName="validationMessage">
                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77ea</con:id>
                                <con7:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/Business_Resources/Transferencias/TransferenciasEntreCuentas/transferenciaCuentasValidate"/>
                                        <con:param name="transferenciaCuentasRequest">
                                            <con:path>$body/tran:transferenciaCuentasRequest</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con7:expr>
                            </con7:assign>
                            <con7:ifThenElse>
                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77e3</con:id>
                                <con7:case>
                                    <con7:condition>
                                        <con:xqueryText>$validationMessage != ""</con:xqueryText>
                                    </con7:condition>
                                    <con7:actions>
                                        <con:skip>
                                            <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77e2</con:id>
                                        </con:skip>
                                    </con7:actions>
                                </con7:case>
                                <con7:default>
                                    <con7:wsCallout>
                                        <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77de</con:id>
                                        <con7:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/transferenciaCuentas/biz/transferenciaCuentas_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                        <con7:operation>transferenciaCuentas</con7:operation>
                                        <con7:request>
                                            <con7:body>rq</con7:body>
                                        </con7:request>
                                        <con7:response>
                                            <con7:body>rp</con7:body>
                                        </con7:response>
                                        <con7:requestTransform>
                                            <con7:assign varName="rq">
                                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77e1</con:id>
                                                <con7:expr>
                                                    <con:xqueryTransform>
                                                        <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaCuentasPAIn"/>
                                                        <con:param name="transferenciaCuentasRequest1">
                                                            <con:path>$body/tran:transferenciaCuentasRequest</con:path>
                                                        </con:param>
                                                    </con:xqueryTransform>
                                                </con7:expr>
                                            </con7:assign>
                                        </con7:requestTransform>
                                        <con7:responseTransform>
                                            <con7:assign varName="successIndicator">
                                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77e0</con:id>
                                                <con7:expr>
                                                    <con:xqueryText>$rp/tran:OutputParameters/tran:ERROR_CODE/text()</con:xqueryText>
                                                </con7:expr>
                                            </con7:assign>
                                            <con7:assign varName="errorMessage">
                                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-77df</con:id>
                                                <con7:expr>
                                                    <con:xqueryText>$rp/tran:OutputParameters/tran:ERROR_MESSAGE/text()</con:xqueryText>
                                                </con7:expr>
                                            </con7:assign>
                                        </con7:responseTransform>
                                    </con7:wsCallout>
                                </con7:default>
                            </con7:ifThenElse>
                        </con7:default>
                    </con7:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PA01_TransferenciaCuentas_response">
            <con3:stage name="FlujoSalida" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/stages/config" xmlns:con6="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con5="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config">
                <con3:context>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/transferenciasType" prefix="tran"/>
                </con3:context>
                <con3:actions>
                    <con7:ifThenElse xmlns:con7="http://www.bea.com/wli/sb/stages/transform/config">
                        <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-76a0</con:id>
                        <con7:case>
                            <con7:condition>
                                <con:xqueryText>(: element &lt;REGIONAL_DETAILS> exists :)
string(data($body/tran:transferenciaCuentasRequest/REGIONAL_DETAILS))</con:xqueryText>
                            </con7:condition>
                            <con7:actions>
                                <con7:replace contents-only="true" varName="header">
                                    <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7690</con:id>
                                    <con7:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaIntergrupalPAHeaderOut"/>
                                            <con:param name="outputParameters">
                                                <con:path>$RSPtransferenciaIntergrupal</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con7:expr>
                                </con7:replace>
                                <con7:ifThenElse>
                                    <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7673</con:id>
                                    <con7:case>
                                        <con7:condition>
                                            <con:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) = "SUCCESS"</con:xqueryText>
                                        </con7:condition>
                                        <con7:actions>
                                            <con7:replace contents-only="true" varName="body">
                                                <con:id>_ActionId-6724319405972431811--640cbda9.17d2b8073fd.-7a9a</con:id>
                                                <con7:expr>
                                                    <con:xqueryTransform>
                                                        <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaIntergrupalPABodyOut"/>
                                                        <con:param name="outputParameters">
                                                            <con:path>$RSPtransferenciaIntergrupal</con:path>
                                                        </con:param>
                                                    </con:xqueryTransform>
                                                </con7:expr>
                                            </con7:replace>
                                        </con7:actions>
                                    </con7:case>
                                    <con7:default>
                                        <con7:replace contents-only="true" varName="body">
                                            <con:id>_ActionId-6724319405972431811--640cbda9.17d2b8073fd.-7a9c</con:id>
                                            <con7:expr>
                                                <con:xqueryText>&lt;tran:transferenciaCuentasResponse/></con:xqueryText>
                                            </con7:expr>
                                        </con7:replace>
                                    </con7:default>
                                </con7:ifThenElse>
                            </con7:actions>
                        </con7:case>
                        <con7:default>
                            <con7:ifThenElse>
                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7698</con:id>
                                <con7:case>
                                    <con7:condition>
                                        <con:xqueryText>$successIndicator != ""</con:xqueryText>
                                    </con7:condition>
                                    <con7:actions>
                                        <con7:replace contents-only="true" varName="header">
                                            <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7697</con:id>
                                            <con7:expr>
                                                <con:xqueryText><![CDATA[<aut:ResponseHeader>
    <successIndicator>{$successIndicator}</successIndicator>
    <messages>{ fn:string($errorMessage) }</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                            </con7:expr>
                                        </con7:replace>
                                        <con7:replace contents-only="true" varName="body">
                                            <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7696</con:id>
                                            <con7:expr>
                                                <con:xqueryText>&lt;tran:transferenciaCuentasResponse/></con:xqueryText>
                                            </con7:expr>
                                        </con7:replace>
                                    </con7:actions>
                                </con7:case>
                                <con7:default>
                                    <con7:replace contents-only="true" varName="header">
                                        <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7695</con:id>
                                        <con7:expr>
                                            <con:xqueryTransform>
                                                <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaCuentasPAHeaderOut"/>
                                                <con:param name="outputParameters1">
                                                    <con:path>$rp</con:path>
                                                </con:param>
                                            </con:xqueryTransform>
                                        </con7:expr>
                                    </con7:replace>
                                    <con7:ifThenElse>
                                        <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7694</con:id>
                                        <con7:case>
                                            <con7:condition>
                                                <con:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))!="SUCCESS"</con:xqueryText>
                                            </con7:condition>
                                            <con7:actions>
                                                <con7:replace varName="body" contents-only="true">
                                                    <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7693</con:id>
                                                    <con7:expr>
                                                        <con:xqueryText>&lt;tran:transferenciaCuentasResponse/></con:xqueryText>
                                                    </con7:expr>
                                                </con7:replace>
                                            </con7:actions>
                                        </con7:case>
                                        <con7:default>
                                            <con7:replace contents-only="true" varName="body">
                                                <con:id>_ActionId-6899168316773989874-7d62a14b.17c752f5c1b.-7692</con:id>
                                                <con7:expr>
                                                    <con:xqueryTransform>
                                                        <con:resource ref="Middleware/v2/Resources/TransferenciaCuentas/xq/transferenciaCuentasPAOut"/>
                                                        <con:param name="outputParameters1">
                                                            <con:path>$rp</con:path>
                                                        </con:param>
                                                    </con:xqueryTransform>
                                                </con7:expr>
                                            </con7:replace>
                                        </con7:default>
                                    </con7:ifThenElse>
                                </con7:default>
                            </con7:ifThenElse>
                        </con7:default>
                    </con7:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con:pipeline>
        <con:pipeline type="error" name="_onErrorHandler-4883812616632862928--4d983abb.17533af18e7.-7956">
            <con:stage name="ReplyStage">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/transferenciasType" prefix="tran"/>
                </con:context>
                <con:actions>
                    <con2:replace varName="header" contents-only="true">
                        <con1:id>_ActionId-1577307397948231885-39da3c28.17d2a99375c.-7aa6</con1:id>
                        <con2:expr>
                            <con1:xqueryText><![CDATA[<aut:ResponseHeader>
	<messageId>-1</messageId>
	<successIndicator>ERROR</successIndicator>
	<messages>{ string($fault/ctx:reason/text()) }</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con2:replace varName="body" contents-only="true">
                        <con1:id>_ActionId-1577307397948231885-39da3c28.17d2a99375c.-7a75</con1:id>
                        <con2:expr>
                            <con1:xqueryText>&lt;tran:transferenciaCuentasResponse/></con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con1:reply>
                        <con1:id>_ActionId-4883812616632862928--4d983abb.17533af18e7.-77b4</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="PA01_TransferenciaCuentas">
                <con:request>PA01_TransferenciaCuentas_request</con:request>
                <con:response>PA01_TransferenciaCuentas_response</con:response>
            </con:pipeline-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>