<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/wsdl/consultaDetalleTransaccionPS"/>
            <con:binding>
                <con:name>consultaDetalleTransaccionPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionPS/</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con2:router errorHandler="_onErrorHandler-8848777042473091319--23eafd38.13c2a05c9f3.-6f49" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config">
        <con2:pipeline type="error" name="_onErrorHandler-8848777042473091319--23eafd38.13c2a05c9f3.-6f49">
            <con2:stage name="ManejoError">
                <con4:context xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFICOPENTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con1"/>
                </con4:context>
                <con4:actions xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                    <con5:assign varName="errorCode" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7707</con1:id>
                        <con5:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">fn:string($fault/ctx:errorCode/text())</con5:xqueryText>
                        </con5:expr>
                    </con5:assign>
                    <con5:assign varName="errorMessage" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7706</con1:id>
                        <con5:expr>
                            <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">fn:string($fault/ctx:reason/text())</con6:xqueryText>
                        </con5:expr>
                    </con5:assign>
                    <con5:wsCallout xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config">
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7703</con1:id>
                        <con5:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con5:operation>mapeoErrores</con5:operation>
                        <con5:request>
                            <con5:body>reqMapeoErrores</con5:body>
                        </con5:request>
                        <con5:response>
                            <con5:body>respMapeoErrores</con5:body>
                        </con5:response>
                        <con5:requestTransform>
                            <con5:assign varName="reqMapeoErrores">
                                <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7705</con1:id>
                                <con5:expr>
                                    <con6:xqueryTransform xmlns:con6="http://www.bea.com/wli/sb/stages/config">
                                        <con6:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                        <con6:param name="MENSAJE_ERROR">
                                            <con6:path>fn:concat("FICBCO0179", "$#$", $errorMessage)</con6:path>
                                        </con6:param>
                                        <con6:param name="CODIGO_ERROR">
                                            <con6:path>$errorCode</con6:path>
                                        </con6:param>
                                    </con6:xqueryTransform>
                                </con5:expr>
                            </con5:assign>
                        </con5:requestTransform>
                        <con5:responseTransform>
                            <con5:replace contents-only="true" varName="header">
                                <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7704</con1:id>
                                <con5:expr>
                                    <con6:xqueryTransform xmlns:con6="http://www.bea.com/wli/sb/stages/config">
                                        <con6:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                        <con6:param name="mapeoErroresResponse1">
                                            <con6:path>$respMapeoErrores</con6:path>
                                        </con6:param>
                                        <con6:param name="successIndicator">
                                            <con6:path>$errorCode</con6:path>
                                        </con6:param>
                                    </con6:xqueryTransform>
                                </con5:expr>
                            </con5:replace>
                        </con5:responseTransform>
                    </con5:wsCallout>
                    <con2:replace contents-only="true" varName="body">
                        <con1:id>_ActionId-8848777042473091319--23eafd38.13c2a05c9f3.-6f0e</con1:id>
                        <con2:expr>
                            <con1:xqueryText>&lt;con1:consultaDetalleTransaccionResponse/></con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con1:reply>
                        <con1:id>_ActionId-8848777042473091319--23eafd38.13c2a05c9f3.-6f0d</con1:id>
                    </con1:reply>
                </con4:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="request" name="ValidacionesGenerales_request">
            <con2:stage name="ValidacionXSD">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                </con2:context>
                <con2:actions>
                    <con3:validate>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7a74</con1:id>
                        <con3:schema ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionTypes"/>
                        <con4:schemaElement xmlns:con3="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">con3:consultaDetalleTransaccion</con4:schemaElement>
                        <con3:varName>body</con3:varName>
                        <con3:location>
                            <con1:xpathText>./con:consultaDetalleTransaccion</con1:xpathText>
                        </con3:location>
                    </con3:validate>
                </con2:actions>
            </con2:stage>
            <con2:stage name="ValidacionServicioRegional">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
                </con2:context>
                <con2:actions>
                    <con3:wsCallout>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7a3c</con1:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>ValidaServicioRegional</con3:operation>
                        <con3:request>
                            <con3:body>reqValidaServicioRegional</con3:body>
                        </con3:request>
                        <con3:response>
                            <con3:body>respValidaServicioRegional</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                            <con3:assign varName="reqValidaServicioRegional">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7a04</con1:id>
                                <con3:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                                        <con1:param name="requestHeader1">
                                            <con1:path>$header/aut:RequestHeader</con1:path>
                                        </con1:param>
                                        <con1:param name="serviceId">
                                            <con1:path>"FICBCO0179"</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con3:expr>
                            </con3:assign>
                        </con3:requestTransform>
                        <con3:responseTransform>
                            <con3:ifThenElse>
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-79cc</con1:id>
                                <con3:case>
                                    <con3:condition>
                                        <con1:xqueryText>fn:string($respValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con1:xqueryText>
                                    </con3:condition>
                                    <con3:actions>
                                        <con3:replace contents-only="true" varName="header">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7994</con1:id>
                                            <con3:expr>
                                                <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($respValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                            </con3:expr>
                                        </con3:replace>
                                        <con3:replace contents-only="true" varName="body">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7977</con1:id>
                                            <con3:expr>
                                                <con1:xqueryText>&lt;con:consultaDetalleTransaccionResponse/></con1:xqueryText>
                                            </con3:expr>
                                        </con3:replace>
                                        <con1:reply>
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-795a</con1:id>
                                        </con1:reply>
                                    </con3:actions>
                                </con3:case>
                                <con3:default>
                                    <con3:replace contents-only="true" varName="header">
                                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7922</con1:id>
                                        <con3:expr>
                                            <con1:xqueryTransform>
                                                <con1:resource ref="Middleware/v2/Resources/Generales/xq/aplicarValoresPorDefectoRegion"/>
                                                <con1:param name="requestHeader">
                                                    <con1:path>$header/aut:RequestHeader</con1:path>
                                                </con1:param>
                                            </con1:xqueryTransform>
                                        </con3:expr>
                                    </con3:replace>
                                </con3:default>
                            </con3:ifThenElse>
                        </con3:responseTransform>
                    </con3:wsCallout>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="response" name="ValidacionesGenerales_response"/>
        <con2:pipeline type="request" name="HNBanco_ConsultaDetalleTransaccionAbanks_request">
            <con2:stage name="FlujoEntrada">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_DETALLE_MOV/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOPRESTAMO/TOPLEVEL-24OSB_CON_RECIBO_PREST/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOSERVICIO/TOPLEVEL-24OSB_CON_RECIBO_SERVI/" prefix="top1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_RECIBO_CHEQUE/" prefix="osb1"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con1:assign varName="account_number" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787f</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/ACCOUNT_NUMBER/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="transaction_reference" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787e</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/TRANSACTION_REFERENCE/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787d</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787b</con4:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultaDetalleTransaccionAbanksBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultaDetalleTransaccion</con1:operation>
                                    <con1:request>
                                        <con1:body>REQUEST</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RESPONSE</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQUEST">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787c</con4:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionIn"/>
                                                    <con2:param name="consultaDetalleTransaccion1">
                                                        <con2:path>$body/con:consultaDetalleTransaccion</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="successIndicator">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-787a</con4:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSE/osb:ERROR_CODE/text())) then (
	$RESPONSE/osb:ERROR_CODE/text()
)
else (
	"ERROR"
)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="message">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7879</con4:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSE/osb:ERROR_MESSAGE/text())) then (
	$RESPONSE/osb:ERROR_MESSAGE/text()
)
else (
	""
)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7878</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($successIndicator) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="transaction_type">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7877</con4:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSE/osb:TRANSACTION_TYPE/text())) then (
	$RESPONSE/osb:TRANSACTION_TYPE/text()
)
else (
	""
)</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="customer_description">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7876</con4:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSE/osb:CUSTOMER_DESCRIPTION/text())) then (
	$RESPONSE/osb:CUSTOMER_DESCRIPTION/text()
)
else (
	""
)</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7875</con4:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $sequence := (	'BCA35','BCA37','BCA429', 

				   	'BCC25','BCC34','BCC403','BCC44')
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7872</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/detalleMovimientosAbanks/Resources/consultaReciboPrestamoAbanksBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboPrestamo</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQUESTP</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RESPONSEP</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQUESTP">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7874</con4:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="Middleware/Business_Resources/detalleMovimientosAbanks/ConsultaReciboPrestamo/consultaReciboPrestamoIn"/>
                                                                            <con2:param name="ACCOUNT">
                                                                                <con2:path>$account_number</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="TRANSACTION_REFERENCE">
                                                                                <con2:path>$transaction_reference</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7873</con4:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="Middleware/Business_Resources/detalleMovimientosAbanks/ConsultaReciboPrestamo/consultaReciboPrestamoOut"/>
                                                                            <con2:param name="outputParameters1">
                                                                                <con2:path>$RESPONSEP</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7871</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSEP/top:ERROR_CODE/text())) then (
	$RESPONSEP/top:ERROR_CODE/text()
)
else (
	"ERROR"
)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7870</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSEP/top:ERROR_MESSAGE/text())) then (
	$RESPONSEP/top:ERROR_MESSAGE/text()
)
else (
	""
)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $sequence := ( 	(: HONDUTEL :) 	
						'BCA433','BCC408',
					(: SANNA :)
						'BCA529','BCC790',
					(: ENEE :)
						'BCA432','BCC407',
					(: MATRICULA VEHICULOS :)
						'BCA272','BCC448',
					(: INTESA :)
						'BCA471','BCC280',
					(: CELTEL POSTPAGO :)
						'BCA431','BCC406',
					(: MILLICOM CABLE :)
						'BCA379','BCA380','BCC940','BCC941',
					(: RECARGAS TIGO :)
						'BCC828','BCA377',
					(: CLARO POSTPAGO Y CLARO TV :)
						'BCA825','BCC987',
					(: RECARGAS CLARO :)
						'BCA865','BCC1151',
					(: CORPORACION FLORES :)
						'BCA5070','BCA5075','BCA5071','BCC5028','BCC5029','BCC5026',
					(: AMERICATEL :)
						'BCA465','BCC447',
					(: CELCARD :)
						'BCA469','BCC270',
					(: IHSS :)
						'BCA470','BCA529','BCC790','BCC276',
					(: MEGACARD :)
						'BCA363','BCC526',
					(: MEGATEL :)
						'BCA501','BCC759','BCC760',
					(: UNAH :)
						'BCA510','BCC769'								
)
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786d</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/detalleMovimientosAbanks/Resources/consultaReciboServicioAbanksBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboServicio</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQUESTS</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RESPONSES</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQUESTS">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786f</con4:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="Middleware/Business_Resources/detalleMovimientosAbanks/ConsultaReciboServicio/consultaReciboServicioIn"/>
                                                                            <con2:param name="ACCOUNT">
                                                                                <con2:path>$account_number</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="TRANSACTION_REFERENCE">
                                                                                <con2:path>$transaction_reference</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786e</con4:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="Middleware/Business_Resources/detalleMovimientosAbanks/ConsultaReciboServicio/consultaReciboServicioOut"/>
                                                                            <con2:param name="outputParameters1">
                                                                                <con2:path>$RESPONSES</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786c</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSES/top1:ERROR_CODE/text())) then (
	$RESPONSES/top1:ERROR_CODE/text()
)
else (
	"ERROR"
)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786b</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RESPONSES/top1:ERROR_MESSAGE/text())) then (
	$RESPONSES/top1:ERROR_MESSAGE/text()
)
else (
	""
)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:substring($customer_description, 1, 3) = "#I#"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:assign varName="cheque_number">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-786a</con4:id>
                                                            <con1:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSE/osb:CHEQUE_NUMBER/text())</con3:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7866</con4:id>
                                                            <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaImagenCheque" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaImagenCheque</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQUESTC</con1:body>
                                                                <con1:header>REQUESTHEADERC</con1:header>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RESPONSEC</con1:body>
                                                                <con1:header>RESPONSEHEADERC</con1:header>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQUESTHEADERC">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7869</con4:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$header</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="REQUESTC">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7868</con4:id>
                                                                    <con1:expr>
                                                                        <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                            <con3:resource ref="Middleware/Business_Resources/detalleMovimientos/ConsultaReciboCheque/consultaReciboChequeIn"/>
                                                                            <con3:param name="account">
                                                                                <con3:path>fn:string($account_number)</con3:path>
                                                                            </con3:param>
                                                                            <con3:param name="transactionReference">
                                                                                <con3:path>fn:string($transaction_reference)</con3:path>
                                                                            </con3:param>
                                                                            <con3:param name="chequeNumber">
                                                                                <con3:path>fn:string($cheque_number)</con3:path>
                                                                            </con3:param>
                                                                        </con3:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7867</con4:id>
                                                                    <con1:expr>
                                                                        <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                            <con3:resource ref="Middleware/Business_Resources/detalleMovimientos/ConsultaReciboCheque/consultaReciboChequeOut"/>
                                                                            <con3:param name="consultaImagenChequeResponse">
                                                                                <con3:path>$RESPONSEC</con3:path>
                                                                            </con3:param>
                                                                        </con3:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7865</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$RESPONSEHEADERC/aut:ResponseHeader/successIndicator/text()</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7864</con4:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$RESPONSEHEADERC/aut:ResponseHeader/messages[1]/text()</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:assign varName="details">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7863</con4:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="response" name="HNBanco_ConsultaDetalleTransaccionAbanks_response">
            <con2:stage name="FlujoSalida">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                </con2:context>
                <con2:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7862</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace contents-only="true" varName="header">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7861</con4:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionHeaderOut"/>
                                            <con2:param name="message">
                                                <con2:path>$message</con2:path>
                                            </con2:param>
                                            <con2:param name="succesIndicator">
                                                <con2:path>$successIndicator</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7860</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:upper-case($successIndicator) = "SUCCESS"</con3:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace contents-only="true" varName="body">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-785f</con4:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionOut"/>
                                                        <con2:param name="details">
                                                            <con2:path>$details</con2:path>
                                                        </con2:param>
                                                        <con2:param name="outputParameters1">
                                                            <con2:path>$RESPONSE</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:replace contents-only="true" varName="body">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-785e</con4:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDetalleTransaccionResponse/></con2:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="header" contents-only="true">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-785d</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>REQUIRED FIELDS NOT SUPPLIED</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                </con1:expr>
                            </con1:replace>
                            <con3:replace contents-only="true" varName="body" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-785c</con1:id>
                                <con3:expr>
                                    <con1:xqueryText>&lt;con:consultaDetalleTransaccionResponse/></con1:xqueryText>
                                </con3:expr>
                            </con3:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
            <con2:stage name="MapeoError">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con3:ifThenElse>
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7831</con1:id>
                        <con3:case>
                            <con3:condition>
                                <con1:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con1:xqueryText>
                            </con3:condition>
                            <con3:actions>
                                <con3:wsCallout>
                                    <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-782e</con1:id>
                                    <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con3:operation>mapeoErrores</con3:operation>
                                    <con3:request>
                                        <con3:body>REQMapeoErrores</con3:body>
                                    </con3:request>
                                    <con3:response>
                                        <con3:body>RSPMapeoErrores</con3:body>
                                    </con3:response>
                                    <con3:requestTransform>
                                        <con5:assign varName="REQMapeoErrores" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7830</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con5:param name="CODIGO_ERROR">
                                                        <con5:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con5:path>
                                                    </con5:param>
                                                    <con5:param name="MENSAJE_ERROR">
                                                        <con5:path>fn:concat("FICBCO0179","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:assign>
                                    </con3:requestTransform>
                                    <con3:responseTransform>
                                        <con5:replace varName="header" contents-only="true" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-782f</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con5:param name="mapeoErroresResponse1">
                                                        <con5:path>$RSPMapeoErrores</con5:path>
                                                    </con5:param>
                                                    <con5:param name="successIndicator">
                                                        <con5:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:replace>
                                    </con3:responseTransform>
                                </con3:wsCallout>
                            </con3:actions>
                        </con3:case>
                        <con3:default/>
                    </con3:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="request" name="Default_ConsultaDetalleTransaccionAbanks_request">
            <con2:stage name="FlujoEntrada">
                <con2:context/>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="response" name="Default_ConsultaDetalleTransaccionAbanks_response">
            <con2:stage name="FlujoSalida">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                </con2:context>
                <con2:actions>
                    <con4:Error xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-2681369310853666711--5bcd27aa.14daf0d55d0.-6f63</con1:id>
                        <con4:errCode>MW-0008</con4:errCode>
                        <con4:message>SERVICE NOT IMPLEMENTED YET FOR THIS COUNTRY/COMPANY</con4:message>
                    </con4:Error>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="request" name="GTBanco_ConsultaDetalleTransaccionAbanks_request">
            <con2:stage name="FlujoEntrada">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_DETALLE_MOV/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOPRESTAMO/TOPLEVEL-24OSB_CON_RECIBO_PREST/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOSERVICIO/TOPLEVEL-24OSB_CON_RECIBO_SERVI/" prefix="top1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_RECIBO_CHEQUE/" prefix="osb1"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con1:assign varName="account_number" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b41</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/ACCOUNT_NUMBER/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="transaction_reference" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b40</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/TRANSACTION_REFERENCE/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3f</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3d</con4:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaDetalleTransaccion/biz/consultaDetalleTransaccion_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultaDetalleTransaccion</con1:operation>
                                    <con1:request>
                                        <con1:body>REQConsultaDetalleTransaccion</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPConsultaDetalleTransaccion</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQConsultaDetalleTransaccion">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3e</con4:id>
                                            <con1:expr>
                                                <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                    <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaDetalleTransaccionGTIn"/>
                                                    <con4:param name="consultaDetalleTransaccion1">
                                                        <con4:path>$body/con:consultaDetalleTransaccion</con4:path>
                                                    </con4:param>
                                                </con4:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="successIndicator">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3c</con4:id>
                                    <con1:expr>
                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:ERROR_CODE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="message">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3b</con4:id>
                                    <con1:expr>
                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:ERROR_MESSAGE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b3a</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($successIndicator) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="transaction_type">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b39</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:TRANSACTION_TYPE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:TRANSACTION_TYPE/text()
)
else (
	""
)</con4:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="customer_description">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b38</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:CUSTOMER_DESCRIPTION/text())) then (
	$RSPConsultaDetalleTransaccion/osb:CUSTOMER_DESCRIPTION/text()
)
else (
	""
)</con4:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b37</con4:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">let $sequence := (	
					(: NCDESBPR - N.CREDITO DESEMBOLSO PRESTAMO :) 	
					'BCA160',
					
					(: NDAPTMOS - ND ABONO A PRESTAMO :)
					'BCA35',
					
					(: NCDESBPR - N.CREDITO DESEMBOLSO PRESTAMO :)
					'BCA36', 

					(: NCAPTMOS - N.CREDITO DESEMBOLSO PRESTAMO :)
				   	'BCA37',
				   	
				   	(: NCDESBPR - N.CREDITO DESEMBOLSO PRESTAMO :)
				   	'BCC44',
				   	
				   	(: NDPPVIR - ND PAGO PTMOS.EN VIRTUAL :)
				   	'BCC403',
				   	
				   	(: NDPPVIR - ND PAGO PTMOS./VIRTUAL :)
				   	'BCA429')
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con4:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b34</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaDetalleTransaccion/biz/consultaReciboPrestamo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboPrestamo</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQConsultaReciboPrestamo</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RSPConsultaReciboPrestamo</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQConsultaReciboPrestamo">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b36</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboPrestamoGTIn"/>
                                                                            <con4:param name="ACCOUNT">
                                                                                <con4:path>$account_number</con4:path>
                                                                            </con4:param>
                                                                            <con4:param name="TRANSACTION_REFERENCE">
                                                                                <con4:path>$transaction_reference</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b35</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboPrestamoGTOut"/>
                                                                            <con4:param name="outputParameters1">
                                                                                <con4:path>$RSPConsultaReciboPrestamo</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b33</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboPrestamo/top:ERROR_CODE/text())) then (
	$RSPConsultaReciboPrestamo/top:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b32</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboPrestamo/top:ERROR_MESSAGE/text())) then (
	$RSPConsultaReciboPrestamo/top:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">let $sequence := (	
					
					(: PAGTCLOT DB - PAGO TARJETA CREDITO/BNKEL :) 
					'BCA728',
					
					(: PAGENERG - PAGO DEOCSA INTERBANCA :)
					'BCA856',
					
					(: PAGENERG - PAGO DEORSA INTERBANCA :)
					'BCA6223', 

					(: PAGCLARO	- PAGO CLARO INTERBANCA :)
				   	'BCA6224',
				   	
				   	(: PAGOTIGO - PAGO TIGO INTERBANCA :)
				   	'BCA6225',
				   	
				   	(: PAGMOVIS - PAGO MOVISTAR INTERBANCA :)
				   	'BCA6226',
				   	
				   	(: PAGEEGSA - PAGO EEGSA INTERBANCA :)
				   	'BCA6232',
				   	
				   	(: PAGTCLOT DB - PAGO TARJETA CREDITO/BNKEL :)
				   	'BCC881', 
				   	
				   	(: PAGENERG - PAGO DEOCSA INTERBANCA :)
				   	'BCC1026', 
				   	
				   	(: PAGENERG - PAGO DEORSA INTERBANCA :)
				   	'BCC1027', 
				   	
				   	(: PAGCLARO - PAGO CLARO INTERBANCA :)
				   	'BCC1028',
				   	
				   	(: PAGOTIGO - PAGO TIGO INTERBANCA :)
				   	'BCC1029', 
				   	
				   	(: PAGMOVIS - PAGO MOVISTAR INTERBANCA :)
				   	'BCC1030', 
				   	
				   	(: PAGEEGSA - PAGO EEGSA INTERBANCA :)
				   	'BCC6226'
				   	
				   	)
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con4:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b2f</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaDetalleTransaccion/biz/consultaReciboServicio_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboServicio</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQConsultaReciboServicio</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RSPConsultaReciboServicio</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQConsultaReciboServicio">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b31</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboServicioGTIn"/>
                                                                            <con4:param name="ACCOUNT">
                                                                                <con4:path>$account_number</con4:path>
                                                                            </con4:param>
                                                                            <con4:param name="TRANSACTION_REFERENCE">
                                                                                <con4:path>$transaction_reference</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b30</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboServicioGTOut"/>
                                                                            <con4:param name="outputParameters1">
                                                                                <con4:path>$RSPConsultaReciboServicio</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b2e</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboServicio/top1:ERROR_CODE/text())) then (
	$RSPConsultaReciboServicio/top1:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b2d</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboServicio/top1:ERROR_MESSAGE/text())) then (
	$RSPConsultaReciboServicio/top1:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:assign varName="details">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7b2c</con4:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="response" name="GTBanco_ConsultaDetalleTransaccionAbanks_response">
            <con2:stage name="FlujoSalida">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                </con2:context>
                <con2:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef9</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace contents-only="true" varName="header">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef8</con4:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionHeaderOut"/>
                                            <con2:param name="message">
                                                <con2:path>$message</con2:path>
                                            </con2:param>
                                            <con2:param name="succesIndicator">
                                                <con2:path>$successIndicator</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef7</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:upper-case($successIndicator) = "SUCCESS"</con3:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace contents-only="true" varName="body">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef6</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                        <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaDetalleTransaccionGTOut"/>
                                                        <con4:param name="details">
                                                            <con4:path>$details</con4:path>
                                                        </con4:param>
                                                        <con4:param name="outputParameters1">
                                                            <con4:path>$RSPConsultaDetalleTransaccion</con4:path>
                                                        </con4:param>
                                                    </con4:xqueryTransform>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:replace contents-only="true" varName="body">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef5</con4:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDetalleTransaccionResponse/></con2:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="header" contents-only="true">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef4</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>REQUIRED FIELDS NOT SUPPLIED</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                </con1:expr>
                            </con1:replace>
                            <con3:replace contents-only="true" varName="body" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                                <con1:id>_ActionId-4131273497364814423-5ab96fb1.1572958fb0d.-7ef3</con1:id>
                                <con3:expr>
                                    <con1:xqueryText>&lt;con:consultaDetalleTransaccionResponse/></con1:xqueryText>
                                </con3:expr>
                            </con3:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
            <con2:stage name="MapeoError">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con3:ifThenElse>
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-77ef</con1:id>
                        <con3:case>
                            <con3:condition>
                                <con1:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con1:xqueryText>
                            </con3:condition>
                            <con3:actions>
                                <con3:wsCallout>
                                    <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-77ec</con1:id>
                                    <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con3:operation>mapeoErrores</con3:operation>
                                    <con3:request>
                                        <con3:body>REQMapeoErrores</con3:body>
                                    </con3:request>
                                    <con3:response>
                                        <con3:body>RSPMapeoErrores</con3:body>
                                    </con3:response>
                                    <con3:requestTransform>
                                        <con5:assign varName="REQMapeoErrores" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-77ee</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con5:param name="CODIGO_ERROR">
                                                        <con5:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con5:path>
                                                    </con5:param>
                                                    <con5:param name="MENSAJE_ERROR">
                                                        <con5:path>fn:concat("FICBCO0179","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:assign>
                                    </con3:requestTransform>
                                    <con3:responseTransform>
                                        <con5:replace varName="header" contents-only="true" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-77ed</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con5:param name="mapeoErroresResponse1">
                                                        <con5:path>$RSPMapeoErrores</con5:path>
                                                    </con5:param>
                                                    <con5:param name="successIndicator">
                                                        <con5:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:replace>
                                    </con3:responseTransform>
                                </con3:wsCallout>
                            </con3:actions>
                        </con3:case>
                        <con3:default/>
                    </con3:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="request" name="PABanco_ConsultaDetalleTransaccionAbanks1_request">
            <con2:stage name="FlujoEntrada">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_DETALLE_MOV/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOPRESTAMO/TOPLEVEL-24OSB_CON_RECIBO_PREST/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTARECIBOSERVICIO/TOPLEVEL-24OSB_CON_RECIBO_SERVI/" prefix="top1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_CON_RECIBO_CHEQUE/" prefix="osb1"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con1:assign varName="account_number" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-749e</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/ACCOUNT_NUMBER/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="transaction_reference" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-749d</con4:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:consultaDetalleTransaccion/TRANSACTION_REFERENCE/text()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-749c</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-749a</con4:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/consultaDetalleTransaccion/biz/consultaDetalleTransaccion_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultaDetalleTransaccion</con1:operation>
                                    <con1:request>
                                        <con1:body>REQConsultaDetalleTransaccion</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPConsultaDetalleTransaccion</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQConsultaDetalleTransaccion">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-749b</con4:id>
                                            <con1:expr>
                                                <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                    <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaDetalleTransaccionPAIn"/>
                                                    <con4:param name="consultaDetalleTransaccion1">
                                                        <con4:path>$body/con:consultaDetalleTransaccion</con4:path>
                                                    </con4:param>
                                                </con4:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="successIndicator">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7499</con4:id>
                                    <con1:expr>
                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:ERROR_CODE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="message">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7498</con4:id>
                                    <con1:expr>
                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:ERROR_MESSAGE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7497</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($successIndicator) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="transaction_type">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7496</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:TRANSACTION_TYPE/text())) then (
	$RSPConsultaDetalleTransaccion/osb:TRANSACTION_TYPE/text()
)
else (
	""
)</con4:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="customer_description">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7495</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaDetalleTransaccion/osb:CUSTOMER_DESCRIPTION/text())) then (
	$RSPConsultaDetalleTransaccion/osb:CUSTOMER_DESCRIPTION/text()
)
else (
	""
)</con4:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7494</con4:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">let $sequence := (	

					(: NDAPTMOS - ND ABONO A PRESTAMO :)
					'BCA35',
					
					(: NCAPTMOS - N.CREDITO DESEMBOLSO PRESTAMO :)
					'BCA37',
					
					(: NCDESBPR - N.CREDITO DESEMBOLSO PRESTAMO :)
					'BCA429', 

					(: NDABOBPR - NOTA DEBITO ABONO A PRESTAMO :)
				   	'BCC34',
				   	
				   	(: NDPPVIR - ND PAGO PTMOS.EN VIRTUAL :)
				   	'BCC403',
				   	
				   	(: NDPPVIR - ND PAGO PTMOS./VIRTUAL :)
				   	'BCC44')
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con4:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7491</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/consultaDetalleTransaccion/biz/consultaReciboPrestamo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboPrestamo</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQConsultaReciboPrestamo</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RSPConsultaReciboPrestamo</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQConsultaReciboPrestamo">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7493</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboPrestamoPAIn"/>
                                                                            <con4:param name="ACCOUNT">
                                                                                <con4:path>$account_number</con4:path>
                                                                            </con4:param>
                                                                            <con4:param name="TRANSACTION_REFERENCE">
                                                                                <con4:path>$transaction_reference</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7492</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboPrestamoPAOut"/>
                                                                            <con4:param name="outputParameters1">
                                                                                <con4:path>$RSPConsultaReciboPrestamo</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7490</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboPrestamo/top:ERROR_CODE/text())) then (
	$RSPConsultaReciboPrestamo/top:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-748f</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboPrestamo/top:ERROR_MESSAGE/text())) then (
	$RSPConsultaReciboPrestamo/top:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">let $sequence := (	
					(: No hay cdigos de transacciones :)
					'xxxxx'
				   	)
  return 
     if (index-of($sequence, $transaction_type)) then 
        true() 
     else 
        false()</con4:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-8788910277809623422--4d797c4c.157670e00db.-7c9a</con4:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/consultaDetalleTransaccion/biz/consultaReciboServicio_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaReciboServicio</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQConsultaReciboServicio</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RSPConsultaReciboServicio</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQConsultaReciboServicio">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-8788910277809623422--4d797c4c.157670e00db.-7c9c</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboServicioPAIn"/>
                                                                            <con4:param name="ACCOUNT">
                                                                                <con4:path>$account_number</con4:path>
                                                                            </con4:param>
                                                                            <con4:param name="TRANSACTION_REFERENCE">
                                                                                <con4:path>$transaction_reference</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="details">
                                                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-8788910277809623422--4d797c4c.157670e00db.-7c9b</con4:id>
                                                                    <con1:expr>
                                                                        <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                                            <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaReciboServicioPAOut"/>
                                                                            <con4:param name="outputParameters1">
                                                                                <con4:path>$RSPConsultaReciboServicio</con4:path>
                                                                            </con4:param>
                                                                        </con4:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="successIndicator">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-8788910277809623422--4d797c4c.157670e00db.-7b52</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboServicio/top1:ERROR_CODE/text())) then (
	$RSPConsultaReciboServicio/top1:ERROR_CODE/text()
)
else (
	"ERROR"
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="message">
                                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-8788910277809623422--4d797c4c.157670e00db.-7b50</con4:id>
                                                            <con1:expr>
                                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">if (fn:exists($RSPConsultaReciboServicio/top1:ERROR_MESSAGE/text())) then (
	$RSPConsultaReciboServicio/top1:ERROR_MESSAGE/text()
)
else (
	""
)</con4:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:assign varName="details">
                                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7489</con4:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con2:pipeline type="response" name="PABanco_ConsultaDetalleTransaccionAbanks1_response">
            <con2:stage name="FlujoSalida">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleTransaccionTypes" prefix="con"/>
                </con2:context>
                <con2:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7488</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($account_number) != "" and fn:string($transaction_reference) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace contents-only="true" varName="header">
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7487</con4:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleTransaccionAbanks/consultaDetalleTransaccionHeaderOut"/>
                                            <con2:param name="message">
                                                <con2:path>$message</con2:path>
                                            </con2:param>
                                            <con2:param name="succesIndicator">
                                                <con2:path>$successIndicator</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:ifThenElse>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7486</con4:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:upper-case($successIndicator) = "SUCCESS"</con3:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace contents-only="true" varName="body">
                                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7485</con4:id>
                                                <con1:expr>
                                                    <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                        <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleTransaccionAbanks/xq/consultaDetalleTransaccionPAOut"/>
                                                        <con4:param name="details">
                                                            <con4:path>$details</con4:path>
                                                        </con4:param>
                                                        <con4:param name="outputParameters1">
                                                            <con4:path>$RSPConsultaDetalleTransaccion</con4:path>
                                                        </con4:param>
                                                    </con4:xqueryTransform>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:replace contents-only="true" varName="body">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7484</con4:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDetalleTransaccionResponse/></con2:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="header" contents-only="true">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7483</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>REQUIRED FIELDS NOT SUPPLIED</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                </con1:expr>
                            </con1:replace>
                            <con3:replace contents-only="true" varName="body" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                                <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7482</con1:id>
                                <con3:expr>
                                    <con1:xqueryText>&lt;con:consultaDetalleTransaccionResponse/></con1:xqueryText>
                                </con3:expr>
                            </con3:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con2:actions>
            </con2:stage>
            <con2:stage name="MapeoError">
                <con2:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con2:context>
                <con2:actions>
                    <con3:ifThenElse>
                        <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7481</con1:id>
                        <con3:case>
                            <con3:condition>
                                <con1:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con1:xqueryText>
                            </con3:condition>
                            <con3:actions>
                                <con3:wsCallout>
                                    <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-747e</con1:id>
                                    <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con3:operation>mapeoErrores</con3:operation>
                                    <con3:request>
                                        <con3:body>REQMapeoErrores</con3:body>
                                    </con3:request>
                                    <con3:response>
                                        <con3:body>RSPMapeoErrores</con3:body>
                                    </con3:response>
                                    <con3:requestTransform>
                                        <con5:assign varName="REQMapeoErrores" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-7480</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con5:param name="CODIGO_ERROR">
                                                        <con5:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con5:path>
                                                    </con5:param>
                                                    <con5:param name="MENSAJE_ERROR">
                                                        <con5:path>fn:concat("FICBCO0179","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:assign>
                                    </con3:requestTransform>
                                    <con3:responseTransform>
                                        <con5:replace varName="header" contents-only="true" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                            <con1:id>_ActionId-6125095139151449487-79f08c5a.1572e2e5db0.-747f</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con5:param name="mapeoErroresResponse1">
                                                        <con5:path>$RSPMapeoErrores</con5:path>
                                                    </con5:param>
                                                    <con5:param name="successIndicator">
                                                        <con5:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:replace>
                                    </con3:responseTransform>
                                </con3:wsCallout>
                            </con3:actions>
                        </con3:case>
                        <con3:default/>
                    </con3:ifThenElse>
                </con2:actions>
            </con2:stage>
        </con2:pipeline>
        <con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:pipeline-node name="ValidacionesGenerales">
                <con:request>ValidacionesGenerales_request</con:request>
                <con:response>ValidacionesGenerales_response</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" name="RegionalizacionPaisEmpresa">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con:context>
                <con:branch-table variable="header">
                    <con:xpath>
                        <con1:xpathText>./aut:RequestHeader/Region/SourceBank</con1:xpathText>
                    </con:xpath>
                    <con:branch name="HNBanco">
                        <con:operator>equals</con:operator>
                        <con:value>'HN01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="HNBanco_ConsultaDetalleTransaccionAbanks">
                                <con:request>HNBanco_ConsultaDetalleTransaccionAbanks_request</con:request>
                                <con:response>HNBanco_ConsultaDetalleTransaccionAbanks_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="GTBanco">
                        <con:operator>equals</con:operator>
                        <con:value>'GT01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="GTBanco_ConsultaDetalleTransaccionAbanks">
                                <con:request>GTBanco_ConsultaDetalleTransaccionAbanks_request</con:request>
                                <con:response>GTBanco_ConsultaDetalleTransaccionAbanks_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="PABanco">
                        <con:operator>equals</con:operator>
                        <con:value>'PA01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="PABanco_ConsultaDetalleTransaccionAbanks1">
                                <con:request>PABanco_ConsultaDetalleTransaccionAbanks1_request</con:request>
                                <con:response>PABanco_ConsultaDetalleTransaccionAbanks1_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow>
                            <con:pipeline-node name="Default_ConsultaDetalleTransaccionAbanks">
                                <con:request>Default_ConsultaDetalleTransaccionAbanks_request</con:request>
                                <con:response>Default_ConsultaDetalleTransaccionAbanks_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con2:router>
</con:pipelineEntry>