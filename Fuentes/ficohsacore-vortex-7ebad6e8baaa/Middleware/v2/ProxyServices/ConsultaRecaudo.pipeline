<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/ConsultaRecaudo/wsdl/consultaRecaudoPS"/>
            <con:binding>
                <con:name>consultaRecaudoPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/consultaRecaudoPS/</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con3:router errorHandler="_onErrorHandler-6663316825346076880--24d9a85f.13d59d21197.-7d5f" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
        <con:pipeline type="error" name="_onErrorHandler-6663316825346076880--24d9a85f.13d59d21197.-7d5f" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="ErrorProxy">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:replace contents-only="true" varName="header">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6663316825346076880--24d9a85f.13d59d21197.-7cf1</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ concat(fn:string($fault/ctx:errorCode/text()), ": ", fn:string($fault/ctx:reason/text())) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:replace contents-only="true" varName="body">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6663316825346076880--24d9a85f.13d59d21197.-7cd4</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:assign varName="uuidBitacoraError">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-2401187029419953982--619784c.14680ea3f11.-7dfc</con2:id>
                        <con1:expr>
                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                <con3:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                            </con3:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-2401187029419953982--619784c.14680ea3f11.-7da4</con3:id>
                        <con2:service ref="Middleware/v2/BusinessServices/registroBitacoraConvenios/biz/registroBitacoraConvenios" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>registroBitacoraConvenio</con2:operation>
                        <con2:outboundTransform>
                            <con1:assign varName="timestampBitacoraError">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-2401187029419953982--619784c.14680ea3f11.-7da3</con3:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/general/TimeStamp/obtenerTimestamp"/>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace contents-only="true" varName="body">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-2401187029419953982--619784c.14680ea3f11.-7da2</con3:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/registrarBitacoraResponseIn"/>
                                        <con3:param name="requestHeader">
                                            <con3:path>$originalRequestHeader/aut:RequestHeader</con3:path>
                                        </con3:param>
                                        <con3:param name="uuidBitacoraRequest">
                                            <con3:path>$uuidBitacoraRequest</con3:path>
                                        </con3:param>
                                        <con3:param name="uuidBitacora">
                                            <con3:path>$uuidBitacoraError</con3:path>
                                        </con3:param>
                                        <con3:param name="dateTimeBitacora">
                                            <con3:path>$timestampBitacoraError</con3:path>
                                        </con3:param>
                                        <con3:param name="consultaRecaudo">
                                            <con3:path>$originalRequestBody/con:consultaRecaudo</con3:path>
                                        </con3:param>
                                        <con3:param name="consultaRecaudoResponse">
                                            <con3:path>$body/con:consultaRecaudoResponse</con3:path>
                                        </con3:param>
                                        <con3:param name="traceProxy">
                                            <con3:path>fn:string($traceProxy)</con3:path>
                                        </con3:param>
                                        <con3:param name="responseHeader">
                                            <con3:path>$header/aut:ResponseHeader</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con2:outboundTransform>
                    </con2:route>
                    <con1:ifThenElse xmlns:con="http://www.bea.com/wli/sb/stages/config">
                        <con:id>_ActionId-9047835847604534838-7599437e.155bb5368e5.-74f6</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con:id>_ActionId-9047835847604534838-7599437e.155bb5368e5.-74f3</con:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>mapeoErrores</con1:operation>
                                    <con1:request>
                                        <con1:body>REQMapeoErrores</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPMapeoErrores</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQMapeoErrores">
                                            <con:id>_ActionId-9047835847604534838-7599437e.155bb5368e5.-74f5</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con:param name="CODIGO_ERROR">
                                                        <con:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con:path>
                                                    </con:param>
                                                    <con:param name="MENSAJE_ERROR">
                                                        <con:path>fn:concat("FICBCO0010","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:replace varName="header" contents-only="true">
                                            <con:id>_ActionId-9047835847604534838-7599437e.155bb5368e5.-74f4</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con:param name="mapeoErroresResponse1">
                                                        <con:path>$RSPMapeoErrores</con:path>
                                                    </con:param>
                                                    <con:param name="successIndicator">
                                                        <con:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                    <con1:reply xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-6663316825346076880--24d9a85f.13d59d21197.-7cb7</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con3:pipeline type="request" name="ValidacionesGenerales_request">
            <con4:stage name="ValidacionXSD" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                <con4:context>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                </con4:context>
                <con4:actions>
                    <con1:validate>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7def</con:id>
                        <con1:schema ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoTypes"/>
                        <con1:schemaElement xmlns:con4="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes">con4:consultaRecaudo</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con:xpathText>./con:consultaRecaudo</con:xpathText>
                        </con1:location>
                    </con1:validate>
                </con4:actions>
            </con4:stage>
            <con4:stage name="ValidacionServicioRegional" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                <con4:context>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                    <con:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
                </con4:context>
                <con4:actions>
                    <con1:wsCallout>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7de8</con:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ValidaServicioRegional</con1:operation>
                        <con1:request>
                            <con1:body>reqValidaServicioRegional</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>respValidaServicioRegional</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="reqValidaServicioRegional">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7dee</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                                        <con:param name="requestHeader1">
                                            <con:path>$header/aut:RequestHeader</con:path>
                                        </con:param>
                                        <con:param name="serviceId">
                                            <con:path>"FICBCO0010"</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7ded</con:id>
                                <con1:case>
                                    <con1:condition>
                                        <con:xqueryText>fn:string($respValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:replace contents-only="true" varName="header">
                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7dec</con:id>
                                            <con1:expr>
                                                <con:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($respValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con1:replace contents-only="true" varName="body">
                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7deb</con:id>
                                            <con1:expr>
                                                <con:xqueryText>&lt;con:consultaRecaudoResponse/></con:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con:reply>
                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7dea</con:id>
                                        </con:reply>
                                    </con1:actions>
                                </con1:case>
                                <con1:default>
                                    <con1:replace contents-only="true" varName="header">
                                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7de9</con:id>
                                        <con1:expr>
                                            <con:xqueryTransform>
                                                <con:resource ref="Middleware/v2/Resources/Generales/xq/aplicarValoresPorDefectoRegion"/>
                                                <con:param name="requestHeader">
                                                    <con:path>$header/aut:RequestHeader</con:path>
                                                </con:param>
                                            </con:xqueryTransform>
                                        </con1:expr>
                                    </con1:replace>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con4:actions>
            </con4:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="ValidacionesGenerales_response"/>
        <con3:pipeline type="request" name="FlujoProxy_request">
            <con3:stage name="BitacoraRequest">
                <con3:context>
                    <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                </con3:context>
                <con3:actions>
                    <con1:assign varName="originalRequestHeader">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c1a</con:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$header</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="originalRequestBody">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c19</con:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="uuidBitacoraRequest">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c18</con:id>
                        <con1:expr>
                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                <con3:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                            </con3:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c17</con:id>
                        <con2:service ref="Middleware/v2/BusinessServices/registroBitacoraConvenios/biz/registroBitacoraConvenios" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>registroBitacoraConvenio</con2:operation>
                        <con2:outboundTransform>
                            <con1:assign varName="timestampBitacoraRequest">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c16</con:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/general/TimeStamp/obtenerTimestamp"/>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace contents-only="true" varName="body">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c15</con:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/registrarBitacoraRequestIn"/>
                                        <con3:param name="requestHeader">
                                            <con3:path>$header/aut:RequestHeader</con3:path>
                                        </con3:param>
                                        <con3:param name="consultaRecaudo">
                                            <con3:path>$body/con:consultaRecaudo</con3:path>
                                        </con3:param>
                                        <con3:param name="uuid">
                                            <con3:path>$uuidBitacoraRequest</con3:path>
                                        </con3:param>
                                        <con3:param name="dateTime">
                                            <con3:path>$timestampBitacoraRequest</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con2:outboundTransform>
                    </con2:route>
                </con3:actions>
            </con3:stage>
            <con3:stage name="ProxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/INT_K_CONVENIOS_NO_ESTANDAR/INT_CV_REGISTRAR_INFO_OPER/" prefix="int" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/OSB_K_RECAUDOS_REF_ONLINE/OSB_CONSULTAR_REF_ONLINE/" prefix="osb" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/OSB_K_RECAUDOS_REF_ONLINE/OSB_ARMAR_MENSAJE/" prefix="osb1" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/registroBitacoraConvenioTypes" prefix="reg" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaContratoReferenciado" prefix="con1"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFechaSistemaTypes" prefix="con2"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleContratoRecaudosTypes" prefix="con3"/>
                </con3:context>
                <con3:actions>
                    <con1:assign varName="validationMessage">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c14</con:id>
                        <con1:expr>
                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoValidate"/>
                                <con3:param name="consultaRecaudo">
                                    <con3:path>$body/con:consultaRecaudo</con3:path>
                                </con3:param>
                            </con3:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c13</con:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="codigoDeudor">
                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c12</con:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($body/con:consultaRecaudo/DEBTOR_CODE/text())</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                    <con:id>_ActionId-568929653964446044--2015e5a2.18dd7b04528.-7f03</con:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaDetalleContratoRecaudos" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultaDetalleContratoRecaudos</con1:operation>
                                    <con1:request>
                                        <con1:body>REQConsultaDetalleContratoRecaudos</con1:body>
                                        <con1:header>REQHeaderConsultaDetalleContratoRecaudos</con1:header>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPConsultaDetalleContratoRecaudos</con1:body>
                                        <con1:header>RSPHeaderConsultaDetalleContratoRecaudos</con1:header>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQHeaderConsultaDetalleContratoRecaudos">
                                            <con:id>_ActionId-568929653964446044--2015e5a2.18dd7b04528.-7ecb</con:id>
                                            <con1:expr>
                                                <con:xqueryText>$header</con:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="REQConsultaDetalleContratoRecaudos">
                                            <con:id>_ActionId-568929653964446044--2015e5a2.18dd7b04528.-7eae</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaDetalleContratoRecaudosIn"/>
                                                    <con:param name="consultaRecaudo1">
                                                        <con:path>$body/con:consultaRecaudo</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c0e</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                    <con1:wsCallout>
                        <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7ffb</con:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/Core/Resources/CoreBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>Consultadeparametroscore</con1:operation>
                        <con1:request>
                            <con1:body>REQConsultaParamsCore</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>RSPConsultaParamsCore</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQConsultaParamsCore">
                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7ffd</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaParametrosCoreIn"/>
                                        <con:param name="requestHeader">
                                            <con:path>$header/aut:RequestHeader</con:path>
                                        </con:param>
                                        <con:param name="consultaRecaudo">
                                            <con:path>$body/con:consultaRecaudo</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="validationMessage">
                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7ffc</con:id>
                                <con1:expr>
                                    <con:xqueryText>fn:string-join($RSPConsultaParamsCore/Status/messages/text(), " ")</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:assign varName="type">
                        <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7f0b</con:id>
                        <con1:expr>
                            <con:xqueryText>fn:string($RSPConsultaDetalleContratoRecaudos/con3:consultaDetalleContratoRecaudosResponseType/con3:consultaDetalleContratoRecaudosResponseRecordType/CONTRACT_TYPE/text())</con:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7c0d</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>fn:string($validationMessage) != ""</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con:skip>
                                    <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fa9</con:id>
                                </con:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = ("ONLINE","LOCAL")</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="isExtended">
                                    <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb7</con:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($body/con:consultaRecaudo/EXTENDED_COLLECTION_YES_NO/text())</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb6</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$isExtended = 'YES'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7faf</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarOperacionConvenioNoEstandar_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>registrarOperacionConvenioNoEstandar</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQUESTregistrarOperacionConvenioNoEstandar</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RESPONSEregistrarOperacionConvenioNoEstandar</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQUESTregistrarOperacionConvenioNoEstandar">
                                                        <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb5</con:id>
                                                        <con1:expr>
                                                            <con:xqueryTransform>
                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/registrarOperConvenioNoEstandarIn"/>
                                                                <con:param name="tipoOperacion">
                                                                    <con:path>"1"</con:path>
                                                                </con:param>
                                                                <con:param name="consultaRecaudo1">
                                                                    <con:path>$body/con:consultaRecaudo</con:path>
                                                                </con:param>
                                                                <con:param name="requestHeader1">
                                                                    <con:path>$header/aut:RequestHeader</con:path>
                                                                </con:param>
                                                            </con:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="successIndicatorRegistrarOperacionConvenioNoEstandar">
                                                        <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb4</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarOperacionConvenioNoEstandar/int:ERROR_CODE/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb3</con:id>
                                                        <con1:case>
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case($successIndicatorRegistrarOperacionConvenioNoEstandar) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb2</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarOperacionConvenioNoEstandar/int:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="idSolicitud">
                                                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb1</con:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarOperacionConvenioNoEstandar/int:ID_SOLICITUD/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:replace varName="body" contents-only="true">
                                                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fb0</con:id>
                                                                <con1:location>
                                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./con:consultaRecaudo/DEBTOR_CODE</con2:xpathText>
                                                                </con1:location>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$idSolicitud</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fae</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fac</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RecaudosBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>Consultadedetallederecaudo</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQUEST</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RESPONSE</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQUEST">
                                                        <con:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fad</con:id>
                                                        <con1:expr>
                                                            <con:xqueryTransform>
                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoIn"/>
                                                                <con:param name="consultaRecaudo1">
                                                                    <con:path>$body/con:consultaRecaudo</con:path>
                                                                </con:param>
                                                                <con:param name="requestHeader1">
                                                                    <con:path>$header/aut:RequestHeader</con:path>
                                                                </con:param>
                                                            </con:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-5036023971141959028-32688a3c.1577d8eebad.-7fab</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type="REFERENCED"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-6003380179399659581--43bec651.17381f4f493.-7dc4</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con:xqueryText>string($body/con:consultaRecaudo/BILL_AMOUNT)='' and string($body/con:consultaRecaudo/BILL_DATE)=''</con:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="BillAmount">
                                                <con:id>_ActionId-6003380179399659581--43bec651.17381f4f493.-7dc2</con:id>
                                                <con1:expr>
                                                    <con:xqueryText>$body/con:consultaRecaudo/ADDITIONAL_INFO/DATA[3]/text()</con:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="BillDate">
                                                <con:id>_ActionId-6003380179399659581--43bec651.17381f4f493.-7dc0</con:id>
                                                <con1:expr>
                                                    <con:xqueryText>$body/con:consultaRecaudo/ADDITIONAL_INFO/DATA[2]/text()</con:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:replace contents-only="true" varName="body">
                                                <con:id>_ActionId-6003380179399659581--43bec651.17381f4f493.-7dbe</con:id>
                                                <con1:location>
                                                    <con:xpathText>./con:consultaRecaudo/BILL_AMOUNT</con:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con:xqueryText>$BillAmount</con:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body" contents-only="true">
                                                <con:id>_ActionId-6003380179399659581--43bec651.17381f4f493.-7dbc</con:id>
                                                <con1:location>
                                                    <con:xpathText>./con:consultaRecaudo/BILL_DATE</con:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con:xqueryText>$BillDate</con:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con1:wsCallout>
                                    <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7f75</con:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RecaudosBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>CalculoCobranzasReferenciadas</con1:operation>
                                    <con1:request>
                                        <con1:body>REQUEST</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RESPONSE</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQUEST">
                                            <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7f76</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoReferenciadoIn"/>
                                                    <con:param name="consultaRecaudoIN">
                                                        <con:path>$body/con:consultaRecaudo</con:path>
                                                    </con:param>
                                                    <con:param name="requestHeaderIN">
                                                        <con:path>$header/aut:RequestHeader</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = ("REFERENCED_ONLINE","REFERENCED_LOCAL")</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7cac</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con:xqueryText>$type="REFERENCED_LOCAL"</con:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="validationMessage">
                                                <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7e60</con:id>
                                                <con1:expr>
                                                    <con:xqueryTransform>
                                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaCobranzasValidate"/>
                                                        <con:param name="consultaRecaudo">
                                                            <con:path>$body/con:consultaRecaudo</con:path>
                                                        </con:param>
                                                    </con:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7e5f</con:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con:xqueryText>$validationMessage = ""</con:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:wsCallout>
                                                            <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7e5d</con:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABK/consultaRecaudosAbanks/biz/consultaRecaudoAbanks_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>consultaRecaudoAbanks</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQConsultaRecAbanks</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RSPConsultaRecAbanks</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQConsultaRecAbanks">
                                                                    <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7e5e</con:id>
                                                                    <con1:expr>
                                                                        <con:xqueryTransform>
                                                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoAbanksIn"/>
                                                                            <con:param name="consultadeparametroscoreResponse">
                                                                                <con:path>$RSPConsultaParamsCore</con:path>
                                                                            </con:param>
                                                                            <con:param name="consultaRecaudo">
                                                                                <con:path>$body/con:consultaRecaudo</con:path>
                                                                            </con:param>
                                                                        </con:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform/>
                                                        </con1:wsCallout>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con:skip>
                                                        <con:id>_ActionId-9014052120823392757--26aa29da.156add2b8d4.-7e5c</con:id>
                                                    </con:skip>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:wsCallout>
                                            <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c94</con:id>
                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/armarMensajeRecaudo/biz/armarMensajeRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>armarMensajeRecaudo</con1:operation>
                                            <con1:request>
                                                <con1:body>REQUESTarmarMensajeRecaudoREQ</con1:body>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body>RESPONSEarmarMensajeRecaudoREQ</con1:body>
                                            </con1:response>
                                            <con1:requestTransform>
                                                <con1:assign varName="REQUESTarmarMensajeRecaudoREQ">
                                                    <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c96</con:id>
                                                    <con1:expr>
                                                        <con:xqueryTransform>
                                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/armarMensajeRequestIn"/>
                                                            <con:param name="consultadeparametroscoreResponse">
                                                                <con:path>$RSPConsultaParamsCore</con:path>
                                                            </con:param>
                                                            <con:param name="consultaDetalleContratoRecaudosResponse">
                                                                <con:path>$RSPConsultaDetalleContratoRecaudos</con:path>
                                                            </con:param>
                                                            <con:param name="RequestHeader">
                                                                <con:path>$header/aut:RequestHeader</con:path>
                                                            </con:param>
                                                            <con:param name="consultaRecaudo">
                                                                <con:path>$body/con:consultaRecaudo</con:path>
                                                            </con:param>
                                                        </con:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:requestTransform>
                                            <con1:responseTransform>
                                                <con1:assign varName="successIndicatoArmarMensajeRecaudoREQ">
                                                    <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c95</con:id>
                                                    <con1:expr>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEarmarMensajeRecaudoREQ/osb1:CODIGO_RESPUESTA/text())</con2:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:responseTransform>
                                        </con1:wsCallout>
                                        <con1:ifThenElse>
                                            <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c8e</con:id>
                                            <con1:case>
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($successIndicatoArmarMensajeRecaudoREQ) = "SUCCESS"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:wsCallout>
                                                        <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c8c</con:id>
                                                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/enrutadorConvenios/biz/enrutadorConvenios" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>invoke</con1:operation>
                                                        <con1:request>
                                                            <con1:param>
                                                                <con1:name>serviceRequest</con1:name>
                                                                <con1:variable>RequestDataREQ</con1:variable>
                                                            </con1:param>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:param>
                                                                <con1:name>serviceResponse</con1:name>
                                                                <con1:variable>ServiceResponseREQ</con1:variable>
                                                            </con1:param>
                                                        </con1:response>
                                                        <con1:requestTransform>
                                                            <con1:assign varName="RequestDataREQ">
                                                                <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c8d</con:id>
                                                                <con1:expr>
                                                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                        <con3:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/enrutadorConveniosIn"/>
                                                                        <con3:param name="outputParameters">
                                                                            <con3:path>$RESPONSEarmarMensajeRecaudoREQ</con3:path>
                                                                        </con3:param>
                                                                    </con3:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:requestTransform>
                                                        <con1:responseTransform/>
                                                    </con1:wsCallout>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:assign varName="validationMessage">
                                                    <con:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c8b</con:id>
                                                    <con1:expr>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEarmarMensajeRecaudoREQ/osb1:MENSAJE_RESPUESTA/text())</con2:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:id>_ActionId-1918458597952822424-2937bc78.1567b7017b0.-7c8a</con2:id>
                                                </con2:skip>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = "MOBILE_PACKAGE"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7ddd</con:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/T24/PaquetesMoviles/biz/PaquetesMoviles" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>ConsultaPaquetesMoviles</con1:operation>
                                    <con1:request>
                                        <con1:body>ReqConsultaPaquetesMoviles</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RspConsultaPaquetesMoviles</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="ReqConsultaPaquetesMoviles">
                                            <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7da5</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaPaquetesMovilesIn"/>
                                                    <con:param name="requestHeader">
                                                        <con:path>$header/aut:RequestHeader</con:path>
                                                    </con:param>
                                                    <con:param name="consultaRecaudo">
                                                        <con:path>$body/con:consultaRecaudo</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:assign varName="ConsultaPaquetesSuccessIndicator">
                                            <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7cc4</con:id>
                                            <con1:expr>
                                                <con:xqueryText>xs:string($RspConsultaPaquetesMoviles/Status/successIndicator/text())</con:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:ifThenElse>
                                            <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7cc6</con:id>
                                            <con1:case>
                                                <con1:condition>
                                                    <con:xqueryText>fn:upper-case($ConsultaPaquetesSuccessIndicator) != "SUCCESS"</con:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="validationMessage">
                                                        <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7c50</con:id>
                                                        <con1:expr>
                                                            <con:xqueryText>xs:string($RspConsultaPaquetesMoviles/Status/messages/text())</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con:skip>
                                                        <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7c4e</con:id>
                                                    </con:skip>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default/>
                                        </con1:ifThenElse>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="validationMessage">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bec</con:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"ERROR LOOKING COLLECTION TYPE"</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7beb</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="FlujoProxy_response">
            <con3:stage name="ProxyResponse">
                <con3:context>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleContratoRecaudosTypes" prefix="con3"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/OSB_REGISTRAR_OPER_RECAUDO/" prefix="osb" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/OSB_CONSULTAR_RPTA_TERCERO/" prefix="osb1" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/FLINK/OSB_K_RECAUDOS_REF_ONLINE/OSB_ARMAR_MENSAJE/" prefix="osb2" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaContratoReferenciado" prefix="con1"/>
                </con3:context>
                <con3:actions>
                    <con1:assign varName="username">
                        <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7d5b</con:id>
                        <con1:expr>
                            <con:xqueryText>fn:string($header/aut:RequestHeader/Authentication/UserName/text())</con:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bea</con:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="header" contents-only="true">
                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7be9</con:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($validationMessage) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con1:replace contents-only="true" varName="body">
                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7be8</con:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7be7</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ("ONLINE","LOCAL")</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="header" contents-only="true">
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fd3</con:id>
                                    <con1:expr>
                                        <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                            <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoHeaderOut"/>
                                            <con3:param name="consultadedetallederecaudoResponse">
                                                <con3:path>$RESPONSE</con3:path>
                                            </con3:param>
                                        </con3:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:replace contents-only="true" varName="body">
                                    <con:id>_ActionId-3083830573380365811--37926f1d.1576e1cfa55.-7918</con:id>
                                    <con1:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoOut"/>
                                            <con:param name="consultadedetallederecaudoResponse">
                                                <con:path>$RESPONSE</con:path>
                                            </con:param>
                                            <con:param name="consultaRecaudo">
                                                <con:path>$body/con:consultaRecaudo</con:path>
                                            </con:param>
                                            <con:param name="consultadeparametroscoreResponse">
                                                <con:path>$RSPConsultaParamsCore</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = "REFERENCED_ONLINE"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fc6</con:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/armarMensajeRecaudo/biz/armarMensajeRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>armarMensajeRecaudo</con1:operation>
                                    <con1:request>
                                        <con1:body>REQUESTarmarMensajeRecaudoRES</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RESPONSEarmarMensajeRecaudoRES</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQUESTarmarMensajeRecaudoRES">
                                            <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fc8</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/armarMensajeResponseIn"/>
                                                    <con:param name="consultadeparametroscoreResponse">
                                                        <con:path>$RSPConsultaParamsCore</con:path>
                                                    </con:param>
                                                    <con:param name="consultaDetalleContratoRecaudosResponse">
                                                        <con:path>$RSPConsultaDetalleContratoRecaudos</con:path>
                                                    </con:param>
                                                    <con:param name="serviceResponse">
                                                        <con:path>$ServiceResponseREQ</con:path>
                                                    </con:param>
                                                    <con:param name="consultaRecaudo">
                                                        <con:path>$body/con:consultaRecaudo</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:assign varName="successIndicatoArmarMensajeRecaudoRES">
                                            <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fc7</con:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEarmarMensajeRecaudoRES/osb2:CODIGO_RESPUESTA/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fbe</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($successIndicatoArmarMensajeRecaudoRES) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="RESPONSE">
                                                <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fbd</con:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(fn:string($RESPONSEarmarMensajeRecaudoRES/osb2:MENSAJE/text()))</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:replace varName="header" contents-only="true">
                                                <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fbc</con:id>
                                                <con1:expr>
                                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                        <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoHeaderOut"/>
                                                        <con3:param name="consultadedetallederecaudoResponse">
                                                            <con3:path>$RESPONSE</con3:path>
                                                        </con3:param>
                                                    </con3:xqueryTransform>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body" contents-only="true">
                                                <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fbb</con:id>
                                                <con1:expr>
                                                    <con:xqueryTransform>
                                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoReferenciadoEnLineaOut"/>
                                                        <con:param name="consultadeparametroscoreResponse">
                                                            <con:path>$RSPConsultaParamsCore</con:path>
                                                        </con:param>
                                                        <con:param name="consultadedetallederecaudoResponse">
                                                            <con:path>$RESPONSE</con:path>
                                                        </con:param>
                                                    </con:xqueryTransform>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:replace contents-only="true" varName="header">
                                            <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fba</con:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEarmarMensajeRecaudoRES/osb2:MENSAJE_RESPUESTA/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con1:replace contents-only="true" varName="body">
                                            <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fb9</con:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con:skip>
                                            <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fb8</con:id>
                                        </con:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = "REFERENCED_LOCAL"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace contents-only="true" varName="header">
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fd0</con:id>
                                    <con1:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoAbanksHeaderOut"/>
                                            <con:param name="outputParameters">
                                                <con:path>$RSPConsultaRecAbanks</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:replace varName="body" contents-only="true">
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fce</con:id>
                                    <con1:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoAbanksOut"/>
                                            <con:param name="consultadeparametroscoreResponse">
                                                <con:path>$RSPConsultaParamsCore</con:path>
                                            </con:param>
                                            <con:param name="outputParameters">
                                                <con:path>$RSPConsultaRecAbanks</con:path>
                                            </con:param>
                                            <con:param name="consultaRecaudo">
                                                <con:path>$body/con:consultaRecaudo</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con:skip>
                                    <con:id>_ActionId-2102100586698594459--2f246760.155fdfd531f.-7fcc</con:id>
                                </con:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$type = "MOBILE_PACKAGE"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace contents-only="true" varName="header">
                                    <con:id>_ActionId-528055465846604350--5b7674b1.16c1fec8c43.-7ae7</con:id>
                                    <con1:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoPaquetesHeaderOut"/>
                                            <con:param name="consultaPaquetesMovilesResponse">
                                                <con:path>$RspConsultaPaquetesMoviles</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con1:replace varName="body" contents-only="true">
                                    <con:id>_ActionId-8794017692992136879-536ca0b9.16cd512e1d5.-73e5</con:id>
                                    <con1:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoPaquetesOut"/>
                                            <con:param name="consultaPaquetesMovilesResponse">
                                                <con:path>$RspConsultaPaquetesMoviles</con:path>
                                            </con:param>
                                            <con:param name="consultaRecaudo">
                                                <con:path>$body/con:consultaRecaudo</con:path>
                                            </con:param>
                                            <con:param name="contractName">
                                                <con:path>fn:string($RSPConsultaDetalleContratoRecaudos/con3:consultaDetalleContratoRecaudosResponseType/con3:consultaDetalleContratoRecaudosResponseRecordType/CONTRACT_NAME/text())</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                                <con:skip>
                                    <con:id>_ActionId-8794017692992136879-536ca0b9.16cd512e1d5.-73e7</con:id>
                                </con:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace contents-only="true" varName="header">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bda</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoReferenciadoHeaderOut"/>
                                        <con:param name="calculoCobranzasReferenciadasResponseIN">
                                            <con:path>$RESPONSE</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                            <con1:replace contents-only="true" varName="body">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd9</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoReferenciadoOut"/>
                                        <con:param name="consultaDetalleContratoRecaudosResponseIN">
                                            <con:path>$RSPConsultaDetalleContratoRecaudos</con:path>
                                        </con:param>
                                        <con:param name="calculoCobranzasReferenciadasResponseIN">
                                            <con:path>$RESPONSE</con:path>
                                        </con:param>
                                        <con:param name="consultaRecaudoIN">
                                            <con:path>$body/con:consultaRecaudo</con:path>
                                        </con:param>
                                        <con:param name="consultadeparametroscoreResponseIN">
                                            <con:path>$RSPConsultaParamsCore</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd8</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                    <con1:ifThenElse>
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd7</con:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($header/aut:ResponseHeader/successIndicator/text()) = "Success"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd6</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$type = "ONLINE"</con3:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd3</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/ConsultarRespuestaTercero_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>consultarRespuestaTercero</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQUESTconsultarRespuestaTercero</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RESPONSEconsultarRespuestaTercero</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQUESTconsultarRespuestaTercero">
                                                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd5</con:id>
                                                        <con1:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoConsultaRespuestaTerceroIn"/>
                                                                <con3:param name="consultaRecaudoResponse">
                                                                    <con3:path>$body/con:consultaRecaudoResponse</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="successIndicatorConsultarRespuestaTercero">
                                                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd4</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEconsultarRespuestaTercero/osb1:CODIGO_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:ifThenElse>
                                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd2</con:id>
                                                <con1:case>
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$successIndicatorConsultarRespuestaTercero = "SUCCESS"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:assign varName="debtor_name">
                                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd1</con:id>
                                                            <con1:expr>
                                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                    <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoObtenerDebtorNameIn"/>
                                                                    <con3:param name="outputParameters">
                                                                        <con3:path>$RESPONSEconsultarRespuestaTercero</con3:path>
                                                                    </con3:param>
                                                                </con3:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="dealslip">
                                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bd0</con:id>
                                                            <con1:expr>
                                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                    <con3:resource ref="Middleware/Business_Resources/recaudos/consultaRecaudo/consultaRecaudoObtenerDealslipIn"/>
                                                                    <con3:param name="outputParameters">
                                                                        <con3:path>$RESPONSEconsultarRespuestaTercero</con3:path>
                                                                    </con3:param>
                                                                </con3:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:replace contents-only="true" varName="body">
                                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bcf</con:id>
                                                            <con1:location>
                                                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./con:consultaRecaudoResponse/DEBTOR_NAME</con2:xpathText>
                                                            </con1:location>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$debtor_name</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:replace>
                                                        <con1:replace contents-only="true" varName="body">
                                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bce</con:id>
                                                            <con1:location>
                                                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./con:consultaRecaudoResponse/BILL_DETAIL</con2:xpathText>
                                                            </con1:location>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$dealslip</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:replace>
                                                        <con1:wsCallout>
                                                            <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bcb</con:id>
                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                            <con1:request>
                                                                <con1:body>REQUESTregistrarRelacionOperacionRecaudo</con1:body>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body>RESPONSEregistrarRelacionOperacionRecaudo</con1:body>
                                                            </con1:response>
                                                            <con1:requestTransform>
                                                                <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudo">
                                                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bcd</con:id>
                                                                    <con1:expr>
                                                                        <con:xqueryTransform>
                                                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                            <con:param name="nombreDeudor">
                                                                                <con:path>fn:string($debtor_name)</con:path>
                                                                            </con:param>
                                                                            <con:param name="esMonedaLocal">
                                                                                <con:path>xs:boolean("1")</con:path>
                                                                            </con:param>
                                                                            <con:param name="consultadedetallederecaudoResponse">
                                                                                <con:path>$RESPONSE</con:path>
                                                                            </con:param>
                                                                            <con:param name="estado">
                                                                                <con:path>"1"</con:path>
                                                                            </con:param>
                                                                            <con:param name="consultadeparametroscoreResponse">
                                                                                <con:path>$RSPConsultaParamsCore</con:path>
                                                                            </con:param>
                                                                            <con:param name="codigoDeudor">
                                                                                <con:path>fn:string($codigoDeudor)</con:path>
                                                                            </con:param>
                                                                        </con:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:requestTransform>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudo">
                                                                    <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bcc</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:CODIGO_ERROR/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:ifThenElse>
                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7e10</con:id>
                                                                    <con1:case>
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case($successIndicatorRegistrarRelacionOperacionRecaudo) != "SUCCESS"</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:replace varName="header" contents-only="true">
                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7e0f</con:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:replace>
                                                                            <con1:replace varName="body" contents-only="true">
                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7e0e</con:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:replace>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default>
                                                                        <con1:wsCallout>
                                                                            <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c7e</con:id>
                                                                            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                            <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                                            <con1:request>
                                                                                <con1:body>REQUESTregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                            </con1:request>
                                                                            <con1:response>
                                                                                <con1:body>RESPONSEregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                            </con1:response>
                                                                            <con1:requestTransform>
                                                                                <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudoUSD">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c83</con:id>
                                                                                    <con1:expr>
                                                                                        <con:xqueryTransform>
                                                                                            <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                                            <con:param name="nombreDeudor">
                                                                                                <con:path>fn:string($debtor_name)</con:path>
                                                                                            </con:param>
                                                                                            <con:param name="esMonedaLocal">
                                                                                                <con:path>xs:boolean("0")</con:path>
                                                                                            </con:param>
                                                                                            <con:param name="consultadedetallederecaudoResponse">
                                                                                                <con:path>$RESPONSE</con:path>
                                                                                            </con:param>
                                                                                            <con:param name="estado">
                                                                                                <con:path>"1"</con:path>
                                                                                            </con:param>
                                                                                            <con:param name="consultadeparametroscoreResponse">
                                                                                                <con:path>$RSPConsultaParamsCore</con:path>
                                                                                            </con:param>
                                                                                            <con:param name="codigoDeudor">
                                                                                                <con:path>fn:string($codigoDeudor)</con:path>
                                                                                            </con:param>
                                                                                        </con:xqueryTransform>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                            </con1:requestTransform>
                                                                            <con1:responseTransform>
                                                                                <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudoUSD">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c82</con:id>
                                                                                    <con1:expr>
                                                                                        <con:xqueryText>fn:string($RESPONSEregistrarRelacionOperacionRecaudoUSD/osb:CODIGO_ERROR/text())</con:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                                <con1:ifThenElse>
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c81</con:id>
                                                                                    <con1:case>
                                                                                        <con1:condition>
                                                                                            <con:xqueryText>upper-case($successIndicatorRegistrarRelacionOperacionRecaudoUSD) != "SUCCESS"</con:xqueryText>
                                                                                        </con1:condition>
                                                                                        <con1:actions>
                                                                                            <con1:replace varName="header" contents-only="true">
                                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c80</con:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                                                </con1:expr>
                                                                                            </con1:replace>
                                                                                            <con1:replace varName="body" contents-only="true">
                                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c7f</con:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                                                </con1:expr>
                                                                                            </con1:replace>
                                                                                        </con1:actions>
                                                                                    </con1:case>
                                                                                    <con1:default>
                                                                                        <con:skip>
                                                                                            <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7c46</con:id>
                                                                                        </con:skip>
                                                                                    </con1:default>
                                                                                </con1:ifThenElse>
                                                                            </con1:responseTransform>
                                                                        </con1:wsCallout>
                                                                    </con1:default>
                                                                </con1:ifThenElse>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:replace contents-only="true" varName="header">
                                                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bc6</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEconsultarRespuestaTercero/osb1:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:replace>
                                                    <con1:replace contents-only="true" varName="body">
                                                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bc5</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:replace>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case>
                                        <con1:condition>
                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_ONLINE"</con3:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="debtor_name">
                                                <con:id>_ActionId-970274468157330430-1d4f290d.15f261af91e.-7eaa</con:id>
                                                <con1:expr>
                                                    <con:xqueryText>fn:string($RESPONSE/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/DEBTORNAME/text())</con:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:replace varName="body" contents-only="true">
                                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bc4</con:id>
                                                <con1:location>
                                                    <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">./con:consultaRecaudoResponse/DEBTOR_NAME</con3:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con:xqueryText>$debtor_name</con:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body" contents-only="true">
                                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bc3</con:id>
                                                <con1:location>
                                                    <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">./con:consultaRecaudoResponse/BILL_DETAIL</con3:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSE/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/dealSlip/text())</con3:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b48</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQUESTregistrarRelacionOperacionRecaudo</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RESPONSEregistrarRelacionOperacionRecaudo</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudo">
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b54</con:id>
                                                        <con1:expr>
                                                            <con:xqueryTransform>
                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                <con:param name="nombreDeudor">
                                                                    <con:path>fn:string($debtor_name)</con:path>
                                                                </con:param>
                                                                <con:param name="esMonedaLocal">
                                                                    <con:path>xs:boolean("1")</con:path>
                                                                </con:param>
                                                                <con:param name="consultadedetallederecaudoResponse">
                                                                    <con:path>$RESPONSE</con:path>
                                                                </con:param>
                                                                <con:param name="estado">
                                                                    <con:path>"1"</con:path>
                                                                </con:param>
                                                                <con:param name="consultadeparametroscoreResponse">
                                                                    <con:path>$RSPConsultaParamsCore</con:path>
                                                                </con:param>
                                                                <con:param name="codigoDeudor">
                                                                    <con:path>fn:string($codigoDeudor)</con:path>
                                                                </con:param>
                                                            </con:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudo">
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b53</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:CODIGO_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b52</con:id>
                                                        <con1:case>
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case($successIndicatorRegistrarRelacionOperacionRecaudo) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:replace varName="header" contents-only="true">
                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b51</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                                <con1:replace varName="body" contents-only="true">
                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b50</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:wsCallout>
                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b49</con:id>
                                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                                <con1:request>
                                                                    <con1:body>REQUESTregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                </con1:request>
                                                                <con1:response>
                                                                    <con1:body>RESPONSEregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                </con1:response>
                                                                <con1:requestTransform>
                                                                    <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudoUSD">
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4f</con:id>
                                                                        <con1:expr>
                                                                            <con:xqueryTransform>
                                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                                <con:param name="nombreDeudor">
                                                                                    <con:path>fn:string($debtor_name)</con:path>
                                                                                </con:param>
                                                                                <con:param name="esMonedaLocal">
                                                                                    <con:path>xs:boolean("0")</con:path>
                                                                                </con:param>
                                                                                <con:param name="consultadedetallederecaudoResponse">
                                                                                    <con:path>$RESPONSE</con:path>
                                                                                </con:param>
                                                                                <con:param name="estado">
                                                                                    <con:path>"1"</con:path>
                                                                                </con:param>
                                                                                <con:param name="consultadeparametroscoreResponse">
                                                                                    <con:path>$RSPConsultaParamsCore</con:path>
                                                                                </con:param>
                                                                                <con:param name="codigoDeudor">
                                                                                    <con:path>fn:string($codigoDeudor)</con:path>
                                                                                </con:param>
                                                                            </con:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:requestTransform>
                                                                <con1:responseTransform>
                                                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudoUSD">
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4e</con:id>
                                                                        <con1:expr>
                                                                            <con:xqueryText>fn:string($RESPONSEregistrarRelacionOperacionRecaudoUSD/osb:CODIGO_ERROR/text())</con:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:ifThenElse>
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4d</con:id>
                                                                        <con1:case>
                                                                            <con1:condition>
                                                                                <con:xqueryText>upper-case($successIndicatorRegistrarRelacionOperacionRecaudoUSD) != "SUCCESS"</con:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:replace varName="header" contents-only="true">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4c</con:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:replace>
                                                                                <con1:replace varName="body" contents-only="true">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4b</con:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:replace>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default>
                                                                            <con:skip>
                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7b4a</con:id>
                                                                            </con:skip>
                                                                        </con1:default>
                                                                    </con1:ifThenElse>
                                                                </con1:responseTransform>
                                                            </con1:wsCallout>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "LOCAL"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="debtor_name">
                                                <con:id>_ActionId-970274468157330430-1d4f290d.15f261af91e.-7e91</con:id>
                                                <con1:expr>
                                                    <con:xqueryText>fn:string($RESPONSE/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/DEBTORNAME/text())</con:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7a9b</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQUESTregistrarRelacionOperacionRecaudo</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RESPONSEregistrarRelacionOperacionRecaudo</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudo">
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa7</con:id>
                                                        <con1:expr>
                                                            <con:xqueryTransform>
                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                <con:param name="nombreDeudor">
                                                                    <con:path>fn:string($debtor_name)</con:path>
                                                                </con:param>
                                                                <con:param name="esMonedaLocal">
                                                                    <con:path>xs:boolean("1")</con:path>
                                                                </con:param>
                                                                <con:param name="consultadedetallederecaudoResponse">
                                                                    <con:path>$RESPONSE</con:path>
                                                                </con:param>
                                                                <con:param name="estado">
                                                                    <con:path>"1"</con:path>
                                                                </con:param>
                                                                <con:param name="consultadeparametroscoreResponse">
                                                                    <con:path>$RSPConsultaParamsCore</con:path>
                                                                </con:param>
                                                                <con:param name="codigoDeudor">
                                                                    <con:path>fn:string($codigoDeudor)</con:path>
                                                                </con:param>
                                                            </con:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudo">
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa6</con:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:CODIGO_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa5</con:id>
                                                        <con1:case>
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case($successIndicatorRegistrarRelacionOperacionRecaudo) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:replace varName="header" contents-only="true">
                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa4</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                                <con1:replace varName="body" contents-only="true">
                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa3</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:wsCallout>
                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7a9c</con:id>
                                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/recaudos/Resources/RegistrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                                <con1:request>
                                                                    <con1:body>REQUESTregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                </con1:request>
                                                                <con1:response>
                                                                    <con1:body>RESPONSEregistrarRelacionOperacionRecaudoUSD</con1:body>
                                                                </con1:response>
                                                                <con1:requestTransform>
                                                                    <con1:assign varName="REQUESTregistrarRelacionOperacionRecaudoUSD">
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa2</con:id>
                                                                        <con1:expr>
                                                                            <con:xqueryTransform>
                                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoRegistrarOperacionRecaudoIn_v2"/>
                                                                                <con:param name="nombreDeudor">
                                                                                    <con:path>fn:string($debtor_name)</con:path>
                                                                                </con:param>
                                                                                <con:param name="esMonedaLocal">
                                                                                    <con:path>xs:boolean("0")</con:path>
                                                                                </con:param>
                                                                                <con:param name="consultadedetallederecaudoResponse">
                                                                                    <con:path>$RESPONSE</con:path>
                                                                                </con:param>
                                                                                <con:param name="estado">
                                                                                    <con:path>"1"</con:path>
                                                                                </con:param>
                                                                                <con:param name="consultadeparametroscoreResponse">
                                                                                    <con:path>$RSPConsultaParamsCore</con:path>
                                                                                </con:param>
                                                                                <con:param name="codigoDeudor">
                                                                                    <con:path>fn:string($codigoDeudor)</con:path>
                                                                                </con:param>
                                                                            </con:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:requestTransform>
                                                                <con1:responseTransform>
                                                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudoUSD">
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa1</con:id>
                                                                        <con1:expr>
                                                                            <con:xqueryText>fn:string($RESPONSEregistrarRelacionOperacionRecaudoUSD/osb:CODIGO_ERROR/text())</con:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:ifThenElse>
                                                                        <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7aa0</con:id>
                                                                        <con1:case>
                                                                            <con1:condition>
                                                                                <con:xqueryText>upper-case($successIndicatorRegistrarRelacionOperacionRecaudoUSD) != "SUCCESS"</con:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:replace varName="header" contents-only="true">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7a9f</con:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RESPONSEregistrarRelacionOperacionRecaudo/osb:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:replace>
                                                                                <con1:replace varName="body" contents-only="true">
                                                                                    <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7a9e</con:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:replace>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default>
                                                                            <con:skip>
                                                                                <con:id>_ActionId-4125803311723594476--7e4bc0a3.15780acd11e.-7a9d</con:id>
                                                                            </con:skip>
                                                                        </con1:default>
                                                                    </con1:ifThenElse>
                                                                </con1:responseTransform>
                                                            </con1:wsCallout>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bb4</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
            <con3:stage name="ConvertirHTML">
                <con3:context>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                    <con:varNsDecl namespace="T24WebServicesImpl" prefix="t24"/>
                    <con:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/transformarReciboRecaudo" prefix="tran"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:ifThenElse>
                        <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7f5d</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$body/con:consultaRecaudoResponse/BILL_DETAIL/text() != ""</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7eb9</con:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CNV/transformarReciboRecaudo/biz/transformarReciboRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>transformarReciboRecaudo</con1:operation>
                                    <con1:request>
                                        <con1:body>REQTransformarRecRecaudo</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPTransformarRecRecaudo</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQTransformarRecRecaudo">
                                            <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7e73</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/Generales/xq/transformarReciboRecaudoIn"/>
                                                    <con:param name="username">
                                                        <con:path>$username</con:path>
                                                    </con:param>
                                                    <con:param name="dealslip">
                                                        <con:path>fn:string($body/con:consultaRecaudoResponse/BILL_DETAIL/text())</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                    <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7e03</con:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con:xqueryText>fn:upper-case($RSPTransformarRecRecaudo/tran:CODIGO_RESPUESTA/text()) = 'SUCCESS'</con:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace varName="body" contents-only="true">
                                                <con:id>_ActionId-1101779491025219201--392602c3.1560da56144.-7dcb</con:id>
                                                <con1:location>
                                                    <con:xpathText>./con:consultaRecaudoResponse/BILL_DETAIL</con:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con:xqueryText>$RSPTransformarRecRecaudo/tran:PV_DEALSLIP/text()</con:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
            <con3:stage name="MapeoError">
                <con3:context xmlns:jms="http://www.bea.com/wli/sb/transports/jms" xmlns:con4="http://www.bea.com/wli/sb/services/security/config">
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions xmlns:jms="http://www.bea.com/wli/sb/transports/jms" xmlns:con4="http://www.bea.com/wli/sb/services/security/config">
                    <con1:ifThenElse>
                        <con:id>_ActionId-4891665070196381053-777ded65.155bc5db1db.-7ae8</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con:id>_ActionId-4891665070196381053-777ded65.155bc5db1db.-7ae5</con:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>mapeoErrores</con1:operation>
                                    <con1:request>
                                        <con1:body>REQMapeoErrores</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RSPMapeoErrores</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQMapeoErrores">
                                            <con:id>_ActionId-4891665070196381053-777ded65.155bc5db1db.-7ae7</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con:param name="CODIGO_ERROR">
                                                        <con:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con:path>
                                                    </con:param>
                                                    <con:param name="MENSAJE_ERROR">
                                                        <con:path>fn:concat("FICBCO0010","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:replace varName="header" contents-only="true">
                                            <con:id>_ActionId-4891665070196381053-777ded65.155bc5db1db.-7ae6</con:id>
                                            <con1:expr>
                                                <con:xqueryTransform>
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con:param name="mapeoErroresResponse1">
                                                        <con:path>$RSPMapeoErrores</con:path>
                                                    </con:param>
                                                    <con:param name="successIndicator">
                                                        <con:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
            <con3:stage name="BitacoraResponse">
                <con3:context>
                    <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                    <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con2="http://www.bea.com/wli/sb/stages/config"/>
                </con3:context>
                <con3:actions>
                    <con1:assign varName="uuidBitacoraResponse">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bb3</con:id>
                        <con1:expr>
                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                <con3:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                            </con3:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                        <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bb2</con:id>
                        <con2:service ref="Middleware/v2/BusinessServices/registroBitacoraConvenios/biz/registroBitacoraConvenios" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>registroBitacoraConvenio</con2:operation>
                        <con2:outboundTransform>
                            <con1:assign varName="timestampBitacoraResponse">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bb1</con:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/general/TimeStamp/obtenerTimestamp"/>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace contents-only="true" varName="body">
                                <con:id>_ActionId-3906484173402614668-21311313.15090cef336.-7bb0</con:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/registrarBitacoraResponseIn"/>
                                        <con3:param name="requestHeader">
                                            <con3:path>$originalRequestHeader/aut:RequestHeader</con3:path>
                                        </con3:param>
                                        <con3:param name="uuidBitacoraRequest">
                                            <con3:path>$uuidBitacoraRequest</con3:path>
                                        </con3:param>
                                        <con3:param name="uuidBitacora">
                                            <con3:path>$uuidBitacoraResponse</con3:path>
                                        </con3:param>
                                        <con3:param name="dateTimeBitacora">
                                            <con3:path>$timestampBitacoraResponse</con3:path>
                                        </con3:param>
                                        <con3:param name="consultaRecaudo">
                                            <con3:path>$originalRequestBody/con:consultaRecaudo</con3:path>
                                        </con3:param>
                                        <con3:param name="consultaRecaudoResponse">
                                            <con3:path>$body/con:consultaRecaudoResponse</con3:path>
                                        </con3:param>
                                        <con3:param name="traceProxy">
                                            <con3:path>fn:string($traceProxy)</con3:path>
                                        </con3:param>
                                        <con3:param name="responseHeader">
                                            <con3:path>$header/aut:ResponseHeader</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con2:outboundTransform>
                    </con2:route>
                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                        <con2:id>_ActionId-3906484173402614668-21311313.15090cef336.-7baf</con2:id>
                    </con2:skip>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="Default_ConsultaRecaudo1_request">
            <con4:stage name="FlujoEntrada" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                <con4:context/>
            </con4:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="Default_ConsultaRecaudo1_response">
            <con4:stage name="FlujoSalida" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                <con4:context>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                </con4:context>
                <con4:actions>
                    <con2:Error xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-3906484173402614668-21311313.15090cef336.-7a5f</con1:id>
                        <con2:errCode>MW-0008</con2:errCode>
                        <con2:message>SERVICE NOT IMPLEMENTED YET FOR THIS COUNTRY/COMPANY</con2:message>
                    </con2:Error>
                </con4:actions>
            </con4:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="GTBanco_ConsultaRecaudo_request">
            <con3:stage name="FlujoEntrada">
                <con3:context>
                    <con:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ConsultaRecaudo" prefix="osb"/>
                    <con:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ObtenerInfomacionConvenio" prefix="ns0"/>
                    <con:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ConsultaTasaCambio" prefix="con1"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                    <con:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:assign varName="errorMessage" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7b74</con2:id>
                        <con1:expr>
                            <con2:xqueryText>""</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:wsCallout xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-6884045808838587795-4efc118f.157fd2912e3.-78a8</con2:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v3/BusinessServices/MDW/obtenerInformacionConvenio/biz/ObtenerInfomacionConvenio_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ObtenerInfomacionConvenio</con1:operation>
                        <con1:request>
                            <con1:body>REQObtenerInfomacionConvenio</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>RSPObtenerInfomacionConvenio</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQObtenerInfomacionConvenio">
                                <con2:id>_ActionId-6884045808838587795-4efc118f.157fd2912e3.-78b0</con2:id>
                                <con1:expr>
                                    <con2:xqueryTransform>
                                        <con2:resource ref="Middleware/v3/Resources/ConsultaRecaudo/xq/obtenerInformacionConvenioIN"/>
                                        <con2:param name="codPais">
                                            <con2:path>fn:string($header/aut:RequestHeader/Region/SourceBank/text())</con2:path>
                                        </con2:param>
                                        <con2:param name="codContrato">
                                            <con2:path>fn:string($body/con:consultaRecaudo/CONTRACT_ID/text())</con2:path>
                                        </con2:param>
                                    </con2:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="successIndicator">
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7c69</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($RSPObtenerInfomacionConvenio/ns0:PV_ERRORCODE/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bf3</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText>$successIndicator = "SUCCESS"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="codContrato">
                                    <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bf2</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText>$RSPObtenerInfomacionConvenio/ns0:PV_CODIGOSERVICIO/text()</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="errorMessage">
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bf1</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($RSPObtenerInfomacionConvenio/ns0:PV_MESSAGE/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con2:skip>
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bf0</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                    <con1:wsCallout xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-6884045808838587795-4efc118f.157fd2912e3.-78a4</con2:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v3/BusinessServices/ABKGT/ConsultaRecaudo/biz/ConsultaRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ConsultaRecaudo</con1:operation>
                        <con1:request>
                            <con1:body>REQConsDetRecaudo</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>RSPConsDetRecaudo</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="IsExtendedCollection">
                                <con2:id>_ActionId-69993725220025150-47ab766d.1586eea1d12.-7f78</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($body/con:consultaRecaudo/EXTENDED_COLLECTION_YES_NO/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="REQConsDetRecaudo">
                                <con2:id>_ActionId-6884045808838587795-4efc118f.157fd2912e3.-78a7</con2:id>
                                <con1:expr>
                                    <con2:xqueryTransform>
                                        <con2:resource ref="Middleware/v3/Resources/ConsultaRecaudo/xq/consultaRecaudoGTINEstandar"/>
                                        <con2:param name="consultaRecaudo1">
                                            <con2:path>$body/con:consultaRecaudo</con2:path>
                                        </con2:param>
                                        <con2:param name="Contrato">
                                            <con2:path>$codContrato</con2:path>
                                        </con2:param>
                                    </con2:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="successIndicator">
                                <con2:id>_ActionId-6884045808838587795-4efc118f.157fd2912e3.-78a5</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($RSPConsDetRecaudo/osb:PV_SUCCESSINDICATOR/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bec</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText>$successIndicator = "SUCCESS"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions/>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="errorMessage">
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7beb</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($RSPConsDetRecaudo/osb:PV_MESSAGES/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con2:skip>
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7bea</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                    <con5:wsCallout xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/services/security/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7dec</con1:id>
                        <con5:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaTasaCambio/biz/ConsultaTasaCambio_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con5:operation>ConsultaTasaCambio</con5:operation>
                        <con5:request>
                            <con5:body>REQConsultaTasaCambio</con5:body>
                        </con5:request>
                        <con5:response>
                            <con5:body>RSPConsultaTasaCambio</con5:body>
                        </con5:response>
                        <con5:requestTransform>
                            <con5:assign varName="REQConsultaTasaCambio">
                                <con1:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7ded</con1:id>
                                <con5:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaTasaCambioGTIn"/>
                                        <con1:param name="from_currency">
                                            <con1:path>"GTQ"</con1:path>
                                        </con1:param>
                                        <con1:param name="to_currency">
                                            <con1:path>"USD"</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con5:expr>
                            </con5:assign>
                        </con5:requestTransform>
                        <con5:responseTransform>
                            <con1:assign varName="successIndicator" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-3252116175854394766-34af715b.158974aced1.-7c2f</con6:id>
                                <con1:expr>
                                    <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaTasaCambio/con1:ERROR_CODE/text())</con6:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con5:responseTransform>
                    </con5:wsCallout>
                    <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                        <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7be6</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText>$successIndicator = "SUCCESS"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions/>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="errorMessage">
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7be5</con2:id>
                                <con1:expr>
                                    <con2:xqueryText>fn:string($RSPConsultaTasaCambio/con1:ERROR_MESSAGE/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con2:skip>
                                <con2:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7be4</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="GTBanco_ConsultaRecaudo_response">
            <con3:stage name="FlujoSalida">
                <con3:context>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaRecaudoTypes" prefix="con"/>
                    <con:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/registrarRelacionOperacionRecaudo" prefix="reg"/>
                </con3:context>
                <con3:actions>
                    <con1:ifThenElse>
                        <con:id>_ActionId-3252116175854394766-34af715b.158974aced1.-7cc3</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$errorMessage != ""</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="header" contents-only="true">
                                    <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fc4</con:id>
                                    <con1:expr>
                                        <con:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ $errorMessage }</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con3:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                                    <con2:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fc2</con2:id>
                                    <con3:expr>
                                        <con2:xqueryText>&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                    </con3:expr>
                                </con3:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="header" contents-only="true">
                                <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7b9a</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v3/Resources/ConsultaRecaudo/xq/consultaRecaudoHeaderOutGT"/>
                                        <con:param name="outputParameters1">
                                            <con:path>$RSPConsDetRecaudo</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                            <con1:assign varName="originalBody">
                                <con:id>_ActionId-3785716097046556910--f3536ed.158aafcda4f.-7f24</con:id>
                                <con1:expr>
                                    <con:xqueryText>$body</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace varName="body" contents-only="true">
                                <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7b9d</con:id>
                                <con1:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRecaudoGTOut"/>
                                        <con:param name="outputParameters">
                                            <con:path>$RSPConsDetRecaudo</con:path>
                                        </con:param>
                                        <con:param name="RSPConsultaTasaCambio">
                                            <con:path>$RSPConsultaTasaCambio</con:path>
                                        </con:param>
                                        <con:param name="consultaRecaudo">
                                            <con:path>$body/con:consultaRecaudo</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                            <con1:wsCallout>
                                <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7faa</con:id>
                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v3/BusinessServices/ABKGT/RegistrarRelacionOpRecaudo/biz/registrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                <con1:request>
                                    <con1:body>REQregRelConPagRecaudo</con1:body>
                                </con1:request>
                                <con1:response>
                                    <con1:body>RSPregRelConPagRecaudo</con1:body>
                                </con1:response>
                                <con1:requestTransform>
                                    <con1:assign varName="REQregRelConPagRecaudo">
                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fb5</con:id>
                                        <con1:expr>
                                            <con:xqueryTransform>
                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRegistroRelacionOperacionGTIn"/>
                                                <con:param name="esMonedaLocal">
                                                    <con:path>xs:boolean("1")</con:path>
                                                </con:param>
                                                <con:param name="RSPConsultaTasaCambio">
                                                    <con:path>$RSPConsultaTasaCambio</con:path>
                                                </con:param>
                                                <con:param name="outputParameters">
                                                    <con:path>$RSPConsDetRecaudo</con:path>
                                                </con:param>
                                                <con:param name="consultaRecaudo">
                                                    <con:path>$originalBody/con:consultaRecaudo</con:path>
                                                </con:param>
                                                <con:param name="estado">
                                                    <con:path>"1"</con:path>
                                                </con:param>
                                            </con:xqueryTransform>
                                        </con1:expr>
                                    </con1:assign>
                                </con1:requestTransform>
                                <con1:responseTransform>
                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudo">
                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fb4</con:id>
                                        <con1:expr>
                                            <con:xqueryText>fn:string($RSPregRelConPagRecaudo/reg:CODIGO_ERROR/text())</con:xqueryText>
                                        </con1:expr>
                                    </con1:assign>
                                    <con1:ifThenElse>
                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fb3</con:id>
                                        <con1:case>
                                            <con1:condition>
                                                <con:xqueryText>upper-case($successIndicatorRegistrarRelacionOperacionRecaudo) != "SUCCESS"</con:xqueryText>
                                            </con1:condition>
                                            <con1:actions>
                                                <con1:replace varName="header" contents-only="true">
                                                    <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fb2</con:id>
                                                    <con1:expr>
                                                        <con:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RSPregRelConPagRecaudo/reg:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                                    </con1:expr>
                                                </con1:replace>
                                                <con1:replace varName="body" contents-only="true">
                                                    <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fb1</con:id>
                                                    <con1:expr>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                    </con1:expr>
                                                </con1:replace>
                                            </con1:actions>
                                        </con1:case>
                                        <con1:default>
                                            <con1:wsCallout>
                                                <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fab</con:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v3/BusinessServices/ABKGT/RegistrarRelacionOpRecaudo/biz/registrarRelacionOperacionRecaudo_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>registrarRelacionOperacionRecaudo</con1:operation>
                                                <con1:request>
                                                    <con1:body>REQregRelConPagRecaudoUSD</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body>RSPregRelConPagRecaudoUSD</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                    <con1:assign varName="REQregRelConPagRecaudoUSD">
                                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7f70</con:id>
                                                        <con1:expr>
                                                            <con:xqueryTransform>
                                                                <con:resource ref="Middleware/v2/Resources/ConsultaRecaudo/xq/consultaRegistroRelacionOperacionGTIn"/>
                                                                <con:param name="esMonedaLocal">
                                                                    <con:path>xs:boolean("0")</con:path>
                                                                </con:param>
                                                                <con:param name="RSPConsultaTasaCambio">
                                                                    <con:path>$RSPConsultaTasaCambio</con:path>
                                                                </con:param>
                                                                <con:param name="outputParameters">
                                                                    <con:path>$RSPConsDetRecaudo</con:path>
                                                                </con:param>
                                                                <con:param name="consultaRecaudo">
                                                                    <con:path>$originalBody/con:consultaRecaudo</con:path>
                                                                </con:param>
                                                                <con:param name="estado">
                                                                    <con:path>"1"</con:path>
                                                                </con:param>
                                                            </con:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform>
                                                    <con1:assign varName="successIndicatorRegistrarRelacionOperacionRecaudoUSD">
                                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7faf</con:id>
                                                        <con1:expr>
                                                            <con:xqueryText>fn:string($RSPregRelConPagRecaudoUSD/reg:CODIGO_ERROR/text())</con:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fae</con:id>
                                                        <con1:case>
                                                            <con1:condition>
                                                                <con:xqueryText>upper-case($successIndicatorRegistrarRelacionOperacionRecaudoUSD) != "SUCCESS"</con:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:replace varName="header" contents-only="true">
                                                                    <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fad</con:id>
                                                                    <con1:expr>
                                                                        <con:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($RSPregRelConPagRecaudoUSD/reg:MENSAJE_ERROR/text()) }</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                                <con1:replace varName="body" contents-only="true">
                                                                    <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7fac</con:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaRecaudoResponse/></con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default/>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                        </con1:default>
                                    </con1:ifThenElse>
                                </con1:responseTransform>
                            </con1:wsCallout>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
            <con3:stage name="MapeoError">
                <con3:context>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:ifThenElse>
                        <con:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7c48</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con3:wsCallout xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7c45</con2:id>
                                    <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con3:operation>mapeoErrores</con3:operation>
                                    <con3:request>
                                        <con3:body>reqMapeoErrores</con3:body>
                                    </con3:request>
                                    <con3:response>
                                        <con3:body>respMapeoErrores</con3:body>
                                    </con3:response>
                                    <con3:requestTransform>
                                        <con3:assign varName="reqMapeoErrores">
                                            <con2:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7c47</con2:id>
                                            <con3:expr>
                                                <con2:xqueryTransform>
                                                    <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con2:param name="MENSAJE_ERROR">
                                                        <con2:path>fn:concat("FICBCO0010","$#$",fn:string-join($header/aut:ResponseHeader/messages,'||'))</con2:path>
                                                    </con2:param>
                                                    <con2:param name="CODIGO_ERROR">
                                                        <con2:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con3:expr>
                                        </con3:assign>
                                    </con3:requestTransform>
                                    <con3:responseTransform>
                                        <con3:replace contents-only="true" varName="header">
                                            <con2:id>_ActionId-9091899766181379967--10856b08.1589bd5c39c.-7c46</con2:id>
                                            <con3:expr>
                                                <con2:xqueryTransform>
                                                    <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con2:param name="mapeoErroresResponse1">
                                                        <con2:path>$respMapeoErrores</con2:path>
                                                    </con2:param>
                                                    <con2:param name="successIndicator">
                                                        <con2:path>fn:upper-case($successIndicator)</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con3:expr>
                                        </con3:replace>
                                    </con3:responseTransform>
                                </con3:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:pipeline-node name="ValidacionesGenerales">
                <con:request>ValidacionesGenerales_request</con:request>
                <con:response>ValidacionesGenerales_response</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" name="RegionalizacionPaisEmpresa">
                <con:context>
                    <con3:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:branch-table variable="header">
                    <con:xpath>
                        <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">./aut:RequestHeader/Region/SourceBank</con4:xpathText>
                    </con:xpath>
                    <con:branch name="HNBanco">
                        <con:operator>equals</con:operator>
                        <con:value>'HN01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="FlujoProxy">
                                <con:request>FlujoProxy_request</con:request>
                                <con:response>FlujoProxy_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="GTBanco">
                        <con:operator>equals</con:operator>
                        <con:value>'GT01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="GTBanco_ConsultaRecaudo">
                                <con:request>GTBanco_ConsultaRecaudo_request</con:request>
                                <con:response>GTBanco_ConsultaRecaudo_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="PABanco">
                        <con:operator>equals</con:operator>
                        <con:value>'PA01'</con:value>
                        <con:flow>
                            <con:route-node name="PABanco_ConsultaRecaudo">
                                <con:context/>
                                <con:actions>
                                    <con4:route>
                                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3130051951612764675-e229c94.165ce90179e.-7e4d</con5:id>
                                        <con4:service ref="Middleware/v2/ProxyServices/ConsultaRecaudoPA" xsi:type="con:PipelineRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                        <con4:operation passThrough="true"/>
                                        <con4:outboundTransform>
                                            <con1:transport-headers copy-all="true">
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3717476762260593017--73eeac9f.165f20a674b.-7860</con5:id>
                                                <con1:header-set>outbound-request</con1:header-set>
                                            </con1:transport-headers>
                                        </con4:outboundTransform>
                                        <con4:responseTransform/>
                                    </con4:route>
                                </con:actions>
                            </con:route-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="NIBanco">
                        <con:operator>equals</con:operator>
                        <con:value>'NI01'</con:value>
                        <con:flow>
                            <con:route-node name="NIBanco_ConsultaRecaudo">
                                <con:context/>
                                <con:actions>
                                    <con4:route>
                                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-2501469679537465391--541b5589.171e810bd0a.-7ce0</con5:id>
                                        <con4:service ref="Middleware/v2/ProxyServices/ConsultaRecaudoNI" xsi:type="con:PipelineRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                        <con4:operation passThrough="true"/>
                                        <con4:outboundTransform>
                                            <con1:transport-headers copy-all="true">
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-2501469679537465391--541b5589.171e810bd0a.-7cc9</con5:id>
                                                <con1:header-set>outbound-request</con1:header-set>
                                            </con1:transport-headers>
                                        </con4:outboundTransform>
                                        <con4:responseTransform/>
                                    </con4:route>
                                </con:actions>
                            </con:route-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow>
                            <con:pipeline-node name="Default_ConsultaRecaudo1">
                                <con:request>Default_ConsultaRecaudo1_request</con:request>
                                <con:response>Default_ConsultaRecaudo1_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con3:router>
</con:pipelineEntry>