<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/wsdl/consultaDetalleCompletoTransaccionPS"/>
            <con:binding>
                <con:name>consultaDetalleCompletoTransaccionPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionPS/</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con3:router errorHandler="_onErrorHandler-5291233302411702165--68c5dfc1.13d69048c2c.-7fde" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
        <con:pipeline type="error" name="_onErrorHandler-5291233302411702165--68c5dfc1.13d69048c2c.-7fde" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="ManejoError">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:assign varName="errorList">
                        <con1:id>_ActionId-7613489911850392112-13598056.14c2de0b31a.-7e3a</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/v2/Resources/Generales/mensajesError"/>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="osbError">
                        <con1:id>_ActionId-7613489911850392112-13598056.14c2de0b31a.-7e15</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($errorList/ERROR_RECORD[CODE=fn:string($fault/ctx:errorCode/text())]/DESCRIPTION/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con1:replace contents-only="true" varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5291233302411702165--68c5dfc1.13d69048c2c.-7f3a</con2:id>
                        <con1:expr>
                            <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                <con4:resource ref="Middleware/Business_Resources/general/ServiceErrorId/obtenerServiceErrorId"/>
                                <con4:param name="string1">
                                    <con4:path>"0146"</con4:path>
                                </con4:param>
                                <con4:param name="string2">
                                    <con4:path>concat(fn:string($fault/ctx:errorCode/text()), ":", fn:string($fault/ctx:reason/text()), ":", $osbError)</con4:path>
                                </con4:param>
                            </con4:xqueryTransform>
                        </con1:expr>
                    </con1:replace>
                    <con1:replace contents-only="true" varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5291233302411702165--68c5dfc1.13d69048c2c.-7f02</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDetalleCompletoTransaccionResponse/></con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con2:assign varName="errorCode">
                        <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7d85</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($fault/ctx:errorCode/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con5:wsCallout xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config">
                        <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7da6</con6:id>
                        <con5:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con5:operation>mapeoErrores</con5:operation>
                        <con5:request>
                            <con5:body>reqMapeoErrores</con5:body>
                        </con5:request>
                        <con5:response>
                            <con5:body>respMapeoErrores</con5:body>
                        </con5:response>
                        <con5:requestTransform>
                            <con5:assign varName="reqMapeoErrores">
                                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7da8</con6:id>
                                <con5:expr>
                                    <con6:xqueryTransform xmlns:con6="http://www.bea.com/wli/sb/stages/config">
                                        <con6:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                        <con6:param name="MENSAJE_ERROR">
                                            <con6:path>fn:concat("FICBCO0146","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con6:path>
                                        </con6:param>
                                        <con6:param name="CODIGO_ERROR">
                                            <con6:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con6:path>
                                        </con6:param>
                                    </con6:xqueryTransform>
                                </con5:expr>
                            </con5:assign>
                        </con5:requestTransform>
                        <con5:responseTransform>
                            <con5:replace contents-only="true" varName="header">
                                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7da7</con6:id>
                                <con5:expr>
                                    <con6:xqueryTransform xmlns:con6="http://www.bea.com/wli/sb/stages/config">
                                        <con6:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                        <con6:param name="mapeoErroresResponse1">
                                            <con6:path>$respMapeoErrores</con6:path>
                                        </con6:param>
                                        <con6:param name="successIndicator">
                                            <con6:path>$errorCode</con6:path>
                                        </con6:param>
                                    </con6:xqueryTransform>
                                </con5:expr>
                            </con5:replace>
                        </con5:responseTransform>
                    </con5:wsCallout>
                    <con1:reply>
                        <con1:id>_ActionId-5291233302411702165--68c5dfc1.13d69048c2c.-7ee5</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con3:pipeline type="request" name="ValidacionesGenerales_request">
            <con3:stage name="ValidacionXSD">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:validate>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-715f</con1:id>
                        <con2:schema ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionTypes"/>
                        <con2:schemaElement xmlns:con4="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes">con4:consultaDetalleCompletoTransaccion</con2:schemaElement>
                        <con2:varName>body</con2:varName>
                        <con2:location>
                            <con1:xpathText>./con:consultaDetalleCompletoTransaccion</con1:xpathText>
                        </con2:location>
                    </con2:validate>
                </con3:actions>
            </con3:stage>
            <con3:stage name="ValidacionServicioRegional">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
                </con3:context>
                <con3:actions>
                    <con2:wsCallout>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7127</con1:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>ValidaServicioRegional</con2:operation>
                        <con2:request>
                            <con2:body>reqValidaServicioRegional</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>respValidaServicioRegional</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="reqValidaServicioRegional">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-70ef</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                                        <con1:param name="requestHeader1">
                                            <con1:path>$header/aut:RequestHeader</con1:path>
                                        </con1:param>
                                        <con1:param name="serviceId">
                                            <con1:path>"FICBCO0146"</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-70b7</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryText>fn:string($respValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con1:xqueryText>
                                    </con2:condition>
                                    <con2:actions>
                                        <con2:replace contents-only="true" varName="header">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-707f</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($respValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:replace contents-only="true" varName="body">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-7062</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>&lt;con:consultaDetalleCompletoTransaccionResponse/></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con1:reply>
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6d3a</con1:id>
                                        </con1:reply>
                                    </con2:actions>
                                </con2:case>
                                <con2:default>
                                    <con2:replace contents-only="true" varName="header">
                                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-702a</con1:id>
                                        <con2:expr>
                                            <con1:xqueryTransform>
                                                <con1:resource ref="Middleware/v2/Resources/Generales/xq/aplicarValoresPorDefectoRegion"/>
                                                <con1:param name="requestHeader">
                                                    <con1:path>$header/aut:RequestHeader</con1:path>
                                                </con1:param>
                                            </con1:xqueryTransform>
                                        </con2:expr>
                                    </con2:replace>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:responseTransform>
                    </con2:wsCallout>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="ValidacionesGenerales_response">
            <con3:stage name="MapeoError">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7ea5</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7ea2</con1:id>
                                    <con2:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>mapeoErrores</con2:operation>
                                    <con2:request>
                                        <con2:body>REQMapeoErrores</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPMapeoErrores</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQMapeoErrores">
                                            <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7ea4</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                                    <con1:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con1:param name="CODIGO_ERROR">
                                                        <con1:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con1:path>
                                                    </con1:param>
                                                    <con1:param name="MENSAJE_ERROR">
                                                        <con1:path>fn:concat("FICBCO0146","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:replace varName="header" contents-only="true">
                                            <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7ea3</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con1:param name="mapeoErroresResponse1">
                                                        <con1:path>$RSPMapeoErrores</con1:path>
                                                    </con1:param>
                                                    <con1:param name="successIndicator">
                                                        <con1:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="HNBanco_Validaciones_request">
            <con3:stage name="HNBanco_Validaciones_FlujoEntrada">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:assign varName="trxReference">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f5b</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaDetalleCompletoTransaccion/TRANSACTION_REFERENCE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="txnSource">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f5a</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionValidate"/>
                                <con1:param name="consultaDetalleCompletoTransaccion">
                                    <con1:path>$body/con:consultaDetalleCompletoTransaccion</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="account_number">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f59</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($body/con:consultaDetalleCompletoTransaccion/ACCOUNT_NUMBER/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="REQProxyHeader">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f58</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$header</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="HNBanco_Validaciones_response">
            <con3:stage name="HNBanco_Validaciones_FlujoSalida">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:ifThenElse>
                        <con1:comment>Si transaccion es pago de cheque, se busca imagen y se adjunta a respuesta de servicio Proxy</con1:comment>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f57</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CHEQUE_NUMBER/text())!= ""
and substring(fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text()),1,4) != "PTM-"
and $validationMessage = ""</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f53</con1:id>
                                    <con2:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaImagenCheque" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultaImagenCheque</con2:operation>
                                    <con2:request>
                                        <con2:body>REQConsultaImgChq</con2:body>
                                        <con2:header>REQHdrConsultaImgChq</con2:header>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPConsultaImgChq</con2:body>
                                        <con2:header>RSPHdrConsultaImgChq</con2:header>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQHdrConsultaImgChq">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f56</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$REQProxyHeader</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="REQConsultaImgChq">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f55</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientos/ConsultaReciboCheque/consultaReciboChequeIn"/>
                                                    <con1:param name="account">
                                                        <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/DEBIT_ACCOUNT/text())</con1:path>
                                                    </con1:param>
                                                    <con1:param name="transactionReference">
                                                        <con1:path>$trxReference</con1:path>
                                                    </con1:param>
                                                    <con1:param name="chequeNumber">
                                                        <con1:path>$cheque</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="detalleRecCheque">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f54</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientos/ConsultaReciboCheque/consultaReciboChequeOut"/>
                                                    <con1:param name="consultaImagenChequeResponse">
                                                        <con1:path>$RSPConsultaImgChq</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:insert varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f52</con1:id>
                                    <con2:location>
                                        <con1:xpathText>./con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER</con1:xpathText>
                                    </con2:location>
                                    <con2:where>after</con2:where>
                                    <con2:expr>
                                        <con1:xqueryText>$detalleRecCheque</con1:xqueryText>
                                    </con2:expr>
                                </con2:insert>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
            <con3:stage name="DetalleTransaccion" errorHandler="_onErrorHandler-4724159043547760198-47b8758.155a212012c.-7e98">
                <con3:context>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ObtenerDescripcion" prefix="val"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7bec</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) = 'SUCCESS'</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7f28</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>$errorMessage = ""</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="RespBenRemtNameAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c26</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/BENREMTNAMEACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespAcctBanAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c2a</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTBENACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespNameBankBenRemtAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c2e</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/NAMEBANKBENREMTACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespReasonAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c32</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/REASONACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="ACCTCREDITNAME">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c36</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTCREDITNAME/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="InstructingParty">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7f26</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/INSTRUCTINGPARTY/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="FactorCambio2">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7ead</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/USDBUYRATE/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="BenCustomer">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c42</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/BENCUSTOMER/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="OrderingCust">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c3e</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ORDERINGCUST/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="ACCTDEBITNAME">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c3a</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTDEBITNAME/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>$errorMessage2 = ""</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="RespBenRemtNameAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c24</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/BENREMTNAMEACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespAcctBanAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c28</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTBENACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespNameBankBenRemtAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c2c</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/NAMEBANKBENREMTACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="RespReasonAch">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c30</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/REASONACH/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="ACCTCREDITNAME">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c34</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTCREDITNAME/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="InstructingParty">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7ef0</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/INSTRUCTINGPARTY/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="FactorCambio2">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7e8f</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/USDBUYRATE/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="BenCustomer">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c40</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/BENCUSTOMER/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="OrderingCust">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c3c</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ORDERINGCUST/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="ACCTDEBITNAME">
                                                <con1:id>_ActionId-4815229810780249474-7c4fd260.158551865d2.-7c38</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTDEBITNAME/text())</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7be0</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/MDW/obtenerDescripcion/biz/ObtenerDescripcion_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>ObtenerDescripcion</con2:operation>
                                    <con2:request>
                                        <con2:body>REQObtenerDescripcion</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPObtenerDescripcion</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="cadena1">
                                            <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7be5</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>fn:string-join((fn:string($body/con:consultaDetalleCompletoTransaccionResponse/TYPE/text()),  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/TRANSACTION_CODE/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/TRANSACTION_DESCRIPTION/text()) ,  
    			fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CUSTOMER_DESCRIPTION/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/BOOKING_DATE/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/VALUE_DATE/text()) ,  
        		fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CHEQUE_NUMBER/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/DEBIT_ACCOUNT/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/DEBIT_AMOUNT/text()) , 
        		fn:string($body/con:consultaDetalleCompletoTransaccionResponse/DEBIT_CURRENCY/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CREDIT_ACCOUNT/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CREDIT_AMOUNT/text()) , 
        		fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CREDIT_CURRENCY/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/INPUTTER/text()) ,  fn:string($body/con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER/text())),"~")</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="cadena2">
                                            <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7be4</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>fn:string-join((fn:string($body/con:consultaDetalleCompletoTransaccionResponse/EXTERNAL_BEN_ACCOUNT/text()),   fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CONTRACT_ID /text()),   
        fn:string($body/con:consultaDetalleCompletoTransaccionResponse/TRANSACTION_AMOUNT/text()),   fn:string($body/con:consultaDetalleCompletoTransaccionResponse/COMMISSION_AMOUNT/text()),  
        fn:string($body/con:consultaDetalleCompletoTransaccionResponse/REMITTANCE_ID/text()),   fn:string($body/con:consultaDetalleCompletoTransaccionResponse/COLL_PAY_CODE/text()),  
        fn:string($body/con:consultaDetalleCompletoTransaccionResponse/CREDIT_CARD_NUMBER/text()),   fn:string($body/con:consultaDetalleCompletoTransaccionResponse/PARENT_REFERENCE/text()),   
        fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text()),   fn:string($body/con:consultaDetalleCompletoTransaccionResponse/EXTERNAL_REMITTER_INFO/text())),"~")</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="cadena3">
                                            <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7be2</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>fn:string-join(($InstructingParty, $OrderingCust, $BenCustomer, $RespBenRemtNameAch, $RespAcctBanAch, $RespNameBankBenRemtAch, $RespReasonAch, $ACCTCREDITNAME, $ACCTDEBITNAME, $FactorCambio2,$rate,$chqdev,$debtorName),"~")</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="REQObtenerDescripcion">
                                            <con1:id>_ActionId-4724159043547760198-47b8758.155a212012c.-7fdc</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/Genericos/ObtenerDescripcionIN"/>
                                                    <con1:param name="userCode">
                                                        <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/INPUTTER/text())</con1:path>
                                                    </con1:param>
                                                    <con1:param name="codTxn">
                                                        <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/TRANSACTION_CODE/text())</con1:path>
                                                    </con1:param>
                                                    <con1:param name="txnValues">
                                                        <con1:path>fn:string-join(($cadena1,$cadena2,$cadena3),"~")</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:ifThenElse>
                                            <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7be2</con1:id>
                                            <con2:case>
                                                <con2:condition>
                                                    <con1:xqueryText>fn:string($RSPObtenerDescripcion/val:PV_ERROR_CODE/text()) = '0'</con1:xqueryText>
                                                </con2:condition>
                                                <con2:actions>
                                                    <con2:replace varName="body" contents-only="true">
                                                        <con1:id>_ActionId-5569958746565728034-286a1b58.15593b81766.-7be1</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryTransform>
                                                                <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetallecompletoTransaccionOUT"/>
                                                                <con1:param name="consultaDetalleCompletoTransaccionResponse1">
                                                                    <con1:path>$body/con:consultaDetalleCompletoTransaccionResponse</con1:path>
                                                                </con1:param>
                                                                <con1:param name="outputParameters1">
                                                                    <con1:path>$RSPObtenerDescripcion</con1:path>
                                                                </con1:param>
                                                            </con1:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:actions>
                                            </con2:case>
                                            <con2:default/>
                                        </con2:ifThenElse>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="txnSource_ABANKS_request">
            <con3:stage name="ABANKS_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f14</con4:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaDetalleTransaccionAbanks" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultaDetalleTransaccion</con1:operation>
                        <con1:request>
                            <con1:body>REQUEST</con1:body>
                            <con1:header>REQUESTHEADER</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>RESPONSE</con1:body>
                            <con1:header>RESPONSEHEADER</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQUESTHEADER">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f16</con4:id>
                                <con1:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$header</con3:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="REQUEST">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f15</con4:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksIn"/>
                                        <con3:param name="consultaDetalleCompletoTransaccion">
                                            <con3:path>$body/con:consultaDetalleCompletoTransaccion</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_ABANKS_response">
            <con3:stage name="ABANKS_ProxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:replace varName="header" contents-only="false">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f13</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$RESPONSEHEADER</con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con2:replace varName="body" contents-only="true">
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f12</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksOut"/>
                                <con1:param name="accountNumber">
                                    <con1:path>$account_number</con1:path>
                                </con1:param>
                                <con1:param name="consultaDetalleTransaccionResponse">
                                    <con1:path>$RESPONSE</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:replace>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="txnSource_TT_request">
            <con3:stage name="TT_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0f</con4:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultasTransacciones" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ConsultadetransaccionTT</con1:operation>
                        <con1:request>
                            <con1:body>REQUESTConsultadetransaccionTT</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>RESPONSEConsultadetransaccionTT</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQUESTConsultadetransaccionTT">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f11</con4:id>
                                <con1:expr>
                                    <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                        <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionTTIn"/>
                                        <con4:param name="consultaDetalleCompletoTransaccion">
                                            <con4:path>$body/con:consultaDetalleCompletoTransaccion</con4:path>
                                        </con4:param>
                                        <con4:param name="requestHeader">
                                            <con4:path>$header/aut:RequestHeader</con4:path>
                                        </con4:param>
                                    </con4:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="errorMessage">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f10</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:string($RESPONSEConsultadetransaccionTT/Status/successIndicator/text()) = "Success") then (
	fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/ZERORECORDS/text())
) else (
	fn:string-join($RESPONSEConsultadetransaccionTT/Status/messages/text(), ". ")
)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0e</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorMessage != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0a</con4:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultasTransacciones" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>ConsultadetransaccionhistTT</con1:operation>
                                    <con1:request>
                                        <con1:body>REQUESTConsultadetransaccionhistTT</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RESPONSEConsultadetransaccionhistTT</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQUESTConsultadetransaccionhistTT">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0d</con4:id>
                                            <con1:expr>
                                                <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                    <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionHistTTIn"/>
                                                    <con4:param name="consultaDetalleCompletoTransaccion">
                                                        <con4:path>$body/con:consultaDetalleCompletoTransaccion</con4:path>
                                                    </con4:param>
                                                    <con4:param name="requestHeader">
                                                        <con4:path>$header/aut:RequestHeader</con4:path>
                                                    </con4:param>
                                                </con4:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorMessage2">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0c</con4:id>
                                            <con1:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">if (fn:string($RESPONSEConsultadetransaccionhistTT/Status/successIndicator/text()) = "Success") then (
	fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/ZERORECORDS/text())
) else (
	fn:string-join($RESPONSEConsultadetransaccionhistTT/Status/messages/text(), ". ")
)</con3:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="cheque">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f0b</con4:id>
                                            <con1:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/CHEQUENUMBER/text())</con3:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="cheque">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f09</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/CHEQUENUMBER/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_TT_response">
            <con3:stage name="TT_proxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f08</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$errorMessage = ""</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace contents-only="true" varName="header">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f07</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionTTHeaderOut"/>
                                            <con1:param name="consultadetransaccionTTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionTT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace contents-only="true" varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f06</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionTTOut"/>
                                            <con1:param name="consultadetransaccionTTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionTT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:assign varName="chqdev">
                                    <con1:id>_ActionId-7199826966860097636-b4e1e97.159d6d79771.-7f93</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/CHQDEV/text() = " "))then ((fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/CHQDEV/text()))
) 
else 
(
	fn:concat(", devuelto por",  fn:string($RESPONSEConsultadetransaccionTT/WSTTTRANSACTIONType/gWSTTTRANSACTIONDetailType/mWSTTTRANSACTIONDetailType/CHQDEV/text()))
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$errorMessage2 = ""</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace contents-only="true" varName="header">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f05</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionHistTTHeaderOut"/>
                                            <con1:param name="consultadetransaccionhistTTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionhistTT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace contents-only="true" varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f04</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionHistTTOut"/>
                                            <con1:param name="consultadetransaccionhistTTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionhistTT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:assign varName="chqdev">
                                    <con1:id>_ActionId-7199826966860097636-b4e1e97.159d6d79771.-7f76</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/CHQDEV/text() != ""))then ((fn:concat(", devuelto por ",fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/CHQDEV/text())))
) 
else 
(
	fn:string($RESPONSEConsultadetransaccionhistTT/WSTTTRANSACTIONHISTType/gWSTTTRANSACTIONHISTDetailType/mWSTTTRANSACTIONHISTDetailType/CHQDEV/text())
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace contents-only="true" varName="header">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f03</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionHistTTHeaderOut"/>
                                        <con1:param name="consultadetransaccionhistTTResponse">
                                            <con1:path>$RESPONSEConsultadetransaccionhistTT</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                            <con2:replace contents-only="true" varName="body">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f02</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>&lt;con:consultaDetalleCompletoTransaccionResponse/></con1:xqueryText>
                                </con2:expr>
                            </con2:replace>
                        </con2:default>
                    </con2:ifThenElse>
                    <con2:ifThenElse>
                        <con1:comment>Condicin para obtener recibo de prstamo, en caso de tratarse de una txn de pago de prstamo</con1:comment>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f01</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>substring(fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text()),1,4) = "PTM-"
and 
($errorMessage = "" or $errorMessage2 = "")</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6efe</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/bs/consultarReciboPagoPtmoBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultarReciboPagoPtmo</con2:operation>
                                    <con2:request>
                                        <con2:body>REQConsultaRecPagoPtmoTT</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPConsultaRecPagoPtmoTT</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQConsultaRecPagoPtmoTT">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6f00</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/xq/consultaReciboPagoPtmoIn"/>
                                                    <con1:param name="string1">
                                                        <con1:path>$trxReference</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaDetalleCompletoTransaccionResponse1">
                                                        <con1:path>$body/con:consultaDetalleCompletoTransaccionResponse</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="detalleRecPagoPtmo">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eff</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/xq/consultaReciboPagoPtmoOut"/>
                                                    <con1:param name="outputParameters1">
                                                        <con1:path>$RSPConsultaRecPagoPtmoTT</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:insert varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6efd</con1:id>
                                    <con2:location>
                                        <con1:xpathText>./con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER</con1:xpathText>
                                    </con2:location>
                                    <con2:where>after</con2:where>
                                    <con2:expr>
                                        <con1:xqueryText>$detalleRecPagoPtmo</con1:xqueryText>
                                    </con2:expr>
                                </con2:insert>
                            </con2:actions>
                        </con2:case>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="txnSource_FT_request">
            <con3:stage name="FT_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6efa</con4:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultasTransacciones" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ConsultadetransaccionFT</con1:operation>
                        <con1:request>
                            <con1:body>REQUESTConsultadetransaccionFT</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body>RESPONSEConsultadetransaccionFT</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQUESTConsultadetransaccionFT">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6efc</con4:id>
                                <con1:expr>
                                    <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                        <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionFTIn"/>
                                        <con4:param name="consultaDetalleCompletoTransaccion">
                                            <con4:path>$body/con:consultaDetalleCompletoTransaccion</con4:path>
                                        </con4:param>
                                        <con4:param name="requestHeader">
                                            <con4:path>$header/aut:RequestHeader</con4:path>
                                        </con4:param>
                                    </con4:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="errorMessage">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6efb</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:string($RESPONSEConsultadetransaccionFT/Status/successIndicator/text()) = "Success") then (
	fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/ZERORECORDS/text())
) else (
	fn:string-join($RESPONSEConsultadetransaccionFT/Status/messages/text(), ". ")
)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef9</con4:id>
                        <con1:case>
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorMessage != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef5</con4:id>
                                    <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultasTransacciones" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>ConsultadetransaccionhistFT</con1:operation>
                                    <con1:request>
                                        <con1:body>REQUESTConsultadetransaccionhistFT</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body>RESPONSEConsultadetransaccionhistFT</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQUESTConsultadetransaccionhistFT">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef8</con4:id>
                                            <con1:expr>
                                                <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                                                    <con4:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionHistFTIn"/>
                                                    <con4:param name="consultaDetalleCompletoTransaccion">
                                                        <con4:path>$body/con:consultaDetalleCompletoTransaccion</con4:path>
                                                    </con4:param>
                                                    <con4:param name="requestHeader">
                                                        <con4:path>$header/aut:RequestHeader</con4:path>
                                                    </con4:param>
                                                </con4:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorMessage2">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef7</con4:id>
                                            <con1:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">if (fn:string($RESPONSEConsultadetransaccionhistFT/Status/successIndicator/text()) = "Success") then (
	fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/ZERORECORDS/text())
) else (
	fn:string-join($RESPONSEConsultadetransaccionhistFT/Status/messages/text(), ". ")
)</con3:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="cheque">
                                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef6</con4:id>
                                            <con1:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/CHEQUENUMBER/text())</con3:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="cheque">
                                <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef4</con4:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/CHEQUENUMBER/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:default>
                    </con1:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_FT_response">
            <con3:stage name="FT_proxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef3</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$errorMessage = ""</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace contents-only="true" varName="header">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef2</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionFTHeaderOut"/>
                                            <con1:param name="consultadetransaccionFTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionFT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace contents-only="true" varName="body">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7f53</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionFTOut"/>
                                            <con1:param name="consultadetransaccionFTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionFT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:assign varName="RespBenRemtNameAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7fac</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/BENREMTNAMEACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespAcctBanAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7f8f</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTBENACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespNameBankBenRemtAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7f72</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/NAMEBANKBENREMTACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespReasonAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7f55</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/REASONACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="ACCTCREDITNAME">
                                    <con1:id>_ActionId-129942398564357771-1d51baea.15767af5ee2.-7ece</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTCREDITNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="ACCTDEBITNAME">
                                    <con1:id>_ActionId-129942398564357771-1d51baea.15767af5ee2.-7eb1</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ACCTDEBITNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="OrderingCust">
                                    <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7cad</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/ORDERINGCUST/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="BenCustomer">
                                    <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7c7b</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/BENCUSTOMER/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="rate">
                                    <con1:id>_ActionId-4449611702011273553--237fb8b0.159d2b82922.-7ee9</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/RATE/text() )= "0.0000")then (("1")
) 
else 
(
	fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/RATE/text())
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="chqdev">
                                    <con1:id>_ActionId-2341258082499296964--50dd0138.15e9b753ff3.-7c74</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/CHQDEV/text() = " ")) then 
(
	(
	fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/CHQDEV/text())
	)
) 
else 
(
	fn:concat(", devuelto por",  fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/CHQDEV/text()))
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="debtorName">
                                    <con1:id>_ActionId-7736049092556188668-499ca59.15f4f2db0b4.119</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/LRPAYNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$errorMessage2 = ""</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace contents-only="true" varName="header">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ef0</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionHistFTHeaderOut"/>
                                            <con1:param name="consultadetransaccionhistFTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionhistFT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace contents-only="true" varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eef</con1:id>
                                    <con2:expr>
                                        <con1:xqueryTransform>
                                            <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionHistFTOut"/>
                                            <con1:param name="consultadetransaccionhistFTResponse">
                                                <con1:path>$RESPONSEConsultadetransaccionhistFT</con1:path>
                                            </con1:param>
                                        </con1:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                                <con2:assign varName="RespBenRemtNameAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7def</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/BENREMTNAMEACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespAcctBanAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7dd2</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTBENACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespNameBankBenRemtAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7db5</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/NAMEBANKBENREMTACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="RespReasonAch">
                                    <con1:id>_ActionId-3681276030133144146-73840789.15705b130f9.-7d98</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/REASONACH/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="ACCTCREDITNAME">
                                    <con1:id>_ActionId-129942398564357771-1d51baea.15767af5ee2.-7e94</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTCREDITNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="ACCTDEBITNAME">
                                    <con1:id>_ActionId-129942398564357771-1d51baea.15767af5ee2.-7e77</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ACCTDEBITNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="OrderingCust">
                                    <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7c96</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/ORDERINGCUST/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="BenCustomer">
                                    <con1:id>_ActionId-8642176626985980467-12de1af0.1582c51e36b.-7c53</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/BENCUSTOMER/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="rate">
                                    <con1:id>_ActionId-4449611702011273553--237fb8b0.159d2b82922.-7ee3</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/RATE/text())= "0.0000")then (("1")
) 
else 
(
	fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/RATE/text())
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="chqdev">
                                    <con1:id>_ActionId-2341258082499296964--50dd0138.15e9b753ff3.-7c4b</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if
(
fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/CHQDEV/text() = " ")) then 
(
	(
	fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/CHQDEV/text())
	)
) 
else 
(
	fn:concat(", devuelto por",  fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/CHQDEV/text()))
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:assign varName="debtorName">
                                    <con1:id>_ActionId-7736049092556188668-499ca59.15f4f2db0b4.14d</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/LRPAYNAME/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace contents-only="true" varName="header">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eee</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionHistFTHeaderOut"/>
                                        <con1:param name="consultadetransaccionhistFTResponse">
                                            <con1:path>$RESPONSEConsultadetransaccionhistFT</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                            <con2:replace contents-only="true" varName="body">
                                <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eed</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>&lt;con:consultaDetalleCompletoTransaccionResponse/></con1:xqueryText>
                                </con2:expr>
                            </con2:replace>
                        </con2:default>
                    </con2:ifThenElse>
                    <con2:ifThenElse>
                        <con1:comment>Condicin para obtener recibo de prstamo, en caso de tratarse de una txn de pago de prstamo</con1:comment>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eec</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>substring(fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text()),1,4) = "PTM-"
and 
($errorMessage = "" or $errorMessage2 = "")</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee9</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/bs/consultarReciboPagoPtmoBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultarReciboPagoPtmo</con2:operation>
                                    <con2:request>
                                        <con2:body>REQConsultaRecPagoPtmoFT</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPConsultaRecPagoPtmoFT</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQConsultaRecPagoPtmoFT">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eeb</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/xq/consultaReciboPagoPtmoIn"/>
                                                    <con1:param name="string1">
                                                        <con1:path>$trxReference</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaDetalleCompletoTransaccionResponse1">
                                                        <con1:path>$body/con:consultaDetalleCompletoTransaccionResponse</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="detalleRecPagoPtmo">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6eea</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientosT24/consultarReciboPagoPtmo/xq/consultaReciboPagoPtmoOut"/>
                                                    <con1:param name="outputParameters1">
                                                        <con1:path>$RSPConsultaRecPagoPtmoFT</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:insert varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee8</con1:id>
                                    <con2:location>
                                        <con1:xpathText>./con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER</con1:xpathText>
                                    </con2:location>
                                    <con2:where>after</con2:where>
                                    <con2:expr>
                                        <con1:xqueryText>$detalleRecPagoPtmo</con1:xqueryText>
                                    </con2:expr>
                                </con2:insert>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>substring(fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text()),1,2) = "AA"
and 
($errorMessage = "" or $errorMessage2 = "")</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:assign varName="loanPreviousBalance">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee7</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>if (fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/T24LOANPREVBAL/text()) != "") then (
	fn:string($RESPONSEConsultadetransaccionFT/WSFTTRANSACTIONType/gWSFTTRANSACTIONDetailType/mWSFTTRANSACTIONDetailType/T24LOANPREVBAL/text())
) else (
	fn:string($RESPONSEConsultadetransaccionhistFT/WSFTTRANSACTIONHISTType/gWSFTTRANSACTIONHISTDetailType/mWSFTTRANSACTIONHISTDetailType/T24LOANPREVBAL/text())
)</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee4</con1:id>
                                    <con2:service ref="Middleware/Business_Resources/detalleMovimientosT24/consultarPagoPtmoAA/sj/sjConsultaPrestamo" xsi:type="con5:FlowRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:con5="http://www.bea.com/alsb/flow/resources/config"/>
                                    <con2:operation>sjConsultaPrestamo</con2:operation>
                                    <con2:request>
                                        <con2:body>REQConsReciboPtmoT24</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPConsReciboPtmoT24</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQConsReciboPtmoT24">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee6</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/ConsultaReciboPtmoT24In"/>
                                                    <con1:param name="requestHeader">
                                                        <con1:path>$header/aut:RequestHeader</con1:path>
                                                    </con1:param>
                                                    <con1:param name="loanNumber">
                                                        <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/LOAN_NUMBER/text())</con1:path>
                                                    </con1:param>
                                                    <con1:param name="transactionId">
                                                        <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/PARENT_REFERENCE/text())</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="detalleRecPagoPtmo">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee5</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/detalleMovimientosT24/consultarPagoPtmoAA/xq/ConsultaReciboPtmoT24Out"/>
                                                    <con1:param name="loanPreviousBalance">
                                                        <con1:path>$loanPreviousBalance</con1:path>
                                                    </con1:param>
                                                    <con1:param name="sjConsultaPrestamoResponse1">
                                                        <con1:path>$RSPConsReciboPtmoT24</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:insert varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee3</con1:id>
                                    <con2:location>
                                        <con1:xpathText>./con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER</con1:xpathText>
                                    </con2:location>
                                    <con2:where>after</con2:where>
                                    <con2:expr>
                                        <con1:xqueryText>$detalleRecPagoPtmo</con1:xqueryText>
                                    </con2:expr>
                                </con2:insert>
                            </con2:actions>
                        </con2:case>
                    </con2:ifThenElse>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee2</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($body/con:consultaDetalleCompletoTransaccionResponse/INPUTTER/text()) = "HN.ITUTSP" and 1 = 0</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6edf</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/consultaTransacciones/Resources/consultaDetalleCobroTSP" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultaDetalleCobroTSP</con2:operation>
                                    <con2:request>
                                        <con2:body>REQConsultaDetalleTSP</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPConsultaDetalleTSP</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQConsultaDetalleTSP">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee1</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCobroTSP/consultaDetalleCobroTSPIn"/>
                                                    <con1:param name="string1">
                                                        <con1:path>$trxReference</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="detalleCobroTSP">
                                            <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ee0</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCobroTSP/ConsultaDetalleCobroTSPOut"/>
                                                    <con1:param name="outputParameters1">
                                                        <con1:path>$RSPConsultaDetalleTSP</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:insert varName="body">
                                    <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6ede</con1:id>
                                    <con2:location>
                                        <con1:xpathText>./con:consultaDetalleCompletoTransaccionResponse/AUTHORIZER</con1:xpathText>
                                    </con2:location>
                                    <con2:where>after</con2:where>
                                    <con2:expr>
                                        <con1:xqueryText>$detalleCobroTSP</con1:xqueryText>
                                    </con2:expr>
                                </con2:insert>
                            </con2:actions>
                        </con2:case>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="txnSource_PD_request">
            <con3:stage name="PD_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:Error>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6edd</con1:id>
                        <con2:errCode>MW-0007</con2:errCode>
                        <con2:message>TRANSACTION SOURCE NOT DEFINED</con2:message>
                    </con2:Error>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_PD_response">
            <con3:stage name="PD_proxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions/>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="txnSource_DEFAULT_request">
            <con3:stage name="Default_proxyRequest">
                <con3:context/>
                <con3:actions>
                    <con2:Error>
                        <con1:id>_ActionId-3794427072754058584-14bd8124.14d7d1b9db3.-6edc</con1:id>
                        <con2:errCode>MW-0007</con2:errCode>
                        <con2:message>TRANSACTION SOURCE NOT DEFINED</con2:message>
                    </con2:Error>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_DEFAULT_response"/>
        <con3:pipeline type="request" name="Default_ConsultaDetalleCompletoTransaccion_request">
            <con3:stage name="FlujoEntrada">
                <con3:context/>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="Default_ConsultaDetalleCompletoTransaccion_response">
            <con3:stage name="FlujoSalida">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:Error xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                        <con1:id>_ActionId-2681369310853666711--5bcd27aa.14daf0d55d0.-715b</con1:id>
                        <con2:errCode>MW-0008</con2:errCode>
                        <con2:message>SERVICE NOT IMPLEMENTED YET FOR THIS COUNTRY/COMPANY</con2:message>
                    </con2:Error>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="error" name="_onErrorHandler-4724159043547760198-47b8758.155a212012c.-7e98">
            <con3:stage name="errorHandlerDetalleTransaccion">
                <con3:context/>
                <con3:actions>
                    <con4:log>
                        <con1:id>_ActionId-4724159043547760198-47b8758.155a212012c.-7d9c</con1:id>
                        <con4:logLevel>warning</con4:logLevel>
                        <con4:expr>
                            <con1:xqueryText>fn:concat("FICBCO0146 Ha ocurrido un error intentando obtener la descripcion para la transaccion  ",$fault/ctx:reason)</con1:xqueryText>
                        </con4:expr>
                        <con4:message>FICBCO0146 Ha ocurrido un error intentando obtener la descripcion para la transaccion</con4:message>
                    </con4:log>
                    <con1:resume>
                        <con1:id>_ActionId-4724159043547760198-47b8758.155a212012c.-7daf</con1:id>
                    </con1:resume>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="GTBanco_Validaciones_request">
            <con3:stage name="GTBanco_Validaciones_FlujoEntrada">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:assign varName="trxReference">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7e3e</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaDetalleCompletoTransaccion/TRANSACTION_REFERENCE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="txnSource">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7e3d</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionValidate"/>
                                <con1:param name="consultaDetalleCompletoTransaccion">
                                    <con1:path>$body/con:consultaDetalleCompletoTransaccion</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="account_number">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7e3c</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($body/con:consultaDetalleCompletoTransaccion/ACCOUNT_NUMBER/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="REQProxyHeader">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7e3b</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$header</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="GTBanco_Validaciones_response"/>
        <con3:pipeline type="request" name="txnSource_ABANKSGT_request">
            <con3:stage name="ABANKS_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7dc2</con5:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaDetalleTransaccionAbanks" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultaDetalleTransaccion</con1:operation>
                        <con1:request>
                            <con1:body>REQUEST</con1:body>
                            <con1:header>REQUESTHEADER</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>RESPONSE</con1:body>
                            <con1:header>RESPONSEHEADER</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQUESTHEADER">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7dc4</con5:id>
                                <con1:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$header</con3:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="REQUEST">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7dc3</con5:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksIn"/>
                                        <con3:param name="consultaDetalleCompletoTransaccion">
                                            <con3:path>$body/con:consultaDetalleCompletoTransaccion</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_ABANKSGT_response">
            <con3:stage name="ABANKS_ProxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:replace varName="header" contents-only="false">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7dc1</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$RESPONSEHEADER</con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con2:replace varName="body" contents-only="true">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7dc0</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksOut"/>
                                <con1:param name="accountNumber">
                                    <con1:path>$account_number</con1:path>
                                </con1:param>
                                <con1:param name="consultaDetalleTransaccionResponse">
                                    <con1:path>$RESPONSE</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:replace>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="PABanco_Validaciones_request">
            <con3:stage name="PABanco_Validaciones_FlujoEntrada">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:assign varName="trxReference">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7d4b</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaDetalleCompletoTransaccion/TRANSACTION_REFERENCE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="txnSource">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7d4a</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionValidate"/>
                                <con1:param name="consultaDetalleCompletoTransaccion">
                                    <con1:path>$body/con:consultaDetalleCompletoTransaccion</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="account_number">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7d49</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($body/con:consultaDetalleCompletoTransaccion/ACCOUNT_NUMBER/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="REQProxyHeader">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7d48</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$header</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="PABanco_Validaciones_response"/>
        <con3:pipeline type="request" name="txnSource_ABANKSPA_request">
            <con3:stage name="ABANKS_proxyRequest">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7ccf</con5:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/ConsultaDetalleTransaccionAbanks" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultaDetalleTransaccion</con1:operation>
                        <con1:request>
                            <con1:body>REQUEST</con1:body>
                            <con1:header>REQUESTHEADER</con1:header>
                        </con1:request>
                        <con1:response>
                            <con1:body>RESPONSE</con1:body>
                            <con1:header>RESPONSEHEADER</con1:header>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQUESTHEADER">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7cd1</con5:id>
                                <con1:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$header</con3:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="REQUEST">
                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7cd0</con5:id>
                                <con1:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksIn"/>
                                        <con3:param name="consultaDetalleCompletoTransaccion">
                                            <con3:path>$body/con:consultaDetalleCompletoTransaccion</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="txnSource_ABANKSPA_response">
            <con3:stage name="ABANKS_ProxyResponse">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:replace varName="header" contents-only="false">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7cce</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$RESPONSEHEADER</con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con2:replace varName="body" contents-only="true">
                        <con1:id>_ActionId-5276194114929561377-565de8b8.1584fcfa4f9.-7ccd</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/Business_Resources/consultaTransacciones/ConsultaDetalleCompletoTransaccion/consultaDetalleCompletoTransaccionAbanksOut"/>
                                <con1:param name="accountNumber">
                                    <con1:path>$account_number</con1:path>
                                </con1:param>
                                <con1:param name="consultaDetalleTransaccionResponse">
                                    <con1:path>$RESPONSE</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:replace>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="request" name="NIBanco_ConsultaDetalleCompletoTransaccion_request">
            <con3:stage name="FlujoEntrada">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                </con3:context>
                <con3:actions>
                    <con2:wsCallout>
                        <con1:id>_ActionId-145953802690680457-23c81f17.15c9c7de36a.-7f04</con1:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CTS/transacciones/biz/transacciones" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>OpConsultarDetalleTransaccion</con2:operation>
                        <con2:request>
                            <con2:body>REQConsultaDetalleTransaccion</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>RSPConsultaDetalleTransaccion</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="REQConsultaDetalleTransaccion">
                                <con1:id>_ActionId-145953802690680457-23c81f17.15c9c7de36a.-7ea7</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionNIIn"/>
                                        <con1:param name="consultaDetalleCompletoTransaccion">
                                            <con1:path>$body/con:consultaDetalleCompletoTransaccion</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:assign>
                            <con2:validate>
                                <con1:id>_ActionId-2112113176119020215-aa64e43.15d2d4f33d0.-7cba</con1:id>
                                <con2:schema ref="Middleware/v2/BusinessServices/CTS/transacciones/xsd/services"/>
                                <con2:schemaElement xmlns:ser1="http://service.srvaplcobistransacciones.ecobis.cobiscorp">ser1:opConsultarDetalleTransaccionSolicitud</con2:schemaElement>
                                <con2:varName>REQConsultaDetalleTransaccion</con2:varName>
                                <con2:location>
                                    <con1:xpathText>.</con1:xpathText>
                                </con2:location>
                            </con2:validate>
                        </con2:requestTransform>
                        <con2:responseTransform/>
                    </con2:wsCallout>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con3:pipeline type="response" name="NIBanco_ConsultaDetalleCompletoTransaccion_response">
            <con3:stage name="FlujoSalida">
                <con3:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaDetalleCompletoTransaccionTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con3:context>
                <con3:actions>
                    <con2:replace varName="header" contents-only="true">
                        <con1:id>_ActionId-145953802690680457-23c81f17.15c9c7de36a.-7ed5</con1:id>
                        <con2:expr>
                            <con1:xqueryTransform>
                                <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionNIHeaderOut"/>
                                <con1:param name="opConsultarDetalleTransaccionRespuesta">
                                    <con1:path>$RSPConsultaDetalleTransaccion</con1:path>
                                </con1:param>
                            </con1:xqueryTransform>
                        </con2:expr>
                    </con2:replace>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-6361152734596776489--669767ff.15ca6d84300.-7f53</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text()) != "Success"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="body" contents-only="true">
                                    <con1:id>_ActionId-6361152734596776489--669767ff.15ca6d84300.-7e21</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaDetalleCompletoTransaccionResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace varName="body" contents-only="true">
                                <con1:id>_ActionId-6361152734596776489--669767ff.15ca6d84300.-7e23</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaDetalleCompletoTransaccion/xq/consultaDetalleCompletoTransaccionNIOut"/>
                                        <con1:param name="opConsultarDetalleTransaccionRespuesta">
                                            <con1:path>$RSPConsultaDetalleTransaccion</con1:path>
                                        </con1:param>
                                        <con1:param name="numeroTransaccion">
                                            <con1:path>fn:string($body/con:consultaDetalleCompletoTransaccion/TRANSACTION_REFERENCE/text())</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                        </con2:default>
                    </con2:ifThenElse>
                </con3:actions>
            </con3:stage>
        </con3:pipeline>
        <con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:pipeline-node name="ValidacionesGenerales">
                <con:request>ValidacionesGenerales_request</con:request>
                <con:response>ValidacionesGenerales_response</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" name="RegionalizacionPaisEmpresa">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con:context>
                <con:branch-table variable="header">
                    <con:xpath>
                        <con1:xpathText>./aut:RequestHeader/Region/SourceBank</con1:xpathText>
                    </con:xpath>
                    <con:branch name="HN01_ConsultaDetComplTxn">
                        <con:operator>equals</con:operator>
                        <con:value>'HN01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="HNBanco_Validaciones">
                                <con:request>HNBanco_Validaciones_request</con:request>
                                <con:response>HNBanco_Validaciones_response</con:response>
                            </con:pipeline-node>
                            <con:branch-node type="condition" name="txnSource">
                                <con:context/>
                                <con:branch-table variable="txnSource">
                                    <con:branch name="ABANKS">
                                        <con:operator>equals</con:operator>
                                        <con:value>"ABANKS"</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="txnSource_ABANKS">
                                                <con:request>txnSource_ABANKS_request</con:request>
                                                <con:response>txnSource_ABANKS_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:branch name="TELLER">
                                        <con:operator>equals</con:operator>
                                        <con:value>"TT"</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="txnSource_TT">
                                                <con:request>txnSource_TT_request</con:request>
                                                <con:response>txnSource_TT_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:branch name="FUNDS.TRANSFER">
                                        <con:operator>equals</con:operator>
                                        <con:value>"FT"</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="txnSource_FT">
                                                <con:request>txnSource_FT_request</con:request>
                                                <con:response>txnSource_FT_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:branch name="PAST.DUE">
                                        <con:operator>equals</con:operator>
                                        <con:value>"PD"</con:value>
                                        <con:flow>
                                            <con:pipeline-node name="txnSource_PD">
                                                <con:request>txnSource_PD_request</con:request>
                                                <con:response>txnSource_PD_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:branch>
                                    <con:default-branch>
                                        <con:flow>
                                            <con:pipeline-node name="txnSource_DEFAULT">
                                                <con:request>txnSource_DEFAULT_request</con:request>
                                                <con:response>txnSource_DEFAULT_response</con:response>
                                            </con:pipeline-node>
                                        </con:flow>
                                    </con:default-branch>
                                </con:branch-table>
                            </con:branch-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="GT01_ConsultaDetComplTxn">
                        <con:operator>equals</con:operator>
                        <con:value>'GT01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="GTBanco_Validaciones">
                                <con:request>GTBanco_Validaciones_request</con:request>
                                <con:response>GTBanco_Validaciones_response</con:response>
                            </con:pipeline-node>
                            <con:pipeline-node name="txnSource_ABANKSGT">
                                <con:request>txnSource_ABANKSGT_request</con:request>
                                <con:response>txnSource_ABANKSGT_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="PA01_ConsultaDetComplTxn">
                        <con:operator>equals</con:operator>
                        <con:value>'PA01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="PABanco_Validaciones">
                                <con:request>PABanco_Validaciones_request</con:request>
                                <con:response>PABanco_Validaciones_response</con:response>
                            </con:pipeline-node>
                            <con:pipeline-node name="txnSource_ABANKSPA">
                                <con:request>txnSource_ABANKSPA_request</con:request>
                                <con:response>txnSource_ABANKSPA_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="NI01">
                        <con:operator>equals</con:operator>
                        <con:value>'NI01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="NIBanco_ConsultaDetalleCompletoTransaccion">
                                <con:request>NIBanco_ConsultaDetalleCompletoTransaccion_request</con:request>
                                <con:response>NIBanco_ConsultaDetalleCompletoTransaccion_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow>
                            <con:pipeline-node name="Default_ConsultaDetalleCompletoTransaccion">
                                <con:request>Default_ConsultaDetalleCompletoTransaccion_request</con:request>
                                <con:response>Default_ConsultaDetalleCompletoTransaccion_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con3:router>
</con:pipelineEntry>