<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/wsdl/consultaMovimientosCuentaPS"/>
            <con:binding>
                <con:name>consultaMovimientosCuentaPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/consultaMovimientosCuentaPS/</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
    </con:coreEntry>
    <con:router errorHandler="_onErrorHandler-8848777042473091319--23eafd38.13c2a05c9f3.-6f0c" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
        <con:pipeline type="error" name="_onErrorHandler-8848777042473091319--23eafd38.13c2a05c9f3.-6f0c">
            <con:stage name="ManejoError">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFICOPENTypes" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con1"/>
                </con:context>
                <con:actions>
                    <con2:assign varName="errorCode">
                        <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-795d</con1:id>
                        <con2:expr>
                            <con1:xqueryText>fn:string($fault/ctx:errorCode/text())</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con4:assign varName="errorMessage" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-7924</con1:id>
                        <con4:expr>
                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">fn:string($fault/ctx:reason/text())</con5:xqueryText>
                        </con4:expr>
                    </con4:assign>
                    <con2:wsCallout>
                        <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-7996</con1:id>
                        <con2:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>mapeoErrores</con2:operation>
                        <con2:request>
                            <con2:body>REQMapeoErrores</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>RSPMapeoErrores</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="REQMapeoErrores">
                                <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-7998</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                        <con1:param name="CODIGO_ERROR">
                                            <con1:path>$errorCode</con1:path>
                                        </con1:param>
                                        <con1:param name="MENSAJE_ERROR">
                                            <con1:path>fn:concat("FICBCO0043", "$#$", $errorMessage)</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:replace varName="header" contents-only="true">
                                <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-7997</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                        <con1:param name="mapeoErroresResponse1">
                                            <con1:path>$RSPMapeoErrores</con1:path>
                                        </con1:param>
                                        <con1:param name="successIndicator">
                                            <con1:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                        </con2:responseTransform>
                    </con2:wsCallout>
                    <con2:replace contents-only="true" varName="body">
                        <con1:id>_ActionId-8848777042473091319--23eafd38.13c2a05c9f3.-6ed1</con1:id>
                        <con2:expr>
                            <con1:xqueryText>&lt;con1:consultaMovimientosCuentaResponse/></con1:xqueryText>
                        </con2:expr>
                    </con2:replace>
                    <con1:reply>
                        <con1:id>_ActionId-8848777042473091319--23eafd38.13c2a05c9f3.-6ed0</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="ValidacionesGenerales_request">
            <con:stage name="ValidacionXSD">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:validate>
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-773c</con1:id>
                        <con2:schema ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xsd/consultasGeneralesCuentasTypes"/>
                        <con2:schemaElement xmlns:con4="http://www.ficohsa.com.hn/middleware.services/consultasType">con4:consultaMovimientosCuenta</con2:schemaElement>
                        <con2:varName>body</con2:varName>
                        <con2:location>
                            <con1:xpathText>./con:consultaMovimientosCuenta</con1:xpathText>
                        </con2:location>
                    </con2:validate>
                </con:actions>
            </con:stage>
            <con:stage name="ValidacionServicioRegional">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
                </con:context>
                <con:actions>
                    <con2:wsCallout>
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7704</con1:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>ValidaServicioRegional</con2:operation>
                        <con2:request>
                            <con2:body>reqValidaServicioRegional</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>respValidaServicioRegional</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="reqValidaServicioRegional">
                                <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-76cc</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                                        <con1:param name="requestHeader1">
                                            <con1:path>$header/aut:RequestHeader</con1:path>
                                        </con1:param>
                                        <con1:param name="serviceId">
                                            <con1:path>"FICBCO0046"</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7694</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryText>fn:string($respValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con1:xqueryText>
                                    </con2:condition>
                                    <con2:actions>
                                        <con2:replace contents-only="true" varName="header">
                                            <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-765c</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($respValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:replace contents-only="true" varName="body">
                                            <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-763f</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con1:reply>
                                            <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7622</con1:id>
                                        </con1:reply>
                                    </con2:actions>
                                </con2:case>
                                <con2:default>
                                    <con2:replace contents-only="true" varName="header">
                                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-75ea</con1:id>
                                        <con2:expr>
                                            <con1:xqueryTransform>
                                                <con1:resource ref="Middleware/v2/Resources/Generales/xq/aplicarValoresPorDefectoRegion"/>
                                                <con1:param name="requestHeader">
                                                    <con1:path>$header/aut:RequestHeader</con1:path>
                                                </con1:param>
                                            </con1:xqueryTransform>
                                        </con2:expr>
                                    </con2:replace>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:responseTransform>
                    </con2:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="ValidacionesGenerales_response">
            <con:stage name="MapeoError">
                <con4:context xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaDetalladaMovimientosCuenta" prefix="con"/>
                    <con5:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
                </con4:context>
                <con4:actions xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                    <con5:ifThenElse xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-79f3</con1:id>
                        <con5:case>
                            <con5:condition>
                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con5:xqueryText>
                            </con5:condition>
                            <con5:actions>
                                <con5:wsCallout>
                                    <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-79f0</con1:id>
                                    <con5:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con5:operation>mapeoErrores</con5:operation>
                                    <con5:request>
                                        <con5:body>REQMapeoErrores</con5:body>
                                    </con5:request>
                                    <con5:response>
                                        <con5:body>RSPMapeoErrores</con5:body>
                                    </con5:response>
                                    <con5:requestTransform>
                                        <con5:assign varName="REQMapeoErrores">
                                            <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-79f2</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con5:param name="CODIGO_ERROR">
                                                        <con5:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con5:path>
                                                    </con5:param>
                                                    <con5:param name="MENSAJE_ERROR">
                                                        <con5:path>fn:concat("FICBCO0046","$#$",fn:string-join($RSPconsultaDetalladaMovimientosCuenta/con:ERROR_MESSAGE, '||'))</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:assign>
                                    </con5:requestTransform>
                                    <con5:responseTransform>
                                        <con5:replace varName="header" contents-only="true">
                                            <con1:id>_ActionId-2428982123370755301-78099fe2.1593b8a6fa2.-79f1</con1:id>
                                            <con5:expr>
                                                <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                                    <con5:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con5:param name="mapeoErroresResponse1">
                                                        <con5:path>$RSPMapeoErrores</con5:path>
                                                    </con5:param>
                                                    <con5:param name="successIndicator">
                                                        <con5:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con5:path>
                                                    </con5:param>
                                                </con5:xqueryTransform>
                                            </con5:expr>
                                        </con5:replace>
                                    </con5:responseTransform>
                                </con5:wsCallout>
                            </con5:actions>
                        </con5:case>
                        <con5:default/>
                    </con5:ifThenElse>
                </con4:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="HN01_ConsultaMovimientosCuenta_request">
            <con:stage name="FlujoEntrada">
                <con:context>
                    <con1:userNsDecl namespace="T24WebServicesImpl" prefix="tns"/>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K__CONSDETMOVSCTA/TOPLEVEL-24OSB_CON_DET_MOVS_CTA/" prefix="top2"/>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaDetalladaMovimientosCuenta" prefix="con2"/>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/insertarMovimientosCuenta" prefix="ins"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFechaSistemaTypes" prefix="con1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTAMOVSCUENTA/TOPLEVEL-24OSB_CON_MOVS_CTA/" prefix="top"/>
                </con:context>
                <con:actions>
                    <con2:assign varName="accNumber">
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7439</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="beginDate">
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7438</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="endDate">
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7437</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="entryRange">
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7436</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ENTRY_RANGE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7435</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($accNumber) != "" and 
( (fn:upper-case(fn:string($entryRange)) = "LAST_STMT" or
   fn:upper-case(fn:string($entryRange)) = "TODAY" )
   or
   (fn:upper-case(fn:string($entryRange)) = "FREE_RANGE" and
    fn:string($beginDate) != "" and fn:string($endDate) != "")
)</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-5657454544698957050--7d52b374.153426324ef.-7e3f</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/Core/Resources/CoreBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>Consultadefechadelsistema</con2:operation>
                                    <con2:request>
                                        <con2:body>REQFechaSistema</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPFechaSistema</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQFechaSistema">
                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7fff</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaFechaSistema/xq/consultaFechaSistemaIn"/>
                                                    <con1:param name="requestHeader">
                                                        <con1:path>$header/aut:RequestHeader</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con2:assign varName="FechaHoy">
                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7fb1</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>fn:data($RSPFechaSistema/WSDATESType/gWSDATESDetailType/mWSDATESDetailType/SYSTEMDATE)</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7f76</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>obtenerParametrizacion</con2:operation>
                                    <con2:request>
                                        <con2:body>REQObtenerParams</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPObtenerParams</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:assign varName="REQObtenerParams">
                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7f3e</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                                                    <con1:param name="nombreParametros">
                                                        <con1:path>"FICBCO0046.ECT24DAYS||T24C112.GOLIVEDATE"</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform>
                                        <con3:assign varName="statusParametrizacion" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con2:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-75ff</con2:id>
                                            <con3:expr>
                                                <con2:xqueryText>fn:string($RSPObtenerParams/osb:ERROR_CODE/text())</con2:xqueryText>
                                            </con3:expr>
                                        </con3:assign>
                                    </con2:responseTransform>
                                </con2:wsCallout>
                                <con2:assign varName="DiasT24">
                                    <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-75fd</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>fn:string($RSPObtenerParams/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0046.ECT24DAYS"]/osb:VALUE/text())</con1:xqueryText>
                                    </con2:expr>
                                </con2:assign>
                                <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-742c</con5:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$statusParametrizacion = "SUCCESS"</con5:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="fechaSalidaT24">
                                                <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-742b</con5:id>
                                                <con1:expr>
                                                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">fn:string($RSPObtenerParams/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME="T24C112.GOLIVEDATE"]/osb:VALUE/text())</con5:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="errorMessage">
                                            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-742a</con5:id>
                                            <con1:expr>
                                                <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">fn:string($RSPObtenerParams/osb:ERROR_MESSAGE/text())</con5:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con5:skip xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                            <con5:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7429</con5:id>
                                        </con5:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-735b</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>(data($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING) = "YES" and
fn:number($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD) = 1) or
data($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING) = "NO" or
data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) != ""</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="successTicket">
                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7291</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>"SUCCESS"</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:ifThenElse>
                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7f77</con1:id>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) != ""</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:assign varName="TICKET">
                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7f47</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryText>data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:xqueryText>
                                                            </con2:expr>
                                                        </con2:assign>
                                                        <con2:assign varName="ticketNuevo">
                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7efc</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryText>'N'</con1:xqueryText>
                                                            </con2:expr>
                                                        </con2:assign>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:default>
                                                    <con2:assign varName="TICKET">
                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7f49</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryTransform>
                                                                <con1:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                                                            </con1:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:assign>
                                                    <con2:assign varName="ticketNuevo">
                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7ed5</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>'S'</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:default>
                                            </con2:ifThenElse>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:assign varName="successTicket">
                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-72ba</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>"ERROR"</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con1:skip>
                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7343</con1:id>
                                        </con1:skip>
                                    </con2:default>
                                </con2:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7428</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryConditionExpr>
                                                <con1:compExpr operator="=">
                                                    <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                                    <con1:rightPath>"TODAY"</con1:rightPath>
                                                </con1:compExpr>
                                            </con1:xqueryConditionExpr>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-1000671706931252291--71d1ed5c.14d76bba6b6.-7427</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:wsCallout>
                                                <con1:id>_ActionId-4049662606319712558-12cc67f6.1533d0f0527.-7ffd</con1:id>
                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultasCuenta/Resources/consultaCuentasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con2:operation>ConsultaMovimientosCuenta</con2:operation>
                                                <con2:request>
                                                    <con2:body>rqMovimientosCuenta</con2:body>
                                                </con2:request>
                                                <con2:response>
                                                    <con2:body>rpMovimientosCuenta</con2:body>
                                                </con2:response>
                                                <con2:requestTransform>
                                                    <con2:assign varName="rqMovimientosCuenta">
                                                        <con1:id>_ActionId-4049662606319712558-12cc67f6.1533d0f0527.-7ffe</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryTransform>
                                                                <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaIn"/>
                                                                <con1:param name="endDate">
                                                                    <con1:path>$endDate</con1:path>
                                                                </con1:param>
                                                                <con1:param name="ticket">
                                                                    <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                </con1:param>
                                                                <con1:param name="consultaMovimientosCuenta1">
                                                                    <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                </con1:param>
                                                                <con1:param name="requestHeader1">
                                                                    <con1:path>$header/aut:RequestHeader</con1:path>
                                                                </con1:param>
                                                                <con1:param name="beginDate">
                                                                    <con1:path>$endDate</con1:path>
                                                                </con1:param>
                                                            </con1:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:requestTransform>
                                                <con2:responseTransform/>
                                            </con2:wsCallout>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryConditionExpr>
                                                <con1:boolExpr operator="or">
                                                    <con1:compExpr operator="=">
                                                        <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                                        <con1:rightPath>"LAST_STMT"</con1:rightPath>
                                                    </con1:compExpr>
                                                    <con1:compExpr operator="=">
                                                        <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                                        <con1:rightPath>"FREE_RANGE"</con1:rightPath>
                                                    </con1:compExpr>
                                                </con1:boolExpr>
                                            </con1:xqueryConditionExpr>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:ifThenElse>
                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7aff</con1:id>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "LAST_STMT"</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:assign varName="endDate">
                                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7afd</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryTransform>
                                                                    <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaFechaSTMT"/>
                                                                    <con1:param name="date">
                                                                        <con1:path>$FechaHoy</con1:path>
                                                                    </con1:param>
                                                                </con1:xqueryTransform>
                                                            </con2:expr>
                                                        </con2:assign>
                                                        <con2:assign varName="beginDate">
                                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7af9</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryText>(fn:concat (fn:substring($endDate,1,6),"01"))</con1:xqueryText>
                                                            </con2:expr>
                                                        </con2:assign>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:default>
                                                    <con2:assign varName="endDate">
                                                        <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7af3</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                    <con2:assign varName="beginDate">
                                                        <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7af1</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:default>
                                            </con2:ifThenElse>
                                            <con2:assign varName="TODAY-FI">
                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-6d73</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:number(fn:days-from-duration(xs:date(fn:concat(fn:substring($FechaHoy,1,4),"-",
										fn:substring($FechaHoy,5,2),"-",
										fn:substring($FechaHoy,7,2))) - 
xs:date(fn:concat(fn:substring($beginDate,1,4),"-",
				fn:substring($beginDate,5,2),"-",
				fn:substring($beginDate,7,2)))))</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="TODAY-FF">
                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-6d71</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>fn:number(fn:days-from-duration(xs:date(fn:concat(fn:substring($FechaHoy,1,4),"-",
										fn:substring($FechaHoy,5,2),"-",
										fn:substring($FechaHoy,7,2))) - 
xs:date(fn:concat(fn:substring($endDate,1,4),"-",
				fn:substring($endDate,5,2),"-",
				fn:substring($endDate,7,2)))))</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:ifThenElse>
                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d7c</con1:id>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>fn:number($TODAY-FI) &lt; fn:number($DiasT24)</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:wsCallout>
                                                            <con1:comment>Se consultan los movimientos en línea hacia T24, ya que la fecha inicio está dentro de los días en que se puede consultar al core bancario</con1:comment>
                                                            <con1:id>_ActionId-4425106640022969856-34a39d45.157440e6a40.-7ff9</con1:id>
                                                            <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultasCuenta/Resources/consultaCuentasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con2:operation>Consultademovimientosdecta</con2:operation>
                                                            <con2:request>
                                                                <con2:body>rqMovimientosCuenta</con2:body>
                                                            </con2:request>
                                                            <con2:response>
                                                                <con2:body>rpMovimientosCuenta</con2:body>
                                                            </con2:response>
                                                            <con2:requestTransform>
                                                                <con2:assign varName="rqMovimientosCuenta">
                                                                    <con1:id>_ActionId-4425106640022969856-34a39d45.157440e6a40.-7ffa</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryTransform>
                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaIn"/>
                                                                            <con1:param name="endDate">
                                                                                <con1:path>$endDate</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="ticket">
                                                                                <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="consultaMovimientosCuenta1">
                                                                                <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="requestHeader1">
                                                                                <con1:path>$header/aut:RequestHeader</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="beginDate">
                                                                                <con1:path>$beginDate</con1:path>
                                                                            </con1:param>
                                                                        </con1:xqueryTransform>
                                                                    </con2:expr>
                                                                </con2:assign>
                                                            </con2:requestTransform>
                                                            <con2:responseTransform/>
                                                        </con2:wsCallout>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:default>
                                                    <con2:ifThenElse>
                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e50</con1:id>
                                                        <con2:case>
                                                            <con2:condition>
                                                                <con1:xqueryText>$ticketNuevo = 'S'</con1:xqueryText>
                                                            </con2:condition>
                                                            <con2:actions>
                                                                <con2:wsCallout>
                                                                    <con1:comment/>
                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e4a</con1:id>
                                                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultasCuenta/Resources/consultaCuentasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>Consultadedetallesdelacuenta</con2:operation>
                                                                    <con2:request>
                                                                        <con2:body>REQUESTConsultadedetallesdelacuenta</con2:body>
                                                                    </con2:request>
                                                                    <con2:response>
                                                                        <con2:body>RESPONSEConsultadedetallesdelacuenta</con2:body>
                                                                    </con2:response>
                                                                    <con2:requestTransform>
                                                                        <con2:assign varName="REQUESTConsultadedetallesdelacuenta">
                                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e4c</con1:id>
                                                                            <con2:expr>
                                                                                <con1:xqueryTransform>
                                                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaCuentaAlternaIn"/>
                                                                                    <con1:param name="consultaMovimientosCuenta">
                                                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                                    </con1:param>
                                                                                    <con1:param name="requestHeader">
                                                                                        <con1:path>$header/aut:RequestHeader</con1:path>
                                                                                    </con1:param>
                                                                                </con1:xqueryTransform>
                                                                            </con2:expr>
                                                                        </con2:assign>
                                                                    </con2:requestTransform>
                                                                    <con2:responseTransform>
                                                                        <con2:assign varName="cuentaAbanks">
                                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e4b</con1:id>
                                                                            <con2:expr>
                                                                                <con1:xqueryText>if(fn:string($RESPONSEConsultadedetallesdelacuenta/WSACCOUNTLISTType/gWSACCOUNTLISTDetailType/mWSACCOUNTLISTDetailType/ALTACCTID/text()) = "") then
	fn:concat("000000",data($body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER))
else
	fn:string($RESPONSEConsultadedetallesdelacuenta/WSACCOUNTLISTType/gWSACCOUNTLISTDetailType/mWSACCOUNTLISTDetailType/ALTACCTID/text())</con1:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:assign>
                                                                        <con2:assign varName="varAccountName">
                                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e27</con1:id>
                                                                            <con2:expr>
                                                                                <con1:xqueryText>data($RESPONSEConsultadedetallesdelacuenta/WSACCOUNTLISTType/gWSACCOUNTLISTDetailType/mWSACCOUNTLISTDetailType/SHORTTITLE)</con1:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:assign>
                                                                        <con2:assign varName="varAccountCurrency">
                                                                            <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e1f</con1:id>
                                                                            <con2:expr>
                                                                                <con1:xqueryText>data($RESPONSEConsultadedetallesdelacuenta/WSACCOUNTLISTType/gWSACCOUNTLISTDetailType/mWSACCOUNTLISTDetailType/CURRENCY)</con1:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:assign>
                                                                    </con2:responseTransform>
                                                                </con2:wsCallout>
                                                            </con2:actions>
                                                        </con2:case>
                                                        <con2:default>
                                                            <con2:assign varName="cuentaAbanks">
                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e2d</con1:id>
                                                                <con2:expr>
                                                                    <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER/text())</con1:xqueryText>
                                                                </con2:expr>
                                                            </con2:assign>
                                                            <con2:assign varName="varAccountName">
                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7df7</con1:id>
                                                                <con2:expr>
                                                                    <con1:xqueryText>''</con1:xqueryText>
                                                                </con2:expr>
                                                            </con2:assign>
                                                            <con2:assign varName="varAccountCurrency">
                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7dd9</con1:id>
                                                                <con2:expr>
                                                                    <con1:xqueryText>''</con1:xqueryText>
                                                                </con2:expr>
                                                            </con2:assign>
                                                        </con2:default>
                                                    </con2:ifThenElse>
                                                    <con2:ifThenElse>
                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7ccd</con1:id>
                                                        <con2:case>
                                                            <con2:condition>
                                                                <con1:xqueryText>fn:upper-case($RESPONSEConsultadedetallesdelacuenta/Status/successIndicator/text()) = 'SUCCESS' and
fn:string($RESPONSEConsultadedetallesdelacuenta/WSACCOUNTLISTType/ZERORECORDS) != ""</con1:xqueryText>
                                                            </con2:condition>
                                                            <con2:actions>
                                                                <con1:skip>
                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7cb1</con1:id>
                                                                </con1:skip>
                                                            </con2:actions>
                                                        </con2:case>
                                                        <con2:default/>
                                                    </con2:ifThenElse>
                                                    <con2:ifThenElse>
                                                        <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d60</con1:id>
                                                        <con2:case>
                                                            <con2:condition>
                                                                <con1:xqueryText>fn:number($TODAY-FF) &lt; fn:number($DiasT24)</con1:xqueryText>
                                                            </con2:condition>
                                                            <con2:actions>
                                                                <con2:ifThenElse>
                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7ea0</con1:id>
                                                                    <con2:case>
                                                                        <con2:condition>
                                                                            <con1:xqueryText>$ticketNuevo = 'S'</con1:xqueryText>
                                                                        </con2:condition>
                                                                        <con2:actions>
                                                                            <con2:wsCallout>
                                                                                <con1:comment>Se obtienen los movimientos de T24</con1:comment>
                                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e96</con1:id>
                                                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultasCuenta/Resources/consultaCuentasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>ConsultaMovimientosCuenta</con2:operation>
                                                                                <con2:request>
                                                                                    <con2:body>rqMovimientosCuenta</con2:body>
                                                                                </con2:request>
                                                                                <con2:response>
                                                                                    <con2:body>rpMovimientosCuenta</con2:body>
                                                                                </con2:response>
                                                                                <con2:requestTransform>
                                                                                    <con2:assign varName="FechaTemp">
                                                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e9a</con1:id>
                                                                                        <con2:expr>
                                                                                            <con1:xqueryText>xs:date(fn:concat(fn:substring($FechaHoy,1,4),"-",fn:substring($FechaHoy,5,2),"-",fn:substring($FechaHoy,7,2))) - xdt:dayTimeDuration(fn:concat("P",$DiasT24,"D"))</con1:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:assign>
                                                                                    <con2:ifThenElse>
                                                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e99</con1:id>
                                                                                        <con2:case>
                                                                                            <con2:condition>
                                                                                                <con1:xqueryConditionExpr>
                                                                                                    <con1:compExpr operator="=">
                                                                                                        <con1:leftPath>1</con1:leftPath>
                                                                                                        <con1:rightPath>1</con1:rightPath>
                                                                                                    </con1:compExpr>
                                                                                                </con1:xqueryConditionExpr>
                                                                                            </con2:condition>
                                                                                            <con2:actions>
                                                                                                <con2:assign varName="rqMovimientosCuenta">
                                                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e98</con1:id>
                                                                                                    <con2:expr>
                                                                                                        <con1:xqueryTransform>
                                                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaDetalladaIn"/>
                                                                                                            <con1:param name="endDate">
                                                                                                                <con1:path>$endDate</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="ticket">
                                                                                                                <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="consultaMovimientosCuenta1">
                                                                                                                <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="requestHeader1">
                                                                                                                <con1:path>$header/aut:RequestHeader</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="beginDate">
                                                                                                                <con1:path>fn:replace(xs:string(xs:date($FechaTemp) + xdt:dayTimeDuration(fn:concat("P",1,"D"))),"-","")</con1:path>
                                                                                                            </con1:param>
                                                                                                        </con1:xqueryTransform>
                                                                                                    </con2:expr>
                                                                                                </con2:assign>
                                                                                            </con2:actions>
                                                                                        </con2:case>
                                                                                        <con2:default>
                                                                                            <con2:assign varName="rqMovimientosCuenta">
                                                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e97</con1:id>
                                                                                                <con2:expr>
                                                                                                    <con1:xqueryTransform>
                                                                                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaIn"/>
                                                                                                        <con1:param name="endDate">
                                                                                                            <con1:path>$endDate</con1:path>
                                                                                                        </con1:param>
                                                                                                        <con1:param name="ticket">
                                                                                                            <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                                                        </con1:param>
                                                                                                        <con1:param name="consultaMovimientosCuenta1">
                                                                                                            <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                                                        </con1:param>
                                                                                                        <con1:param name="requestHeader1">
                                                                                                            <con1:path>$header/aut:RequestHeader</con1:path>
                                                                                                        </con1:param>
                                                                                                        <con1:param name="beginDate">
                                                                                                            <con1:path>fn:replace(xs:string(xs:date($FechaTemp) + xdt:dayTimeDuration(fn:concat("P",1,"D"))),"-","")</con1:path>
                                                                                                        </con1:param>
                                                                                                    </con1:xqueryTransform>
                                                                                                </con2:expr>
                                                                                            </con2:assign>
                                                                                        </con2:default>
                                                                                    </con2:ifThenElse>
                                                                                </con2:requestTransform>
                                                                                <con2:responseTransform/>
                                                                            </con2:wsCallout>
                                                                            <con2:wsCallout>
                                                                                <con1:comment>Se envian a insertar los movimientos de T24 de forma temporal, para consolidarlos con los movimientos históricos que están en Abanks</con1:comment>
                                                                                <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e90</con1:id>
                                                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/INTFC/insertarMovimientosCuenta/biz/insertarMovimientosCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>insertarMovimientosCuenta</con2:operation>
                                                                                <con2:request>
                                                                                    <con2:body>ReqInsertarMovimientosCuenta</con2:body>
                                                                                </con2:request>
                                                                                <con2:response>
                                                                                    <con2:body>RspInsertarMovimientosCuenta</con2:body>
                                                                                </con2:response>
                                                                                <con2:requestTransform>
                                                                                    <con2:assign varName="ReqInsertarMovimientosCuenta">
                                                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e92</con1:id>
                                                                                        <con2:expr>
                                                                                            <con1:xqueryTransform>
                                                                                                <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaInsertarRegs"/>
                                                                                                <con1:param name="consultaMovimientosCuentaResponse1">
                                                                                                    <con1:path>$rpMovimientosCuenta</con1:path>
                                                                                                </con1:param>
                                                                                                <con1:param name="TicketOSB">
                                                                                                    <con1:path>$TICKET</con1:path>
                                                                                                </con1:param>
                                                                                            </con1:xqueryTransform>
                                                                                        </con2:expr>
                                                                                    </con2:assign>
                                                                                </con2:requestTransform>
                                                                                <con2:responseTransform>
                                                                                    <con2:assign varName="successIndInsertMovs">
                                                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7e91</con1:id>
                                                                                        <con2:expr>
                                                                                            <con1:xqueryText>fn:string($RspInsertarMovimientosCuenta/ins:PV_CODIGOERROR/text())</con1:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:assign>
                                                                                </con2:responseTransform>
                                                                            </con2:wsCallout>
                                                                        </con2:actions>
                                                                    </con2:case>
                                                                    <con2:default/>
                                                                </con2:ifThenElse>
                                                                <con2:ifThenElse>
                                                                    <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f3e</con1:id>
                                                                    <con2:case>
                                                                        <con2:condition>
                                                                            <con1:xqueryText>fn:upper-case($successIndInsertMovs)='SUCCESS' or $ticketNuevo = 'N'</con1:xqueryText>
                                                                        </con2:condition>
                                                                        <con2:actions>
                                                                            <con2:ifThenElse>
                                                                                <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f38</con1:id>
                                                                                <con2:case>
                                                                                    <con2:condition>
                                                                                        <con1:xqueryText>$cuentaAbanks != ""</con1:xqueryText>
                                                                                    </con2:condition>
                                                                                    <con2:actions>
                                                                                        <con2:wsCallout>
                                                                                            <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f35</con1:id>
                                                                                            <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/INTFC/consultaDetalladaMovimientosCuenta/biz/consultaDetalladaMovimientosCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con2:operation>consultaDetalladaMovimientosCuenta</con2:operation>
                                                                                            <con2:request>
                                                                                                <con2:body>REQUEST</con2:body>
                                                                                            </con2:request>
                                                                                            <con2:response>
                                                                                                <con2:body>RESPONSE</con2:body>
                                                                                            </con2:response>
                                                                                            <con2:requestTransform>
                                                                                                <con2:assign varName="REQUEST">
                                                                                                    <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f37</con1:id>
                                                                                                    <con2:expr>
                                                                                                        <con1:xqueryTransform>
                                                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksDetalladoIn"/>
                                                                                                            <con1:param name="ticketOSB">
                                                                                                                <con1:path>$TICKET</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="consultaMovimientosCuenta1">
                                                                                                                <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="monedaCuenta">
                                                                                                                <con1:path>$varAccountCurrency</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="nombreCuenta">
                                                                                                                <con1:path>$varAccountName</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="fechaT24">
                                                                                                                <con1:path>fn:concat(fn:substring($FechaTemp,1,4),fn:substring($FechaTemp,6,2),fn:substring($FechaTemp,9,2))</con1:path>
                                                                                                            </con1:param>
                                                                                                            <con1:param name="CuentaAbanks">
                                                                                                                <con1:path>$cuentaAbanks</con1:path>
                                                                                                            </con1:param>
                                                                                                        </con1:xqueryTransform>
                                                                                                    </con2:expr>
                                                                                                </con2:assign>
                                                                                                <con2:replace contents-only="true" varName="REQUEST">
                                                                                                    <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f36</con1:id>
                                                                                                    <con2:location>
                                                                                                        <con1:xpathText>./con2:InputParameters/con2:ACCOUNT_NUMBER</con1:xpathText>
                                                                                                    </con2:location>
                                                                                                    <con2:expr>
                                                                                                        <con1:xqueryText>$cuentaAbanks</con1:xqueryText>
                                                                                                    </con2:expr>
                                                                                                </con2:replace>
                                                                                            </con2:requestTransform>
                                                                                            <con2:responseTransform/>
                                                                                        </con2:wsCallout>
                                                                                    </con2:actions>
                                                                                </con2:case>
                                                                                <con2:default>
                                                                                    <con2:assign varName="RESPONSE">
                                                                                        <con1:id>_ActionId-5771716539097601509-1a6b7832.16499b2492e.-7f34</con1:id>
                                                                                        <con2:expr>
                                                                                            <con1:xqueryText>&lt;con1:OutputParameters>
	&lt;con1:ERROR_CODE>SUCCESS&lt;/con1:ERROR_CODE>
	&lt;con1:ERROR_MESSAGE 	xsi:nil="true"/>
&lt;/con1:OutputParameters></con1:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:assign>
                                                                                </con2:default>
                                                                            </con2:ifThenElse>
                                                                        </con2:actions>
                                                                    </con2:case>
                                                                    <con2:default/>
                                                                </con2:ifThenElse>
                                                            </con2:actions>
                                                        </con2:case>
                                                        <con2:default>
                                                            <con2:ifThenElse>
                                                                <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d26</con1:id>
                                                                <con2:case>
                                                                    <con2:condition>
                                                                        <con1:xqueryText>$cuentaAbanks != ""</con1:xqueryText>
                                                                    </con2:condition>
                                                                    <con2:actions>
                                                                        <con2:replace varName="body" contents-only="true">
                                                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d25</con1:id>
                                                                            <con2:location>
                                                                                <con1:xpathText>./con:consultaMovimientosCuenta/BEGIN_DATE</con1:xpathText>
                                                                            </con2:location>
                                                                            <con2:expr>
                                                                                <con1:xqueryText>$beginDate</con1:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:replace varName="body" contents-only="true">
                                                                            <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d24</con1:id>
                                                                            <con2:location>
                                                                                <con1:xpathText>./con:consultaMovimientosCuenta/END_DATE</con1:xpathText>
                                                                            </con2:location>
                                                                            <con2:expr>
                                                                                <con1:xqueryText>$endDate</con1:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:wsCallout>
                                                                            <con1:id>_ActionId-7757377215337728818-1b417957.1549be3b4ea.-7e60</con1:id>
                                                                            <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/INTFC/consultaDetalladaMovimientosCuenta/biz/consultaDetalladaMovimientosCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                            <con2:operation>consultaDetalladaMovimientosCuenta</con2:operation>
                                                                            <con2:request>
                                                                                <con2:body>REQUEST</con2:body>
                                                                            </con2:request>
                                                                            <con2:response>
                                                                                <con2:body>RESPONSE</con2:body>
                                                                            </con2:response>
                                                                            <con2:requestTransform>
                                                                                <con2:assign varName="REQUEST">
                                                                                    <con1:id>_ActionId-7757377215337728818-1b417957.1549be3b4ea.-7e5c</con1:id>
                                                                                    <con2:expr>
                                                                                        <con1:xqueryTransform>
                                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksDetalladoIn"/>
                                                                                            <con1:param name="ticketOSB">
                                                                                                <con1:path>$TICKET</con1:path>
                                                                                            </con1:param>
                                                                                            <con1:param name="consultaMovimientosCuenta1">
                                                                                                <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                                            </con1:param>
                                                                                            <con1:param name="monedaCuenta">
                                                                                                <con1:path>$varAccountCurrency</con1:path>
                                                                                            </con1:param>
                                                                                            <con1:param name="nombreCuenta">
                                                                                                <con1:path>$varAccountName</con1:path>
                                                                                            </con1:param>
                                                                                            <con1:param name="fechaT24">
                                                                                                <con1:path>''</con1:path>
                                                                                            </con1:param>
                                                                                            <con1:param name="CuentaAbanks">
                                                                                                <con1:path>$cuentaAbanks</con1:path>
                                                                                            </con1:param>
                                                                                        </con1:xqueryTransform>
                                                                                    </con2:expr>
                                                                                </con2:assign>
                                                                                <con2:replace contents-only="true" varName="REQUEST">
                                                                                    <con1:id>_ActionId-7757377215337728818-1b417957.1549be3b4ea.-7e5e</con1:id>
                                                                                    <con2:location>
                                                                                        <con1:xpathText>./con2:InputParameters/con2:ACCOUNT_NUMBER</con1:xpathText>
                                                                                    </con2:location>
                                                                                    <con2:expr>
                                                                                        <con1:xqueryText>$cuentaAbanks</con1:xqueryText>
                                                                                    </con2:expr>
                                                                                </con2:replace>
                                                                            </con2:requestTransform>
                                                                            <con2:responseTransform/>
                                                                        </con2:wsCallout>
                                                                    </con2:actions>
                                                                </con2:case>
                                                                <con2:default>
                                                                    <con2:assign varName="RESPONSE">
                                                                        <con1:id>_ActionId-3959357151604934651-63708a28.15352f30de9.-7d20</con1:id>
                                                                        <con2:expr>
                                                                            <con1:xqueryText>&lt;top:OutputParameters>
	&lt;top:ERROR_CODE>SUCCESS&lt;/top:ERROR_CODE>
	&lt;top:ERROR_MESSAGE 	xsi:nil="true"/>
&lt;/top:OutputParameters></con1:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:assign>
                                                                </con2:default>
                                                            </con2:ifThenElse>
                                                        </con2:default>
                                                    </con2:ifThenElse>
                                                    <con2:ifThenElse>
                                                        <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7d61</con1:id>
                                                        <con2:case>
                                                            <con2:condition>
                                                                <con1:xqueryText>$ticketNuevo = 'N'</con1:xqueryText>
                                                            </con2:condition>
                                                            <con2:actions>
                                                                <con2:assign varName="varAccountName">
                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7d60</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryText>fn:string($RESPONSE/con2:PV_ACCOUNTNAME/text())</con1:xqueryText>
                                                                    </con2:expr>
                                                                </con2:assign>
                                                                <con2:assign varName="varAccountCurrency">
                                                                    <con1:id>_ActionId-230603144667553474-3776e05f.1649a1d5e73.-7d5f</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryText>fn:string($RESPONSE/con2:PV_CURRENCY/text())</con1:xqueryText>
                                                                    </con2:expr>
                                                                </con2:assign>
                                                            </con2:actions>
                                                        </con2:case>
                                                        <con2:default/>
                                                    </con2:ifThenElse>
                                                </con2:default>
                                            </con2:ifThenElse>
                                        </con2:actions>
                                    </con2:case>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="HN01_ConsultaMovimientosCuenta_response">
            <con:stage name="FlujoSalida">
                <con:context>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K__CONSDETMOVSCTA/TOPLEVEL-24OSB_CON_DET_MOVS_CTA/" prefix="top"/>
                    <con1:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaDetalladaMovimientosCuenta" prefix="con1"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7842</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$statusParametrizacion != "SUCCESS"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con1:replace contents-only="true" varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3355131922104060328--41a6d1e.158260d840b.-7841</con5:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{ fn:string($errorMessage) }</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con2:replace contents-only="true" varName="body">
                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7840</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:boolExpr operator="and">
                                        <con1:compExpr operator="=">
                                            <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                            <con1:rightPath>"TODAY"</con1:rightPath>
                                        </con1:compExpr>
                                        <con1:compExpr operator="=">
                                            <con1:leftPath>$successTicket</con1:leftPath>
                                            <con1:rightPath>"SUCCESS"</con1:rightPath>
                                        </con1:compExpr>
                                    </con1:boolExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783f</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>xs:integer(data($rpMovimientosCuenta/WSACCOUNTENTRIESType[1]/TOTALREGISTRO)) != 0</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="zeroRecords">
                                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783e</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$rpMovimientosCuenta/WSACCOUNTENTRIESType/ZERORECS</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:ifThenElse>
                                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783d</con1:id>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>fn:empty($zeroRecords)
and
fn:string($rpMovimientosCuenta/Status/successIndicator)="Success"</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:replace contents-only="true" varName="header">
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783c</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryTransform>
                                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaHeaderOut"/>
                                                                    <con1:param name="consultaMovimientosCuentaResponse1">
                                                                        <con1:path>$rpMovimientosCuenta</con1:path>
                                                                    </con1:param>
                                                                </con1:xqueryTransform>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:replace contents-only="true" varName="body">
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783b</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryTransform>
                                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaOut"/>
                                                                    <con1:param name="FechaSalidaT24">
                                                                        <con1:path>$fechaSalidaT24</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="ticket">
                                                                        <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="StartDate">
                                                                        <con1:path>$endDate</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="EndDate">
                                                                        <con1:path>$endDate</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="consultaMovimientosCuentaResponse1">
                                                                        <con1:path>$rpMovimientosCuenta</con1:path>
                                                                    </con1:param>
                                                                    <con1:param name="InicialRecord">
                                                                        <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING) = "NO") then
	"1"
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD)</con1:path>
                                                                    </con1:param>
                                                                </con1:xqueryTransform>
                                                            </con2:expr>
                                                        </con2:replace>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>fn:string($rpMovimientosCuenta/Status/successIndicator)!="Success"</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:replace contents-only="true" varName="header">
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-783a</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryTransform>
                                                                    <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaHeaderOut"/>
                                                                    <con1:param name="consultaMovimientosCuentaResponse1">
                                                                        <con1:path>$rpMovimientosCuenta</con1:path>
                                                                    </con1:param>
                                                                </con1:xqueryTransform>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:replace contents-only="true" varName="body">
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7839</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:default>
                                                    <con2:replace contents-only="true" varName="header">
                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7838</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryTransform>
                                                                <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaZeroHeaderOut"/>
                                                                <con1:param name="consultaMovimientosCuentaResponse1">
                                                                    <con1:path>$rpMovimientosCuenta</con1:path>
                                                                </con1:param>
                                                            </con1:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:replace contents-only="true" varName="body">
                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7837</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:default>
                                            </con2:ifThenElse>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:replace varName="header" contents-only="true">
                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7836</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>NO RECORDS</successIndicator>
      <messages>NO SE ENCONTRARON REGISTROS</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:replace varName="body" contents-only="true">
                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7835</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:default>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:boolExpr operator="or">
                                        <con1:boolExpr operator="and">
                                            <con1:compExpr operator="=">
                                                <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                                <con1:rightPath>"LAST_STMT"</con1:rightPath>
                                            </con1:compExpr>
                                            <con1:compExpr operator="=">
                                                <con1:leftPath>$successTicket</con1:leftPath>
                                                <con1:rightPath>"SUCCESS"</con1:rightPath>
                                            </con1:compExpr>
                                        </con1:boolExpr>
                                        <con1:boolExpr operator="and">
                                            <con1:compExpr operator="=">
                                                <con1:leftPath>fn:upper-case(fn:string($entryRange))</con1:leftPath>
                                                <con1:rightPath>"FREE_RANGE"</con1:rightPath>
                                            </con1:compExpr>
                                            <con1:compExpr operator="=">
                                                <con1:leftPath>$successTicket</con1:leftPath>
                                                <con1:rightPath>"SUCCESS"</con1:rightPath>
                                            </con1:compExpr>
                                        </con1:boolExpr>
                                    </con1:boolExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7834</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:number($TODAY-FI) &lt; fn:number($DiasT24)</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:ifThenElse>
                                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7833</con1:id>
                                                <con2:case>
                                                    <con2:condition>
                                                        <con1:xqueryText>xs:integer(data($rpMovimientosCuenta/WSACCOUNTENTRIESType[1]/TOTALREGISTRO)) != 0</con1:xqueryText>
                                                    </con2:condition>
                                                    <con2:actions>
                                                        <con2:assign varName="zeroRecords">
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7832</con1:id>
                                                            <con2:expr>
                                                                <con1:xqueryText>$rpMovimientosCuenta/WSACCOUNTENTRIESType/ZERORECS</con1:xqueryText>
                                                            </con2:expr>
                                                        </con2:assign>
                                                        <con2:ifThenElse>
                                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7831</con1:id>
                                                            <con2:case>
                                                                <con2:condition>
                                                                    <con1:xqueryText>fn:empty($zeroRecords)
and
fn:string($rpMovimientosCuenta/Status/successIndicator)="Success"</con1:xqueryText>
                                                                </con2:condition>
                                                                <con2:actions>
                                                                    <con2:replace varName="header" contents-only="true">
                                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7830</con1:id>
                                                                        <con2:expr>
                                                                            <con1:xqueryTransform>
                                                                                <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaHeaderOut"/>
                                                                                <con1:param name="consultaMovimientosCuentaResponse1">
                                                                                    <con1:path>$rpMovimientosCuenta</con1:path>
                                                                                </con1:param>
                                                                            </con1:xqueryTransform>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:replace varName="body" contents-only="true">
                                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782f</con1:id>
                                                                        <con2:expr>
                                                                            <con1:xqueryTransform>
                                                                                <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaOut"/>
                                                                                <con1:param name="FechaSalidaT24">
                                                                                    <con1:path>$fechaSalidaT24</con1:path>
                                                                                </con1:param>
                                                                                <con1:param name="ticket">
                                                                                    <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                                </con1:param>
                                                                                <con1:param name="StartDate">
                                                                                    <con1:path>if($beginDate = "") then
	$endDate
else
	$beginDate</con1:path>
                                                                                </con1:param>
                                                                                <con1:param name="EndDate">
                                                                                    <con1:path>$endDate</con1:path>
                                                                                </con1:param>
                                                                                <con1:param name="consultaMovimientosCuentaResponse1">
                                                                                    <con1:path>$rpMovimientosCuenta</con1:path>
                                                                                </con1:param>
                                                                                <con1:param name="InicialRecord">
                                                                                    <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING) = "NO") then
	"1"
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD)</con1:path>
                                                                                </con1:param>
                                                                            </con1:xqueryTransform>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                </con2:actions>
                                                            </con2:case>
                                                            <con2:case>
                                                                <con2:condition>
                                                                    <con1:xqueryText>fn:string($rpMovimientosCuenta/Status/successIndicator)!="Success"</con1:xqueryText>
                                                                </con2:condition>
                                                                <con2:actions>
                                                                    <con2:replace varName="header" contents-only="true">
                                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782e</con1:id>
                                                                        <con2:expr>
                                                                            <con1:xqueryTransform>
                                                                                <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaHeaderOut"/>
                                                                                <con1:param name="consultaMovimientosCuentaResponse1">
                                                                                    <con1:path>$rpMovimientosCuenta</con1:path>
                                                                                </con1:param>
                                                                            </con1:xqueryTransform>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:replace varName="body" contents-only="true">
                                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782d</con1:id>
                                                                        <con2:expr>
                                                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                </con2:actions>
                                                            </con2:case>
                                                            <con2:default>
                                                                <con2:replace varName="header" contents-only="true">
                                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782c</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryTransform>
                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaZeroHeaderOut"/>
                                                                            <con1:param name="consultaMovimientosCuentaResponse1">
                                                                                <con1:path>$rpMovimientosCuenta</con1:path>
                                                                            </con1:param>
                                                                        </con1:xqueryTransform>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:replace varName="body" contents-only="true">
                                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782b</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                            </con2:default>
                                                        </con2:ifThenElse>
                                                    </con2:actions>
                                                </con2:case>
                                                <con2:default>
                                                    <con2:replace varName="header" contents-only="true">
                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-782a</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>NO RECORDS</successIndicator>
      <messages>NO SE ENCONTRARON REGISTROS</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:replace varName="body" contents-only="true">
                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7829</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:default>
                                            </con2:ifThenElse>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:ifThenElse>
                                            <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7828</con1:id>
                                            <con2:case>
                                                <con2:condition>
                                                    <con1:xqueryText>(xs:integer(data($rpMovimientosCuenta/WSACCOUNTENTRIESType[1]/TOTALREGISTRO)) != 0)
or 
(count($RESPONSE/con1:PT_REFNO/con1:ITEM) != 0)</con1:xqueryText>
                                                </con2:condition>
                                                <con2:actions>
                                                    <con2:ifThenElse>
                                                        <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7827</con1:id>
                                                        <con2:case>
                                                            <con2:condition>
                                                                <con1:xqueryText>fn:number($TODAY-FF) &lt; fn:number($DiasT24)</con1:xqueryText>
                                                            </con2:condition>
                                                            <con2:actions>
                                                                <con2:replace contents-only="true" varName="header">
                                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7826</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryTransform>
                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaMixtoHeaderOut"/>
                                                                            <con1:param name="outputParameters1">
                                                                                <con1:path>$RESPONSE</con1:path>
                                                                            </con1:param>
                                                                        </con1:xqueryTransform>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:replace contents-only="true" varName="body">
                                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7825</con1:id>
                                                                    <con2:expr>
                                                                        <con1:xqueryTransform>
                                                                            <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaMixtoOut"/>
                                                                            <con1:param name="consultaMovimientosCuenta1">
                                                                                <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="monedaCuenta">
                                                                                <con1:path>$varAccountCurrency</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="nombreCuenta">
                                                                                <con1:path>$varAccountName</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="outputParameters1">
                                                                                <con1:path>$RESPONSE</con1:path>
                                                                            </con1:param>
                                                                            <con1:param name="ticket">
                                                                                <con1:path>$TICKET</con1:path>
                                                                            </con1:param>
                                                                        </con1:xqueryTransform>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                            </con2:actions>
                                                        </con2:case>
                                                        <con2:default>
                                                            <con2:replace varName="header" contents-only="true">
                                                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7824</con1:id>
                                                                <con2:expr>
                                                                    <con1:xqueryTransform>
                                                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksHeaderOut"/>
                                                                        <con1:param name="outputParameters1">
                                                                            <con1:path>$RESPONSE</con1:path>
                                                                        </con1:param>
                                                                    </con1:xqueryTransform>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:replace varName="body" contents-only="true">
                                                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7823</con1:id>
                                                                <con2:expr>
                                                                    <con1:xqueryTransform>
                                                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksDetalladoOut"/>
                                                                        <con1:param name="consultaMovimientosCuenta1">
                                                                            <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                                        </con1:param>
                                                                        <con1:param name="AccountName">
                                                                            <con1:path>if(empty($varAccountName))then
	''
else
	$varAccountName</con1:path>
                                                                        </con1:param>
                                                                        <con1:param name="AccountCurrency">
                                                                            <con1:path>if(empty($varAccountCurrency)) then
	''
else
	$varAccountCurrency</con1:path>
                                                                        </con1:param>
                                                                        <con1:param name="outputParameters1">
                                                                            <con1:path>$RESPONSE</con1:path>
                                                                        </con1:param>
                                                                        <con1:param name="ticket">
                                                                            <con1:path>if(data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET) = "") then
	$TICKET
else
	data($body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET)</con1:path>
                                                                        </con1:param>
                                                                    </con1:xqueryTransform>
                                                                </con2:expr>
                                                            </con2:replace>
                                                        </con2:default>
                                                    </con2:ifThenElse>
                                                </con2:actions>
                                            </con2:case>
                                            <con2:default>
                                                <con2:replace varName="header" contents-only="true">
                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7822</con1:id>
                                                    <con2:expr>
                                                        <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>NO RECORDS</successIndicator>
      <messages>NO SE ENCONTRARON REGISTROS</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                                <con2:replace varName="body" contents-only="true">
                                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7821</con1:id>
                                                    <con2:expr>
                                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                            </con2:default>
                                        </con2:ifThenElse>
                                    </con2:default>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>$successTicket = "ERROR"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="header" contents-only="true">
                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-7820</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>IF PAGING IS YES PLEASE SEND THE INITIAL RECORD TO 1</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace varName="body" contents-only="true">
                                    <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-781f</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace contents-only="true" varName="header" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-781e</con1:id>
                                <con2:expr>
                                    <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>REQUIRED FIELDS NOT SUPPLIED FOR FIELD ENTRY_RANGE. IT MUST BE TODAY, LAST_STMT OR FREE_RANGE</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:replace contents-only="true" varName="body">
                                <con1:id>_ActionId-3355131922104060328--41a6d1e.158260d840b.-781d</con1:id>
                                <con2:expr>
                                    <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                </con2:expr>
                            </con2:replace>
                        </con2:default>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="Default_ConsultaMovimientosCuenta_request">
            <con:stage name="FlujoEntrada">
                <con:context/>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="Default_ConsultaMovimientosCuenta_response">
            <con:stage name="FlujoSalida">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con:context>
                <con:actions>
                    <con2:Error>
                        <con1:id>_ActionId-2681369310853666711--5bcd27aa.14daf0d55d0.-772b</con1:id>
                        <con2:errCode>MW-0008</con2:errCode>
                        <con2:message>SERVICE NOT IMPLEMENTED YET FOR THIS COUNTRY/COMPANY</con2:message>
                    </con2:Error>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="GT01_ConsultaMovimientosCuenta_request">
            <con:stage name="FlujoEntrada" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:userNsDecl namespace="T24WebServicesImpl" prefix="tns"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFechaSistemaTypes" prefix="con1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTAMOVSCUENTA/TOPLEVEL-24OSB_CON_MOVS_CTA/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaFechaSistema" prefix="con2"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a4e</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING/text())="YES"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a4d</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryConditionExpr>
                                                <con1:boolExpr operator="or">
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/RECORD_COUNT</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                </con1:boolExpr>
                                            </con1:xqueryConditionExpr>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="validateFields">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a4c</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>"ERROR"</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con1:skip>
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a4b</con1:id>
                                            </con1:skip>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                    <con2:assign varName="accNumber">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a4a</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="beginDate">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a49</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="endDate">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a48</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="entryRange">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a47</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ENTRY_RANGE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="TICKET">
                        <con1:id>_ActionId-7711704707666815457--536e1ad0.1656cc0f18e.-7fe5</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a46</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($accNumber) != "" and 
( (fn:upper-case(fn:string($entryRange)) = "LAST_STMT" or
   fn:upper-case(fn:string($entryRange)) = "TODAY" )
   or
   (fn:upper-case(fn:string($entryRange)) = "FREE_RANGE" and
    fn:string($beginDate) != "" and fn:string($endDate) != "")
)</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-9144178224478784616--3792e477.1574874aedb.-7a45</con5:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($entryRange)) = "LAST_STMT"
or
fn:upper-case(fn:string($entryRange)) = "TODAY"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con2:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a42</con1:id>
                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaFechaSistema/biz/consultaFechaSistema_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con2:operation>consultaFechaSistema</con2:operation>
                                                <con2:request>
                                                    <con2:body>REQconsultaFechaSistema</con2:body>
                                                </con2:request>
                                                <con2:response>
                                                    <con2:body>RSPconsultaFechaSistema</con2:body>
                                                </con2:response>
                                                <con2:requestTransform>
                                                    <con2:assign varName="REQconsultaFechaSistema">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a44</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>&lt;con2:InputParameters/></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:requestTransform>
                                                <con2:responseTransform>
                                                    <con2:assign varName="FechaHoy">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a43</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>fn:data($RSPconsultaFechaSistema/con2:PV_WORKING_DATE)</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:responseTransform>
                                            </con2:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-7711704707666815457--536e1ad0.1656cc0f18e.-7e74</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:string($TICKET) = ""</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="TICKET">
                                                <con1:id>_ActionId-7711704707666815457--536e1ad0.1656cc0f18e.-7e72</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryTransform>
                                                        <con1:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                                                    </con1:xqueryTransform>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3f</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "LAST_STMT"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3e</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryTransform>
                                                        <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaFechaSTMT"/>
                                                        <con1:param name="date">
                                                            <con1:path>$FechaHoy</con1:path>
                                                        </con1:param>
                                                    </con1:xqueryTransform>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3d</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>(fn:concat (fn:substring($endDate,1,6),"01"))</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "TODAY"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3c</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3b</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:assign varName="endDate">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a3a</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="beginDate">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a39</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:default>
                                </con2:ifThenElse>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a35</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKGT/consultaDetalladaMovimientosCuenta/biz/consultaDetalladaMovimientosCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultaDetalladaMovimientosCuenta</con2:operation>
                                    <con2:request>
                                        <con2:body>REQconsultaDetalladaMovimientosCuenta</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPconsultaDetalladaMovimientosCuenta</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:ifThenElse>
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a38</con1:id>
                                            <con2:case>
                                                <con2:condition>
                                                    <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD/text())=""</con1:xqueryText>
                                                </con2:condition>
                                                <con2:actions>
                                                    <con2:replace contents-only="true" varName="body">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a37</con1:id>
                                                        <con2:location>
                                                            <con1:xpathText>./con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:xpathText>
                                                        </con2:location>
                                                        <con2:expr>
                                                            <con1:xqueryText>1</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:actions>
                                            </con2:case>
                                            <con2:default/>
                                        </con2:ifThenElse>
                                        <con2:assign varName="REQconsultaDetalladaMovimientosCuenta">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a36</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksGTIn"/>
                                                    <con1:param name="endDate">
                                                        <con1:path>$endDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaMovimientosCuenta">
                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="ticket">
                                                        <con1:path>$TICKET</con1:path>
                                                    </con1:param>
                                                    <con1:param name="beginDate">
                                                        <con1:path>$beginDate</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform/>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="GT01_ConsultaMovimientosCuenta_response">
            <con:stage name="FlujoSalida" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a34</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>$validateFields</con1:leftPath>
                                        <con1:rightPath>"ERROR"</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="header" contents-only="true">
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a33</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>INVALID VALUE FOR INITIAL_RECORD OR RECORD_COUNT</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace varName="body" contents-only="true">
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a32</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace varName="header" contents-only="true">
                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a31</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksGTHeaderOut"/>
                                        <con1:param name="outputParameters">
                                            <con1:path>$RSPconsultaDetalladaMovimientosCuenta</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a30</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryText>fn:upper-case($header/aut:ResponseHeader/successIndicator)="SUCCESS"</con1:xqueryText>
                                    </con2:condition>
                                    <con2:actions>
                                        <con2:replace varName="body" contents-only="true">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a2f</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksGTOut"/>
                                                    <con1:param name="endDate">
                                                        <con1:path>$endDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaMovimientosCuenta">
                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="outputParameters">
                                                        <con1:path>$RSPconsultaDetalladaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="beginDate">
                                                        <con1:path>$beginDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="Ticket">
                                                        <con1:path>$TICKET</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:actions>
                                </con2:case>
                                <con2:default>
                                    <con2:replace varName="body" contents-only="true">
                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7a2e</con1:id>
                                        <con2:expr>
                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                        </con2:expr>
                                    </con2:replace>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:default>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="PA01_ConsultaMovimientosCuenta_request">
            <con:stage name="FlujoEntrada" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:userNsDecl namespace="T24WebServicesImpl" prefix="tns"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFechaSistemaTypes" prefix="con1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTAMOVSCUENTA/TOPLEVEL-24OSB_CON_MOVS_CTA/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaFechaSistema" prefix="con2"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7971</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING/text())="YES"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7970</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryConditionExpr>
                                                <con1:boolExpr operator="or">
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/RECORD_COUNT</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                </con1:boolExpr>
                                            </con1:xqueryConditionExpr>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="validateFields">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796f</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>"ERROR"</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con1:skip>
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796e</con1:id>
                                            </con1:skip>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                    <con2:assign varName="accNumber">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796d</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="beginDate">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796c</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="endDate">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796b</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="entryRange">
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-796a</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ENTRY_RANGE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="TICKET">
                        <con1:id>_ActionId-6369124490436798016--37946b37.165864dd5d8.-7fea</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/PAGING_INFO/TICKET/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7969</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($accNumber) != "" and 
( (fn:upper-case(fn:string($entryRange)) = "LAST_STMT" or
   fn:upper-case(fn:string($entryRange)) = "TODAY" )
   or
   (fn:upper-case(fn:string($entryRange)) = "FREE_RANGE" and
    fn:string($beginDate) != "" and fn:string($endDate) != "")
)</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-9144178224478784616--3792e477.1574874aedb.-7968</con5:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($entryRange)) = "LAST_STMT"
or
fn:upper-case(fn:string($entryRange)) = "TODAY"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con2:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7965</con1:id>
                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/consultaFechaSistema/biz/consultaFechaSistema_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con2:operation>consultaFechaSistema</con2:operation>
                                                <con2:request>
                                                    <con2:body>REQconsultaFechaSistema</con2:body>
                                                </con2:request>
                                                <con2:response>
                                                    <con2:body>RSPconsultaFechaSistema</con2:body>
                                                </con2:response>
                                                <con2:requestTransform>
                                                    <con2:assign varName="REQconsultaFechaSistema">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7967</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>&lt;con2:InputParameters/></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:requestTransform>
                                                <con2:responseTransform>
                                                    <con2:assign varName="FechaHoy">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7966</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>fn:data($RSPconsultaFechaSistema/con2:PV_WORKING_DATE)</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:responseTransform>
                                            </con2:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-6369124490436798016--37946b37.165864dd5d8.-7f22</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:string($TICKET) = ""</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="TICKET">
                                                <con1:id>_ActionId-6369124490436798016--37946b37.165864dd5d8.-7f20</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryTransform>
                                                        <con1:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
                                                    </con1:xqueryTransform>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7962</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "LAST_STMT"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7961</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryTransform>
                                                        <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaFechaSTMT"/>
                                                        <con1:param name="date">
                                                            <con1:path>$FechaHoy</con1:path>
                                                        </con1:param>
                                                    </con1:xqueryTransform>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7960</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>(fn:concat (fn:substring($endDate,1,6),"01"))</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "TODAY"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795f</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795e</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:assign varName="endDate">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795d</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="beginDate">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795c</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:default>
                                </con2:ifThenElse>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7958</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ABKPA/consultaDetalladaMovimientosCuenta/biz/consultaDetalladaMovimientosCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>consultaDetalladaMovimientosCuenta</con2:operation>
                                    <con2:request>
                                        <con2:body>REQconsultaDetalladaMovimientosCuenta</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPconsultaDetalladaMovimientosCuenta</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:ifThenElse>
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795b</con1:id>
                                            <con2:case>
                                                <con2:condition>
                                                    <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD/text())=""</con1:xqueryText>
                                                </con2:condition>
                                                <con2:actions>
                                                    <con2:replace contents-only="true" varName="body">
                                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-795a</con1:id>
                                                        <con2:location>
                                                            <con1:xpathText>./con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:xpathText>
                                                        </con2:location>
                                                        <con2:expr>
                                                            <con1:xqueryText>1</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:actions>
                                            </con2:case>
                                            <con2:default/>
                                        </con2:ifThenElse>
                                        <con2:assign varName="REQconsultaDetalladaMovimientosCuenta">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7959</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksPAIn"/>
                                                    <con1:param name="endDate">
                                                        <con1:path>$endDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaMovimientosCuenta">
                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="ticket">
                                                        <con1:path>$TICKET</con1:path>
                                                    </con1:param>
                                                    <con1:param name="beginDate">
                                                        <con1:path>$beginDate</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:requestTransform>
                                    <con2:responseTransform/>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="PA01_ConsultaMovimientosCuenta_response">
            <con:stage name="FlujoSalida" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7957</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>$validateFields</con1:leftPath>
                                        <con1:rightPath>"ERROR"</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="header" contents-only="true">
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7956</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>INVALID VALUE FOR INITIAL_RECORD OR RECORD_COUNT</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace varName="body" contents-only="true">
                                    <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7955</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace varName="header" contents-only="true">
                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7954</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksPAHeaderOut"/>
                                        <con1:param name="outputParameters">
                                            <con1:path>$RSPconsultaDetalladaMovimientosCuenta</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7953</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryText>fn:upper-case($header/aut:ResponseHeader/successIndicator)="SUCCESS"</con1:xqueryText>
                                    </con2:condition>
                                    <con2:actions>
                                        <con2:replace varName="body" contents-only="true">
                                            <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7951</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaAbanksPAOut"/>
                                                    <con1:param name="endDate">
                                                        <con1:path>$endDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaMovimientosCuenta">
                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="outputParameters">
                                                        <con1:path>$RSPconsultaDetalladaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="beginDate">
                                                        <con1:path>$beginDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="Ticket">
                                                        <con1:path>$TICKET</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:actions>
                                </con2:case>
                                <con2:default>
                                    <con2:replace varName="body" contents-only="true">
                                        <con1:id>_ActionId-9144178224478784616--3792e477.1574874aedb.-7950</con1:id>
                                        <con2:expr>
                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                        </con2:expr>
                                    </con2:replace>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:default>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="NI01_ConsultaMovimientosCuenta_request">
            <con:stage name="FlujoEntrada" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:userNsDecl namespace="T24WebServicesImpl" prefix="tns"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFechaSistemaTypes" prefix="con1"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_K_CONSULTAMOVSCUENTA/TOPLEVEL-24OSB_CON_MOVS_CTA/" prefix="top"/>
                    <con1:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultaFechaSistema" prefix="con2"/>
                    <con1:varNsDecl namespace="http://service.srvaplcobisgenerales.ecobis.cobiscorp" prefix="ser"/>
                    <con1:varNsDecl namespace="http://dto.srvaplcobisentidades.ecobis.cobiscorp" prefix="dto"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c7a</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/PAGING/text())="YES"</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c79</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryConditionExpr>
                                                <con1:boolExpr operator="or">
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/RECORD_COUNT</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                    <con1:compExpr operator="&lt;=">
                                                        <con1:leftPath>$body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:leftPath>
                                                        <con1:rightPath>0</con1:rightPath>
                                                    </con1:compExpr>
                                                </con1:boolExpr>
                                            </con1:xqueryConditionExpr>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="validateFields">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c78</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>"ERROR"</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con1:skip>
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c77</con1:id>
                                            </con1:skip>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default/>
                                </con2:ifThenElse>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                    <con2:assign varName="accNumber">
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c76</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ACCOUNT_NUMBER/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="beginDate">
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c75</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="endDate">
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c74</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:assign varName="entryRange">
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c73</con1:id>
                        <con2:expr>
                            <con1:xqueryText>$body/con:consultaMovimientosCuenta/ENTRY_RANGE/text()</con1:xqueryText>
                        </con2:expr>
                    </con2:assign>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c72</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryText>fn:string($accNumber) != "" and 
( (fn:upper-case(fn:string($entryRange)) = "LAST_STMT" or
   fn:upper-case(fn:string($entryRange)) = "TODAY" )
   or
   (fn:upper-case(fn:string($entryRange)) = "FREE_RANGE" and
    fn:string($beginDate) != "" and fn:string($endDate) != "")
)</con1:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config">
                                    <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c71</con5:id>
                                    <con1:case>
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($entryRange)) = "LAST_STMT"
or
fn:upper-case(fn:string($entryRange)) = "TODAY"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con2:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c6e</con1:id>
                                                <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CTS/generalService/biz/generalService" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con2:operation>OpBuscarFechaSistema</con2:operation>
                                                <con2:request>
                                                    <con2:body>REQOpBuscarFechaSistema</con2:body>
                                                </con2:request>
                                                <con2:response>
                                                    <con2:body>RSPOpBuscarFechaSistema</con2:body>
                                                </con2:response>
                                                <con2:requestTransform>
                                                    <con2:assign varName="REQOpBuscarFechaSistema">
                                                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c70</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>&lt;ser:opBuscarFechaSistemaSolicitud/></con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:requestTransform>
                                                <con2:responseTransform>
                                                    <con2:assign varName="FechaHoy">
                                                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c6f</con1:id>
                                                        <con2:expr>
                                                            <con1:xqueryText>fn:string(fn-bea:dateTime-to-string-with-format("yyyyMMdd",fn:data($RSPOpBuscarFechaSistema/dto:fechaProceso)))</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:assign>
                                                </con2:responseTransform>
                                            </con2:wsCallout>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con2:ifThenElse>
                                    <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c6b</con1:id>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "LAST_STMT"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c6a</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryTransform>
                                                        <con1:resource ref="Middleware/Business_Resources/ConsultasCuenta/ConsultaMovimientosCuenta/consultaMovimientosCuentaFechaSTMT"/>
                                                        <con1:param name="date">
                                                            <con1:path>$FechaHoy</con1:path>
                                                        </con1:param>
                                                    </con1:xqueryTransform>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c69</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>(fn:concat (fn:substring($endDate,1,6),"01"))</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:case>
                                        <con2:condition>
                                            <con1:xqueryText>fn:upper-case(fn:string($entryRange)) = "TODAY"</con1:xqueryText>
                                        </con2:condition>
                                        <con2:actions>
                                            <con2:assign varName="endDate">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c68</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                            <con2:assign varName="beginDate">
                                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c67</con1:id>
                                                <con2:expr>
                                                    <con1:xqueryText>$FechaHoy</con1:xqueryText>
                                                </con2:expr>
                                            </con2:assign>
                                        </con2:actions>
                                    </con2:case>
                                    <con2:default>
                                        <con2:assign varName="endDate">
                                            <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c66</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/END_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:assign varName="beginDate">
                                            <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c65</con1:id>
                                            <con2:expr>
                                                <con1:xqueryText>$body/con:consultaMovimientosCuenta/BEGIN_DATE/text()</con1:xqueryText>
                                            </con2:expr>
                                        </con2:assign>
                                    </con2:default>
                                </con2:ifThenElse>
                                <con2:wsCallout>
                                    <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c61</con1:id>
                                    <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CTS/cuenta/biz/cuenta" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>OpConsultaMovimientoCuenta</con2:operation>
                                    <con2:request>
                                        <con2:body>REQOpConsultaMovimientoCuenta</con2:body>
                                    </con2:request>
                                    <con2:response>
                                        <con2:body>RSPOpConsultaMovimientoCuenta</con2:body>
                                    </con2:response>
                                    <con2:requestTransform>
                                        <con2:ifThenElse>
                                            <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c64</con1:id>
                                            <con2:case>
                                                <con2:condition>
                                                    <con1:xqueryText>fn:string($body/con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD/text())=""</con1:xqueryText>
                                                </con2:condition>
                                                <con2:actions>
                                                    <con2:replace contents-only="true" varName="body">
                                                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c63</con1:id>
                                                        <con2:location>
                                                            <con1:xpathText>./con:consultaMovimientosCuenta/PAGING_INFO/INITIAL_RECORD</con1:xpathText>
                                                        </con2:location>
                                                        <con2:expr>
                                                            <con1:xqueryText>1</con1:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con2:actions>
                                            </con2:case>
                                            <con2:default/>
                                        </con2:ifThenElse>
                                        <con2:assign varName="REQOpConsultaMovimientoCuenta">
                                            <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c62</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaNIIn"/>
                                                    <con1:param name="END_DATE">
                                                        <con1:path>$endDate</con1:path>
                                                    </con1:param>
                                                    <con1:param name="consultaMovimientosCuenta">
                                                        <con1:path>$body/con:consultaMovimientosCuenta</con1:path>
                                                    </con1:param>
                                                    <con1:param name="BEGIN_DATE">
                                                        <con1:path>$beginDate</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:assign>
                                        <con2:validate>
                                            <con1:id>_ActionId-2112113176119020215-aa64e43.15d2d4f33d0.-7deb</con1:id>
                                            <con2:schema ref="Middleware/v2/BusinessServices/CTS/cuenta/xsd/services"/>
                                            <con2:schemaElement xmlns:ser1="http://service.srvaplcobiscuenta.ecobis.cobiscorp">ser1:opConsultaMovimientoCuentaSolicitud</con2:schemaElement>
                                            <con2:varName>REQOpConsultaMovimientoCuenta</con2:varName>
                                            <con2:location>
                                                <con1:xpathText>.</con1:xpathText>
                                            </con2:location>
                                        </con2:validate>
                                    </con2:requestTransform>
                                    <con2:responseTransform/>
                                </con2:wsCallout>
                            </con2:actions>
                        </con2:case>
                        <con2:default/>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="NI01_ConsultaMovimientosCuenta_response">
            <con:stage name="FlujoSalida" xmlns:con4="http://www.bea.com/wli/sb/stages/logging/config">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
                </con:context>
                <con:actions>
                    <con2:ifThenElse>
                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c60</con1:id>
                        <con2:case>
                            <con2:condition>
                                <con1:xqueryConditionExpr>
                                    <con1:compExpr operator="=">
                                        <con1:leftPath>$validateFields</con1:leftPath>
                                        <con1:rightPath>"ERROR"</con1:rightPath>
                                    </con1:compExpr>
                                </con1:xqueryConditionExpr>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="header" contents-only="true">
                                    <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5f</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>INVALID VALUE FOR INITIAL_RECORD OR RECORD_COUNT</messages>
</aut:ResponseHeader>]]></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                                <con2:replace varName="body" contents-only="true">
                                    <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5e</con1:id>
                                    <con2:expr>
                                        <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con2:replace varName="header" contents-only="true">
                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5d</con1:id>
                                <con2:expr>
                                    <con1:xqueryTransform>
                                        <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaNIHeaderOut"/>
                                        <con1:param name="opConsultaMovimientoCuentaRespuesta">
                                            <con1:path>$RSPOpConsultaMovimientoCuenta</con1:path>
                                        </con1:param>
                                    </con1:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                            <con2:ifThenElse>
                                <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5c</con1:id>
                                <con2:case>
                                    <con2:condition>
                                        <con1:xqueryText>fn:upper-case($header/aut:ResponseHeader/successIndicator)="SUCCESS"</con1:xqueryText>
                                    </con2:condition>
                                    <con2:actions>
                                        <con2:replace varName="body" contents-only="true">
                                            <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5b</con1:id>
                                            <con2:expr>
                                                <con1:xqueryTransform>
                                                    <con1:resource ref="Middleware/v2/Resources/ConsultaMovimientosCuenta/xq/consultaMovimientosCuentaNIOut"/>
                                                    <con1:param name="opConsultaMovimientoCuentaRespuesta">
                                                        <con1:path>$RSPOpConsultaMovimientoCuenta</con1:path>
                                                    </con1:param>
                                                </con1:xqueryTransform>
                                            </con2:expr>
                                        </con2:replace>
                                    </con2:actions>
                                </con2:case>
                                <con2:default>
                                    <con2:replace varName="body" contents-only="true">
                                        <con1:id>_ActionId-787430781695649745-6cfd6bb3.15cac893f6a.-7c5a</con1:id>
                                        <con2:expr>
                                            <con1:xqueryText>&lt;con:consultaMovimientosCuentaResponse/></con1:xqueryText>
                                        </con2:expr>
                                    </con2:replace>
                                </con2:default>
                            </con2:ifThenElse>
                        </con2:default>
                    </con2:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="ValidacionesGenerales">
                <con:request>ValidacionesGenerales_request</con:request>
                <con:response>ValidacionesGenerales_response</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" name="RegionalizacionPaisEmpresa">
                <con:context>
                    <con1:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
                </con:context>
                <con:branch-table variable="header">
                    <con:xpath>
                        <con1:xpathText>./aut:RequestHeader/Region/SourceBank</con1:xpathText>
                    </con:xpath>
                    <con:branch name="HN01">
                        <con:operator>equals</con:operator>
                        <con:value>'HN01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="HN01_ConsultaMovimientosCuenta">
                                <con:request>HN01_ConsultaMovimientosCuenta_request</con:request>
                                <con:response>HN01_ConsultaMovimientosCuenta_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="GT01">
                        <con:operator>equals</con:operator>
                        <con:value>'GT01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="GT01_ConsultaMovimientosCuenta">
                                <con:request>GT01_ConsultaMovimientosCuenta_request</con:request>
                                <con:response>GT01_ConsultaMovimientosCuenta_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="PA01">
                        <con:operator>equals</con:operator>
                        <con:value>'PA01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="PA01_ConsultaMovimientosCuenta">
                                <con:request>PA01_ConsultaMovimientosCuenta_request</con:request>
                                <con:response>PA01_ConsultaMovimientosCuenta_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="NI01">
                        <con:operator>equals</con:operator>
                        <con:value>'NI01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="NI01_ConsultaMovimientosCuenta">
                                <con:request>NI01_ConsultaMovimientosCuenta_request</con:request>
                                <con:response>NI01_ConsultaMovimientosCuenta_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow>
                            <con:pipeline-node name="Default_ConsultaMovimientosCuenta">
                                <con:request>Default_ConsultaMovimientosCuenta_request</con:request>
                                <con:response>Default_ConsultaMovimientosCuenta_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>