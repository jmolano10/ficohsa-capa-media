<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:oper="http://xmlns.oracle.com/servicebus/pipeline/operations">
    <con:coreEntry>
        <con:description/>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/wsdl/consultaDatosTarjetaDebitoPS"/>
            <con:binding>
                <con:name>ConsultaDatosTarjetaDebitoSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes</con:namespace>
            </con:binding>
        </con:binding>
        <oper:operations>
            <oper:monitoring enabled="true" aggregationInterval="360" level="action"/>
            <oper:tracingEnabled>false</oper:tracingEnabled>
            <oper:reporting>true</oper:reporting>
            <oper:logging enabled="true" level="debug"/>
            <oper:sla-alerting enabled="true" level="normal"/>
            <oper:pipeline-alerting enabled="true" level="normal"/>
        </oper:operations>
        <con:pageAttachments isEnabled="false"/>
        <con:transactions isRequired="false" sameTxForResponse="false"/>
    </con:coreEntry>
    <con1:router errorHandler="_onErrorHandler-8103925033717654547-33813f8b.1681ade0ef2.-7f33" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:con="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
        <con:pipeline name="PA01_ConsultaDatosTarjetaDebito_request" type="request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="FlujoEntrada">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="con1" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultarTarjetaDebitoPA" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="ctdpa" path="$RSPConsultaTarjetaDebitoPA" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="Middleware/v3/BusinessServices/ABKPA/ConsultarTarjetaDebito/xsd/consultarTarjetaDebitoPA_db" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f46</con2:id>
                        <con1:service ref="Middleware/v3/BusinessServices/ABKPA/ConsultarTarjetaDebito/biz/consultarTarjetaDebitoPA_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultarTarjetaDebitoPA</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQConsultaTarjetaDebitoPA</con1:body>
                            <con1:header/>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPConsultaTarjetaDebitoPA</con1:body>
                            <con1:header/>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQConsultaTarjetaDebitoPA">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f45</con2:id>
                                <con1:expr>
                                    <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                        <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoPA"/>
                                        <con:param name="numeroTarjeta">
                                            <con:path>fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text())</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="codMens">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f42</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_CODIGO_ERROR/text())</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="descMens">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f23</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_MENSAJE_ERROR/text())</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="Validaciones Generales_response" type="response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="MapeoError">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f36</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f35</con2:id>
                                    <con1:service ref="Middleware/v2/ProxyServices/MapeoErrores" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>mapeoErrores</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQMapeoErrores</con1:body>
                                        <con1:header/>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPMapeoErrores</con1:body>
                                        <con1:header/>
                                    </con1:response>
                                    <con1:requestTransform>
                                        <con1:assign varName="REQMapeoErrores">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f34</con2:id>
                                            <con1:expr>
                                                <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                    <con:param name="MENSAJE_ERROR">
                                                        <con:path>fn:concat("FICBCO0302","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con:path>
                                                    </con:param>
                                                    <con:param name="CODIGO_ERROR">
                                                        <con:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform>
                                        <con1:replace varName="header" contents-only="true">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f27</con2:id>
                                            <con1:expr>
                                                <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                                    <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                    <con:param name="successIndicator">
                                                        <con:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con:path>
                                                    </con:param>
                                                    <con:param name="mapeoErroresResponse1">
                                                        <con:path>$RSPMapeoErrores</con:path>
                                                    </con:param>
                                                </con:xqueryTransform>
                                            </con1:expr>
                                        </con1:replace>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="GT01_ConsultaDatosTarjetaDebito_response" type="response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="FlujoSalida">
                <con:comment/>
                <con:context>
                    <con1:userNsDecl prefix="con1" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultarTarjetaDebito" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f38</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHeaderOUT"/>
                                <con2:param name="codMens">
                                    <con2:path>$codMens</con2:path>
                                </con2:param>
                                <con2:param name="descMens">
                                    <con2:path>$descMens</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:replace>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f3b</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:data($codMens) = 'SUCCESS'</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f3a</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoGTOUT"/>
                                            <con2:param name="tipoTarjeta">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_TIPO_TARJETA/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoMoneda">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_CODIGO_MONEDA/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="cuenta">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_CUENTA/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoCliente">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_CODIGO_CLIENTE/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="CardName">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_NOMBRE_TARJETA/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="estatusTarjeta">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_ESTATUS_TARJETA/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="ordenCuenta">
                                                <con2:path>fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_ORDEN_CUENTAS/text())</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="body" contents-only="true">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f29</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                                </con1:expr>
                            </con1:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="Validaciones Generales_request" type="request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="ValidateMessage">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con:validate xmlns:con="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id xmlns:con1="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8f</con1:id>
                        <con:schema ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xsd/ConsultaDatosTarjetaDebitoTypes"/>
                        <con1:schemaElement xmlns:con="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">con:consultaDatosTarjetaDebitoRequest</con1:schemaElement>
                        <con:varName>body</con:varName>
                        <con:location>
                            <con:xpathText xmlns:con="http://www.bea.com/wli/sb/stages/config">./con:consultaDatosTarjetaDebitoRequest</con:xpathText>
                        </con:location>
                        <con:resultVarName/>
                    </con:validate>
                    <con:ifThenElse xmlns:con="http://www.bea.com/wli/sb/stages/transform/config">
                        <con1:id xmlns:con1="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8e</con1:id>
                        <con:case>
                            <con:condition>
                                <con1:xqueryText xmlns:con1="http://www.bea.com/wli/sb/stages/config">fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text()) = ""</con1:xqueryText>
                            </con:condition>
                            <con:actions>
                                <con:Error>
                                    <con1:id xmlns:con1="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8d</con1:id>
                                    <con:errCode>NO DEBIT CARD</con:errCode>
                                    <con:message>El numero de tarjeta no puede ir vacío</con:message>
                                </con:Error>
                            </con:actions>
                        </con:case>
                    </con:ifThenElse>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7ede</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($header/aut:RequestHeader/Region/SourceBank/text()) = ""</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:Error>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7edd</con2:id>
                                    <con1:errCode>NO SOURCE BANK</con1:errCode>
                                    <con1:message>El país origen es necesario</con1:message>
                                </con1:Error>
                            </con1:actions>
                        </con1:case>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage name="ValidateRegionService">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="val" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="val" path="$validateRegionalServiceResponse" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="Middleware/v2/BusinessServices/ValidaServicioRegional/xsd/ValidaServicioRegional_sp" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8c</con2:id>
                        <con1:service ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ValidaServicioRegional</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQValidaServicioRegional</con1:body>
                            <con1:header/>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPValidaServicioRegional</con1:body>
                            <con1:header/>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQValidaServicioRegional">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8b</con2:id>
                                <con1:expr>
                                    <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                        <con:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                                        <con:param name="requestHeader1">
                                            <con:path>$header/aut:RequestHeader</con:path>
                                        </con:param>
                                        <con:param name="serviceId">
                                            <con:path>"FICBCO0302"</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:ifThenElse>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f8a</con2:id>
                                <con1:case>
                                    <con1:condition>
                                        <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:replace varName="header" contents-only="true">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f89</con2:id>
                                            <con1:expr>
                                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($RSPValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con1:replace varName="body" contents-only="true">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f88</con2:id>
                                            <con1:expr>
                                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                                            </con1:expr>
                                        </con1:replace>
                                        <con2:reply isError="false" xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f87</con2:id>
                                        </con2:reply>
                                    </con1:actions>
                                </con1:case>
                            </con1:ifThenElse>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="_onErrorHandler-8103925033717654547-33813f8b.1681ade0ef2.-7f33" type="error" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="ManejoError">
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="errorCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f32</con2:id>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($fault/ctx:errorCode/text())</con:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="errorMessage" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f31</con2:id>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($fault/ctx:reason/text())</con:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f30</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$errorCode = "BEA-382505"</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="header" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2f</con2:id>
                                    <con1:expr>
                                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                            <con:resource ref="Middleware/v2/Resources/Genericos/mapeoErrorValidate"/>
                                            <con:param name="anyType1">
                                                <con:path>$fault</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:wsCallout>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2e</con2:id>
                                <con1:service ref="Middleware/v2/ProxyServices/MapeoErrores" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                <con1:operation>mapeoErrores</con1:operation>
                                <con1:request>
                                    <con1:body wrapped="false">REQMapeoErrores</con1:body>
                                    <con1:header/>
                                </con1:request>
                                <con1:response>
                                    <con1:body wrapped="false">RSPMapeoErrores</con1:body>
                                    <con1:header/>
                                </con1:response>
                                <con1:requestTransform>
                                    <con1:assign varName="REQMapeoErrores">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2d</con2:id>
                                        <con1:expr>
                                            <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                                <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                                                <con:param name="MENSAJE_ERROR">
                                                    <con:path>fn:concat("FICBC00302", "$#$", $errorMessage)</con:path>
                                                </con:param>
                                                <con:param name="CODIGO_ERROR">
                                                    <con:path>$errorCode</con:path>
                                                </con:param>
                                            </con:xqueryTransform>
                                        </con1:expr>
                                    </con1:assign>
                                </con1:requestTransform>
                                <con1:responseTransform>
                                    <con1:replace varName="header" contents-only="true">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2c</con2:id>
                                        <con1:expr>
                                            <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                                <con:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                                                <con:param name="successIndicator">
                                                    <con:path>$errorCode</con:path>
                                                </con:param>
                                                <con:param name="mapeoErroresResponse1">
                                                    <con:path>$RSPMapeoErrores</con:path>
                                                </con:param>
                                            </con:xqueryTransform>
                                        </con1:expr>
                                    </con1:replace>
                                </con1:responseTransform>
                            </con1:wsCallout>
                        </con1:default>
                    </con1:ifThenElse>
                    <con1:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2b</con2:id>
                        <con1:expr>
                            <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply isError="false" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f2a</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="GT01_ConsultaDatosTarjetaDebito_request" type="request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="FlujoEntrada">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="con1" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultarTarjetaDebito" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="ctdgt" path="$RSPConsultaTarjetaDebitoGT" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="Middleware/v3/BusinessServices/ABKGT/consultarTarjetaDebito/xsd/consultarTarjetaDebito_sp" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f84</con2:id>
                        <con1:service ref="Middleware/v3/BusinessServices/ABKGT/consultarTarjetaDebito/biz/consultarTarjetaDebito_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>consultarTarjetaDebito</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQConsultaTarjetaDebitoGT</con1:body>
                            <con1:header/>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPConsultaTarjetaDebitoGT</con1:body>
                            <con1:header/>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:assign varName="REQConsultaTarjetaDebitoGT">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f83</con2:id>
                                <con1:expr>
                                    <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                        <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoGT"/>
                                        <con:param name="numeroTarjeta">
                                            <con:path>fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text())</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                            <con1:assign varName="codMens">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f43</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_CODIGO_ERROR/text())</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="descMens">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f37</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaTarjetaDebitoGT/con1:PV_MENSAJE_ERROR/text())</con:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline name="PA01_ConsultaDatosTarjetaDebito_response" type="response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:stage name="FlujoSalida">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="con1" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/consultarTarjetaDebitoPA" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="ctdpa" path="$RSPConsultaTarjetaDebitoPA" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="Middleware/v3/BusinessServices/ABKPA/ConsultarTarjetaDebito/xsd/consultarTarjetaDebitoPA_db" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f22</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHeaderOUT"/>
                                <con2:param name="codMens">
                                    <con2:path>$codMens</con2:path>
                                </con2:param>
                                <con2:param name="descMens">
                                    <con2:path>$descMens</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:replace>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f25</con2:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:data($codMens) = 'SUCCESS'</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f24</con2:id>
                                    <con1:expr>
                                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                            <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoPAOUT"/>
                                            <con:param name="codigoMoneda">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_CODIGO_MONEDA/text())</con:path>
                                            </con:param>
                                            <con:param name="cardName">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_NOMBRE_TARJETA/text())</con:path>
                                            </con:param>
                                            <con:param name="codigoCliente">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_CODIGO_CLIENTE/text())</con:path>
                                            </con:param>
                                            <con:param name="estatusTarjeta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_ESTATUS_TARJETA/text())</con:path>
                                            </con:param>
                                            <con:param name="tipoTarjeta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_TIPO_TARJETA/text())</con:path>
                                            </con:param>
                                            <con:param name="cuenta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_CUENTA/text())</con:path>
                                            </con:param>
                                            <con:param name="ordenCuenta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoPA/con1:PV_ORDEN_CUENTAS/text())</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="body" contents-only="true">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8103925033717654547-33813f8b.1681ade0ef2.-7f20</con2:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                                </con1:expr>
                            </con1:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con1:pipeline type="request" name="NI01_ConsultaDatosTarjetaDebito_request">
            <con1:stage name="FlujoEntrada">
                <con1:context>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" prefix="con"/>
                    <con:userNsDecl namespace="http://dto.srvaplcobistarjetadebito.ecobis.cobiscorp" prefix="ns2"/>
                </con1:context>
                <con1:actions>
                    <con2:wsCallout>
                        <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f6d</con:id>
                        <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CTS/ConsultaDatosTarjetaDebito/biz/ConsultaDatosTarjetaDebito" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con2:operation>OpConsultaTarjetaDebito</con2:operation>
                        <con2:request>
                            <con2:body>REQConsultaTarjetaDebitoNI</con2:body>
                        </con2:request>
                        <con2:response>
                            <con2:body>RSPConsultaTarjetaDebitoNI</con2:body>
                        </con2:response>
                        <con2:requestTransform>
                            <con2:assign varName="REQConsultaTarjetaDebitoNI">
                                <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f16</con:id>
                                <con2:expr>
                                    <con:xqueryTransform>
                                        <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoNI"/>
                                        <con:param name="NumeroTarjeta">
                                            <con:path>fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text())</con:path>
                                        </con:param>
                                        <con:param name="CodOriginator">
                                            <con:path>1</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con2:expr>
                            </con2:assign>
                        </con2:requestTransform>
                        <con2:responseTransform>
                            <con2:assign varName="codMens">
                                <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f06</con:id>
                                <con2:expr>
                                    <con:xqueryText>fn:string($RSPConsultaTarjetaDebitoNI/ns2:contextoRespuesta/ns2:codTipoRespuesta/text())</con:xqueryText>
                                </con2:expr>
                            </con2:assign>
                            <con2:assign varName="descMens">
                                <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7eeb</con:id>
                                <con2:expr>
                                    <con:xqueryText>fn:string($RSPConsultaTarjetaDebitoNI/ns2:contextoRespuesta/ns2:valDescripcionRespuesta/text())</con:xqueryText>
                                </con2:expr>
                            </con2:assign>
                        </con2:responseTransform>
                    </con2:wsCallout>
                </con1:actions>
            </con1:stage>
        </con1:pipeline>
        <con1:pipeline type="response" name="NI01_ConsultaDatosTarjetaDebito_response">
            <con1:stage name="FlujoSalida">
                <con1:context>
                    <con:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" prefix="con"/>
                    <con:userNsDecl namespace="http://dto.srvaplcobistarjetadebito.ecobis.cobiscorp" prefix="ns2"/>
                </con1:context>
                <con1:actions>
                    <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7e7c</con3:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHeaderOUT"/>
                                <con2:param name="codMens">
                                    <con2:path>$codMens</con2:path>
                                </con2:param>
                                <con2:param name="descMens">
                                    <con2:path>$descMens</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:replace>
                    <con2:ifThenElse>
                        <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7e51</con:id>
                        <con2:case>
                            <con2:condition>
                                <con:xqueryText>fn:data($codMens) = '0'</con:xqueryText>
                            </con2:condition>
                            <con2:actions>
                                <con2:replace varName="body" contents-only="true">
                                    <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7d86</con:id>
                                    <con2:expr>
                                        <con:xqueryTransform>
                                            <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoNIOUT"/>
                                            <con:param name="Cuenta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:cuentaPrincipal/ns2:numCuenta/text())</con:path>
                                            </con:param>
                                            <con:param name="NombreTarjeta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:tarjeta/ns2:nombreTarjeta/text())</con:path>
                                            </con:param>
                                            <con:param name="cuentaSecundaria">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:cuentaSecundaria/ns2:numCuenta/text())</con:path>
                                            </con:param>
                                            <con:param name="MonedaCuenta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:cuentaPrincipal/ns2:moneda/text())</con:path>
                                            </con:param>
                                            <con:param name="TipoTarjeta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:tarjeta/ns2:categoriaTarjeta/text())</con:path>
                                            </con:param>
                                            <con:param name="codigoMonedaSecundaria">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:cuentaSecundaria/ns2:moneda/text())</con:path>
                                            </con:param>
                                            <con:param name="CodigoCliente">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:tarjeta/ns2:idCliente/text())</con:path>
                                            </con:param>
                                            <con:param name="EstadoTarjeta">
                                                <con:path>fn:string($RSPConsultaTarjetaDebitoNI/ns2:tarjeta/ns2:estadoTarjeta/text())</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con2:expr>
                                </con2:replace>
                            </con2:actions>
                        </con2:case>
                        <con2:default>
                            <con1:replace varName="body" contents-only="true" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7dfb</con3:id>
                                <con1:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                                </con1:expr>
                            </con1:replace>
                        </con2:default>
                    </con2:ifThenElse>
                </con1:actions>
            </con1:stage>
        </con1:pipeline>
        <con1:pipeline type="request" name="HN01_ConsultaDatosTarjetaDebito_request">
            <con1:stage name="FlujoEntrada">
                <con1:comment/>
                <con1:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con1:context>
                <con1:actions>
                    <con:wsCallout xmlns:con="http://www.bea.com/wli/sb/stages/transform/config">
                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f48</con3:id>
                        <con:service ref="Middleware/Business_Resources/tarjetasDebito/Resources/tarjetasDebitoBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con:operation>ConsultaMaestraTarjetaDebito</con:operation>
                        <con:request>
                            <con:body wrapped="false">REQConsultaMaestraTarjetaDebito</con:body>
                            <con:header/>
                        </con:request>
                        <con:response>
                            <con:body wrapped="false">RSPConsultaMaestraTarjetaDebito</con:body>
                            <con:header/>
                        </con:response>
                        <con:requestTransform>
                            <con:assign varName="REQConsultaMaestraTarjetaDebito">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f4b</con3:id>
                                <con:expr>
                                    <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                        <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHN"/>
                                        <con:param name="account">
                                            <con:path>fn:concat('...', fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text()))</con:path>
                                        </con:param>
                                        <con:param name="user">
                                            <con:path>fn:string($header/aut:RequestHeader/Authentication/UserName/text())</con:path>
                                        </con:param>
                                        <con:param name="pass">
                                            <con:path>fn:string($header/aut:RequestHeader/Authentication/Password/text())</con:path>
                                        </con:param>
                                    </con:xqueryTransform>
                                </con:expr>
                            </con:assign>
                        </con:requestTransform>
                        <con:responseTransform>
                            <con:assign varName="codMens">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f4a</con3:id>
                                <con:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaMaestraTarjetaDebito/Status/successIndicator/text())</con:xqueryText>
                                </con:expr>
                            </con:assign>
                            <con:assign varName="descMens">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f49</con3:id>
                                <con:expr>
                                    <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:string($RSPConsultaMaestraTarjetaDebito/Status/messages/text())</con:xqueryText>
                                </con:expr>
                            </con:assign>
                        </con:responseTransform>
                    </con:wsCallout>
                </con1:actions>
            </con1:stage>
        </con1:pipeline>
        <con1:pipeline type="response" name="HN01_ConsultaDatosTarjetaDebito_response">
            <con1:stage name="FlujoSalida">
                <con1:comment/>
                <con1:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con1:context>
                <con1:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f47</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>$RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/ZERORECORDS</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="codMens">
                                    <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f46</con:id>
                                    <con1:expr>
                                        <con:xqueryText>'NOT FOUND'</con:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="descMens">
                                    <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f45</con:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat('No se pudo obtener registros relacionados con la Tarjeta de Débito: ', fn:string($body/con:consultaDatosTarjetaDebitoRequest/DEBIT_CARD/text()))</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                    </con1:ifThenElse>
                    <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f44</con:id>
                        <con1:expr>
                            <con:xqueryTransform>
                                <con:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHeaderOUT"/>
                                <con:param name="descMens">
                                    <con:path>$descMens</con:path>
                                </con:param>
                                <con:param name="codMens">
                                    <con:path>fn:upper-case($codMens)</con:path>
                                </con:param>
                            </con:xqueryTransform>
                        </con1:expr>
                    </con1:replace>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f43</con:id>
                        <con1:case>
                            <con1:condition>
                                <con:xqueryText>fn:data($codMens) = 'Success'</con:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="body" contents-only="true">
                                    <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f42</con:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="Middleware/v2/Resources/ConsultaDatosTarjetaDebito/xq/ConsultaDatosTarjetaDebitoHNOUT"/>
                                            <con2:param name="tipoTarjeta">
                                                <con2:path>fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/TYPEOFCARD/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoMoneda">
                                                <con2:path>fn:replace(fn:replace(fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/CURRENCY1/text()), '\|\|', ';'),'\!\!', ';')</con2:path>
                                            </con2:param>
                                            <con2:param name="cuentasSecundarias">
                                                <con2:path>fn:replace(fn:replace(fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/SCNDRYACCT/text()), '\|\|', ';'),'\!\!', ';')</con2:path>
                                            </con2:param>
                                            <con2:param name="cuentasPrimarias">
                                                <con2:path>fn:replace(fn:replace(fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/PRIMARYACCT/text()), '\|\|', ';'),'\!\!', ';')</con2:path>
                                            </con2:param>
                                            <con2:param name="cardName">
                                                <con2:path>fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/NAMEONCARD/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoCliente">
                                                <con2:path>fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/CUSTOMER/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="estatusTarjeta">
                                                <con2:path>fn:string($RSPConsultaMaestraTarjetaDebito/WSFICODEBITCARDCUSTOMERType/gWSFICODEBITCARDCUSTOMERDetailType/mWSFICODEBITCARDCUSTOMERDetailType/CARDSTATUS/text())</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:replace varName="body" contents-only="true">
                                <con:id>_ActionId-8477391189799434077-5ff243e0.16b29f6a89c.-7f41</con:id>
                                <con1:expr>
                                    <con:xqueryText>&lt;con:consultaDatosTarjetaDebitoResponse/></con:xqueryText>
                                </con1:expr>
                            </con1:replace>
                        </con1:default>
                    </con1:ifThenElse>
                </con1:actions>
            </con1:stage>
        </con1:pipeline>
        <con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con:pipeline-node name="Validaciones Generales">
                <con:comment/>
                <con:request>Validaciones Generales_request</con:request>
                <con:response>Validaciones Generales_response</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" name="Regionalizacion">
                <con:comment/>
                <con:context>
                    <con1:varNsDecl prefix="con" namespace="http://www.ficohsa.com.hn/middleware.services/ConsultaDatosTarjetaDebitoTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:branch-table variable="header">
                    <con:xpath>
                        <con:xpathText xmlns:con="http://www.bea.com/wli/sb/stages/config">./aut:RequestHeader/Region/SourceBank</con:xpathText>
                    </con:xpath>
                    <con:branch name="GT01">
                        <con:operator>equals</con:operator>
                        <con:value>'GT01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="GT01_ConsultaDatosTarjetaDebito">
                                <con:request>GT01_ConsultaDatosTarjetaDebito_request</con:request>
                                <con:response>GT01_ConsultaDatosTarjetaDebito_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="HN01">
                        <con:operator>equals</con:operator>
                        <con:value>'HN01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="HN01_ConsultaDatosTarjetaDebito">
                                <con:request>HN01_ConsultaDatosTarjetaDebito_request</con:request>
                                <con:response>HN01_ConsultaDatosTarjetaDebito_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="PA01">
                        <con:operator>equals</con:operator>
                        <con:value>'PA01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="PA01_ConsultaDatosTarjetaDebito">
                                <con:request>PA01_ConsultaDatosTarjetaDebito_request</con:request>
                                <con:response>PA01_ConsultaDatosTarjetaDebito_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="NI01">
                        <con:operator>equals</con:operator>
                        <con:value>'NI01'</con:value>
                        <con:flow>
                            <con:pipeline-node name="NI01_ConsultaDatosTarjetaDebito">
                                <con:request>NI01_ConsultaDatosTarjetaDebito_request</con:request>
                                <con:response>NI01_ConsultaDatosTarjetaDebito_response</con:response>
                            </con:pipeline-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch/>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
    </con1:router>
</con:pipelineEntry>