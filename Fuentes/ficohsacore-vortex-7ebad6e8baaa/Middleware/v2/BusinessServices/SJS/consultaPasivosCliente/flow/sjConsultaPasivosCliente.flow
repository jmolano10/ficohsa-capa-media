<bpel:process name="sjConsultaPasivosCliente" targetNamespace="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/flow/sjConsultaPasivosCliente" bea:name="sjConsultaPasivosCliente" xmlns:tns="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/flow/sjConsultaPasivosCliente" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:rescon="http://www.bea.com/alsb/flow/resources/config" xmlns:bea="http://www.bea.com/bpel/ui/extensions" xmlns:ext="http://www.bea.com/bpel/extensions" xmlns:expr="http://www.bea.com/wli/sb/stages/config" xmlns:trf="http://www.bea.com/wli/sb/stages/transform/config" xmlns:bind="http://www.ficohsa.com.hn/middleware.services/sjConsultaPasivosClientePS" xmlns:ns1="ConsultaPrestamosCliente" xmlns:ns0="ConsultaTarjetaCreditoCliente" xmlns:ns2="T24WebServicesImpl" xmlns:ns3="http://xmlns.oracle.com/pcbpel/adapter/db/conDatoTarjetaClienteHN/conDatoTarjetaClienteHN/conDatoTarjetaClienteHN" xmlns:ns4="http://xmlns.oracle.com/pcbpel/adapter/db/consultaLineasCreditoCliente/consultaLineasCreditoCliente/consultaLineasCreditoCliente">
    <bpel:partnerLinks>
        <bpel:partnerLink name="sjConsultaPasivosCliente" partnerLinkType="tns:sjConsultaPasivosCliente" myRole="sjConsultaPasivosCliente">
	       </bpel:partnerLink>
	   <bpel:partnerLink name="ConsultaPrestamosCliente" partnerLinkType="tns:ConsultaPrestamosCliente_plnkType" partnerRole="ConsultaPrestamosCliente_PartnerRole">
	   </bpel:partnerLink>
	   
	   
	   <bpel:partnerLink name="conDatoTarjetaClienteHN_db" partnerLinkType="tns:conDatoTarjetaClienteHN_db_plnkType" partnerRole="conDatoTarjetaClienteHN_db_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="consultaLineasCreditoCliente_db" partnerLinkType="tns:consultaLineasCreditoCliente_db_plnkType" partnerRole="consultaLineasCreditoCliente_db_PartnerRole">
	   </bpel:partnerLink></bpel:partnerLinks>

	   <bpel:variables>
        <bpel:variable name="request" messageType="bind:sjConsultaPasivosClienteRequest">
	       </bpel:variable>
	       <bpel:variable name="response" messageType="bind:sjConsultaPasivosClienteResponse">
	       </bpel:variable>
    <bpel:variable name="REQConsultaPtmosCliente" messageType="ns1:ConsultaPrestamosClienteRequest">
    </bpel:variable>
    <bpel:variable name="RSPConsultaPtmosCliente" messageType="ns1:ConsultaPrestamosClienteResponse">
    </bpel:variable>
    <bpel:variable name="REQConsultaTCCliente" messageType="ns3:args_in_msg">
    </bpel:variable>
    <bpel:variable name="RSPConsultaTCCliente" messageType="ns3:args_out_msg">
    </bpel:variable>
    
    <bpel:variable name="REQConsultaLineasCreditoCliente" messageType="ns4:args_in_msg">
    </bpel:variable>
    <bpel:variable name="RSPConsultaLineasCreditoCliente" messageType="ns4:args_out_msg">
    </bpel:variable></bpel:variables>

    <bpel:sequence>
        <bpel:receive partnerLink="sjConsultaPasivosCliente" operation="consultaPasivosCliente" variable="request" createInstance="yes">
	           <rescon:receiveInfo>
                
            <rescon:wsdl ref="Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/wsdl/sjConsultaPasivosCliente" binding="bind:sjConsultaPasivosClientePSSOAP"/></rescon:receiveInfo>
        </bpel:receive>
        
        
        <bpel:flow>
        	<bpel:scope>
        		<bpel:faultHandlers>
        			<bpel:catchAll>
        				<bpel:sequence>
        					<bpel:empty/>
        				<bpel:assign>
		<bpel:extensionAssignOperation>
			<trf:assign varName="RSPConsultaPtmosCliente.outputParameters">
				<trf:expr>
					<expr:xqueryText>&lt;ns1:ConsultaPrestamoTypeResponse>
    &lt;ns1:OVERALL_SUCCESS_INDICATOR>ERROR&lt;/ns1:OVERALL_SUCCESS_INDICATOR>
    &lt;ns1:LOAN_DETAILS/>
&lt;/ns1:ConsultaPrestamoTypeResponse>
</expr:xqueryText></trf:expr></trf:assign>
		</bpel:extensionAssignOperation>
        				</bpel:assign></bpel:sequence>
        			</bpel:catchAll></bpel:faultHandlers>
        		<bpel:sequence>
        			<bpel:assign>
        				<bpel:extensionAssignOperation>
        					<trf:assign varName="REQConsultaPtmosCliente.inputParameters">
        						<trf:expr>
        							<expr:xqueryTransform>
        								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/xq/sjConsultaPtmosClienteIn"/>
        								<expr:param name="sjConsultaPasivosClienteRequest1">
        									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        				</bpel:extensionAssignOperation>
        			</bpel:assign>
        			<bpel:invoke operation="ConsultaPrestamosCliente" partnerLink="ConsultaPrestamosCliente" inputVariable="REQConsultaPtmosCliente" outputVariable="RSPConsultaPtmosCliente">
        				<rescon:invokeInfo><con:service ref="Middleware/Business_Resources/consultasCliente/consultaPasivosCliente/consultaPrestamos/ConsultaPrestamosCliente" xsi:type="con:FlowRef" xmlns:con="http://www.bea.com/alsb/flow/resources/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke></bpel:sequence>
        	</bpel:scope>
        	<bpel:scope>
        		
        		
        		<bpel:faultHandlers>
        			
        			<bpel:catchAll>
        				<bpel:sequence>
        					<bpel:empty/>
        				<bpel:assign>
		<bpel:extensionAssignOperation>
			<trf:assign varName="RSPConsultaTCCliente.OutputParameters">
				<trf:expr>
					<expr:xqueryText>&lt;ns0:ConsultaTarjetaCreditoTypeResponse>
    &lt;ns0:OVERALL_SUCCESS_INDICATOR>ERROR&lt;/ns0:OVERALL_SUCCESS_INDICATOR>
    &lt;ns0:CREDIT_CARD_DETAILS/>
&lt;/ns0:ConsultaTarjetaCreditoTypeResponse>
</expr:xqueryText></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign></bpel:sequence>
        			</bpel:catchAll></bpel:faultHandlers>
        		<bpel:sequence>
        			
        			
        			<bpel:assign>
        				
        				<bpel:extensionAssignOperation>
        					<trf:assign varName="REQConsultaTCCliente.InputParameters">
        						<trf:expr>
        							<expr:xqueryTransform>
        								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/xq/sjConsultaTCClienteIn"/>
        								<expr:param name="sjConsultaPasivosClienteRequest">
        									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        				</bpel:extensionAssignOperation>
        			</bpel:assign>
        			<bpel:invoke operation="conDatoTarjetaClienteHN" partnerLink="conDatoTarjetaClienteHN_db" inputVariable="REQConsultaTCCliente" outputVariable="RSPConsultaTCCliente">
        				<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/MasterDataHN/conDatosTarjetaCliente/biz/conDatoTarjetaClienteHN_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke></bpel:sequence>
        	</bpel:scope>
        <bpel:scope>
		
	<bpel:faultHandlers>
			<bpel:catchAll>
				<bpel:sequence>
					<bpel:empty/>
				<bpel:assign>
		<bpel:extensionAssignOperation>
			<trf:assign varName="RSPConsultaLineasCreditoCliente.OutputParameters">
				<trf:expr>
					<expr:xqueryText>&lt;ns4:OutputParameters>
    &lt;ns4:P_SUCCESSINDICATOR>ERROR&lt;/ns4:P_SUCCESSINDICATOR>
&lt;/ns4:OutputParameters></expr:xqueryText></trf:expr></trf:assign>
		</bpel:extensionAssignOperation>
				</bpel:assign></bpel:sequence>
			</bpel:catchAll></bpel:faultHandlers>
	<bpel:sequence>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="REQConsultaLineasCreditoCliente.InputParameters">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/xq/sjConsultaLineaCreditoClienteIn"/>
								<expr:param name="sjConsultaPasivosClienteRequest">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
				</bpel:extensionAssignOperation>
			</bpel:assign>
			<bpel:invoke operation="consultaLineasCreditoCliente" partnerLink="consultaLineasCreditoCliente_db" inputVariable="REQConsultaLineasCreditoCliente" outputVariable="RSPConsultaLineasCreditoCliente">
				<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/ABK/consultaLineasCreditoCliente/biz/consultaLineasCreditoCliente_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke></bpel:sequence>
        </bpel:scope></bpel:flow>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="response.outputParameters">
        			<trf:expr>
        				<expr:xqueryTransform>
        					<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaPasivosCliente/xq/sjConsultaPasivosClienteOut"/>
        					
        					<expr:param name="outputParameters">
        						<expr:path>$RSPConsultaTCCliente.OutputParameters
</expr:path></expr:param>
        					<expr:param name="consultaLineasCreditoCliente">
        						<expr:path>$RSPConsultaLineasCreditoCliente.OutputParameters</expr:path></expr:param>
        					<expr:param name="consultaPrestamoTypeResponse">
        						<expr:path>$RSPConsultaPtmosCliente.outputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        	
        </bpel:assign>
        <bpel:reply partnerLink="sjConsultaPasivosCliente" operation="consultaPasivosCliente" variable="response"/>
    </bpel:sequence>
</bpel:process>