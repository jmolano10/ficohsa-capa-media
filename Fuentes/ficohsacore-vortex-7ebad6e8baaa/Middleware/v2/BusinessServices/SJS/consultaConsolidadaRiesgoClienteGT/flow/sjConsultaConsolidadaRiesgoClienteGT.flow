<bpel:process name="sjConsultaConsolidadaRiesgoClienteGT" targetNamespace="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/flow/sjConsultaConsolidadaRiesgoClienteGT" bea:name="sjConsultaConsolidadaRiesgoClienteGT" xmlns:tns="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/flow/sjConsultaConsolidadaRiesgoClienteGT" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:rescon="http://www.bea.com/alsb/flow/resources/config" xmlns:bea="http://www.bea.com/bpel/ui/extensions" xmlns:ext="http://www.bea.com/bpel/extensions" xmlns:expr="http://www.bea.com/wli/sb/stages/config" xmlns:trf="http://www.bea.com/wli/sb/stages/transform/config" xmlns:bind="http://www.ficohsa.com.hn/middleware.services/sjConsultaConsolidadaRiesgoClienteGTPS" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://xmlns.oracle.com/pcbpel/adapter/db/sp/integracionConsultaSolicitante" xmlns:ns0="http://xmlns.oracle.com/pcbpel/adapter/db/Application/Middleware/integracionConsultaSolicitante" xmlns:ns2="http://xmlns.oracle.com/pcbpel/adapter/db/Application/Middleware/integracionConsultaPasivos" xmlns:ns3="http://xmlns.oracle.com/pcbpel/adapter/db/Application/Middleware/integracionConsultaTarjetas" xmlns:ns4="http://xmlns.oracle.com/pcbpel/adapter/db/Application/Middleware/integracionConsultaPrestamos" xmlns:ns5="http://xmlns.oracle.com/pcbpel/adapter/db/Application/Middleware/integracionConsultaTRXPasivos">
    <rescon:importInfo><rescon:schema-import ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaSolicitante/xsd/integracionConsultaSolicitante_sp"/></rescon:importInfo>
    <bpel:partnerLinks>
        <bpel:partnerLink name="sjConsultaConsolidadaRiesgoClienteGT" partnerLinkType="tns:sjConsultaConsolidadaRiesgoClienteGT" myRole="sjConsultaConsolidadaRiesgoClienteGT">
	       </bpel:partnerLink>
	   <bpel:partnerLink name="integracionConsultaSolicitante_db" partnerLinkType="tns:integracionConsultaSolicitante_db_plnkType" partnerRole="integracionConsultaSolicitante_db_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="integracionConsultaPasivos_db" partnerLinkType="tns:integracionConsultaPasivos_db_plnkType" partnerRole="integracionConsultaPasivos_db_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="integracionConsultaTarjetas_db" partnerLinkType="tns:integracionConsultaTarjetas_db_plnkType" partnerRole="integracionConsultaTarjetas_db_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="integracionConsultaPrestamos_db" partnerLinkType="tns:integracionConsultaPrestamos_db_plnkType" partnerRole="integracionConsultaPrestamos_db_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="integracionConsultaTRXPasivos_db" partnerLinkType="tns:integracionConsultaTRXPasivos_db_plnkType" partnerRole="integracionConsultaTRXPasivos_db_PartnerRole">
	   </bpel:partnerLink></bpel:partnerLinks>

	   <bpel:variables>
        <bpel:variable name="request" messageType="bind:sjConsultaConsolidadaRiesgoClienteGTRequest">
	       </bpel:variable>
	       <bpel:variable name="response" messageType="bind:sjConsultaConsolidadaRiesgoClienteGTResponse">
	       </bpel:variable>
    <bpel:variable name="resultGroup" type="xsd:anyType"/></bpel:variables>

    <bpel:sequence>
        <bpel:receive partnerLink="sjConsultaConsolidadaRiesgoClienteGT" operation="sjConsultaConsolidadaRiesgoClienteGT" variable="request" createInstance="yes">
	           <rescon:receiveInfo>
                
            <rescon:wsdl ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/wsdl/sjConsultaConsolidadaRiesgoClienteGTPS" binding="bind:sjConsultaConsolidadaRiesgoClienteGTSOAP"/></rescon:receiveInfo>
        </bpel:receive>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="resultGroup">
        			<trf:expr>
        				<expr:xqueryText><![CDATA[<RESULT_GROUP>
	<APPLICANT_RESPONSE/>
	<LIABILITIES_RESPONSE/>
	<CARDS_RESPONSE/>
	<LOANS_RESPONSE/>
	<LIABILITIES_TRX_RESPONSE/>
</RESULT_GROUP>]]></expr:xqueryText></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        </bpel:assign>
        <bpel:flow>
        	<bpel:scope bea:name="ConsultaSolicitante">
        		<bpel:variables>
        			
        			
        			
        			<bpel:variable name="REQConsultaSolicitante" messageType="ns0:args_in_msg">
        			</bpel:variable>
        			<bpel:variable name="RSPConsultaSolicitante" messageType="ns0:args_out_msg">
        			</bpel:variable></bpel:variables>
        		<bpel:sequence>
        			<bpel:assign>
        				<bpel:extensionAssignOperation>
        					<trf:assign varName="REQConsultaSolicitante.InputParameters">
        						<trf:expr>
        							<expr:xqueryTransform>
        								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/integracionConsultaSolicitanteIn"/>
        								<expr:param name="sjConsultaConsolidadaRiesgoClienteGT">
        									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        				</bpel:extensionAssignOperation>
        			</bpel:assign>
        			<bpel:invoke operation="integracionConsultaSolicitante" partnerLink="integracionConsultaSolicitante_db" inputVariable="REQConsultaSolicitante" outputVariable="RSPConsultaSolicitante">
        				<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaSolicitante/biz/integracionConsultaSolicitante_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke>
        			<bpel:assign>
        				<bpel:extensionAssignOperation>
        					<trf:insert varName="resultGroup">
        						<trf:location>
        							<expr:xpathText>./APPLICANT_RESPONSE</expr:xpathText></trf:location>
        						<trf:where>last-child</trf:where>
        					<trf:expr>
        						<expr:xqueryText>$RSPConsultaSolicitante.OutputParameters</expr:xqueryText></trf:expr></trf:insert>
        				</bpel:extensionAssignOperation>
        			</bpel:assign></bpel:sequence>
        	</bpel:scope>
        	<bpel:scope bea:name="ConsultaPasivos">
        		<bpel:variables>
        			<bpel:variable name="REQConsultaPasivos" messageType="ns2:args_in_msg">
        			</bpel:variable>
        			<bpel:variable name="RSPConsultaPasivos" messageType="ns2:args_out_msg">
        			</bpel:variable></bpel:variables>
        		<bpel:sequence>
        			<bpel:assign>
        				<bpel:extensionAssignOperation>
        					<trf:assign varName="REQConsultaPasivos.InputParameters">
        						<trf:expr>
        							<expr:xqueryTransform>
        								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/integracionConsultaPasivosIn"/>
        								<expr:param name="sjConsultaConsolidadaRiesgoClienteGT">
        									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        				</bpel:extensionAssignOperation>
        			</bpel:assign>
        			<bpel:invoke operation="integracionConsultaPasivos" partnerLink="integracionConsultaPasivos_db" inputVariable="REQConsultaPasivos" outputVariable="RSPConsultaPasivos">
        				<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaPasivos/biz/integracionConsultaPasivos_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke>
        			<bpel:assign>
        				<bpel:extensionAssignOperation>
        					<trf:insert varName="resultGroup">
        						<trf:location>
        							<expr:xpathText>./LIABILITIES_RESPONSE</expr:xpathText></trf:location>
        						<trf:where>last-child</trf:where>
        					<trf:expr>
        						<expr:xqueryText>$RSPConsultaPasivos.OutputParameters</expr:xqueryText></trf:expr></trf:insert>
        				</bpel:extensionAssignOperation>
        			</bpel:assign></bpel:sequence>
        	</bpel:scope>
        <bpel:scope bea:name="ConsultaTarjetas">
		<bpel:variables>
			<bpel:variable name="REQConsultaTarjetas" messageType="ns3:args_in_msg">
			</bpel:variable>
			<bpel:variable name="RSPConsultaTarjetas" messageType="ns3:args_out_msg">
			</bpel:variable></bpel:variables>
	<bpel:sequence>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="REQConsultaTarjetas.InputParameters">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/integracionConsultaTarjetasIn"/>
								<expr:param name="sjConsultaConsolidadaRiesgoClienteGT">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
				</bpel:extensionAssignOperation>
			</bpel:assign>
			<bpel:invoke operation="integracionConsultaTarjetas" partnerLink="integracionConsultaTarjetas_db" inputVariable="REQConsultaTarjetas" outputVariable="RSPConsultaTarjetas">
				<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaTarjetas/biz/integracionConsultaTarjetas_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:insert varName="resultGroup">
						<trf:location>
							<expr:xpathText>./CARDS_RESPONSE</expr:xpathText></trf:location>
						<trf:where>last-child</trf:where>
					<trf:expr>
						<expr:xqueryText>$RSPConsultaTarjetas.OutputParameters</expr:xqueryText></trf:expr></trf:insert>
				</bpel:extensionAssignOperation>
			</bpel:assign></bpel:sequence>
        </bpel:scope>
        <bpel:scope bea:name="ConsultaPrestamos">
        	<bpel:variables>
        		<bpel:variable name="REQConsultaPrestamos" messageType="ns4:args_in_msg">
        		</bpel:variable>
        		<bpel:variable name="RSPConsultaPrestamos" messageType="ns4:args_out_msg">
        		</bpel:variable></bpel:variables>
        	<bpel:sequence>
        		<bpel:assign>
        			<bpel:extensionAssignOperation>
        				<trf:assign varName="REQConsultaPrestamos.InputParameters">
        					<trf:expr>
        						<expr:xqueryTransform>
        							<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/integracionConsultaPrestamosIn"/>
        							<expr:param name="sjConsultaConsolidadaRiesgoClienteGT">
        								<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        			</bpel:extensionAssignOperation>
        		</bpel:assign>
        		<bpel:invoke operation="integracionConsultaPrestamos" partnerLink="integracionConsultaPrestamos_db" inputVariable="REQConsultaPrestamos" outputVariable="RSPConsultaPrestamos">
        			<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaPrestamos/biz/integracionConsultaPrestamos_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke>
        		<bpel:assign>
        			<bpel:extensionAssignOperation>
        				<trf:insert varName="resultGroup">
        					<trf:location>
        						<expr:xpathText>./LOANS_RESPONSE</expr:xpathText></trf:location>
        					<trf:where>last-child</trf:where>
        				<trf:expr>
        					<expr:xqueryText>$RSPConsultaPrestamos.OutputParameters</expr:xqueryText></trf:expr></trf:insert>
        			</bpel:extensionAssignOperation>
        		</bpel:assign></bpel:sequence>
        </bpel:scope>
        <bpel:scope bea:name="ConsultaTrxPasivos">
        	<bpel:variables>
        		<bpel:variable name="REQConsultaTrxPasivos" messageType="ns5:args_in_msg">
        		</bpel:variable>
        		<bpel:variable name="RSPConsultaTrxPasivos" messageType="ns5:args_out_msg">
        		</bpel:variable></bpel:variables>
        	<bpel:sequence>
        		<bpel:assign>
        			<bpel:extensionAssignOperation>
        				<trf:assign varName="REQConsultaTrxPasivos.InputParameters">
        					<trf:expr>
        						<expr:xqueryTransform>
        							<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/integracionConsultaTrxPasivosIn"/>
        							<expr:param name="sjConsultaConsolidadaRiesgoClienteGT">
        								<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        			</bpel:extensionAssignOperation>
        		</bpel:assign>
        		<bpel:invoke operation="integracionConsultaTRXPasivos" partnerLink="integracionConsultaTRXPasivos_db" inputVariable="REQConsultaTrxPasivos" outputVariable="RSPConsultaTrxPasivos">
        			<rescon:invokeInfo><rescon:service ref="Middleware/v2/BusinessServices/DataWarehouse/integracionConsultaTRXPasivos/biz/integracionConsultaTRXPasivos_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></rescon:invokeInfo></bpel:invoke>
        		<bpel:assign>
        			<bpel:extensionAssignOperation>
        				<trf:insert varName="resultGroup">
        					<trf:location>
        						<expr:xpathText>./LIABILITIES_TRX_RESPONSE</expr:xpathText></trf:location>
        					<trf:where>last-child</trf:where>
        				<trf:expr>
        					<expr:xqueryText>$RSPConsultaTrxPasivos.OutputParameters</expr:xqueryText></trf:expr></trf:insert>
        			</bpel:extensionAssignOperation>
        		</bpel:assign></bpel:sequence>
        </bpel:scope></bpel:flow>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="response.outputParameters">
        			<trf:expr>
        				<expr:xqueryTransform>
        					<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaConsolidadaRiesgoClienteGT/xq/sjConsultaConsolidadaRiesgoClienteGTOut"/>
        					<expr:param name="resultGroup">
        						<expr:path>$resultGroup</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        </bpel:assign>
        <bpel:reply partnerLink="sjConsultaConsolidadaRiesgoClienteGT" operation="sjConsultaConsolidadaRiesgoClienteGT" variable="response"/>
    </bpel:sequence>
</bpel:process>