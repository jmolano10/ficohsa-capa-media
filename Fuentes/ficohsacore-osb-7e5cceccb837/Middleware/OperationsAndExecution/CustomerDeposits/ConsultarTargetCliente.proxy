<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
  <ser:coreEntry isProxy="true" isEnabled="true" isAutoPublish="false" isTracingEnabled="false">
    <ser:security>
      <con:custom-token-authentication>
        <con:username-password>
          <con:username-selector>
            <con:xpath>declare namespace aut='http://www.ficohsa.com.hn/middleware.services/autType';
./aut:AutenticacionRequestHeader/UserName/text()</con:xpath>
            <con:variable>header</con:variable>
          </con:username-selector>
          <con:password-selector>
            <con:xpath>declare namespace aut='http://www.ficohsa.com.hn/middleware.services/autType';
./aut:AutenticacionRequestHeader/Password/text()</con:xpath>
            <con:variable>header</con:variable>
          </con:password-selector>
        </con:username-password>
      </con:custom-token-authentication>
    </ser:security>
    <ser:binding type="SOAP" isSoap12="false" xsi:type="con6:SoapBindingType" xmlns:con6="http://www.bea.com/wli/sb/services/bindings/config">
      <con6:wsdl ref="Middleware/Business_Resources/ConsultarTargetCliente/wsdl/GetTargetFromAccount"/>
      <con6:port>
        <con6:name>GetTargetFromAccountSOAP_binding</con6:name>
        <con6:namespace>http://www.ficohsa.com.hn/middleware.services/GetTargetFromAccount/</con6:namespace>
      </con6:port>
      <con6:selector type="SOAP body"/>
    </ser:binding>
    <ser:monitoring isEnabled="false">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Pipeline</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>http</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:URI>
      <env:value>/Middleware/OperationsAndExecution/CustomerDeposits/ConsultarTargetCliente</env:value>
    </tran:URI>
    <tran:inbound-properties/>
    <tran:all-headers>false</tran:all-headers>
    <tran:provider-specific>
      <http:inbound-properties/>
      <http:compression>
        <http:compression-support>false</http:compression-support>
      </http:compression>
    </tran:provider-specific>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-4824463550064224945--408b89e4.195c9da815f.-7651">
    <con1:pipeline type="request" name="PipelinePairNode1_request">
      <con1:stage name="stageValidate">
        <con1:context>
          <con3:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/GetTargetFromAccountTypes" prefix="get"/>
        </con1:context>
        <con1:actions>
          <con2:assign varName="uuid">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-732b</con3:id>
            <con2:expr>
              <con3:xqueryText>$messageID</con3:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="headerRequest">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6e2b</con3:id>
            <con2:expr>
              <con3:xqueryText>$header</con3:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:delete varName="headerRequest">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-678d</con3:id>
            <con2:location>
              <con3:xpathText>//UserName[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:delete varName="headerRequest">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-678b</con3:id>
            <con2:location>
              <con3:xpathText>//Password[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:assign varName="bodyRequest">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-75a4</con3:id>
            <con2:expr>
              <con3:xqueryText>$body</con3:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="accountNumber">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7589</con3:id>
            <con2:expr>
              <con3:xqueryText>data($bodyRequest/get:consultaTargetCliente/ACCOUNT_NUMBER/text())</con3:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="initDate">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-703b</con3:id>
            <con2:expr>
              <con3:xqueryText>fn:current-dateTime()</con3:xqueryText>
            </con2:expr>
          </con2:assign>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stageGetParams">
        <con1:context>
          <con3:userNsDecl prefix="osb" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/"/>
          <con3:varNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/GetTargetFromAccountTypes"/>
          <con3:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType"/>
        </con1:context>
        <con1:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7983</con3:id>
            <con1:service ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>obtenerParametrizacion</con1:operation>
            <con1:request>
              <con1:body wrapped="false">$getParamsRequest</con1:body>
              <con1:header/>
            </con1:request>
            <con1:response>
              <con1:body wrapped="false">getParamsResponse</con1:body>
              <con1:header/>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="getParamsRequest">
                <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7985</con3:id>
                <con1:expr>
                  <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                    <con:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                    <con:param name="nombreParametros">
                      <con:path>"FICBCO0551_SIPAS_T24_COLUMN_NAME||FICBCO0551_SIPAS_WRITE_LOGS||FICBCO0551_SIPAS_ID_SERVICE||FICBCO0551_SIPAS_ENDPOINT||FICBCO0551_SIPAS_SOURCE_BANK||FICBCO0551_SIPAS_TARGET_BANK"</con:path>
                    </con:param>
                  </con:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="params">
                <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7810</con3:id>
                <con1:expr>
                  <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">$getParamsResponse//osb:CONFIGURACIONES</con:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="writeLogs">
                <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-768b</con3:id>
                <con1:expr>
                  <con3:xqueryText>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_WRITE_LOGS"]/osb:VALUE/text())</con3:xqueryText>
                </con1:expr>
              </con1:assign>
            </con1:responseTransform>
          </con1:wsCallout>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stageCallWarServiceT24">
        <con1:context>
          <con3:userNsDecl prefix="osb" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/"/>
          <con3:userNsDecl prefix="prm" namespace="s"/>
          <con3:varNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/GetTargetFromAccountTypes"/>
          <con3:varNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType"/>
        </con1:context>
        <con1:actions>
          <con2:wsCallout>
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7c9f</con3:id>
            <con2:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultarTargetCliente/biz/svcGetTargetFromAccount" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con2:operation>ConsultaTargetCliente</con2:operation>
            <con2:request>
              <con2:body wrapped="false">$getTargetFromAccountT24Request</con2:body>
              <con2:header/>
            </con2:request>
            <con2:response>
              <con2:body wrapped="false">getTargetFromAccountT24Response</con2:body>
              <con2:header/>
            </con2:response>
            <con2:requestTransform>
              <con6:assign varName="getTargetFromAccountT24Request" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/services/security/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con6="http://www.bea.com/wli/sb/stages/transform/config">
                <con1:id>_ActionId-5104174087533871913--2766aa1c.19668023274.-7fc6</con1:id>
                <con3:expr>
                  <con1:xqueryTransform>
                    <con1:resource ref="Middleware/Business_Resources/ConsultarTargetCliente/xlst/ConsultaCuentaT24Request"/>
                    <con1:param name="aCCOUNT_NUMBER1">
                      <con1:path>$accountNumber</con1:path>
                    </con1:param>
                    <con1:param name="autenticacionRequestHeader1">
                      <con1:path>$header/aut:AutenticacionRequestHeader</con1:path>
                    </con1:param>
                    <con1:param name="columnName">
                      <con1:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_T24_COLUMN_NAME"]/osb:VALUE/text())</con1:path>
                    </con1:param>
                  </con1:xqueryTransform>
                </con3:expr>
              </con6:assign>
            </con2:requestTransform>
            <con2:responseTransform/>
          </con2:wsCallout>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stageLogDetailParams">
        <con1:context>
          <con3:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
        </con1:context>
        <con1:actions>
          <con2:delete varName="getParamsResponse">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-673c</con3:id>
            <con2:location>
              <con3:xpathText>//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_T24_USER"]/osb:VALUE[1]/text()[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:delete varName="getParamsResponse">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-673b</con3:id>
            <con2:location>
              <con3:xpathText>//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_T24_PASSWORD"]/osb:VALUE[1]/text()[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:assign varName="detail">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-673a</con3:id>
            <con2:expr>
              <con3:xqueryTransform>
                <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/LogService_AddDetail"/>
                <con3:param name="date1">
                  <con3:path>data(fn:current-dateTime())</con3:path>
                </con3:param>
                <con3:param name="status1">
                  <con3:path>fn-bea:serialize($getParamsResponse//osb:ERROR_CODE[1]/text()[1])</con3:path>
                </con3:param>
                <con3:param name="request1">
                  <con3:path>fn-bea:serialize($getParamsRequest)</con3:path>
                </con3:param>
                <con3:param name="statusDetail1">
                  <con3:path>''</con3:path>
                </con3:param>
                <con3:param name="nameEndpoint1">
                  <con3:path>'getParamsDB'</con3:path>
                </con3:param>
                <con3:param name="response1">
                  <con3:path>fn-bea:serialize($getParamsResponse)</con3:path>
                </con3:param>
                <con3:param name="endpoint1">
                  <con3:path>'DATABASE'</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="details">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6739</con3:id>
            <con2:expr>
              <con3:xqueryText>concat(fn:codepoints-to-string(10)
,fn:codepoints-to-string(10)
,'getParametros:'
,fn:codepoints-to-string(10)
, fn-bea:serialize($detail))</con3:xqueryText>
            </con2:expr>
          </con2:assign>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stageLogDetailT24">
        <con1:context>
          <con3:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
        </con1:context>
        <con1:actions>
          <con2:delete varName="getTargetFromAccountT24Request">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-68e4</con3:id>
            <con2:location>
              <con3:xpathText>//userName[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:delete varName="getTargetFromAccountT24Request">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-68e6</con3:id>
            <con2:location>
              <con3:xpathText>//password[1]</con3:xpathText>
            </con2:location>
          </con2:delete>
          <con2:assign varName="detail">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6e22</con3:id>
            <con2:expr>
              <con3:xqueryTransform>
                <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/LogService_AddDetail"/>
                <con3:param name="date1">
                  <con3:path>data(fn:current-dateTime())</con3:path>
                </con3:param>
                <con3:param name="status1">
                  <con3:path>fn-bea:serialize($getTargetFromAccountT24Response//successIndicator[1]/text()[1])</con3:path>
                </con3:param>
                <con3:param name="request1">
                  <con3:path>fn-bea:serialize($getTargetFromAccountT24Request)</con3:path>
                </con3:param>
                <con3:param name="statusDetail1">
                  <con3:path>''</con3:path>
                </con3:param>
                <con3:param name="nameEndpoint1">
                  <con3:path>'ConsultaTargetClienteWar'</con3:path>
                </con3:param>
                <con3:param name="response1">
                  <con3:path>fn-bea:serialize($getTargetFromAccountT24Response)</con3:path>
                </con3:param>
                <con3:param name="endpoint1">
                  <con3:path>'t24'</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="details">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6e21</con3:id>
            <con2:expr>
              <con3:xqueryText>concat(fn-bea:serialize($details)
,fn:codepoints-to-string(10)
,fn:codepoints-to-string(10)
,'consultarTargetClienteWarT24:'
,fn:codepoints-to-string(10)
, fn-bea:serialize($detail))</con3:xqueryText>
            </con2:expr>
          </con2:assign>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="error" name="_onErrorHandler-4824463550064224945--408b89e4.195c9da815f.-7651">
      <con1:stage name="stageERRORWriteLogs">
        <con1:context>
          <con3:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
        </con1:context>
        <con1:actions>
          <con2:ifThenElse>
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6a15</con3:id>
            <con2:case>
              <con2:condition>
                <con3:xqueryText>$writeLogs = 'TRUE'</con3:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="logService">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6a14</con3:id>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/LogService"/>
                      <con3:param name="details1">
                        <con3:path>fn-bea:serialize($fault)</con3:path>
                      </con3:param>
                      <con3:param name="idServicio1">
                        <con3:path>'FICBCO0551'</con3:path>
                      </con3:param>
                      <con3:param name="date1">
                        <con3:path>data($initDate)</con3:path>
                      </con3:param>
                      <con3:param name="status1">
                        <con3:path>'ERROR'</con3:path>
                      </con3:param>
                      <con3:param name="request1">
                        <con3:path>concat(fn-bea:serialize($headerRequest),fn-bea:serialize($bodyRequest))</con3:path>
                      </con3:param>
                      <con3:param name="uuid1">
                        <con3:path>$uuid</con3:path>
                      </con3:param>
                      <con3:param name="response1">
                        <con3:path>concat(fn-bea:serialize(fn-bea:serialize($header)),fn-bea:serialize($body))</con3:path>
                      </con3:param>
                      <con3:param name="endpoint1">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_ENDPOINT"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:assign>
                <con2:replace varName="body" contents-only="true">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6a13</con3:id>
                  <con2:location>
                    <con3:xpathText>.</con3:xpathText>
                  </con2:location>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/SaveLogsDb"/>
                      <con3:param name="PV_TIPOMENSAJE">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDOSB">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_BANCODESTINO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_TARGET_BANK"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDOPERACION">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDTXN">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_USUARIO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_USER"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_MENSAJEERROR">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_UUID">
                        <con3:path>$uuid</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDSERVICIO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_ID_SERVICE"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_BANCOORIGEN">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_SOURCE_BANK"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_UUIDREQ">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PC_CONTENIDO">
                        <con3:path>fn-bea:serialize($logService)</con3:path>
                      </con3:param>
                      <con3:param name="PD_FECHATXN">
                        <con3:path>string(fn-bea:date-from-dateTime(fn:adjust-dateTime-to-timezone(data(fn:current-dateTime()),())))</con3:path>
                      </con3:param>
                      <con3:param name="PV_RESULTADO">
                        <con3:path>data($getTargetFromAccountT24Response//successIndicator[1])</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:replace>
                <con5:log>
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6850</con3:id>
                  <con5:logLevel>error</con5:logLevel>
                  <con5:expr>
                    <con3:xqueryText>&lt;LogDB>
    {fn-bea:serialize($logService)}
  &lt;/LogDB></con3:xqueryText>
                  </con5:expr>
                  <con5:message>Error 007 ConsultarTargetCliente</con5:message>
                </con5:log>
                <con4:route>
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6a12</con3:id>
                  <con4:service ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/biz/SaveLogsDB_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con4:operation>SaveLogsDB</con4:operation>
                  <con4:outboundTransform>
                    <con2:routing-options>
                      <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6a11</con3:id>
                      <con2:mode>request</con2:mode>
                      <con2:qualityOfService>best-effort</con2:qualityOfService>
                    </con2:routing-options>
                  </con4:outboundTransform>
                </con4:route>
              </con2:actions>
            </con2:case>
          </con2:ifThenElse>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stage1">
        <con1:context/>
        <con1:actions>
          <con2:replace varName="header">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6710</con3:id>
            <con2:expr>
              <con3:xqueryText>''</con3:xqueryText>
            </con2:expr>
          </con2:replace>
          <con3:reply isError="true">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-7537</con3:id>
          </con3:reply>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="PipelinePairNode1_response">
      <con1:stage name="stageWriteLogs">
        <con1:context>
          <con3:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
        </con1:context>
        <con1:actions>
          <con2:ifThenElse>
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-651b</con3:id>
            <con2:case>
              <con2:condition>
                <con3:xqueryText>$writeLogs = 'TRUE'</con3:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:replace varName="header" contents-only="true">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-651a</con3:id>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/ConsultarTargetCliente/xlst/ConsultarTargetClienteResponseHeader"/>
                      <con3:param name="consultaTargetClienteResponse1">
                        <con3:path>$getTargetFromAccountT24Response</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:replace>
                <con2:replace varName="body" contents-only="true">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6519</con3:id>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/ConsultarTargetCliente/xlst/ConsultarTargetClienteResponse"/>
                      <con3:param name="consultaTargetClienteResponse1">
                        <con3:path>$getTargetFromAccountT24Response</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:replace>
                <con2:assign varName="logService">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6518</con3:id>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/LogService"/>
                      <con3:param name="details1">
                        <con3:path>$details</con3:path>
                      </con3:param>
                      <con3:param name="idServicio1">
                        <con3:path>'FICBCO0551'</con3:path>
                      </con3:param>
                      <con3:param name="date1">
                        <con3:path>data($initDate)</con3:path>
                      </con3:param>
                      <con3:param name="status1">
                        <con3:path>'OK'</con3:path>
                      </con3:param>
                      <con3:param name="request1">
                        <con3:path>concat(fn-bea:serialize($headerRequest),fn-bea:serialize($bodyRequest))</con3:path>
                      </con3:param>
                      <con3:param name="uuid1">
                        <con3:path>$uuid</con3:path>
                      </con3:param>
                      <con3:param name="response1">
                        <con3:path>concat(fn-bea:serialize($header),fn-bea:serialize($body))</con3:path>
                      </con3:param>
                      <con3:param name="endpoint1">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_ENDPOINT"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:assign>
                <con5:log>
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6517</con3:id>
                  <con5:logLevel>info</con5:logLevel>
                  <con5:expr>
                    <con3:xqueryText>&lt;LogDB>
    {fn-bea:serialize($logService)}
  &lt;/LogDB></con3:xqueryText>
                  </con5:expr>
                  <con5:message>Error 007 ConsultarTargetCliente</con5:message>
                </con5:log>
                <con2:replace varName="body" contents-only="true">
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6516</con3:id>
                  <con2:location>
                    <con3:xpathText>.</con3:xpathText>
                  </con2:location>
                  <con2:expr>
                    <con3:xqueryTransform>
                      <con3:resource ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/xlst/SaveLogsDb"/>
                      <con3:param name="PV_TIPOMENSAJE">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDOSB">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_BANCODESTINO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_TARGET_BANK"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDOPERACION">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDTXN">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_USUARIO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_USER"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_MENSAJEERROR">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PV_UUID">
                        <con3:path>$uuid</con3:path>
                      </con3:param>
                      <con3:param name="PV_IDSERVICIO">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_ID_SERVICE"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_BANCOORIGEN">
                        <con3:path>fn:string($getParamsResponse//osb:CONFIGURACIONES//osb:CONFIGURACIONES_ITEM[osb:NAME="FICBCO0551_SIPAS_SOURCE_BANK"]/osb:VALUE/text())</con3:path>
                      </con3:param>
                      <con3:param name="PV_UUIDREQ">
                        <con3:path>''</con3:path>
                      </con3:param>
                      <con3:param name="PC_CONTENIDO">
                        <con3:path>fn-bea:serialize($logService)</con3:path>
                      </con3:param>
                      <con3:param name="PD_FECHATXN">
                        <con3:path>string(fn-bea:date-from-dateTime(fn:adjust-dateTime-to-timezone(data(fn:current-dateTime()),())))</con3:path>
                      </con3:param>
                      <con3:param name="PV_RESULTADO">
                        <con3:path>data($getTargetFromAccountT24Response//successIndicator[1])</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con2:expr>
                </con2:replace>
                <con4:route>
                  <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6515</con3:id>
                  <con4:service ref="Middleware/Business_Resources/general/SaveLogs_DB_Server/biz/SaveLogsDB_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con4:operation>SaveLogsDB</con4:operation>
                  <con4:outboundTransform>
                    <con2:routing-options>
                      <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6514</con3:id>
                      <con2:mode>request</con2:mode>
                      <con2:qualityOfService>best-effort</con2:qualityOfService>
                    </con2:routing-options>
                  </con4:outboundTransform>
                </con4:route>
              </con2:actions>
            </con2:case>
          </con2:ifThenElse>
        </con1:actions>
      </con1:stage>
      <con1:stage name="stageResponse">
        <con1:context/>
        <con1:actions>
          <con2:replace varName="header" contents-only="true">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-659a</con3:id>
            <con2:expr>
              <con3:xqueryTransform>
                <con3:resource ref="Middleware/Business_Resources/ConsultarTargetCliente/xlst/ConsultarTargetClienteResponseHeader"/>
                <con3:param name="consultaTargetClienteResponse1">
                  <con3:path>$getTargetFromAccountT24Response</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con2:expr>
          </con2:replace>
          <con2:replace varName="body" contents-only="true">
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-655f</con3:id>
            <con2:expr>
              <con3:xqueryTransform>
                <con3:resource ref="Middleware/Business_Resources/ConsultarTargetCliente/xlst/ConsultarTargetClienteResponse"/>
                <con3:param name="consultaTargetClienteResponse1">
                  <con3:path>$getTargetFromAccountT24Response</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con2:expr>
          </con2:replace>
          <con3:reply>
            <con3:id>_ActionId-4824463550064224945--408b89e4.195c9da815f.-6511</con3:id>
          </con3:reply>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:flow>
      <con1:pipeline-node name="PipelinePairNode1">
        <con1:request>PipelinePairNode1_request</con1:request>
        <con1:response>PipelinePairNode1_response</con1:response>
      </con1:pipeline-node>
    </con1:flow>
  </ser:router>
</xml-fragment>