<bpel:process name="sjConsultaSituacionFinancieraHNInterno" targetNamespace="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/flow/sjConsultaSituacionFinancieraHNInterno" bea:name="sjConsultaSituacionFinancieraHNInterno" xmlns:tns="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/flow/sjConsultaSituacionFinancieraHNInterno" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:rescon="http://www.bea.com/alsb/flow/resources/config" xmlns:bea="http://www.bea.com/bpel/ui/extensions" xmlns:ext="http://www.bea.com/bpel/extensions" xmlns:expr="http://www.bea.com/wli/sb/stages/config" xmlns:trf="http://www.bea.com/wli/sb/stages/transform/config" xmlns:bind="http://www.ficohsa.com.hn/middleware.services/sjConsultaSituacionFinancieraHNInternoPS" xmlns:ns0="http://www.ficohsa.com.hn/middleware.services/sjConsultaSituacionFinancieraPS" xmlns:ns1="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultaSituacionFinanciera/Project1/consultaSituacionFinanciera" xmlns:ns2="http://xmlns.oracle.com/pcbpel/adapter/db/ConsultaSituacionFinancieraFicopen/Project1/consultaSituacionFinanciera" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns3="T24WebServicesImpl" xmlns:ns4="http://www.ficohsa.com.hn/middleware.services/sjConsultaSituacionFinancieraInterno" xmlns:ns5="http://xmlns.oracle.com/pcbpel/adapter/db/Application1/Project1/consultaSituacionFinanciera" xmlns:ns6="http://xmlns.oracle.com/pcbpel/adapter/db/insertarSituacionFinanciera/Project1/insertarSituacionFinanciera" xmlns:aut="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:ins="http://xmlns.oracle.com/pcbpel/adapter/db/sp/insertarSituacionFinanciera" xmlns:ns7="http://xmlns.oracle.com/pcbpel/adapter/db/ConnectionTarjetas/conConsultaSituacionFinanciera/conConsultaSituacionFinanciera" xmlns:ns8="https://www.ficohsa.com/honduras/pension" xmlns:ns9="https://www.ficohsa.com/regional/pension">
    <bpel:partnerLinks>
        <bpel:partnerLink name="sjConsultaSituacionFinancieraHNInterno" partnerLinkType="tns:sjConsultaSituacionFinancieraHNInterno" myRole="sjConsultaSituacionFinancieraHNInterno">
	       </bpel:partnerLink>
	   <bpel:partnerLink name="consultaSituacionFinanciera_db" partnerLinkType="tns:consultaSituacionFinanciera_db_plnkType" partnerRole="consultaSituacionFinanciera_db_PartnerRole">
	   </bpel:partnerLink>
	   
	   
	   
	   <bpel:partnerLink name="consultaSituacionFinanciera_1" partnerLinkType="tns:consultaSituacionFinanciera_1_plnkType" partnerRole="consultaSituacionFinanciera_1_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="insertarSituacionFinanciera_db" partnerLinkType="tns:insertarSituacionFinanciera_db_plnkType" partnerRole="insertarSituacionFinanciera_db_PartnerRole">
	   </bpel:partnerLink>
	   
	<bpel:partnerLink name="sjConsultaClienteResiliencia"
		partnerLinkType="tns:sjConsultaClienteResiliencia_plnkType"
		partnerRole="sjConsultaClienteResiliencia_PartnerRole">
	</bpel:partnerLink>
	<bpel:partnerLink name="conConsultaSituacionFinanciera_db"
		partnerLinkType="tns:conConsultaSituacionFinanciera_db_plnkType"
		partnerRole="conConsultaSituacionFinanciera_db_PartnerRole">
	</bpel:partnerLink>
	<bpel:partnerLink name="consultaSituacionFinanciera12c"
		partnerLinkType="tns:consultaSituacionFinanciera12c_plnkType"
		partnerRole="consultaSituacionFinanciera12c_PartnerRole">
	</bpel:partnerLink></bpel:partnerLinks>

	   <bpel:variables>
        <bpel:variable name="request" messageType="bind:sjConsultaSituacionFinancieraHNInternoRequest">
	       </bpel:variable>
	       <bpel:variable name="response" messageType="bind:sjConsultaSituacionFinancieraHNInternoResponse">
	       </bpel:variable>
    <bpel:variable name="tempResponse" type="xsd:anyType"></bpel:variable>
    <bpel:variable name="core" type="xsd:anyType"></bpel:variable></bpel:variables>

    <bpel:sequence>
        <bpel:receive partnerLink="sjConsultaSituacionFinancieraHNInterno" operation="ConsultaSituacionFinancieraHNInterno" createInstance="yes" variable="request">
	           <rescon:receiveInfo>
                <rescon:wsdl ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/wsdl/sjConsultaSituacionFinancieraHNInterno" binding="bind:sjConsultaSituacionFinancieraHNInternoPSSOAP"/>
            </rescon:receiveInfo>
        </bpel:receive>
        
        
        
        <bpel:assign>
        	
        <bpel:extensionAssignOperation>
		<trf:assign varName="response.outputParameters">
			<trf:expr>
				<expr:xqueryText>&lt;sjConsultaSituacionFinancieraInternoTypes/&gt;</expr:xqueryText></trf:expr></trf:assign>
        </bpel:extensionAssignOperation></bpel:assign>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="tempResponse">
        			<trf:expr>
        				<expr:xqueryText>&lt;ResponseHeader&gt;
	&lt;responses/&gt;
&lt;/ResponseHeader&gt;</expr:xqueryText></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        </bpel:assign>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="core">
        			<trf:expr>
        				<expr:xqueryText>&lt;CORES&gt;
	&lt;CORE&gt;T24&lt;/CORE&gt;
	&lt;CORE&gt;ABK&lt;/CORE&gt;
	&lt;CORE&gt;VASA&lt;/CORE&gt;
	&lt;CORE&gt;FPC&lt;/CORE&gt;
&lt;/CORES&gt;</expr:xqueryText></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        </bpel:assign>
        <bpel:forEach parallel="yes" counterName="counter">
        	<bpel:startCounterValue>number(1)</bpel:startCounterValue>
        	<bpel:finalCounterValue>count($request.inputParameters/GROUPS/GROUP)</bpel:finalCounterValue>
        	<bpel:scope>
        		<bpel:sequence>
        			<bpel:forEach parallel="yes" counterName="counterCore">
        				<bpel:startCounterValue>number(1)</bpel:startCounterValue>
        				<bpel:finalCounterValue>count($core/CORE)</bpel:finalCounterValue>
        				<bpel:scope>
        					<bpel:variables>
        						<bpel:variable name="currentCore"
        							type="xsd:string">
        						</bpel:variable></bpel:variables>
        					
        					<bpel:faultHandlers>
        						<bpel:catchAll>
        							<bpel:sequence>
        								<bpel:empty></bpel:empty>
        							<bpel:assign>
		<bpel:extensionAssignOperation>
			<trf:insert varName="tempResponse">
				<trf:location>
					<expr:xpathText>./responses</expr:xpathText></trf:location>
				<trf:where>last-child</trf:where>
				<trf:expr>
					<expr:xqueryText>&lt;response&gt;
	&lt;successIndicator&gt;ERROR&lt;/successIndicator&gt;
	&lt;messages&gt;{ concat('Error insertando registro en ', $currentCore, ' HN01') }&lt;/messages&gt;
&lt;/response&gt;</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign></bpel:sequence>
        						</bpel:catchAll></bpel:faultHandlers>
        					<bpel:sequence>
        						<bpel:assign>
        							<bpel:extensionAssignOperation>
        								<trf:assign varName="currentCore">
        									<trf:expr>
        										<expr:xqueryText>$core/CORE[xs:integer($counterCore)]</expr:xqueryText></trf:expr></trf:assign>
        							</bpel:extensionAssignOperation>
        						</bpel:assign>
        						<bpel:if bea:branchLabel="T24">
        							<bpel:condition>$currentCore = &quot;T24&quot;</bpel:condition>
        							<bpel:sequence>
        								<bpel:empty></bpel:empty>
        							<bpel:scope>
		<bpel:variables>
			<bpel:variable name="group" type="ns4:GROUP"></bpel:variable>
			<bpel:variable messageType="ns3:ConsultaSituacionFinanciera"
				name="REQConsultaSituacionFinanciera"></bpel:variable>
			<bpel:variable
				messageType="ns3:ConsultaSituacionFinancieraResponse"
				name="RSPConsultaSituacionFinanciera"></bpel:variable>
			<bpel:variable messageType="ns6:args_in_msg"
				name="REQInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable messageType="ns6:args_out_msg"
				name="RSPInsertarSituacionFinanciera"></bpel:variable></bpel:variables>
		<bpel:faultHandlers>
			<bpel:catchAll>
				<bpel:sequence>
					<bpel:empty></bpel:empty>
					
					<bpel:rethrow></bpel:rethrow>
					<bpel:exit></bpel:exit></bpel:sequence></bpel:catchAll></bpel:faultHandlers>
		<bpel:sequence>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="group">
							<trf:assign varName="group">
								<trf:expr>
									<expr:xqueryText>$request.inputParameters/GROUPS/GROUP[xs:integer($counter)]</expr:xqueryText></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQConsultaSituacionFinancieraT24">
							<trf:assign
								varName="REQConsultaSituacionFinanciera.parameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/sjConsultaSituacionFinancieraT24In"></expr:resource>
										<expr:param
											name="requestHeader">
											<expr:path>$request.RequestHeader</expr:path></expr:param>
										<expr:param name="group">
											<expr:path>$group</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke
						bea:name="ConsultaSituacionFinancieraT24"
						inputVariable="REQConsultaSituacionFinanciera"
						outputVariable="RSPConsultaSituacionFinanciera"
						partnerLink="consultaSituacionFinanciera_1"
						operation="ConsultaSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/T24/consultaSituacionFinanciera/biz/consultaSituacionFinanciera"></rescon:service></rescon:invokeInfo></bpel:invoke></bpel:sequence></bpel:scope>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQInsertarSituacionFinanicera">
							<trf:assign
								varName="REQInsertarSituacionFinanciera.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/insertarSituacionFinancieraT24In"></expr:resource>
										<expr:param
											name="consultaSituacionFinancieraResponse">
											<expr:path>$RSPConsultaSituacionFinanciera.parameters</expr:path></expr:param>
										<expr:param
											name="referenciaLlave">
											<expr:path>fn:string($request.inputParameters/UUID/text())</expr:path></expr:param>
										<expr:param name="usuario">
											<expr:path>fn:string($request.RequestHeader/Authentication/UserName/text())</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke bea:name="InsertarSituacionFinanicera"
						outputVariable="RSPInsertarSituacionFinanciera"
						inputVariable="REQInsertarSituacionFinanciera"
						partnerLink="insertarSituacionFinanciera_db"
						operation="insertarSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/INTFC/insertarSituacionFinanciera/biz/insertarSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="InserccionSituacionFinancieraT24">
							<trf:insert varName="tempResponse">
								<trf:location>
									<expr:xpathText>./responses</expr:xpathText></trf:location>
								<trf:where>last-child</trf:where>
								<trf:expr>
									<expr:xqueryText>&lt;response&gt;
	&lt;successIndicator&gt;{ fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_SUCCESS_INDICADOR/text()) } &lt;/successIndicator&gt;
	&lt;messages&gt;{ concat('HN01: ', fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_MENSAJE_ERROR/text())) } &lt;/messages&gt;
&lt;/response&gt;</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign></bpel:sequence></bpel:scope></bpel:sequence></bpel:scope></bpel:sequence>
        							<bpel:elseif bea:name="ABK">
        								<bpel:condition>$currentCore = &quot;ABK&quot;</bpel:condition>
        								<bpel:sequence>
        									<bpel:empty></bpel:empty>
        								<bpel:scope>
		<bpel:variables>
			<bpel:variable messageType="ns1:args_in_msg"
				name="REQConsultaSituacionFinancieraAbanksHN"></bpel:variable>
			<bpel:variable messageType="ns1:args_out_msg"
				name="RSPConsultaSituacionFinancieraAbanksHN"></bpel:variable>
			<bpel:variable name="group" type="ns4:GROUP"></bpel:variable>
			<bpel:variable messageType="ns6:args_in_msg"
				name="REQInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable messageType="ns6:args_out_msg"
				name="RSPInsertarSituacionFinanciera"></bpel:variable></bpel:variables>
		<bpel:faultHandlers>
			<bpel:catchAll>
				<bpel:sequence>
					<bpel:empty></bpel:empty>
					
					<bpel:rethrow></bpel:rethrow>
					<bpel:exit></bpel:exit></bpel:sequence></bpel:catchAll></bpel:faultHandlers>
		<bpel:sequence>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="group">
							<trf:assign varName="group">
								<trf:expr>
									<expr:xqueryText>$request.inputParameters/GROUPS/GROUP[xs:integer($counter)]</expr:xqueryText></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQConsultaSituacionFinancieraAbanksHN">
							<trf:assign
								varName="REQConsultaSituacionFinancieraAbanksHN.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/sjConsultaSituacionFinancieraAbanksHNIn"></expr:resource>
										<expr:param name="group">
											<expr:path>$group</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke
						bea:name="consultaSituacionFinancieraAbanksHN"
						outputVariable="RSPConsultaSituacionFinancieraAbanksHN"
						inputVariable="REQConsultaSituacionFinancieraAbanksHN"
						partnerLink="consultaSituacionFinanciera_db"
						operation="consultaSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/ABK/consultaSituacionFinanciera/biz/consultaSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke></bpel:sequence></bpel:scope>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQInsertarSituacionFinanicera">
							<trf:assign
								varName="REQInsertarSituacionFinanciera.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/insertarSituacionFinancieraAbanksHNIn"></expr:resource>
										<expr:param
											name="outputParameters">
											<expr:path>$RSPConsultaSituacionFinancieraAbanksHN.OutputParameters</expr:path></expr:param>
										<expr:param
											name="referenciaLlave">
											<expr:path>fn:string($request.inputParameters/UUID/text())</expr:path></expr:param>
										<expr:param name="usuario">
											<expr:path>fn:string($request.RequestHeader/Authentication/UserName/text())</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke bea:name="InsertarSituacionFinanciera"
						inputVariable="REQInsertarSituacionFinanciera"
						outputVariable="RSPInsertarSituacionFinanciera"
						partnerLink="insertarSituacionFinanciera_db"
						operation="insertarSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/INTFC/insertarSituacionFinanciera/biz/insertarSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="InserccionSituacionFinancieraAbanksHN">
							<trf:insert varName="tempResponse">
								<trf:location>
									<expr:xpathText>./responses</expr:xpathText></trf:location>
								<trf:where>last-child</trf:where>
								<trf:expr>
									<expr:xqueryText>&lt;response&gt;
	&lt;successIndicator&gt;{ fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_SUCCESS_INDICADOR/text()) } &lt;/successIndicator&gt;
	&lt;messages&gt;{ concat('HN01: ', fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_MENSAJE_ERROR/text())) } &lt;/messages&gt;
&lt;/response&gt;</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign></bpel:sequence></bpel:scope></bpel:sequence></bpel:scope></bpel:sequence>
        							</bpel:elseif>
        							<bpel:elseif bea:name="VASA">
        								<bpel:condition>$currentCore = &quot;VASA&quot;</bpel:condition>
        								<bpel:sequence>
        									<bpel:empty></bpel:empty>
        								<bpel:scope>
		<bpel:variables>
			<bpel:variable name="group" type="ns4:GROUP"></bpel:variable>
			
			
			<bpel:variable messageType="ns6:args_in_msg"
				name="REQInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable messageType="ns6:args_out_msg"
				name="RSPInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable name="REQConsultaSituacionFinanciera"
				messageType="ns7:args_in_msg">
			</bpel:variable>
			<bpel:variable name="RSPConsultaSituacionFinanciera"
				messageType="ns7:args_out_msg">
			</bpel:variable></bpel:variables>
		<bpel:faultHandlers>
			<bpel:catchAll>
				<bpel:sequence>
					<bpel:empty></bpel:empty>
					
					
					
					<bpel:rethrow></bpel:rethrow>
					<bpel:exit></bpel:exit></bpel:sequence></bpel:catchAll></bpel:faultHandlers>
		<bpel:sequence>
			<bpel:scope>
				
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="group">
							<trf:assign varName="group">
								<trf:expr>
									<expr:xqueryText>$request.inputParameters/GROUPS/GROUP[xs:integer($counter)]</expr:xqueryText></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQConsultaSituacionFinancieraVasa">
							<trf:assign
								varName="REQConsultaSituacionFinanciera.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/sjConsultaSituacionFinancieraMasterDataIn"></expr:resource>
										<expr:param name="group">
											<expr:path>$group</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke
						bea:name="consultaSituacionFinancieraVasa"
						partnerLink="conConsultaSituacionFinanciera_db"
						operation="conConsultaSituacionFinanciera" inputVariable="REQConsultaSituacionFinanciera" outputVariable="RSPConsultaSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/MasterDataHN/conConsultaSituacionFinanciera/biz/conConsultaSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke></bpel:sequence></bpel:scope>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						
						<bpel:extensionAssignOperation>
							<trf:assign varName="REQInsertarSituacionFinanciera.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/insertarSituacionFinancieraMasterDataIn"></expr:resource>
										
										
										
										
										<expr:param name="usuario">
											<expr:path>fn:string($request.RequestHeader/Authentication/UserName/text())</expr:path></expr:param>
										<expr:param name="referenciaLlave">
											<expr:path>fn:string($request.inputParameters/UUID/text())</expr:path></expr:param>
										<expr:param name="outputParameters1">
											<expr:path>$RSPConsultaSituacionFinanciera.OutputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
						</bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke bea:name="InsertarSituacionFinanicera"
						outputVariable="RSPInsertarSituacionFinanciera"
						inputVariable="REQInsertarSituacionFinanciera"
						partnerLink="insertarSituacionFinanciera_db"
						operation="insertarSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/INTFC/insertarSituacionFinanciera/biz/insertarSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="InserccionSituacionFinancieraProxyVasa">
							<trf:insert varName="tempResponse">
								<trf:location>
									<expr:xpathText>./responses</expr:xpathText></trf:location>
								<trf:where>last-child</trf:where>
								<trf:expr>
									<expr:xqueryText>&lt;response&gt;
	&lt;successIndicator&gt;{ fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_SUCCESS_INDICADOR/text()) } &lt;/successIndicator&gt;
	&lt;messages&gt;{ concat('HN01: ', fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_MENSAJE_ERROR/text())) } &lt;/messages&gt;
&lt;/response&gt;</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign></bpel:sequence></bpel:scope></bpel:sequence></bpel:scope></bpel:sequence>
        							</bpel:elseif>
        							<bpel:elseif bea:name="FPC">
        								<bpel:condition>$currentCore = &quot;FPC&quot;</bpel:condition>
        								<bpel:sequence>
        									<bpel:empty></bpel:empty>
        								<bpel:scope>
		<bpel:variables>
			<bpel:variable name="group" type="ns4:GROUP"></bpel:variable>
			
			
			<bpel:variable messageType="ns6:args_in_msg"
				name="REQInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable messageType="ns6:args_out_msg"
				name="RSPInsertarSituacionFinanciera"></bpel:variable>
			<bpel:variable name="REQsjConsultadecliente"
				messageType="ns3:sjConsultadecliente">
			</bpel:variable>
			<bpel:variable name="RSPsjConsultadecliente"
				messageType="ns3:sjConsultadeclienteResponse">
			</bpel:variable>
			<bpel:variable name="REQGetFinancialSituation" messageType="ns9:requestMessage">
			</bpel:variable>
			<bpel:variable name="RSPGetFinancialSituation" messageType="ns9:replyMessage">
			</bpel:variable></bpel:variables>
		<bpel:faultHandlers>
			<bpel:catchAll>
				<bpel:sequence>
					<bpel:empty></bpel:empty>
					
					<bpel:rethrow></bpel:rethrow>
					<bpel:exit></bpel:exit></bpel:sequence></bpel:catchAll></bpel:faultHandlers>
		<bpel:sequence>
			
			<bpel:scope>
				
				
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="group">
							<trf:assign varName="group">
								<trf:expr>
									<expr:xqueryText>$request.inputParameters/GROUPS/GROUP[xs:integer($counter)]</expr:xqueryText></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:assign>
						<bpel:extensionAssignOperation bea:name="REQConsultadecliente">
							<trf:assign varName="REQsjConsultadecliente.parameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/sjConsultaClienteIn"></expr:resource>
										
										<expr:param name="requestHeader">
											<expr:path>$request.RequestHeader</expr:path></expr:param>
										<expr:param name="group">
											<expr:path>$group</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
						</bpel:extensionAssignOperation>
					</bpel:assign>
					
					
					<bpel:invoke outputVariable="RSPsjConsultadecliente"
						inputVariable="REQsjConsultadecliente"
						partnerLink="sjConsultaClienteResiliencia"
						operation="Consultadecliente">
						<rescon:invokeInfo>
							<rescon:flow
								ref="Middleware/v3/BusinessServices/ConsultasCliente/flow/sjConsultaClienteResiliencia"></rescon:flow></rescon:invokeInfo></bpel:invoke>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQConsultaSituacionFinanciera12c">
							<trf:assign
								varName="REQGetFinancialSituation.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/getFinancialSituationIn"></expr:resource>
										
										
										
										
										<expr:param name="consultadeclienteResponse">
											<expr:path>$RSPsjConsultadecliente.parameters</expr:path></expr:param>
										<expr:param name="requestHeader">
											<expr:path>$request.RequestHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
						<bpel:extensionAssignOperation bea:name="REQConsultaSituacionFinancieraHeader12c">
							<trf:assign varName="REQGetFinancialSituation.RequestHeader">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/getFinancialSituationHeaderIn"></expr:resource>
										
										<expr:param name="serviceAccountName">
											<expr:path>'OSB12AUTH'</expr:path></expr:param>
										<expr:param name="requestHeader">
											<expr:path>$request.RequestHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
						</bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke
						bea:name="consultaSituacionFinanciera12c"
						partnerLink="consultaSituacionFinanciera12c"
						operation="getFinancialSituation" inputVariable="REQGetFinancialSituation" outputVariable="RSPGetFinancialSituation">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/FPC/consultaSituacionFinanciera12c/biz/consultaSituacionFinanciera12c"></rescon:service></rescon:invokeInfo></bpel:invoke></bpel:sequence></bpel:scope>
			<bpel:scope>
				<bpel:sequence>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="REQInsertarSituacionFinanicera">
							<trf:assign
								varName="REQInsertarSituacionFinanciera.InputParameters">
								<trf:expr>
									<expr:xqueryTransform>
										<expr:resource
											ref="Middleware/v2/BusinessServices/SJS/consultaSituacionFinancieraInternoHN/xq/insertarSituacionFinancieraFPCIn"></expr:resource>
										
										
										<expr:param name="usuario">
											<expr:path>fn:string($request.RequestHeader/Authentication/UserName/text())</expr:path></expr:param>
										<expr:param name="outputParameters">
											<expr:path>$RSPGetFinancialSituation.OutputParameters</expr:path></expr:param>
										<expr:param name="referenciaLlave">
											<expr:path>fn:string($request.inputParameters/UUID/text())</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
					<bpel:invoke bea:name="InsertarSituacionFinanicera"
						outputVariable="RSPInsertarSituacionFinanciera"
						inputVariable="REQInsertarSituacionFinanciera"
						partnerLink="insertarSituacionFinanciera_db"
						operation="insertarSituacionFinanciera">
						<rescon:invokeInfo>
							<rescon:service isProxy="false"
								ref="Middleware/v2/BusinessServices/INTFC/insertarSituacionFinanciera/biz/insertarSituacionFinanciera_db"></rescon:service></rescon:invokeInfo></bpel:invoke>
					<bpel:assign>
						<bpel:extensionAssignOperation
							bea:name="InserccionSituacionFinancieraFicopen">
							<trf:insert varName="tempResponse">
								<trf:location>
									<expr:xpathText>./responses</expr:xpathText></trf:location>
								<trf:where>last-child</trf:where>
								<trf:expr>
									<expr:xqueryText>&lt;response&gt;
	&lt;successIndicator&gt;{ fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_SUCCESS_INDICADOR/text()) } &lt;/successIndicator&gt;
	&lt;messages&gt;{ concat('HN01: ', fn:string($RSPInsertarSituacionFinanciera.OutputParameters/ins:PV_MENSAJE_ERROR/text())) } &lt;/messages&gt;
&lt;/response&gt;</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign></bpel:sequence></bpel:scope></bpel:sequence></bpel:scope></bpel:sequence>
        							</bpel:elseif>
        							<bpel:else>
        								<bpel:sequence>
        									<bpel:empty></bpel:empty>
        								</bpel:sequence>
        							</bpel:else>
        						</bpel:if></bpel:sequence>
        				</bpel:scope>
        			</bpel:forEach>
        			</bpel:sequence>
        	</bpel:scope>
        </bpel:forEach>
        
        <bpel:assign>
        	
        <bpel:extensionAssignOperation>
		<trf:assign varName="response.ResponseHeader">
			<trf:expr>
				<expr:xqueryText>&lt;aut:ResponseHeader&gt;
	&lt;successIndicator&gt;
		{
			let $numberErrors := count($tempResponse/responses/response[fn:upper-case(successIndicator) != 'SUCCESS'])
			return
				if($numberErrors = 0) then(
					'SUCCESS'
				)else(
					'ERROR'
				)
    	}
	&lt;/successIndicator&gt;
	&lt;messages&gt;{ fn:string-join($tempResponse/responses/response/messages, '. ') }&lt;/messages&gt;
&lt;/aut:ResponseHeader&gt;</expr:xqueryText></trf:expr></trf:assign>
        </bpel:extensionAssignOperation></bpel:assign>
        
        <bpel:reply partnerLink="sjConsultaSituacionFinancieraHNInterno" operation="ConsultaSituacionFinancieraHNInterno" variable="response"/>
    </bpel:sequence>
</bpel:process>