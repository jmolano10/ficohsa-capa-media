<?xml version="1.0" encoding="UTF-8"?>
<bpel:process name="sjConsultaActivosPasivosCliente"
              targetNamespace="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/flow/sjConsultaActivosPasivosCliente"
              xmlns:tns="http://www.example.com/flow/Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/flow/sjConsultaActivosPasivosCliente"
              xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
              xmlns:rescon="http://www.bea.com/alsb/flow/resources/config"
              xmlns:bea="http://www.bea.com/bpel/ui/extensions"
              xmlns:ext="http://www.bea.com/bpel/extensions"
              xmlns:expr="http://www.bea.com/wli/sb/stages/config"
              xmlns:trf="http://www.bea.com/wli/sb/stages/transform/config"
              xmlns:bind="http://www.ficohsa.com.hn/middleware.services/sjConsultaActivosPasivosClientePS" 
              bea:name="sjConsultaActivosPasivosCliente" xmlns:ns1="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:ns0="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns2="http://www.ficohsa.com.hn/middleware.services/consultaActivosClientePS/" xmlns:ns3="http://www.ficohsa.com.hn/middleware.services/consultaPasivosClientePS/" xmlns:sjc="http://www.ficohsa.com.hn/middleware.services/sjConsultaActivosPasivosCliente">
    <rescon:importInfo>
    	<rescon:schema-import
    		ref="Middleware/v2/Resources/esquemas_generales/HeaderElements">
    	</rescon:schema-import>
    	<rescon:schema-import
    		ref="Middleware/v2/Resources/ConsultaActivosCliente/xsd/consultaClientesTypes">
    	</rescon:schema-import>
    	<rescon:schema-import
    		ref="Middleware/v2/Resources/ConsultaPasivosCliente/xsd/consultaPasivosClienteTypes">
    	</rescon:schema-import>
    	<rescon:wsdl-import
    		ref="Middleware/v2/Resources/ConsultaPasivosCliente/wsdl/consultaPasivosClientePS">
    	</rescon:wsdl-import></rescon:importInfo>
    <bpel:partnerLinks>
        <bpel:partnerLink name="sjConsultaActivosPasivosCliente" partnerLinkType="tns:sjConsultaActivosPasivosCliente"
                          myRole="sjConsultaActivosPasivosCliente">
	       </bpel:partnerLink>
	   <bpel:partnerLink name="ConsultaActivosCliente"
		partnerLinkType="tns:ConsultaActivosCliente_plnkType"
		partnerRole="ConsultaActivosCliente_PartnerRole">
	   </bpel:partnerLink>
	   <bpel:partnerLink name="ConsultaPasivosCliente"
	   	partnerLinkType="tns:ConsultaPasivosCliente_plnkType"
	   	partnerRole="ConsultaPasivosCliente_PartnerRole">
	   </bpel:partnerLink></bpel:partnerLinks>

	   <bpel:variables>
        <bpel:variable name="request"
	                      messageType="bind:sjConsultaActivosPasivosClienteRequest">
	       </bpel:variable>
	       <bpel:variable name="response"
                       messageType="bind:sjConsultaActivosPasivosClienteResponse">
	       </bpel:variable>
    
    
    <bpel:variable name="REQActivosCliente" messageType="ns2:consultaActivosClienteRequest">
    </bpel:variable>
    <bpel:variable name="RSPActivosCliente" messageType="ns2:consultaActivosClienteResponse">
    </bpel:variable>
    <bpel:variable name="REQPasivosCliente" messageType="ns3:consultaPasivosClienteRequest">
    </bpel:variable>
    <bpel:variable name="RSPPasivosCliente" messageType="ns3:consultaPasivosClienteResponse">
    </bpel:variable>
    <bpel:variable name="Type" type="xsd:string"></bpel:variable></bpel:variables>

    <bpel:sequence>
        <bpel:receive partnerLink="sjConsultaActivosPasivosCliente" operation="ConsultaActivosPasivosCliente" variable="request" createInstance="yes">
	           <rescon:receiveInfo>
                <rescon:wsdl ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/wsdl/sjConsultaActivosPasivosCliente" binding="bind:sjConsultaActivosPasivosClientePSSOAP"/>
            </rescon:receiveInfo>
        </bpel:receive>
        <bpel:assign>
        	<bpel:extensionAssignOperation>
        		<trf:assign varName="response.outputParameters">
        			<trf:expr>
        				<expr:xqueryText>&lt;outputParameters&gt;
    &lt;sjc:ASSETS_STATUS/&gt;
	&lt;sjc:ASSETS_INFORMATION/&gt;
	&lt;sjc:LIABILITIES_STATUS/&gt;
	&lt;sjc:LIABILITIES_INFORMATION/&gt;
&lt;/outputParameters&gt;</expr:xqueryText></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        	<bpel:extensionAssignOperation ext:txnPropagation="Supports">
        		<trf:assign varName="Type">
        			<trf:expr>
        				<expr:xqueryText>$request.inputParameters/sjc:TYPE/text()</expr:xqueryText></trf:expr></trf:assign>
        	</bpel:extensionAssignOperation>
        </bpel:assign>
        <bpel:if>
        	<bpel:condition>$Type='ASSET/LYBILITY'</bpel:condition>
        	<bpel:sequence>
        		<bpel:empty></bpel:empty>
        	<bpel:flow>
		<bpel:scope>
			<bpel:variables>
				<bpel:variable name="Assets" type="xsd:anyType"></bpel:variable>
				<bpel:variable name="AssetsStatus" type="xsd:anyType"></bpel:variable></bpel:variables>
			<bpel:sequence>
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<bpel:documentation></bpel:documentation>
						<trf:assign
							varName="REQActivosCliente.RequestHeader">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource
										ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosPasivosClienteHeaderIN"></expr:resource>
									<expr:param
										name="sjConsultaActivosPasivosClienteIN">
										<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
					<bpel:extensionAssignOperation>
						<bpel:documentation></bpel:documentation>
						<trf:assign
							varName="REQActivosCliente.parameters">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource
										ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteIN"></expr:resource>
									<expr:param
										name="sjConsultaActivosPasivosClienteIN">
										<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
				<bpel:invoke operation="consultaActivosCliente" partnerLink="ConsultaActivosCliente" ext:txnPropagation="Supports" inputVariable="REQActivosCliente" outputVariable="RSPActivosCliente">
					<rescon:invokeInfo>
						<rescon:service isProxy="true" ref="Middleware/v2/ProxyServices/ConsultaActivosCliente"></rescon:service></rescon:invokeInfo></bpel:invoke>
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<trf:assign varName="AssetsStatus">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteHeaderOUT"></expr:resource>
									<expr:param name="responseHeaderIN">
										<expr:path>$RSPActivosCliente.ResponseHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
					</bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
		<trf:insert varName="response.outputParameters">
			<trf:location>
				<expr:xpathText>./sjc:ASSETS_STATUS</expr:xpathText></trf:location>
			<trf:where>last-child</trf:where>
		<trf:expr>
			<expr:xqueryText>$AssetsStatus/sjc:ASSETS_STATUS/sjc:STATUS</expr:xqueryText></trf:expr></trf:insert>
				</bpel:extensionAssignOperation></bpel:assign>
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<trf:assign varName="Assets">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteOUT"></expr:resource>
									<expr:param name="consultaActivosClienteResponseOUT">
										<expr:path>$RSPActivosCliente.result</expr:path></expr:param>
									<expr:param name="TypeSerch">
										<expr:path>$request.inputParameters/sjc:ASSET_TYPE/text()</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
					</bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
		<bpel:documentation></bpel:documentation>
		<trf:insert varName="response.outputParameters">
			<trf:location>
				<expr:xpathText>./sjc:ASSETS_INFORMATION</expr:xpathText></trf:location>
			<trf:where>last-child</trf:where>
			<trf:expr>
				<expr:xqueryText>$Assets/sjc:ASSETS_INFORMATION/sjc:ASSET</expr:xqueryText></trf:expr></trf:insert>
				</bpel:extensionAssignOperation></bpel:assign>
				</bpel:sequence>
		</bpel:scope>
		<bpel:scope>
			<bpel:variables>
				<bpel:variable name="Liabilities" type="xsd:anyType"></bpel:variable>
				<bpel:variable name="LiabilitieStatus"
					type="xsd:anyType">
				</bpel:variable>
				</bpel:variables>
			<bpel:sequence>
				
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<bpel:documentation></bpel:documentation>
						<trf:assign
							varName="REQPasivosCliente.RequestHeader">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource
										ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosPasivosClienteHeaderIN"></expr:resource>
									<expr:param
										name="sjConsultaActivosPasivosClienteIN">
										<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
					<bpel:extensionAssignOperation>
						<trf:assign
							varName="REQPasivosCliente.parameters">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource
										ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteIN"></expr:resource>
									<expr:param
										name="sjConsultaActivosPasivosClienteIN">
										<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
				<bpel:invoke operation="consultaPasivosCliente" partnerLink="ConsultaPasivosCliente" ext:txnPropagation="Supports" inputVariable="REQPasivosCliente" outputVariable="RSPPasivosCliente">
					<rescon:invokeInfo>
						<rescon:service isProxy="true" ref="Middleware/v2/ProxyServices/ConsultaPasivosCliente"></rescon:service></rescon:invokeInfo></bpel:invoke>
				
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<trf:assign varName="LiabilitieStatus">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource
										ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteHeaderOUT"></expr:resource>
									<expr:param
										name="responseHeaderIN">
										<expr:path>$RSPPasivosCliente.ResponseHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
					<bpel:extensionAssignOperation>
						<trf:insert
							varName="response.outputParameters">
							<trf:location>
								<expr:xpathText>./sjc:LIABILITIES_STATUS</expr:xpathText></trf:location>
							<trf:where>last-child</trf:where>
							<trf:expr>
								<expr:xqueryText>$LiabilitieStatus/sjc:LIABILITIES_STATUS/sjc:STATUS</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign>
				<bpel:assign>
					<bpel:extensionAssignOperation>
						<trf:assign varName="Liabilities">
							<trf:expr>
								<expr:xqueryTransform>
									<expr:resource ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteOUT"></expr:resource>
									
									<expr:param name="consultaPasivosClienteResponseOUT">
										<expr:path>$RSPPasivosCliente.result</expr:path></expr:param>
									<expr:param name="TypeSerch">
										<expr:path>$request.inputParameters/sjc:LIABILITY_TYPE/text()</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign>
					</bpel:extensionAssignOperation>
				
	<bpel:extensionAssignOperation>
		<bpel:documentation></bpel:documentation>
		<trf:insert varName="response.outputParameters">
			<trf:location>
				<expr:xpathText>./sjc:LIABILITIES_INFORMATION</expr:xpathText></trf:location>
			<trf:where>last-child</trf:where>
			<trf:expr>
				<expr:xqueryText>$Liabilities/sjc:LIABILITIES_INFORMATION/sjc:LIABILITIY</expr:xqueryText></trf:expr></trf:insert>
				</bpel:extensionAssignOperation></bpel:assign>
				</bpel:sequence>
		</bpel:scope>
        	</bpel:flow>
        	</bpel:sequence>
        	<bpel:elseif>
        		<bpel:condition>$Type='ASSET'</bpel:condition>
        		<bpel:sequence>
        			<bpel:empty></bpel:empty>
        		<bpel:scope>
		<bpel:variables>
			<bpel:variable name="Assets" type="xsd:anyType"></bpel:variable>
			<bpel:variable name="AssetsStatus" type="xsd:anyType"></bpel:variable></bpel:variables>
	<bpel:sequence>
			
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<bpel:documentation></bpel:documentation>
					<trf:assign
						varName="REQActivosCliente.RequestHeader">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosPasivosClienteHeaderIN"></expr:resource>
								<expr:param
									name="sjConsultaActivosPasivosClienteIN">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<bpel:documentation></bpel:documentation>
					<trf:assign
						varName="REQActivosCliente.parameters">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteIN"></expr:resource>
								<expr:param
									name="sjConsultaActivosPasivosClienteIN">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
			
			
			
			<bpel:invoke partnerLink="ConsultaActivosCliente"
				inputVariable="REQActivosCliente" operation="consultaActivosCliente"
				outputVariable="RSPActivosCliente">
				<rescon:invokeInfo>
					<rescon:service isProxy="true"
						ref="Middleware/v2/ProxyServices/ConsultaActivosCliente"></rescon:service></rescon:invokeInfo></bpel:invoke>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="AssetsStatus">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteHeaderOUT"></expr:resource>
								<expr:param name="responseHeaderIN">
									<expr:path>$RSPActivosCliente.ResponseHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<trf:insert varName="response.outputParameters">
						<trf:location>
							<expr:xpathText>./sjc:ASSETS_STATUS</expr:xpathText></trf:location>
						<trf:where>last-child</trf:where>
						<trf:expr>
							<expr:xqueryText>$AssetsStatus/sjc:ASSETS_STATUS/sjc:STATUS</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="Assets">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosClienteOUT"></expr:resource>
								<expr:param name="consultaActivosClienteResponseOUT">
									<expr:path>$RSPActivosCliente.result</expr:path></expr:param>
								<expr:param name="TypeSerch">
									<expr:path>$request.inputParameters/sjc:ASSET_TYPE/text()</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<bpel:documentation></bpel:documentation>
					<trf:insert varName="response.outputParameters">
						<trf:location>
							<expr:xpathText>./sjc:ASSETS_INFORMATION</expr:xpathText></trf:location>
						<trf:where>last-child</trf:where>
						<trf:expr>
							<expr:xqueryText>$Assets/sjc:ASSETS_INFORMATION/sjc:ASSET</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign>
			
			
			
			</bpel:sequence>
        		</bpel:scope>
	
	
	</bpel:sequence>
        	</bpel:elseif>
        	<bpel:elseif>
        		<bpel:condition>$Type='LIABILITY'</bpel:condition>
        		<bpel:sequence>
        			<bpel:empty></bpel:empty>
        		
        		
        		<bpel:scope>
		<bpel:variables>
			<bpel:variable name="Liabilities" type="xsd:anyType"></bpel:variable>
			<bpel:variable name="LiabilitieStatus" type="xsd:anyType"></bpel:variable></bpel:variables>
	<bpel:sequence>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<bpel:documentation></bpel:documentation>
					<trf:assign
						varName="REQPasivosCliente.RequestHeader">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaActivosPasivosClienteHeaderIN"></expr:resource>
								<expr:param
									name="sjConsultaActivosPasivosClienteIN">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<trf:assign
						varName="REQPasivosCliente.parameters">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteIN"></expr:resource>
								<expr:param
									name="sjConsultaActivosPasivosClienteIN">
									<expr:path>$request.inputParameters</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation></bpel:assign>
			
			
			<bpel:invoke inputVariable="REQPasivosCliente"
				partnerLink="ConsultaPasivosCliente"
				operation="consultaPasivosCliente"
				outputVariable="RSPPasivosCliente">
				<rescon:invokeInfo>
					<rescon:service isProxy="true"
						ref="Middleware/v2/ProxyServices/ConsultaPasivosCliente"></rescon:service></rescon:invokeInfo></bpel:invoke>
			
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="LiabilitieStatus">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteHeaderOUT"></expr:resource>
								<expr:param name="responseHeaderIN">
									<expr:path>$RSPPasivosCliente.ResponseHeader</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<trf:insert varName="response.outputParameters">
						<trf:location>
							<expr:xpathText>./sjc:LIABILITIES_STATUS</expr:xpathText></trf:location>
						<trf:where>last-child</trf:where>
						<trf:expr>
							<expr:xqueryText>$LiabilitieStatus/sjc:LIABILITIES_STATUS/sjc:STATUS</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign>
			<bpel:assign>
				<bpel:extensionAssignOperation>
					<trf:assign varName="Liabilities">
						<trf:expr>
							<expr:xqueryTransform>
								<expr:resource
									ref="Middleware/v2/BusinessServices/SJS/consultaActivosPasivosCliente/xq/ConsultaPasivosClienteOUT"></expr:resource>
								<expr:param name="consultaPasivosClienteResponseOUT">
									<expr:path>$RSPPasivosCliente.result</expr:path></expr:param>
								<expr:param name="TypeSerch">
									<expr:path>$request.inputParameters/sjc:LIABILITY_TYPE/text()</expr:path></expr:param></expr:xqueryTransform></trf:expr></trf:assign></bpel:extensionAssignOperation>
				<bpel:extensionAssignOperation>
					<bpel:documentation></bpel:documentation>
					<trf:insert varName="response.outputParameters">
						<trf:location>
							<expr:xpathText>./sjc:LIABILITIES_INFORMATION</expr:xpathText></trf:location>
						<trf:where>last-child</trf:where>
						<trf:expr>
							<expr:xqueryText>$Liabilities/sjc:LIABILITIES_INFORMATION/sjc:LIABILITIY</expr:xqueryText></trf:expr></trf:insert></bpel:extensionAssignOperation></bpel:assign>
			</bpel:sequence>
        		</bpel:scope>
	
	
	</bpel:sequence>
        	</bpel:elseif>
        	<bpel:else>
        		<bpel:sequence>
        			<bpel:empty></bpel:empty>
        		</bpel:sequence>
        	</bpel:else>
        </bpel:if>
        <bpel:reply partnerLink="sjConsultaActivosPasivosCliente" operation="ConsultaActivosPasivosCliente" variable="response"></bpel:reply>
    </bpel:sequence>
</bpel:process>