<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config">
  <ser:coreEntry isProxy="true" isEnabled="true" isTracingEnabled="false" isAutoPublish="false">
    <ser:security/>
    <ser:binding type="SOAP" isSoap12="false" xsi:type="con3:SoapBindingType" xmlns:con3="http://www.bea.com/wli/sb/services/bindings/config">
      <con3:wsdl ref="Middleware/v2/Resources/PagoSeguros/wsdl/pagoSegurosPS"/>
      <con3:port>
        <con3:name>pagoSeguroPSSOAP</con3:name>
        <con3:namespace>http://www.ficohsa.com.hn/middleware.services/pagoSeguroPS/</con3:namespace>
      </con3:port>
      <con3:selector type="SOAP body"/>
      <con3:WSI-compliant>false</con3:WSI-compliant>
    </ser:binding>
    <ser:monitoring isEnabled="true">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Pipeline</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>http</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:URI>
      <env:value>/Middleware/OperationsAndExecution/Payments/PagoSeguro</env:value>
    </tran:URI>
    <tran:inbound-properties/>
    <tran:all-headers>false</tran:all-headers>
    <tran:provider-specific>
      <http:inbound-properties/>
    </tran:provider-specific>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-1112809892392172679--79ce723f.14b288bcc40.-7fc6">
    <con:pipeline type="request" name="PipelinePairNode1_request">
      <con:stage name="ProxyRequest">
        <con:context>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb2"/>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ConsultaUltimoMovimientoCuenta" prefix="mov"/>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ConsultaPagoSeguro" prefix="conp"/>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/RegistroPagoSeguro" prefix="reg"/>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/registrarUsoServicio" prefix="osb3"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/pagoSeguroTypes" prefix="pag"/>
        </con:context>
        <con:actions>
          <con1:validate>
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7fc7</con2:id>
            <con1:schema ref="Middleware/v2/Resources/PagoSeguros/xsd/pagoSeguroTypes"/>
            <con1:schemaElement xmlns:pag="http://www.ficohsa.com.hn/middleware.services/pagoSeguroTypes">pag:pagoSeguro</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con2:xpathText>./pag:pagoSeguro</con2:xpathText>
            </con1:location>
          </con1:validate>
          <con1:assign varName="uuid" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7221066551640049673-77e0774.14b75b9478f.-7ea8</con5:id>
            <con1:expr>
              <con4:xqueryTransform xmlns:con4="http://www.bea.com/wli/sb/stages/config">
                <con4:resource ref="Middleware/Business_Resources/general/UUID/obtenerUUID"/>
              </con4:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="username">
            <con2:id>_ActionId-8243795465537895242-2c492408.152c6f38b31.-7ec8</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:string($header/aut:RequestHeader/Authentication/UserName/text())</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="sourceBank">
            <con2:id>_ActionId-5163449686257933030--5ee5ed49.1545dc1c856.-6a17</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:string($header/aut:RequestHeader/Region/SourceBank/text())</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71e0</con4:id>
            <con1:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">""</con4:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:wsCallout>
            <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71dc</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>ValidaServicioRegional</con1:operation>
            <con1:request>
              <con1:body>$ReqValidaServicioRegional</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>RspValidaServicioRegional</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="ReqValidaServicioRegional">
                <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71dd</con2:id>
                <con1:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/pagoSegurosValidaServicioRegionalIn"/>
                    <con2:param name="serviceId">
                      <con2:path>"FICBCO0176"</con2:path>
                    </con2:param>
                    <con2:param name="requestHeader1">
                      <con2:path>$header/aut:RequestHeader</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con1:requestTransform>
            <con1:responseTransform/>
          </con1:wsCallout>
          <con1:ifThenElse>
            <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71bc</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>data($RspValidaServicioRegional/val:PV_CODIGO_ERROR) = 'SUCCESS'</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="idProducto">
                  <con2:id>_ActionId-8014309898406954115--4082b8c5.152a8df6af7.-7fb5</con2:id>
                  <con1:expr>
                    <con2:xqueryText>fn:string($body/pag:pagoSeguro/PRODUCT/text())</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="cuentaDebito">
                  <con2:id>_ActionId-8014309898406954115--4082b8c5.152a8df6af7.-7fb3</con2:id>
                  <con1:expr>
                    <con2:xqueryText>concat('T24T134.INSURANCECREDITACCTNO',fn:string($body/pag:pagoSeguro/POLICY_CURRENCY/text()))</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="maxIntentos">
                  <con2:id>_ActionId-8014309898406954115--4082b8c5.152a8df6af7.-7f7f</con2:id>
                  <con1:expr>
                    <con2:xqueryText>'T24T134.INSURANCEMAXATTEMPS'</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="tipoTrxn">
                  <con2:id>_ActionId-8014309898406954115--4082b8c5.152a8df6af7.-7f70</con2:id>
                  <con1:expr>
                    <con2:xqueryText>'T24T134.TXNTYPEINSURANCEPYMT'</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="campoProducto">
                  <con2:id>_ActionId-1860299139969818391--32e9d4e8.152ad2bf5ba.-7f2a</con2:id>
                  <con1:expr>
                    <con2:xqueryText>'T24T134.CODPRODUCT'</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="nombreProducto">
                  <con2:id>_ActionId-2660070463430802206--6106db7a.152d19d9db7.-7ef7</con2:id>
                  <con1:expr>
                    <con2:xqueryText>'T24T134.PRODUCTNAME'</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:wsCallout xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71b7</con4:id>
                  <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con1:operation>obtenerParametrizacion</con1:operation>
                  <con1:request>
                    <con1:body>$REQobtenerParametrizacion</con1:body>
                  </con1:request>
                  <con1:response>
                    <con1:body>RESobtenerParametrizacion</con1:body>
                  </con1:response>
                  <con1:requestTransform>
                    <con1:assign varName="REQobtenerParametrizacion">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-1860299139969818391--32e9d4e8.152ad2bf5ba.-7ed7</con5:id>
                      <con1:expr>
                        <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                          <con5:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                          <con5:param name="nombreParametros">
                            <con5:path>concat($cuentaDebito,'||',$maxIntentos,'||',$tipoTrxn,'||',$campoProducto,'||',$nombreProducto)</con5:path>
                          </con5:param>
                        </con5:xqueryTransform>
                      </con1:expr>
                    </con1:assign>
                  </con1:requestTransform>
                  <con1:responseTransform>
                    <con1:assign varName="statusParametrizacion">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5693594477881635457-774d7620.152c2a1b097.-7f32</con5:id>
                      <con1:expr>
                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">fn:string($RESobtenerParametrizacion/osb2:ERROR_CODE/text())</con4:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con1:assign varName="posicionCodProd">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5693594477881635457-774d7620.152c2a1b097.-7f34</con5:id>
                      <con1:expr>
                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">let $productsList := fn:tokenize(fn:string($RESobtenerParametrizacion/osb2:CONFIGURACIONES/osb2:CONFIGURACIONES_ITEM[osb2:NAME="T24T134.CODPRODUCT"]/osb2:VALUE/text()),"\|\|")
let $tipoPoliza := fn:index-of($productsList,$idProducto)
return  $tipoPoliza</con5:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                      <con2:comment>Validar que venga un producto existente</con2:comment>
                      <con2:id>_ActionId-2660070463430802206--6106db7a.152d19d9db7.-7f10</con2:id>
                      <con1:case>
                        <con1:condition>
                          <con2:xqueryText>fn:empty($posicionCodProd)</con2:xqueryText>
                        </con1:condition>
                        <con1:actions>
                          <con1:Error>
                            <con2:id>_ActionId-2660070463430802206--6106db7a.152d19d9db7.-7f0f</con2:id>
                            <con1:errCode>MW-0006</con1:errCode>
                            <con1:message>ERROR FETCHING REQUIRED PARAMETERS</con1:message>
                          </con1:Error>
                        </con1:actions>
                      </con1:case>
                      <con1:default/>
                    </con1:ifThenElse>
                    <con1:assign varName="transactionCode">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-5693594477881635457-774d7620.152c2a1b097.-7f18</con5:id>
                      <con1:expr>
                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">let $insTypeList := fn:tokenize(fn:string($RESobtenerParametrizacion/osb2:CONFIGURACIONES/osb2:CONFIGURACIONES_ITEM[osb2:NAME="T24T134.TXNTYPEINSURANCEPYMT"]/osb2:VALUE/text()),"\|\|")
let $transformar:= $posicionCodProd
let $pos:= xs:integer($transformar)
let $transactionCode := $insTypeList[$pos]
return $transactionCode</con5:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con1:assign varName="creditAccountNo">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8243795465537895242-2c492408.152c6f38b31.-7fcd</con5:id>
                      <con1:expr>
                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">let $insTypeList := fn:tokenize(fn:string($RESobtenerParametrizacion/osb2:CONFIGURACIONES/osb2:CONFIGURACIONES_ITEM[osb2:NAME=$cuentaDebito]/osb2:VALUE/text()),"\|\|")
let $transformar:= $posicionCodProd
let $pos:= xs:integer($transformar)
let $creditAccountNo := $insTypeList[$pos]
return $creditAccountNo</con5:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con1:assign varName="productName">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-2660070463430802206--6106db7a.152d19d9db7.-7ed9</con5:id>
                      <con1:expr>
                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">let $insTypeList := fn:tokenize(fn:string($RESobtenerParametrizacion/osb2:CONFIGURACIONES/osb2:CONFIGURACIONES_ITEM[osb2:NAME="T24T134.PRODUCTNAME"]/osb2:VALUE/text()),"\|\|")
let $transformar:= $posicionCodProd
let $pos:= xs:integer($transformar)
let $productName := $insTypeList[$pos]
return $productName</con5:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con1:assign varName="maxAttempts">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-8243795465537895242-2c492408.152c6f38b31.-7fa3</con5:id>
                      <con1:expr>
                        <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">let $insTypeList := fn:tokenize(fn:string($RESobtenerParametrizacion/osb2:CONFIGURACIONES/osb2:CONFIGURACIONES_ITEM[osb2:NAME="T24T134.INSURANCEMAXATTEMPS"]/osb2:VALUE/text()),"\|\|")
let $transformar:= $posicionCodProd
let $pos:= xs:integer($transformar)
let $maxAttempts := $insTypeList[$pos]
return $maxAttempts</con5:xqueryText>
                      </con1:expr>
                    </con1:assign>
                  </con1:responseTransform>
                </con1:wsCallout>
                <con1:ifThenElse>
                  <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71b6</con2:id>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$statusParametrizacion = "SUCCESS"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7e79</con2:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CNV/consultaPagoSeguro/biz/ConsultaPagoSeguro_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ConsultaPagoSeguro</con1:operation>
                        <con1:request>
                          <con1:body>$REQConsultaPagoSeguro</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>RSPConsultaPagoSeguro</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="REQConsultaPagoSeguro">
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7e41</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/consultaPagoSeguro"/>
                                <con2:param name="pagoSeguro1">
                                  <con2:path>$body/pag:pagoSeguro</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                          <con1:assign varName="successIndicatorConsultaPagoSeguro">
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7e09</con2:id>
                            <con1:expr>
                              <con2:xqueryText>data($RSPConsultaPagoSeguro/conp:PV_CODIGO_ERROR)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con1:ifThenElse>
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7ae9</con2:id>
                            <con1:case>
                              <con1:condition>
                                <con2:xqueryText>$successIndicatorConsultaPagoSeguro = 'SUCCESS'</con2:xqueryText>
                              </con1:condition>
                              <con1:actions>
                                <con1:assign varName="horaUltimoIntento">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7ae3</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($RSPConsultaPagoSeguro/conp:PV_HORA_ULTIMO_INTENTO)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                              </con1:actions>
                            </con1:case>
                            <con1:default>
                              <con1:assign varName="horaUltimoIntento">
                                <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-79c7</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>xs:integer('0')</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                            </con1:default>
                          </con1:ifThenElse>
                        </con1:responseTransform>
                      </con1:wsCallout>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4527231042167326944-37908a6c.14b4c6ec834.-7f55</con2:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ConsultaUltimoMovimientoCuenta/biz/ConsultaUltimoMovimientoCuenta_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>ConsultaUltimoMovimientoCuenta</con1:operation>
                        <con1:request>
                          <con1:body>$REQConsultaUltimoMovimientoCuenta</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>RSPConsultaUltimoMovimientoCuenta</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="REQConsultaUltimoMovimientoCuenta">
                            <con2:id>_ActionId-4527231042167326944-37908a6c.14b4c6ec834.-7e59</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/consultaUltimoMovimientoCuenta"/>
                                <con2:param name="pagoSeguro1">
                                  <con2:path>$body/pag:pagoSeguro</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                          <con1:assign varName="successIndicatorUltimoMovimientoCuenta">
                            <con2:id>_ActionId-4527231042167326944-37908a6c.14b4c6ec834.-7e21</con2:id>
                            <con1:expr>
                              <con2:xqueryText>data($RSPConsultaUltimoMovimientoCuenta/mov:PV_CODIGO_ERROR)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con1:ifThenElse>
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7a8d</con2:id>
                            <con1:case>
                              <con1:condition>
                                <con2:xqueryText>$successIndicatorUltimoMovimientoCuenta = 'SUCCESS'</con2:xqueryText>
                              </con1:condition>
                              <con1:actions>
                                <con1:assign varName="horaUltimoMovimiento">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7a6f</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($RSPConsultaUltimoMovimientoCuenta/mov:PV_HORA)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                              </con1:actions>
                            </con1:case>
                            <con1:default>
                              <con1:assign varName="horaUltimoMovimiento">
                                <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7a1b</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>xs:integer('0')</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                            </con1:default>
                          </con1:ifThenElse>
                        </con1:responseTransform>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7db4</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>(xs:integer($horaUltimoMovimiento) >= xs:integer($horaUltimoIntento))</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="movementIndicator">
                              <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7d7c</con2:id>
                              <con1:expr>
                                <con2:xqueryText>'TRUE'</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default>
                          <con1:assign varName="movementIndicator">
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7cd5</con2:id>
                            <con1:expr>
                              <con2:xqueryText>'FALSE'</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                        </con1:default>
                      </con1:ifThenElse>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7fc7</con2:id>
                        <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CNV/registroPagoSeguro/biz/RegistroPagoSeguro_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>RegistroPagoSeguro</con1:operation>
                        <con1:request>
                          <con1:body>$REQRegistroPagoSeguro</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>RSPRegistroPagoSeguro</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="REQRegistroPagoSeguro">
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7f21</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/registroPagoSeguroIn"/>
                                <con2:param name="movementsIndicator">
                                  <con2:path>$movementIndicator</con2:path>
                                </con2:param>
                                <con2:param name="pagoSeguro1">
                                  <con2:path>$body/pag:pagoSeguro</con2:path>
                                </con2:param>
                                <con2:param name="maxAttempts">
                                  <con2:path>$maxAttempts</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                          <con1:assign varName="successIndicatorRegistroPagoSeguro">
                            <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7c64</con2:id>
                            <con1:expr>
                              <con2:xqueryText>data($RSPRegistroPagoSeguro/reg:PV_CODIGO_ERROR)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                        </con1:responseTransform>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bf3</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$successIndicatorRegistroPagoSeguro != 'ERROR'</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con4:wsCallout xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
                              <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7be9</con2:id>
                              <con4:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/ConsultasCuenta/Resources/consultaCuentasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con4:operation>Consultadedetallesdelacuenta</con4:operation>
                              <con4:request>
                                <con4:body>$REQDetallesCuenta</con4:body>
                              </con4:request>
                              <con4:response>
                                <con4:body>RSPDetallesCuenta</con4:body>
                              </con4:response>
                              <con4:requestTransform>
                                <con4:assign varName="REQDetallesCuenta">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bed</con2:id>
                                  <con4:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/pagoSegurosDetalleCuentaIn"/>
                                      <con2:param name="pagoSeguro1">
                                        <con2:path>$body/pag:pagoSeguro</con2:path>
                                      </con2:param>
                                      <con2:param name="requestHeader1">
                                        <con2:path>$header/aut:RequestHeader</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con4:expr>
                                </con4:assign>
                              </con4:requestTransform>
                              <con4:responseTransform>
                                <con4:assign varName="DetallesCuentasSuccessIndicator">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bec</con2:id>
                                  <con4:expr>
                                    <con2:xqueryText>data($RSPDetallesCuenta/Status/successIndicator)</con2:xqueryText>
                                  </con4:expr>
                                </con4:assign>
                                <con4:assign varName="debitAccountCurrency">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7beb</con2:id>
                                  <con4:expr>
                                    <con2:xqueryText>data($RSPDetallesCuenta/WSACCOUNTLISTType/gWSACCOUNTLISTDetailType/mWSACCOUNTLISTDetailType/CURRENCY)</con2:xqueryText>
                                  </con4:expr>
                                </con4:assign>
                                <con4:assign varName="zeroRecords">
                                  <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bea</con2:id>
                                  <con4:expr>
                                    <con2:xqueryText>data($RSPDetallesCuenta/WSACCOUNTLISTType/ZERORECORDS)</con2:xqueryText>
                                  </con4:expr>
                                </con4:assign>
                              </con4:responseTransform>
                            </con4:wsCallout>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bda</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>$DetallesCuentasSuccessIndicator = 'Success'</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:ifThenElse>
                                    <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd9</con2:id>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>(fn:empty($zeroRecords)) or ($zeroRecords = 'null')</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:ifThenElse>
                                          <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd8</con2:id>
                                          <con1:case>
                                            <con1:condition>
                                              <con2:xqueryText>data($body/pag:pagoSeguro/POLICY_CURRENCY) = $debitAccountCurrency</con2:xqueryText>
                                            </con1:condition>
                                            <con1:actions>
                                              <con1:wsCallout>
                                                <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd5</con2:id>
                                                <con1:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/Transferencias/Resources/transferenciasBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>Transfmodelbankentrecuentas</con1:operation>
                                                <con1:request>
                                                  <con1:body>$ReqTransferencia</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                  <con1:body>RspTransferencia</con1:body>
                                                </con1:response>
                                                <con1:requestTransform>
                                                  <con1:assign varName="ReqTransferencia">
                                                    <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd6</con2:id>
                                                    <con1:expr>
                                                      <con2:xqueryTransform>
                                                        <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/pagoSegurosTransferenciaIn"/>
                                                        <con2:param name="monedaCuentaDebito">
                                                          <con2:path>$debitAccountCurrency</con2:path>
                                                        </con2:param>
                                                        <con2:param name="CuentaCredito">
                                                          <con2:path>$creditAccountNo</con2:path>
                                                        </con2:param>
                                                        <con2:param name="pagoSeguro1">
                                                          <con2:path>$body/pag:pagoSeguro</con2:path>
                                                        </con2:param>
                                                        <con2:param name="requestHeader1">
                                                          <con2:path>$header/aut:RequestHeader</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                          <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreProducto">
                                                          <con2:path>$productName</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoTransaccion">
                                                          <con2:path>$transactionCode</con2:path>
                                                        </con2:param>
                                                      </con2:xqueryTransform>
                                                    </con1:expr>
                                                  </con1:assign>
                                                </con1:requestTransform>
                                                <con1:responseTransform/>
                                              </con1:wsCallout>
                                              <con1:ifThenElse>
                                                <con2:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd4</con2:id>
                                                <con1:case>
                                                  <con1:condition>
                                                    <con2:xqueryText>fn:upper-case(data($RspTransferencia/Status/successIndicator)) != 'SUCCESS'</con2:xqueryText>
                                                  </con1:condition>
                                                  <con1:actions>
                                                    <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                                                      <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd3</con4:id>
                                                      <con1:expr>
                                                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($RspTransferencia/Status/messages)</con4:xqueryText>
                                                      </con1:expr>
                                                    </con1:assign>
                                                  </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                              </con1:ifThenElse>
                                            </con1:actions>
                                          </con1:case>
                                          <con1:default>
                                            <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                                              <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd2</con4:id>
                                              <con1:expr>
                                                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">"POLICY AND ACCOUNT CURRENCY MISMATCH"</con4:xqueryText>
                                              </con1:expr>
                                            </con1:assign>
                                            <con5:skip xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                              <con5:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd1</con5:id>
                                            </con5:skip>
                                          </con1:default>
                                        </con1:ifThenElse>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                      <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                                        <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bd0</con4:id>
                                        <con1:expr>
                                          <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">"MISSING ACCOUNT RECORD"</con4:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con5:skip xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                        <con5:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bcf</con5:id>
                                      </con5:skip>
                                    </con1:default>
                                  </con1:ifThenElse>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bce</con4:id>
                                  <con1:expr>
                                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($RSPDetallesCuenta/Status/messages)</con4:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con5:skip xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                                  <con5:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7bcd</con5:id>
                                </con5:skip>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default>
                          <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7b79</con4:id>
                            <con1:expr>
                              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">data($RSPRegistroPagoSeguro/reg:PV_MENSAJE_ERROR)</con4:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con5:skip xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                            <con5:id>_ActionId-2041608072817011642-6a3cdce1.14b5b99eab5.-7b40</con5:id>
                          </con5:skip>
                        </con1:default>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:default>
                    <con1:assign varName="message" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config">
                      <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71a1</con4:id>
                      <con1:expr>
                        <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">fn:string($RESobtenerParametrizacion/osb2:ERROR_MESSAGE/text())</con4:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con5:skip xmlns:con4="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/services/security/config" xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                      <con5:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-71a0</con5:id>
                    </con5:skip>
                  </con1:default>
                </con1:ifThenElse>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con1:assign varName="message">
                <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-719f</con2:id>
                <con1:expr>
                  <con2:xqueryText>data($RspValidaServicioRegional/val:PV_MENSAJE_ERROR)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:skip>
                <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-719e</con2:id>
              </con2:skip>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNode1_response">
      <con:stage name="ProxyResponse">
        <con:context>
          <con2:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/pagoSeguroTypes" prefix="pag"/>
        </con:context>
        <con:actions>
          <con1:assign varName="pagoSeguroRequest">
            <con2:id>_ActionId-4286333138710335936--4d3bfe5.14b5f8cfd21.-7bb6</con2:id>
            <con1:expr>
              <con2:xqueryTransform>
                <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/recordPagoSeguroRequest"/>
                <con2:param name="pagoSeguro1">
                  <con2:path>$body/pag:pagoSeguro</con2:path>
                </con2:param>
                <con2:param name="requestHeader1">
                  <con2:path>$header/aut:RequestHeader</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="requestAccount">
            <con2:id>_ActionId-7221066551640049673-77e0774.14b75b9478f.-7fab</con2:id>
            <con1:expr>
              <con2:xqueryText>data($body/pag:pagoSeguro/DEBIT_ACCOUNT)</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="requestPolicy">
            <con2:id>_ActionId-7221066551640049673-77e0774.14b75b9478f.-7f8e</con2:id>
            <con1:expr>
              <con2:xqueryText>data($body/pag:pagoSeguro/POLICY_NUMBER)</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse>
            <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-7ceb</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>$message = ""</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-752d</con2:id>
                  <con1:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/pagoSegurosHeaderOut"/>
                      <con2:param name="transfmodelbankentrecuentasResponse1">
                        <con2:path>$RspTransferencia</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con1:expr>
                </con1:replace>
                <con1:replace varName="body" contents-only="true">
                  <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-752b</con2:id>
                  <con1:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/pagoSegurosOut"/>
                      <con2:param name="pagoSeguro1">
                        <con2:path>$body/pag:pagoSeguro</con2:path>
                      </con2:param>
                      <con2:param name="transfmodelbankentrecuentasResponse1">
                        <con2:path>$RspTransferencia</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con1:expr>
                </con1:replace>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con1:replace varName="header" contents-only="true">
                <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-7531</con2:id>
                <con1:expr>
                  <con2:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{$message}</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                </con1:expr>
              </con1:replace>
              <con1:replace varName="body" contents-only="true">
                <con2:id>_ActionId-3984705334973717370-667514ae.14ac6bc81cd.-752f</con2:id>
                <con1:expr>
                  <con2:xqueryText>&lt;pag:pagoSeguroResponse/></con2:xqueryText>
                </con1:expr>
              </con1:replace>
            </con1:default>
          </con1:ifThenElse>
          <con1:ifThenElse>
            <con2:id>_ActionId-7803728016011314166--4e1335.1531069ea8b.-5df3</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>fn:string-length($message)>0</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con4:route>
                  <con2:id>_ActionId-7803728016011314166--4e1335.1531069ea8b.-5dcd</con2:id>
                  <con4:service ref="Middleware/v2/BusinessServices/CNV/registroBitacoraPagoSeguro/biz/RegistroBitacoraPagoSeguro_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con4:operation>RegistroBitacoraPagoSeguro</con4:operation>
                  <con4:outboundTransform>
                    <con1:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-7803728016011314166--4e1335.1531069ea8b.-5dcc</con2:id>
                      <con1:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/registroBitacoraPagoSeguroErrorIn"/>
                          <con2:param name="pagoSeguroRequest">
                            <con2:path>" "</con2:path>
                          </con2:param>
                          <con2:param name="cuenta">
                            <con2:path>$requestAccount</con2:path>
                          </con2:param>
                          <con2:param name="poliza">
                            <con2:path>$requestPolicy</con2:path>
                          </con2:param>
                          <con2:param name="uuid">
                            <con2:path>$uuid</con2:path>
                          </con2:param>
                          <con2:param name="mensajeError">
                            <con2:path>fn:string($header/aut:ResponseHeader/messages/text())</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con1:expr>
                    </con1:replace>
                  </con4:outboundTransform>
                </con4:route>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con4:route>
                <con2:id>_ActionId-8312082671210065993--2846f3d8.1531429d7c0.-7ffe</con2:id>
                <con4:service ref="Middleware/v2/BusinessServices/CNV/registroBitacoraPagoSeguro/biz/RegistroBitacoraPagoSeguro_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con4:operation>RegistroBitacoraPagoSeguro</con4:operation>
                <con4:outboundTransform>
                  <con1:replace varName="body" contents-only="true">
                    <con2:id>_ActionId-8312082671210065993--2846f3d8.1531429d7c0.-7ffd</con2:id>
                    <con1:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/v2/Resources/PagoSeguros/xq/registroBitacoraPagoSeguroIn"/>
                        <con2:param name="responseHeader1">
                          <con2:path>$header/aut:ResponseHeader</con2:path>
                        </con2:param>
                        <con2:param name="uuid">
                          <con2:path>$uuid</con2:path>
                        </con2:param>
                        <con2:param name="pagoSeguroResponse1">
                          <con2:path>$body/pag:pagoSeguroResponse</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con1:expr>
                  </con1:replace>
                </con4:outboundTransform>
              </con4:route>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-1112809892392172679--79ce723f.14b288bcc40.-7fc6">
      <con:stage name="ProxyFault1">
        <con:context xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config">
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaFiltradaTransaccionTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/pagoSeguroTypes" prefix="pag"/>
        </con:context>
        <con:actions xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:assign varName="errorList">
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7f4f</con2:id>
            <con3:expr>
              <con2:xqueryTransform>
                <con2:resource ref="Middleware/v2/Resources/Generales/mensajesError"/>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:assign varName="osbError">
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7f4e</con2:id>
            <con3:expr>
              <con2:xqueryText>fn:string($errorList/ERROR_RECORD[CODE=fn:string($fault/ctx:errorCode/text())]/DESCRIPTION/text())</con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:replace varName="header" contents-only="true">
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7f4d</con2:id>
            <con3:expr>
              <con2:xqueryTransform>
                <con2:resource ref="Middleware/Business_Resources/general/ServiceErrorId/obtenerServiceErrorId"/>
                <con2:param name="string1">
                  <con2:path>"0176"</con2:path>
                </con2:param>
                <con2:param name="string2">
                  <con2:path>concat(fn:string($fault/ctx:errorCode/text()), ":", fn:string($fault/ctx:reason/text()), ":", $osbError)</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:replace>
          <con3:replace varName="body" contents-only="true">
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7f4c</con2:id>
            <con3:expr>
              <con2:xqueryText>&lt;pag:pagoSeguroResponse/></con2:xqueryText>
            </con3:expr>
          </con3:replace>
          <con2:reply>
            <con2:id>_ActionId-1112809892392172679--79ce723f.14b288bcc40.-7f4b</con2:id>
          </con2:reply>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:flow>
      <con:pipeline-node name="PipelinePairNode1">
        <con:request>PipelinePairNode1_request</con:request>
        <con:response>PipelinePairNode1_response</con:response>
      </con:pipeline-node>
    </con:flow>
  </ser:router>
</xml-fragment>