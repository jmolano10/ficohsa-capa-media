<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/services/security/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con1="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
  <ser:coreEntry isProxy="true" isEnabled="true" isTracingEnabled="false" isAutoPublish="false">
    <ser:security>
      <con:custom-token-authentication>
        <con:username-password>
          <con:username-selector>
            <con:xpath>declare namespace aut='http://www.ficohsa.com.hn/middleware.services/autType';./aut:RequestHeader/Authentication/UserName/text()</con:xpath>
            <con:variable>header</con:variable>
          </con:username-selector>
          <con:password-selector>
            <con:xpath>declare namespace aut='http://www.ficohsa.com.hn/middleware.services/autType';./aut:RequestHeader/Authentication/Password/text()</con:xpath>
            <con:variable>header</con:variable>
          </con:password-selector>
        </con:username-password>
      </con:custom-token-authentication>
    </ser:security>
    <ser:binding type="SOAP" isSoap12="false" xsi:type="con4:SoapBindingType" xmlns:con4="http://www.bea.com/wli/sb/services/bindings/config">
      <con4:wsdl ref="Middleware/v3/Resources/ConsultaCliente/wsdl/consultaClientePS"/>
      <con4:port>
        <con4:name>consultaClientePSSOAP</con4:name>
        <con4:namespace>http://www.ficohsa.com.hn/middleware.services/consultaClientePS/</con4:namespace>
      </con4:port>
      <con4:selector type="SOAP body"/>
      <con4:WSI-compliant>false</con4:WSI-compliant>
    </ser:binding>
    <ser:monitoring isEnabled="true">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Action</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>http</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:URI>
      <env:value>/SMiddleware/ReferenceData/BusinessPartner/ConsultaClienteBatch_v3</env:value>
    </tran:URI>
    <tran:inbound-properties/>
    <tran:all-headers>false</tran:all-headers>
    <tran:provider-specific xsi:type="http:HttpEndPointConfiguration">
      <http:inbound-properties>
        <http:use-https>true</http:use-https>
      </http:inbound-properties>
    </tran:provider-specific>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-6026376441913281250-4f600603.14c6c79842e.-7fe3">
    <con1:pipeline type="request" name="GT01_ConsultaCliente_request">
      <con1:stage name="ObtenerParametrizacion">
        <con1:context>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
          <con2:userNsDecl namespace="http://schemas.datacontract.org/2004/07/CreditForce.Common.DataContract.BackEnd.Collection" prefix="a"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions>
          <con3:wsCallout>
            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e4c</con2:id>
            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>obtenerParametrizacion</con3:operation>
            <con3:request>
              <con3:body>$REQobtenerParametrizacion</con3:body>
            </con3:request>
            <con3:response>
              <con3:body>RSPobtenerParametrizacion</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con1:assign varName="paramChannelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e53</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0414.CHANNEL.',fn:upper-case(data($header/aut:RequestHeader/Authentication/UserName)) ,'.GT01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramApiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e52</con2:id>
                <con1:expr>
                  <con2:xqueryText>'FICBCO0414.APIKEY.GT01'</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramCustomerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-2447892753977453957--3b8ed884.18101a328ce.-7f38</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0471.',data($body/con:consultaClienteRequest/con:CUSTOMER_ID_TYPE),'.HN01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="REQobtenerParametrizacion" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e50</con2:id>
                <con1:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                    <con2:param name="nombreParametros">
                      <con2:path>fn:concat($paramChannelUser,"||",$paramApiKey,"||",$paramCustomerIdTypeHN)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con3:requestTransform>
            <con3:responseTransform>
              <con1:assign varName="channelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e4f</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramChannelUser]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="apiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7e4e</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramApiKey]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="customerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-2447892753977453957--3b8ed884.18101a328ce.-7f71</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramCustomerIdTypeHN]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
            </con3:responseTransform>
          </con3:wsCallout>
          <con3:ifThenElse>
            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7df8</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:ifThenElse>
                  <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7de0</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>$apiKey != ''</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:wsCallout>
                        <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7ce7</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosGT/biz/creditForceGT" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Status</con3:operation>
                        <con3:request>
                          <con3:body>$REQStatus</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RSPStatus</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7c93</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/ConsultaProductosMora/xq/VerificarServiciosCreditForceIn"/>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform>
                          <con1:assign varName="creditForceStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7c3f</con2:id>
                            <con1:expr>
                              <con2:xqueryText>fn:data($RSPStatus/a:StatusResult/a:Status)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7be9</con2:id>
                            <con1:case>
                              <con1:condition>
                                <con2:xqueryText>$creditForceStatus != 1</con2:xqueryText>
                              </con1:condition>
                              <con1:actions>
                                <con2:reply>
                                  <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7be8</con2:id>
                                </con2:reply>
                              </con1:actions>
                            </con1:case>
                          </con1:ifThenElse>
                        </con3:responseTransform>
                      </con3:wsCallout>
                      <con3:wsCallout>
                        <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7b5a</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosGT/biz/creditForceGT" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Client</con3:operation>
                        <con3:request>
                          <con3:body>$REQclientCreditForce</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RSPclientCreditForce</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQclientCreditForce" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7b06</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceIn"/>
                                <con2:param name="consultaClienteRequest">
                                  <con2:path>$body/con:consultaClienteRequest</con2:path>
                                </con2:param>
                                <con2:param name="type">
                                  <con2:path>$customerIdTypeHN</con2:path>
                                </con2:param>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform/>
                      </con3:wsCallout>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con1:Error xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                      <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7d8c</con2:id>
                      <con1:errCode>NO RECORDS</con1:errCode>
                      <con1:message>NO API KEY FOUND</con1:message>
                    </con1:Error>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:wsCallout>
                <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7af1</con2:id>
                <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v3/ProxyServices/ConsultaCliente" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con3:operation>consultaCliente</con3:operation>
                <con3:request>
                  <con3:body wrapped="true">$body</con3:body>
                  <con3:header>$header</con3:header>
                </con3:request>
                <con3:response>
                  <con3:body wrapped="true">RSPConsultaCliente</con3:body>
                  <con3:header>RSPHConsultaCliente</con3:header>
                </con3:response>
                <con3:requestTransform/>
                <con3:responseTransform/>
              </con3:wsCallout>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="ValidacionesGenerales_response">
      <con1:stage name="MapeoError">
        <con1:context xmlns:jms="http://www.bea.com/wli/sb/transports/jms" xmlns:con4="http://www.bea.com/wli/sb/services/security/config">
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions xmlns:jms="http://www.bea.com/wli/sb/transports/jms" xmlns:con4="http://www.bea.com/wli/sb/services/security/config">
          <con3:ifThenElse>
            <con2:id>_ActionId-5165187676452498133--660a4447.157dcfdc56d.-5c41</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text())) != "SUCCESS"</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:wsCallout>
                  <con2:id>_ActionId-5165187676452498133--660a4447.157dcfdc56d.-5c3e</con2:id>
                  <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con3:operation>mapeoErrores</con3:operation>
                  <con3:request>
                    <con3:body>$REQMapeoErrores</con3:body>
                  </con3:request>
                  <con3:response>
                    <con3:body>RSPMapeoErrores</con3:body>
                  </con3:response>
                  <con3:requestTransform>
                    <con3:assign varName="REQMapeoErrores">
                      <con2:id>_ActionId-5165187676452498133--660a4447.157dcfdc56d.-5c40</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                          <con2:param name="CODIGO_ERROR">
                            <con2:path>fn:upper-case(fn:string($header/aut:ResponseHeader/successIndicator/text()))</con2:path>
                          </con2:param>
                          <con2:param name="MENSAJE_ERROR">
                            <con2:path>fn:concat("FICBCO0414","$#$",fn:string-join($header/aut:ResponseHeader/messages, '||'))</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                  </con3:requestTransform>
                  <con3:responseTransform>
                    <con3:replace varName="header" contents-only="true">
                      <con2:id>_ActionId-5165187676452498133--660a4447.157dcfdc56d.-5c3f</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                          <con2:param name="mapeoErroresResponse1">
                            <con2:path>$RSPMapeoErrores</con2:path>
                          </con2:param>
                          <con2:param name="successIndicator">
                            <con2:path>fn:string($header/aut:ResponseHeader/successIndicator/text())</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:replace>
                  </con3:responseTransform>
                </con3:wsCallout>
              </con3:actions>
            </con3:case>
            <con3:default/>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="request" name="HN01_ConsultaCliente_request">
      <con1:stage name="FlujoEntrada">
        <con1:context>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
          <con2:userNsDecl namespace="http://schemas.datacontract.org/2004/07/CreditForce.Common.DataContract.BackEnd.Collection" prefix="a"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-5251683405516274089--d229062.16caaa3065a.-7e44</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>fn:string($body/con:consultaClienteRequest/con:CUSTOMER_ID_VALUE/text()) = 'DUMMY_FICOHSA'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-5251683405516274089--d229062.16caaa3065a.-7e08</con2:id>
                  <con3:expr>
                    <con2:xqueryText>&lt;aut:ResponseHeader>
         &lt;successIndicator>Success&lt;/successIndicator>
         &lt;messages/>
      &lt;/aut:ResponseHeader></con2:xqueryText>
                  </con3:expr>
                </con3:replace>
                <con3:replace varName="body" contents-only="true">
                  <con2:id>_ActionId-5251683405516274089--d229062.16caaa3065a.-7deb</con2:id>
                  <con3:expr>
                    <con2:xqueryText><![CDATA[<con:consultaClienteResponse>
         <con:CUSTOMER_ID>1290158</con:CUSTOMER_ID>
         <con:MNEMONIC>GAPM240692</con:MNEMONIC>
         <con:IDENTIFICATION_INFO>
            <con:LEGAL_IDENTIFICATION_ITEM>
               <con:LEGAL_DOCUMENT_NAME>CEDULA</con:LEGAL_DOCUMENT_NAME>
               <con:LEGAL_ID>0801199215227</con:LEGAL_ID>
            </con:LEGAL_IDENTIFICATION_ITEM>
         </con:IDENTIFICATION_INFO>
         <con:GIVEN_NAMES>GINETH ALEJANDRA</con:GIVEN_NAMES>
         <con:FAMILY_NAME>PERALTA MEJIA</con:FAMILY_NAME>
         <con:NAME_OF_BUSINESS/>
         <con:COMMERCIAL_NAME/>
         <con:LEGAL_HOLDER_NAME>GINETH ALEJANDRA PERALTA MEJIA</con:LEGAL_HOLDER_NAME>
         <con:SHORT_NAME>GINETH ALEJANDRA PERALTA MEJIA</con:SHORT_NAME>
         <con:DATE_OF_BIRTH>19920624</con:DATE_OF_BIRTH>
         <con:GENDER>02</con:GENDER>
         <con:NATIONALITY>HONDURAS</con:NATIONALITY>
         <con:RESIDENCE>HONDURAS</con:RESIDENCE>
         <con:SECTOR>1000</con:SECTOR>
         <con:SECTOR_DESCRIPTION>PER</con:SECTOR_DESCRIPTION>
         <con:INDUSTRY>1000</con:INDUSTRY>
         <con:INDUSTRY_DESCRIPTION>CLIENTE NATURAL</con:INDUSTRY_DESCRIPTION>
         <con:FGN_CCY_GEN_TYP>NG</con:FGN_CCY_GEN_TYP>
         <con:TARGET>9</con:TARGET>
         <con:TARGET_DESCRIPTION>MASIVO</con:TARGET_DESCRIPTION>
         <con:MARITAL_STATUS>SINGLE</con:MARITAL_STATUS>
         <con:CUSTOMER_TYPE>ACTIVE</con:CUSTOMER_TYPE>
         <con:CUSTOMER_STATUS>Activo</con:CUSTOMER_STATUS>
         <con:LANGUAGE>2</con:LANGUAGE>
         <con:OCCUPATION>WORKER</con:OCCUPATION>
         <con:EMPLOYMENT_STATUS>YES</con:EMPLOYMENT_STATUS>
         <con:EMPLOYERS_NAME>FUNDACION JUNIOR ACHIEVEMENT</con:EMPLOYERS_NAME>
         <con:MARRIED_LAST_NAME/>
         <con:LEGAL_REP_NAME/>
         <con:LEGAL_REP_ID/>
         <con:TYPE_OF_COMPANY>PRIVADA</con:TYPE_OF_COMPANY>
         <con:PROFESSION>45</con:PROFESSION>
         <con:NUMBER_OF_DEED/>
         <con:LEGAL_REP_HOME_PHONE/>
         <con:TYPE_OF_PERSON>N</con:TYPE_OF_PERSON>
         <con:INPUT_USER>DMUSER</con:INPUT_USER>
         <con:DATE_TIME>20170902201500</con:DATE_TIME>
         <con:ACCOUNT_OFFICER>1003</con:ACCOUNT_OFFICER>
         <con:BRANCH_CODE>1114</con:BRANCH_CODE>
         <con:NO_OF_DEPENDENTS/>
         <con:EDUCATION_LEVEL>SUPERIOR</con:EDUCATION_LEVEL>
         <con:SPOUSE_NAME/>
         <con:CUSTOMER_SINCE>20130518</con:CUSTOMER_SINCE>
         <con:ECONOMIC_GROUP_ID/>
         <con:ECONOMIC_GROUP_NAME/>
         <con:PHONE_INFO>
            <con:PHONE_NUMBER_ITEM>
               <con:PHONE_NUMBER>50422353336</con:PHONE_NUMBER>
			   <con:PHONE_TYPE>PHONE</con:PHONE_TYPE>
			   <con:PHONE_ORDER>1</con:PHONE_ORDER>
			   <con:PHONE_EXTENSION>1895</con:PHONE_EXTENSION>
			   <con:PHONE_REFERRENCE>TELEFONO DEL TRABAJO</con:PHONE_REFERRENCE>
            </con:PHONE_NUMBER_ITEM>
            <con:PHONE_NUMBER_ITEM>
               <con:PHONE_NUMBER>50422393336</con:PHONE_NUMBER>
			   <con:PHONE_TYPE>PHONE</con:PHONE_TYPE>
			   <con:PHONE_ORDER>2</con:PHONE_ORDER>
			   <con:PHONE_EXTENSION></con:PHONE_EXTENSION>
			   <con:PHONE_REFERRENCE>TELEFONO DE CASA</con:PHONE_REFERRENCE>
            </con:PHONE_NUMBER_ITEM>
            <con:PHONE_NUMBER_ITEM>
               <con:PHONE_NUMBER>50494587959</con:PHONE_NUMBER>
			   <con:PHONE_TYPE>SMS</con:PHONE_TYPE>
			   <con:PHONE_ORDER>1</con:PHONE_ORDER>
			   <con:PHONE_EXTENSION>1895</con:PHONE_EXTENSION>
			   <con:PHONE_REFERRENCE>TELEFONO DEL PERSONAL</con:PHONE_REFERRENCE>
            </con:PHONE_NUMBER_ITEM>            
            <con:PHONE_NUMBER_ITEM>
               <con:PHONE_NUMBER>50434587978</con:PHONE_NUMBER>
			   <con:PHONE_TYPE>SMS</con:PHONE_TYPE>
			   <con:PHONE_ORDER>2</con:PHONE_ORDER>
			   <con:PHONE_EXTENSION></con:PHONE_EXTENSION>
			   <con:PHONE_REFERRENCE>TELEFONO DEL PERSONAL DOS</con:PHONE_REFERRENCE>
            </con:PHONE_NUMBER_ITEM>            
         </con:PHONE_INFO>
         <con:ADDRESS_INFO>
            <con:ADDRESS_ITEM>
               <con:ADDRESS_TYPE>1</con:ADDRESS_TYPE>
               <con:COUNTRY_CODE>HN</con:COUNTRY_CODE>
               <con:DEPARTMENT_CODE>HN.08</con:DEPARTMENT_CODE>
               <con:CITY_CODE>HN.08.0001</con:CITY_CODE>
               <con:ADDRESS_LINE_1>MIRAFLORES, COL. MIRAFLORES, AVENIDA SANTA CRISTINA, 2 PORTONES A</con:ADDRESS_LINE_1>
               <con:ADDRESS_LINE_2>BAJO DEL RES,DISTRITO CENTRAL,FRANCISCO MORAZAN,HONDURAS</con:ADDRESS_LINE_2>
               <con:IS_MAIN_ADDRESS>YES</con:IS_MAIN_ADDRESS>
			   <con:COLONY_CODE>HN.08.0001.000045</con:COLONY_CODE>
			   <con:COLONY_CODE_DESC>ALTOS DE CIUDAD LEMPIRA</con:COLONY_CODE_DESC>
			   <con:AVENUE>2 AVENIDA NO</con:AVENUE>
			   <con:ADDRESS_STREET>2DA CALLE</con:ADDRESS_STREET>
			   <con:BLOCK>Q</con:BLOCK>
			   <con:HOUSE_NUMBER>4</con:HOUSE_NUMBER>
			   <con:ADDRESS_REFERENCES>FUENTE INAGOTABLE</con:ADDRESS_REFERENCES>
            </con:ADDRESS_ITEM>
            <con:ADDRESS_ITEM>
               <con:ADDRESS_TYPE>2</con:ADDRESS_TYPE>
               <con:COUNTRY_CODE>HN</con:COUNTRY_CODE>
               <con:DEPARTMENT_CODE>HN.08</con:DEPARTMENT_CODE>
               <con:CITY_CODE>HN.08.0001</con:CITY_CODE>
               <con:ADDRESS_LINE_1>ALTOS DE TEPEYAC,PRINCIPAL AVENIDA PRINCIPAL CALLE,COL. TEPEYAC,</con:ADDRESS_LINE_1>
               <con:ADDRESS_LINE_2>CALLE YORO, A LA PAR DE RADIO HOUSE,DISTRITO CENTRAL,FRANCISCO MO</con:ADDRESS_LINE_2>
               <con:IS_MAIN_ADDRESS>NO</con:IS_MAIN_ADDRESS>
			   <con:COLONY_CODE>HN.08.0001.000045</con:COLONY_CODE>
			   <con:COLONY_CODE_DESC>ALTOS DE CIUDAD LEMPIRA</con:COLONY_CODE_DESC>
			   <con:AVENUE>2 AVENIDA NO</con:AVENUE>
			   <con:ADDRESS_STREET>2DA CALLE</con:ADDRESS_STREET>
			   <con:BLOCK>Q</con:BLOCK>
			   <con:HOUSE_NUMBER>4</con:HOUSE_NUMBER>
			   <con:ADDRESS_REFERENCES>FUENTE INAGOTABLE</con:ADDRESS_REFERENCES>
            </con:ADDRESS_ITEM>
         </con:ADDRESS_INFO>
         <con:EMAIL_INFO>
            <con:EMAIL_ITEM>
               <con:EMAIL_ADDRESS>gineth.2406@gmail.com</con:EMAIL_ADDRESS>
			   <con:IS_MAIN_EMAIL>YES</con:IS_MAIN_EMAIL>
            </con:EMAIL_ITEM>
         </con:EMAIL_INFO>
         <con:JOB_INFO>
            <con:JOB_ITEM>
               <con:JOB_CODE>315</con:JOB_CODE>
               <con:SALARY_AMOUNT>22111</con:SALARY_AMOUNT>
               <con:START_DATE>20120109</con:START_DATE>
               <con:JOB_TITTLE>GERENTE GENERAL</con:JOB_TITTLE>
            </con:JOB_ITEM>
         </con:JOB_INFO>
         <con:SECTORIZATION_INFO>
            <con:SECTORIZATION_ITEM>
               <con:SECTORIZATION_TYPE>BCH</con:SECTORIZATION_TYPE>
               <con:SECTORIZATION_CODE>01.01.01</con:SECTORIZATION_CODE>
               <con:SECTORIZATION_DESC>HOGARES</con:SECTORIZATION_DESC>
            </con:SECTORIZATION_ITEM>
            <con:SECTORIZATION_ITEM>
               <con:SECTORIZATION_TYPE>SB13</con:SECTORIZATION_TYPE>
               <con:SECTORIZATION_CODE>010100</con:SECTORIZATION_CODE>
               <con:SECTORIZATION_DESC>ACTINDIF PRODSERV HOGARPR</con:SECTORIZATION_DESC>
            </con:SECTORIZATION_ITEM>
            <con:SECTORIZATION_ITEM>
               <con:SECTORIZATION_TYPE>CIIU</con:SECTORIZATION_TYPE>
               <con:SECTORIZATION_CODE>A0</con:SECTORIZATION_CODE>
               <con:SECTORIZATION_DESC>ASOC. COMERCIAL/PROFESION</con:SECTORIZATION_DESC>
            </con:SECTORIZATION_ITEM>
         </con:SECTORIZATION_INFO>
         <con:CONSTITUTION_DATE/>
         <con:OPERATION_COUNTRY_INFO>
            <con:OPERATION_COUNTRY_ITEM>
               <con:OPERATION_COUNTRY/>
            </con:OPERATION_COUNTRY_ITEM>
         </con:OPERATION_COUNTRY_INFO>
         <con:IS_LOCAL_OPERATION/>
         <con:OPERATION_DEPARTMENTS_INFO>
            <con:OPERATION_DEPARTMENTS_ITEM>
               <con:OPERATION_DEPARTMENT/>
            </con:OPERATION_DEPARTMENTS_ITEM>
         </con:OPERATION_DEPARTMENTS_INFO>
         <con:RESOURCE_ORIGIN/>
         <con:IS_ECONOMIC_GROUP/>
         <con:IS_PUBLIC_CHARGE>No</con:IS_PUBLIC_CHARGE>
         <con:PUBLIC_CHARGE_DESCRIPTION_INFO>
            <con:PUBLIC_CHARGE_DESCRIPTION_ITEM>
               <con:PUBLIC_CHARGE_DESCRIPTION/>
            </con:PUBLIC_CHARGE_DESCRIPTION_ITEM>
         </con:PUBLIC_CHARGE_DESCRIPTION_INFO>
         <con:PUBLIC_CHARGE_INSTITUTION>No Aplicable</con:PUBLIC_CHARGE_INSTITUTION>
         <con:LEGAL_IDENTIFICATION_EXPIRATION_DATE/>
		 <con:OTHER_NATIONALITIES_INFO>
            <con:NATIONALITIES_INFO_ITEM>
               <con:OTHER_NATIONALITY>HN</con:OTHER_NATIONALITY>
            </con:NATIONALITIES_INFO_ITEM>
         </con:OTHER_NATIONALITIES_INFO>
         <con:DEPENDENCY_ID/>
         <con:DEPENDENCY_NAME/>
         <con:DEPENDENCY_LASTNAME/>
         <con:TOTAL_INCOME>22111</con:TOTAL_INCOME>
		 <con:LEGAL_ISSUE_DATE>20130518</con:LEGAL_ISSUE_DATE>
		 <con:RTN>08011992152275</con:RTN>
		 <con:PLACE_OF_BIRTH>HN.08.0001</con:PLACE_OF_BIRTH>
		 <con:PLACE_OF_BIRTH_DESC>DISTRITO CENTRAL</con:PLACE_OF_BIRTH_DESC>
		 <con:TOWN_COUNTRY>HN</con:TOWN_COUNTRY>
		 <con:COUNTRY>HONDURAS</con:COUNTRY>
		 <con:DNFBP>Y</con:DNFBP>
		 <con:DNFBP_PROFESSION>CAMPO ABIERTO</con:DNFBP_PROFESSION>
		 <con:DEPENDENT_INFO>
			<con:DEPENDENT_INFO_ITEM>
				 <con:NAME>GINETH ALEJANDRA PERALTA</con:NAME>
				 <con:PROFESSION>70</con:PROFESSION>
				 <con:PROFESSION_DESC>ODONTOLOGO (A)</con:PROFESSION_DESC>
				 <con:RELATIONSHIP>31</con:RELATIONSHIP>
				 <con:RELATIONSHIP_DESC>Esposa</con:RELATIONSHIP_DESC>
			 </con:DEPENDENT_INFO_ITEM>
		 </con:DEPENDENT_INFO>
		 <con:INCOME_CURRENCY>
			<con:INCOME_CURRENCY_ITEM>
				<con:INCOME_CCY>HNL</con:INCOME_CCY>
				<con:INCOME_CCY_DESC>Lempiras</con:INCOME_CCY_DESC>
			</con:INCOME_CURRENCY_ITEM>
			<con:INCOME_CURRENCY_ITEM>
				<con:INCOME_CCY>USD</con:INCOME_CCY>
				<con:INCOME_CCY_DESC>US Dollar</con:INCOME_CCY_DESC>
			</con:INCOME_CURRENCY_ITEM>			
		 </con:INCOME_CURRENCY>
		 <con:OTHERS_INCOME>
			<con:OTHERS_INCOME_ITEM>
				<con:SOURCES>ALQUILERES</con:SOURCES>
				<con:AMOUNT>3500.00</con:AMOUNT>
			</con:OTHERS_INCOME_ITEM>
		 </con:OTHERS_INCOME>
		 <con:LEGALISED_NAME>CEDULA</con:LEGALISED_NAME>
		 <con:LEGALISED_NAME_DESC>CITIZENSHIP CARD</con:LEGALISED_NAME_DESC>
		 <con:PROFESION_TRADE>163</con:PROFESION_TRADE>
		 <con:PROFESION_TRADE_DESC>FISIOTERAPEUTA</con:PROFESION_TRADE_DESC>
		 <con:REFERENCES_INFO>
			 <con:REFERENCES_INFO_ITEM>
				 <con:NAMES>ALEJANDRO</con:NAMES>
				 <con:LAST_NAMES>PERALTA</con:LAST_NAMES>
				 <con:RELATIONSHIP>38</con:RELATIONSHIP>
				 <con:RELATIONSHIP_DESC>Hermano(a)</con:RELATIONSHIP_DESC>
				 <con:PHONE>98653214</con:PHONE>
			 </con:REFERENCES_INFO_ITEM>
			 <con:REFERENCES_INFO_ITEM>
				 <con:NAMES>PAULA</con:NAMES>
				 <con:LAST_NAMES>FLORES</con:LAST_NAMES>
				 <con:RELATIONSHIP>37</con:RELATIONSHIP>
				 <con:RELATIONSHIP_DESC>Amigo(a)</con:RELATIONSHIP_DESC>
				 <con:PHONE>98653214</con:PHONE>
			 </con:REFERENCES_INFO_ITEM>
			 <con:REFERENCES_INFO_ITEM>
				 <con:NAMES>IVAN</con:NAMES>
				 <con:LAST_NAMES>ZUNIGA</con:LAST_NAMES>
				 <con:RELATIONSHIP>37</con:RELATIONSHIP>
				 <con:RELATIONSHIP_DESC>Amigo(a)</con:RELATIONSHIP_DESC>
				 <con:PHONE>98653214</con:PHONE>
			 </con:REFERENCES_INFO_ITEM>
		 </con:REFERENCES_INFO>
		 <con:INTERFACE_USER>HN.07832</con:INTERFACE_USER>
      </con:consultaClienteResponse>]]></con2:xqueryText>
                  </con3:expr>
                </con3:replace>
                <con2:reply>
                  <con2:id>_ActionId-5251683405516274089--d229062.16caaa3065a.-7db3</con2:id>
                </con2:reply>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:wsCallout>
                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7fde</con2:id>
                <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con3:operation>obtenerParametrizacion</con3:operation>
                <con3:request>
                  <con3:body>$REQobtenerParametrizacion</con3:body>
                </con3:request>
                <con3:response>
                  <con3:body>RSPobtenerParametrizacion</con3:body>
                </con3:response>
                <con3:requestTransform>
                  <con1:assign varName="paramChannelUserHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e7c</con2:id>
                    <con1:expr>
                      <con2:xqueryText>fn:concat('FICBCO0414.CHANNEL.',fn:upper-case(data($header/aut:RequestHeader/Authentication/UserName)) ,'.HN01')</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                  <con1:assign varName="paramApiKeyHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e5f</con2:id>
                    <con1:expr>
                      <con2:xqueryText>'FICBCO0414.APIKEY.HN01'</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                  <con1:assign varName="paramCustomerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-7836817324396667117-56355dd4.17b08185e38.-7fc8</con2:id>
                    <con1:expr>
                      <con2:xqueryText>fn:concat('FICBCO0471.',data($body/con:consultaClienteRequest/con:CUSTOMER_ID_TYPE),'.HN01')</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                  <con1:assign varName="REQobtenerParametrizacion" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7f1b</con2:id>
                    <con1:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                        <con2:param name="nombreParametros">
                          <con2:path>fn:concat($paramChannelUserHN,"||",$paramApiKeyHN,"||",$paramCustomerIdTypeHN)</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con1:expr>
                  </con1:assign>
                </con3:requestTransform>
                <con3:responseTransform>
                  <con1:assign varName="channelUserHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7ec7</con2:id>
                    <con1:expr>
                      <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramChannelUserHN]/osb:VALUE)</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                  <con1:assign varName="apiKeyHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e0b</con2:id>
                    <con1:expr>
                      <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramApiKeyHN]/osb:VALUE)</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                  <con1:assign varName="customerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                    <con2:id>_ActionId-7836817324396667117-56355dd4.17b08185e38.-7f8f</con2:id>
                    <con1:expr>
                      <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramCustomerIdTypeHN]/osb:VALUE)</con2:xqueryText>
                    </con1:expr>
                  </con1:assign>
                </con3:responseTransform>
              </con3:wsCallout>
              <con3:ifThenElse>
                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e9e</con2:id>
                <con3:case>
                  <con3:condition>
                    <con2:xqueryText>$channelUserHN = 'CREDITFORCE'</con2:xqueryText>
                  </con3:condition>
                  <con3:actions>
                    <con3:ifThenElse>
                      <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7de5</con2:id>
                      <con3:case>
                        <con3:condition>
                          <con2:xqueryText>$apiKeyHN != ''</con2:xqueryText>
                        </con3:condition>
                        <con3:actions>
                          <con3:wsCallout>
                            <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7d73</con2:id>
                            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/ficohsaServices/biz/creditForce" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                            <con3:operation>Status</con3:operation>
                            <con3:request>
                              <con3:body>$REQStatus</con3:body>
                            </con3:request>
                            <con3:response>
                              <con3:body>RSPStatus</con3:body>
                            </con3:response>
                            <con3:requestTransform>
                              <con1:assign varName="REQStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7d1f</con2:id>
                                <con1:expr>
                                  <con2:xqueryTransform>
                                    <con2:resource ref="Middleware/v2/Resources/ConsultaProductosMora/xq/VerificarServiciosCreditForceIn"/>
                                    <con2:param name="token">
                                      <con2:path>$apiKeyHN</con2:path>
                                    </con2:param>
                                  </con2:xqueryTransform>
                                </con1:expr>
                              </con1:assign>
                            </con3:requestTransform>
                            <con3:responseTransform>
                              <con1:assign varName="creditForceStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7ccb</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>fn:data($RSPStatus/a:StatusResult/a:Status)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7c71</con2:id>
                                <con1:case>
                                  <con1:condition>
                                    <con2:xqueryText>$creditForceStatus != 1</con2:xqueryText>
                                  </con1:condition>
                                  <con1:actions>
                                    <con2:reply>
                                      <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7c70</con2:id>
                                    </con2:reply>
                                  </con1:actions>
                                </con1:case>
                              </con1:ifThenElse>
                            </con3:responseTransform>
                          </con3:wsCallout>
                          <con3:wsCallout>
                            <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7c37</con2:id>
                            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/ficohsaServices/biz/creditForce" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                            <con3:operation>Client</con3:operation>
                            <con3:request>
                              <con3:body>$REQclientCreditForce</con3:body>
                            </con3:request>
                            <con3:response>
                              <con3:body>RSPclientCreditForce</con3:body>
                            </con3:response>
                            <con3:requestTransform>
                              <con1:assign varName="REQclientCreditForce" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7be7</con2:id>
                                <con1:expr>
                                  <con2:xqueryTransform>
                                    <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceGTIn"/>
                                    <con2:param name="consultaClienteRequest">
                                      <con2:path>$body/con:consultaClienteRequest</con2:path>
                                    </con2:param>
                                    <con2:param name="type">
                                      <con2:path>$customerIdTypeHN</con2:path>
                                    </con2:param>
                                    <con2:param name="token">
                                      <con2:path>$apiKeyHN</con2:path>
                                    </con2:param>
                                  </con2:xqueryTransform>
                                </con1:expr>
                              </con1:assign>
                            </con3:requestTransform>
                            <con3:responseTransform/>
                          </con3:wsCallout>
                        </con3:actions>
                      </con3:case>
                      <con3:default>
                        <con1:Error xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                          <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7d91</con2:id>
                          <con1:errCode>NO RECORDS</con1:errCode>
                          <con1:message>NO API KEY FOUND</con1:message>
                        </con1:Error>
                      </con3:default>
                    </con3:ifThenElse>
                  </con3:actions>
                </con3:case>
                <con3:default>
                  <con3:wsCallout>
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e9a</con2:id>
                    <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v3/BusinessServices/ConsultaClienteBatch/biz/ConsultaClienteBatch_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                    <con3:operation>ConsultaClienteBatch</con3:operation>
                    <con3:request>
                      <con3:body>$REQconsultaClienteBatch</con3:body>
                    </con3:request>
                    <con3:response>
                      <con3:body>RSPconsultaClienteBatch</con3:body>
                    </con3:response>
                    <con3:requestTransform>
                      <con3:assign varName="REQconsultaClienteBatch">
                        <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7e9b</con2:id>
                        <con3:expr>
                          <con2:xqueryTransform>
                            <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchIn"/>
                            <con2:param name="consultaClienteRequest">
                              <con2:path>$body/con:consultaClienteRequest</con2:path>
                            </con2:param>
                          </con2:xqueryTransform>
                        </con3:expr>
                      </con3:assign>
                    </con3:requestTransform>
                    <con3:responseTransform/>
                  </con3:wsCallout>
                </con3:default>
              </con3:ifThenElse>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="Default_ConsultaCliente_response">
      <con1:stage name="FlujoSalida">
        <con1:context>
          <con2:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
        </con1:context>
        <con1:actions>
          <con4:Error xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/services/security/config" xmlns:con4="http://www.bea.com/wli/sb/stages/transform/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-2681369310853666711--5bcd27aa.14daf0d55d0.-7cd9</con5:id>
            <con4:errCode>MW-0008</con4:errCode>
            <con4:message>SERVICE NOT IMPLEMENTED YET FOR THIS COUNTRY/COMPANY</con4:message>
          </con4:Error>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="NI01_ConsultaCliente_response">
      <con1:stage name="FlujoSalida">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7f06</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7d90</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchHeaderCreditForceNIOut"/>
                      <con2:param name="clientResponse">
                        <con2:path>$RSPclientCreditForce</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:replace>
                <con3:ifThenElse>
                  <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7d8c</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text())!="SUCCESS"</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:replace varName="body" contents-only="true">
                        <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7c58</con2:id>
                        <con3:expr>
                          <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                        </con3:expr>
                      </con3:replace>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con3:assign varName="bodyResponse">
                      <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7c04</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceNIOut"/>
                          <con2:param name="sourceBank">
                            <con2:path>$sourceBank</con2:path>
                          </con2:param>
                          <con2:param name="clientResponse">
                            <con2:path>$RSPclientCreditForce</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:assign varName="finalResponse">
                      <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7bca</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchBodyNIOut"/>
                          <con2:param name="consultaClienteResponse">
                            <con2:path>$bodyResponse</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7b90</con2:id>
                      <con3:expr>
                        <con2:xqueryText>$finalResponse</con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:replace varName="header" contents-only="true">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7eb2</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPHConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
              <con3:replace varName="body" contents-only="true">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7e79</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="request" name="ValidacionesGenerales_request">
      <con1:stage name="ValidacionXSD">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
        </con1:context>
        <con1:actions>
          <con3:validate>
            <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-72ff</con2:id>
            <con3:schema ref="Middleware/v3/Resources/ConsultaCliente/xsd/consultaClientesTypes"/>
            <con3:schemaElement xmlns:con4="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes">con4:consultaClienteRequest</con3:schemaElement>
            <con3:varName>body</con3:varName>
            <con3:location>
              <con2:xpathText>./con:consultaClienteRequest</con2:xpathText>
            </con3:location>
          </con3:validate>
        </con1:actions>
      </con1:stage>
      <con1:stage name="ValidacionServicioRegional">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ValidaServicioRegional" prefix="val"/>
        </con1:context>
        <con1:actions>
          <con3:wsCallout>
            <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-72c7</con2:id>
            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/ValidaServicioRegional/biz/ValidaServicioRegional_db" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>ValidaServicioRegional</con3:operation>
            <con3:request>
              <con3:body wrapped="false">$reqValidaServicioRegional</con3:body>
              <con3:header/>
            </con3:request>
            <con3:response>
              <con3:body wrapped="false">respValidaServicioRegional</con3:body>
              <con3:header/>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="reqValidaServicioRegional">
                <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-728f</con2:id>
                <con3:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/v2/Resources/Generales/xq/validaServicioRegionalIn"/>
                    <con2:param name="requestHeader1">
                      <con2:path>$header/aut:RequestHeader</con2:path>
                    </con2:param>
                    <con2:param name="serviceId">
                      <con2:path>"FICBCO0414"</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform>
              <con3:ifThenElse>
                <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-7257</con2:id>
                <con3:case>
                  <con3:condition>
                    <con2:xqueryText>fn:string($respValidaServicioRegional/val:PV_CODIGO_ERROR/text()) != 'SUCCESS'</con2:xqueryText>
                  </con3:condition>
                  <con3:actions>
                    <con3:replace contents-only="true" varName="header">
                      <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-721f</con2:id>
                      <con3:expr>
                        <con2:xqueryText><![CDATA[<aut:ResponseHeader>
      <successIndicator>ERROR</successIndicator>
      <messages>{fn:string($respValidaServicioRegional/val:PV_MENSAJE_ERROR/text())}</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                    <con3:replace contents-only="true" varName="body">
                      <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-7202</con2:id>
                      <con3:expr>
                        <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                    <con2:reply isError="false">
                      <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-71e5</con2:id>
                    </con2:reply>
                  </con3:actions>
                </con3:case>
                <con3:default>
                  <con3:replace contents-only="true" varName="header">
                    <con2:id>_ActionId-6725052803708952302-71c4866b.14d7182d38a.-7177</con2:id>
                    <con3:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/v2/Resources/Generales/xq/aplicarValoresPorDefectoRegion"/>
                        <con2:param name="requestHeader">
                          <con2:path>$header/aut:RequestHeader</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con3:expr>
                  </con3:replace>
                </con3:default>
              </con3:ifThenElse>
            </con3:responseTransform>
          </con3:wsCallout>
          <con3:assign varName="sourceBank">
            <con2:id>_ActionId-4183888793276549345-48d8b147.18116fdc091.-7f9a</con2:id>
            <con3:expr>
              <con:xqueryText xmlns:con="http://www.bea.com/wli/sb/stages/config">fn:data($header/aut:RequestHeader/Region/SourceBank)</con:xqueryText>
            </con3:expr>
          </con3:assign>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="error" name="_onErrorHandler-6026376441913281250-4f600603.14c6c79842e.-7fe3">
      <con1:stage name="ManejodeErrores">
        <con1:context>
          <con2:userNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultasType" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con1"/>
        </con1:context>
        <con1:actions>
          <con3:assign varName="errorCode">
            <con2:id>_ActionId-1898359286976602208-7c3040f0.1542a170fba.-7cf5</con2:id>
            <con3:expr>
              <con2:xqueryText>fn:string($fault/ctx:errorCode/text())</con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:assign varName="errorMessage">
            <con2:id>_ActionId-1898359286976602208-7c3040f0.1542a170fba.-7cf4</con2:id>
            <con3:expr>
              <con2:xqueryText>fn:string($fault/ctx:reason/text())</con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:ifThenElse>
            <con2:id>_ActionId-5009823579309645510-2b594f24.1581d11811b.-7fae</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$errorCode = "BEA-382505"</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-5009823579309645510-2b594f24.1581d11811b.-7f70</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v2/Resources/Genericos/mapeoErrorValidate"/>
                      <con2:param name="anyType1">
                        <con2:path>$fault</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:replace>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con5:wsCallout xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/publish/config">
                <con2:id>_ActionId-5009823579309645510-2b594f24.1581d11811b.-7fa8</con2:id>
                <con5:service xsi:type="ref:ProxyRef" ref="Middleware/v2/ProxyServices/MapeoErrores" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con5:operation>mapeoErrores</con5:operation>
                <con5:request>
                  <con5:body>$reqMapeoErrores</con5:body>
                </con5:request>
                <con5:response>
                  <con5:body>respMapeoErrores</con5:body>
                </con5:response>
                <con5:requestTransform>
                  <con5:assign varName="reqMapeoErrores">
                    <con2:id>_ActionId-5009823579309645510-2b594f24.1581d11811b.-7faa</con2:id>
                    <con5:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageIn"/>
                        <con2:param name="MENSAJE_ERROR">
                          <con2:path>fn:concat("FICBCO0414", "$#$", $errorMessage)</con2:path>
                        </con2:param>
                        <con2:param name="CODIGO_ERROR">
                          <con2:path>$errorCode</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con5:expr>
                  </con5:assign>
                </con5:requestTransform>
                <con5:responseTransform>
                  <con5:replace contents-only="true" varName="header">
                    <con2:id>_ActionId-5009823579309645510-2b594f24.1581d11811b.-7fa9</con2:id>
                    <con5:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/v2/Resources/MapeoErrores/xq/mapeoErroresUsageOut"/>
                        <con2:param name="mapeoErroresResponse1">
                          <con2:path>$respMapeoErrores</con2:path>
                        </con2:param>
                        <con2:param name="successIndicator">
                          <con2:path>$errorCode</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con5:expr>
                  </con5:replace>
                </con5:responseTransform>
              </con5:wsCallout>
            </con3:default>
          </con3:ifThenElse>
          <con3:replace varName="body" contents-only="true">
            <con2:id>_ActionId-1898359286976602208-7c3040f0.1542a170fba.-7cf0</con2:id>
            <con3:expr>
              <con2:xqueryText>&lt;con1:consultaClienteResponse/></con2:xqueryText>
            </con3:expr>
          </con3:replace>
          <con2:reply>
            <con2:id>_ActionId-1898359286976602208-7c3040f0.1542a170fba.-7cef</con2:id>
          </con2:reply>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="GT01_ConsultaCliente_response">
      <con1:stage name="FujoSalida">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
        </con1:context>
        <con1:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7a59</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7916</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchHeaderCreditForceOut"/>
                      <con2:param name="clientResponse">
                        <con2:path>$RSPclientCreditForce</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:replace>
                <con3:ifThenElse>
                  <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-78e2</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text())!="SUCCESS"</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:replace varName="body" contents-only="true">
                        <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7863</con2:id>
                        <con3:expr>
                          <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                        </con3:expr>
                      </con3:replace>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con3:assign varName="bodyResponse">
                      <con2:id>_ActionId-6721832931770998147-641ab848.1813ae46c53.-7fd4</con2:id>
                      <con3:expr>
                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                          <con:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceOut"/>
                          <con:param name="clientResponse">
                            <con:path>$RSPclientCreditForce</con:path>
                          </con:param>
                          <con:param name="sourceBank">
                            <con:path>$sourceBank</con:path>
                          </con:param>
                        </con:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:assign varName="finalResponse">
                      <con2:id>_ActionId-6721832931770998147-641ab848.1813ae46c53.-7fc3</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchBodyOut"/>
                          <con2:param name="consultaClienteResponse">
                            <con2:path>$bodyResponse</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-8073179084750700301--4a007ee6.180a5d64698.-7841</con2:id>
                      <con3:expr>
                        <con2:xqueryText>$finalResponse</con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:replace varName="header" contents-only="true">
                <con2:id>_ActionId-5584714915112100995-378a0afb.182caf75b06.-7f30</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPHConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
              <con3:replace varName="body" contents-only="true">
                <con2:id>_ActionId-5584714915112100995-378a0afb.182caf75b06.-7ef7</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="PA01_ConsultaCliente_response">
      <con1:stage name="FlujoSalida">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c45</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c44</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchHeaderCreditForceGTOut"/>
                      <con2:param name="clientResponse">
                        <con2:path>$RSPclientCreditForce</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:replace>
                <con3:ifThenElse>
                  <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c43</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text())!="SUCCESS"</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:replace varName="body" contents-only="true">
                        <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c42</con2:id>
                        <con3:expr>
                          <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                        </con3:expr>
                      </con3:replace>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con3:assign varName="bodyResponse">
                      <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c41</con2:id>
                      <con3:expr>
                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                          <con:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForcePAOut"/>
                          <con:param name="clientResponse">
                            <con:path>$RSPclientCreditForce</con:path>
                          </con:param>
                          <con:param name="sourceBank">
                            <con:path>$sourceBank</con:path>
                          </con:param>
                        </con:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:assign varName="finalResponse">
                      <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c40</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchBodyPAOut"/>
                          <con2:param name="consultaClienteResponse">
                            <con2:path>$bodyResponse</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7c3f</con2:id>
                      <con3:expr>
                        <con2:xqueryText>$finalResponse</con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:replace varName="header" contents-only="true">
                <con2:id>_ActionId-5584714915112100995-378a0afb.182caf75b06.-7f84</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPHConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
              <con3:replace varName="body" contents-only="true">
                <con2:id>_ActionId-5584714915112100995-378a0afb.182caf75b06.-7fff</con2:id>
                <con3:expr>
                  <con2:xqueryText>$RSPConsultaCliente/*</con2:xqueryText>
                </con3:expr>
              </con3:replace>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="request" name="Default_ConsultaCliente_request">
      <con1:stage name="FlujoEntrada">
        <con1:context/>
        <con1:actions/>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="request" name="PA01_ConsultaCliente_request">
      <con1:stage name="ObtenerParametrizacion">
        <con1:context>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
          <con2:userNsDecl namespace="http://schemas.datacontract.org/2004/07/CreditForce.Common.DataContract.BackEnd.Collection" prefix="a"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:actions>
          <con3:wsCallout>
            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e58</con2:id>
            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>obtenerParametrizacion</con3:operation>
            <con3:request>
              <con3:body>$REQobtenerParametrizacion</con3:body>
            </con3:request>
            <con3:response>
              <con3:body>RSPobtenerParametrizacion</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con1:assign varName="paramChannelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5f</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0414.CHANNEL.',fn:upper-case(data($header/aut:RequestHeader/Authentication/UserName)) ,'.PA01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramApiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5e</con2:id>
                <con1:expr>
                  <con2:xqueryText>'FICBCO0414.APIKEY.PA01'</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramCustomerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5d</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0471.',data($body/con:consultaClienteRequest/con:CUSTOMER_ID_TYPE),'.HN01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="REQobtenerParametrizacion" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5c</con2:id>
                <con1:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                    <con2:param name="nombreParametros">
                      <con2:path>fn:concat($paramChannelUser,"||",$paramApiKey,"||",$paramCustomerIdTypeHN)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con3:requestTransform>
            <con3:responseTransform>
              <con1:assign varName="channelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5b</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramChannelUser]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="apiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e5a</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramApiKey]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="customerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e59</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramCustomerIdTypeHN]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
            </con3:responseTransform>
          </con3:wsCallout>
          <con3:ifThenElse>
            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e57</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:ifThenElse>
                  <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e56</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>$apiKey != ''</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:wsCallout>
                        <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e51</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosPA/biz/creditForcePA" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Status</con3:operation>
                        <con3:request>
                          <con3:body>$REQStatus</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RSPStatus</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e55</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/ConsultaProductosMora/xq/VerificarServiciosCreditForceIn"/>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform>
                          <con1:assign varName="creditForceStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e54</con2:id>
                            <con1:expr>
                              <con2:xqueryText>fn:data($RSPStatus/a:StatusResult/a:Status)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con1:ifThenElse xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e53</con2:id>
                            <con1:case>
                              <con1:condition>
                                <con2:xqueryText>$creditForceStatus != 1</con2:xqueryText>
                              </con1:condition>
                              <con1:actions>
                                <con2:reply>
                                  <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e52</con2:id>
                                </con2:reply>
                              </con1:actions>
                            </con1:case>
                          </con1:ifThenElse>
                        </con3:responseTransform>
                      </con3:wsCallout>
                      <con3:wsCallout>
                        <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e4f</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosPA/biz/creditForcePA" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Client</con3:operation>
                        <con3:request>
                          <con3:body>$REQclientCreditForce</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RSPclientCreditForce</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQclientCreditForce" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e50</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForcePAIn"/>
                                <con2:param name="consultaClienteRequest">
                                  <con2:path>$body/con:consultaClienteRequest</con2:path>
                                </con2:param>
                                <con2:param name="type">
                                  <con2:path>$customerIdTypeHN</con2:path>
                                </con2:param>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform/>
                      </con3:wsCallout>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con1:Error xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                      <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e4e</con2:id>
                      <con1:errCode>NO RECORDS</con1:errCode>
                      <con1:message>NO API KEY FOUND</con1:message>
                    </con1:Error>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:wsCallout>
                <con2:id>_ActionId-4781495206946152139--24a8e7b2.1825ea998aa.-7e4b</con2:id>
                <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v3/ProxyServices/ConsultaCliente" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con3:operation>consultaCliente</con3:operation>
                <con3:request>
                  <con3:body wrapped="true">$body</con3:body>
                  <con3:header>$header</con3:header>
                </con3:request>
                <con3:response>
                  <con3:body wrapped="true">RSPConsultaCliente</con3:body>
                  <con3:header>RSPHConsultaCliente</con3:header>
                </con3:response>
                <con3:requestTransform/>
                <con3:responseTransform/>
              </con3:wsCallout>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="response" name="HN01_ConsultaCliente_response">
      <con1:stage name="FlujoSalida">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
        </con1:context>
        <con1:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7b91</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUserHN = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:replace varName="header" contents-only="true">
                  <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7ab9</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchHeaderCreditForceGTOut"/>
                      <con2:param name="clientResponse">
                        <con2:path>$RSPclientCreditForce</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:replace>
                <con3:ifThenElse>
                  <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7a62</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text())!="SUCCESS"</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:replace varName="body" contents-only="true">
                        <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7943</con2:id>
                        <con3:expr>
                          <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                        </con3:expr>
                      </con3:replace>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con3:assign varName="bodyResponse">
                      <con2:id>_ActionId-6721832931770998147-641ab848.1813ae46c53.-7ef9</con2:id>
                      <con3:expr>
                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                          <con:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceGTOut"/>
                          <con:param name="clientResponse">
                            <con:path>$RSPclientCreditForce</con:path>
                          </con:param>
                          <con:param name="sourceBank">
                            <con:path>$sourceBank</con:path>
                          </con:param>
                        </con:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:assign varName="finalResponse">
                      <con2:id>_ActionId-6721832931770998147-641ab848.1813ae46c53.-7ec0</con2:id>
                      <con3:expr>
                        <con2:xqueryTransform>
                          <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchBodyGTOut"/>
                          <con2:param name="consultaClienteResponse">
                            <con2:path>$bodyResponse</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con3:expr>
                    </con3:assign>
                    <con3:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-6721832931770998147-641ab848.1813ae46c53.-7e87</con2:id>
                      <con3:expr>
                        <con2:xqueryText>$finalResponse</con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:replace contents-only="true" varName="header">
                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7b8f</con2:id>
                <con3:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchHeaderOut"/>
                    <con2:param name="outputParameters">
                      <con2:path>$RSPconsultaClienteBatch</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con3:expr>
              </con3:replace>
              <con3:ifThenElse>
                <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7b8b</con2:id>
                <con3:case>
                  <con3:condition>
                    <con2:xqueryText>fn:string($header/aut:ResponseHeader/successIndicator/text())!="SUCCESS"</con2:xqueryText>
                  </con3:condition>
                  <con3:actions>
                    <con3:replace varName="body" contents-only="true">
                      <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-799f</con2:id>
                      <con3:expr>
                        <con2:xqueryText>&lt;con:consultaClienteResponse/></con2:xqueryText>
                      </con3:expr>
                    </con3:replace>
                  </con3:actions>
                </con3:case>
                <con3:default>
                  <con3:replace contents-only="true" varName="body">
                    <con2:id>_ActionId-972313088766258770--7776b4b.17ae319e04d.-7b89</con2:id>
                    <con3:expr>
                      <con2:xqueryTransform>
                        <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchOut"/>
                        <con2:param name="outputParameters">
                          <con2:path>$RSPconsultaClienteBatch</con2:path>
                        </con2:param>
                      </con2:xqueryTransform>
                    </con3:expr>
                  </con3:replace>
                </con3:default>
              </con3:ifThenElse>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:pipeline type="request" name="NI01_ConsultaCliente_request">
      <con1:stage name="ObtenerParametrizacion">
        <con1:context>
          <con2:userNsDecl namespace="http://xmlns.oracle.com/pcbpel/adapter/db/ORA_BANK/OSB_GET_CONFIG/" prefix="osb"/>
          <con2:userNsDecl namespace="http://schemas.datacontract.org/2004/07/CreditForce.Common.DataContract.BackEnd.Collection" prefix="a"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
        </con1:context>
        <con1:actions>
          <con3:wsCallout>
            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7b74</con2:id>
            <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/Business_Resources/general/Resources/ObtenerParametrizacion/ObtenerParametrizacion" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>obtenerParametrizacion</con3:operation>
            <con3:request>
              <con3:body>$REQobtenerParametrizacion</con3:body>
            </con3:request>
            <con3:response>
              <con3:body>RSPobtenerParametrizacion</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con1:assign varName="paramChannelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7b20</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0414.CHANNEL.',fn:upper-case(data($header/aut:RequestHeader/Authentication/UserName)) ,'.NI01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramApiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7ae7</con2:id>
                <con1:expr>
                  <con2:xqueryText>'FICBCO0414.APIKEY.NI01'</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="paramCustomerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7aae</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:concat('FICBCO0471.',data($body/con:consultaClienteRequest/con:CUSTOMER_ID_TYPE),'.NI01')</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="REQobtenerParametrizacion" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7a2b</con2:id>
                <con1:expr>
                  <con2:xqueryTransform>
                    <con2:resource ref="Middleware/Business_Resources/general/Parametrizacion/obtenerParametrizacionIn"/>
                    <con2:param name="nombreParametros">
                      <con2:path>fn:concat($paramChannelUser,"||",$paramApiKey,"||",$paramCustomerIdTypeHN)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con3:requestTransform>
            <con3:responseTransform>
              <con1:assign varName="channelUser" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-79d7</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramChannelUser]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="apiKey" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-799e</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramApiKey]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="customerIdTypeHN" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7965</con2:id>
                <con1:expr>
                  <con2:xqueryText>fn:data($RSPobtenerParametrizacion/osb:CONFIGURACIONES/osb:CONFIGURACIONES_ITEM[osb:NAME=$paramCustomerIdTypeHN]/osb:VALUE)</con2:xqueryText>
                </con1:expr>
              </con1:assign>
            </con3:responseTransform>
          </con3:wsCallout>
          <con3:ifThenElse>
            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7922</con2:id>
            <con3:case>
              <con3:condition>
                <con2:xqueryText>$channelUser = 'CREDITFORCE'</con2:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:ifThenElse>
                  <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-78d1</con2:id>
                  <con3:case>
                    <con3:condition>
                      <con2:xqueryText>$apiKey != ''</con2:xqueryText>
                    </con3:condition>
                    <con3:actions>
                      <con3:wsCallout>
                        <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-786a</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosNI/biz/creditForceNI" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Status</con3:operation>
                        <con3:request>
                          <con3:body>$REQStatus</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RESPStatus</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7816</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v2/Resources/ConsultaProductosMora/xq/VerificarServiciosCreditForceIn"/>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform>
                          <con1:assign varName="creditForceStatus" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-77c2</con2:id>
                            <con1:expr>
                              <con2:xqueryText>fn:data($RSPStatus/a:StatusResult/a:Status)</con2:xqueryText>
                            </con1:expr>
                          </con1:assign>
                          <con3:ifThenElse>
                            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-77a3</con2:id>
                            <con3:case>
                              <con3:condition>
                                <con2:xqueryText>$creditForceStatus != 1</con2:xqueryText>
                              </con3:condition>
                              <con3:actions>
                                <con2:reply>
                                  <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7758</con2:id>
                                </con2:reply>
                              </con3:actions>
                            </con3:case>
                          </con3:ifThenElse>
                        </con3:responseTransform>
                      </con3:wsCallout>
                      <con3:wsCallout>
                        <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-772a</con2:id>
                        <con3:service xsi:type="ref:BusinessServiceRef" ref="Middleware/v2/BusinessServices/CREDITFORCE/cobrosNI/biz/creditForceNI" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con3:operation>Client</con3:operation>
                        <con3:request>
                          <con3:body>$REQclientCreditForce</con3:body>
                        </con3:request>
                        <con3:response>
                          <con3:body>RSPclientCreditForce</con3:body>
                        </con3:response>
                        <con3:requestTransform>
                          <con1:assign varName="REQclientCreditForce" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                            <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-76d6</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="Middleware/v3/Resources/ConsultaClienteBatch/xq/consultaClienteBatchCreditForceNIIn"/>
                                <con2:param name="consultaClienteRequest">
                                  <con2:path>$body/con:consultaClienteRequest</con2:path>
                                </con2:param>
                                <con2:param name="type">
                                  <con2:path>$customerIdTypeHN</con2:path>
                                </con2:param>
                                <con2:param name="token">
                                  <con2:path>$apiKey</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con3:requestTransform>
                        <con3:responseTransform/>
                      </con3:wsCallout>
                    </con3:actions>
                  </con3:case>
                  <con3:default>
                    <con1:Error xmlns:con3="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                      <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-787d</con2:id>
                      <con1:errCode>NO RECORDS</con1:errCode>
                      <con1:message>NO API KEY FOUND</con1:message>
                    </con1:Error>
                  </con3:default>
                </con3:ifThenElse>
              </con3:actions>
            </con3:case>
            <con3:default>
              <con3:wsCallout>
                <con2:id>_ActionId-383925577250748819-536be7e9.184a26d59b2.-7906</con2:id>
                <con3:service xsi:type="ref:ProxyRef" ref="Middleware/v3/ProxyServices/ConsultaCliente" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                <con3:operation>consultaCliente</con3:operation>
                <con3:request>
                  <con3:body wrapped="true">$body</con3:body>
                  <con3:header>$header</con3:header>
                </con3:request>
                <con3:response>
                  <con3:body wrapped="true">RSPConsultaCliente</con3:body>
                  <con3:header>RSPHConsultaCliente</con3:header>
                </con3:response>
                <con3:requestTransform/>
                <con3:responseTransform/>
              </con3:wsCallout>
            </con3:default>
          </con3:ifThenElse>
        </con1:actions>
      </con1:stage>
    </con1:pipeline>
    <con1:flow>
      <con1:pipeline-node name="ValidacionesGenerales">
        <con1:request>ValidacionesGenerales_request</con1:request>
        <con1:response>ValidacionesGenerales_response</con1:response>
      </con1:pipeline-node>
      <con1:branch-node type="condition" name="RegionalizacionPaisEmpresa">
        <con1:context>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/consultaClientesTypes" prefix="con"/>
          <con2:varNsDecl namespace="http://www.ficohsa.com.hn/middleware.services/autType" prefix="aut"/>
        </con1:context>
        <con1:branch-table variable="header">
          <con1:xpath>
            <con2:xpathText>./aut:RequestHeader/Region/SourceBank</con2:xpathText>
          </con1:xpath>
          <con1:branch name="HN01">
            <con1:operator>equals</con1:operator>
            <con1:value>('HN01','HN03')</con1:value>
            <con1:flow>
              <con1:pipeline-node name="HN01_ConsultaCliente">
                <con1:request>HN01_ConsultaCliente_request</con1:request>
                <con1:response>HN01_ConsultaCliente_response</con1:response>
              </con1:pipeline-node>
            </con1:flow>
          </con1:branch>
          <con1:branch name="HN02">
            <con1:operator>equals</con1:operator>
            <con1:value>'HN02'</con1:value>
            <con1:flow>
              <con1:route-node name="HNFPC_ConsultaCliente">
                <con1:context/>
                <con1:actions>
                  <con4:route>
                    <con2:id>_ActionId-3665632579324020755--2d38d34a.172a91533f2.-7d7b</con2:id>
                    <con4:service ref="Middleware/v3/ProxyServices/ConsultaCliente" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                    <con4:operation>consultaCliente</con4:operation>
                    <con4:outboundTransform/>
                    <con4:responseTransform/>
                  </con4:route>
                </con1:actions>
              </con1:route-node>
            </con1:flow>
          </con1:branch>
          <con1:branch name="GT01">
            <con1:operator>equals</con1:operator>
            <con1:value>'GT01'</con1:value>
            <con1:flow>
              <con1:pipeline-node name="GT01_ConsultaCliente">
                <con1:request>GT01_ConsultaCliente_request</con1:request>
                <con1:response>GT01_ConsultaCliente_response</con1:response>
              </con1:pipeline-node>
            </con1:flow>
          </con1:branch>
          <con1:branch name="PA01">
            <con1:operator>equals</con1:operator>
            <con1:value>'PA01'</con1:value>
            <con1:flow>
              <con1:pipeline-node name="PA01_ConsultaCliente">
                <con1:request>PA01_ConsultaCliente_request</con1:request>
                <con1:response>PA01_ConsultaCliente_response</con1:response>
              </con1:pipeline-node>
            </con1:flow>
          </con1:branch>
          <con1:branch name="NI01">
            <con1:operator>equals</con1:operator>
            <con1:value>'NI01'</con1:value>
            <con1:flow>
              <con1:pipeline-node name="NI01_ConsultaCliente">
                <con1:request>NI01_ConsultaCliente_request</con1:request>
                <con1:response>NI01_ConsultaCliente_response</con1:response>
              </con1:pipeline-node>
            </con1:flow>
          </con1:branch>
          <con1:default-branch>
            <con1:flow>
              <con1:pipeline-node name="Default_ConsultaCliente">
                <con1:request>Default_ConsultaCliente_request</con1:request>
                <con1:response>Default_ConsultaCliente_response</con1:response>
              </con1:pipeline-node>
            </con1:flow>
          </con1:default-branch>
        </con1:branch-table>
      </con1:branch-node>
    </con1:flow>
  </ser:router>
</xml-fragment>