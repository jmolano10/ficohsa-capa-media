<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="SBRG_MassivePayment_Commons_Virtual/Resources/PagosMasivos/pagosMasivosPS"/>
            <con:binding>
                <con:name>pagosMasivosPSSOAP</con:name>
                <con:namespace>http://www.ficohsa.com.hn/middleware.services/pagosMasivosPS/</con:namespace>
            </con:binding>
        </con:binding>
        <con:xqConfiguration>
            <con:snippetVersion>1.0</con:snippetVersion>
        </con:xqConfiguration>
    </con:coreEntry>
    <con:router errorHandler="error-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7cb5">
        <con:pipeline type="request" name="request-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fdd">
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7c79" name="GetDVMParameters">
                <con:context/>
                <con:actions>
                    <con1:assign varName="errorCallOld" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7de2</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">''</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="errorCallOld" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7ddf</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', 'Router.ERROR.CONTROL.CALL.OLD.ENGINE', 'Value', 'Inactive')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="callBothEngines" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N7477</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">''</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="callApiGateway" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N7474</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">''</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="sourceBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fd7</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(($header//Region/SourceBank) and (data($header//Region/SourceBank)!= '')) then
    data($header//Region/SourceBank)
else(
    'HN01'
)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N748b</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N748a">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='consultaEstadoLote'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="callBothEngines">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N7495</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', fn:concat('Router.CALL.BOTH.ENGINES.GET.BATCH.STATUS.',$sourceBank), 'Value', 'Inactive')</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N6da0">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='consultaDetalleLote'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="callBothEngines">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N6d6c</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', fn:concat('Router.CALL.BOTH.ENGINES.GET.BATCH.DETAIL.',$sourceBank), 'Value', 'Inactive')</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7e7e">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='consultaLotesCliente'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="callBothEngines">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e4a</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', fn:concat('Router.CALL.BOTH.ENGINES.GET.CUSTOMER.BATCH.',$sourceBank), 'Value', 'Inactive')</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N747c</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N747b">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callBothEngines!='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="callApiGateway">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7c45</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', fn:concat('Router.CALL.API.GATEWAY.',$sourceBank), 'Value', 'Inactive')</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7bc2</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N740e">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callBothEngines='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="system">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N73a5</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'BOTH'</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7bc1">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway!='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="system">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7bbb</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'OLD'</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fdb" name="InputDefinitions">
                <con:context>
                    <con1:userNsDecl prefix="pag" namespace="http://www.ficohsa.com.hn/middleware.services/pagosMasivosTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="destinationBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fd4</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(($header//Region/DestinationBank) and (data($header//Region/DestinationBank)!= '')) then
data($header//Region/DestinationBank)
else(
$sourceBank
)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="protocol" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7ab7</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:matches($inbound/ctx:transport/ctx:uri/text(), '/rest/'))then(
'REST'
)else(
'SOAP'
)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="user" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7ab4</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($header//Authentication/UserName)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="version" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7ab1</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'v1'</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="service" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7aad</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'MassivePayment/Router'</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="endPoint" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7aaa</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($inbound/ctx:transport/ctx:uri/text())</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7c3b</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7c3a">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="method">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fd1</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case(data($operation))</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="customerId">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fce</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($body//CUSTOMER_ID)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="queryType">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7d0c</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="SBRG_MassivePayment_Router/Transformations/GetQueryType"/>
                                            <con2:param name="body">
                                                <con2:path>$body</con2:path>
                                            </con2:param>
                                            <con2:param name="operation">
                                                <con2:path>$operation</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="queryValue">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7d09</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="SBRG_MassivePayment_Router/Transformations/GetQueryValue"/>
                                            <con2:param name="body">
                                                <con2:path>$body</con2:path>
                                            </con2:param>
                                            <con2:param name="operation">
                                                <con2:path>$operation</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7b1b" name="StageLoggingInputRouter">
                <con:context/>
                <con:actions>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7b1a</con2:id>
                        <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SaveLogInFileSystem</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7b19</con3:id>
                                <con2:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                        <con3:param name="destinationBank">
                                            <con3:path>$destinationBank</con3:path>
                                        </con3:param>
                                        <con3:param name="method">
                                            <con3:path>$protocol</con3:path>
                                        </con3:param>
                                        <con3:param name="errorFlowName">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="channel">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="messageError">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="body">
                                            <con3:path>$body</con3:path>
                                        </con3:param>
                                        <con3:param name="version">
                                            <con3:path>$version</con3:path>
                                        </con3:param>
                                        <con3:param name="targetSystem">
                                            <con3:path>'OSB'</con3:path>
                                        </con3:param>
                                        <con3:param name="GlobalId">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="sourceBank">
                                            <con3:path>$sourceBank</con3:path>
                                        </con3:param>
                                        <con3:param name="endpoint">
                                            <con3:path>$endPoint</con3:path>
                                        </con3:param>
                                        <con3:param name="messageType">
                                            <con3:path>'REQUEST'</con3:path>
                                        </con3:param>
                                        <con3:param name="service">
                                            <con3:path>$service</con3:path>
                                        </con3:param>
                                        <con3:param name="codeError">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="state">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="operation">
                                            <con3:path>$operation</con3:path>
                                        </con3:param>
                                        <con3:param name="value">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="user">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="parameters">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="key">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="errorDetails">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fcc" name="ServiceToAPI">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7c2d</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7c2c">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:replace varName="requestAPIGateway">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fc9</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="SBRG_MassivePayment_Router/Transformations/ServiceToAPIGateway"/>
                                            <con2:param name="destinationBank">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="method">
                                                <con2:path>$method</con2:path>
                                            </con2:param>
                                            <con2:param name="customerId">
                                                <con2:path>$customerId</con2:path>
                                            </con2:param>
                                            <con2:param name="queryValue">
                                                <con2:path>$queryValue</con2:path>
                                            </con2:param>
                                            <con2:param name="sourceBank">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="queryType">
                                                <con2:path>$queryType</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7b8b" name="StageLoggingInputApiGateway">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7abd</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7abc">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7b88</con3:id>
                                    <con2:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>SaveLogInFileSystem</con2:operation>
                                    <con2:outboundTransform>
                                        <con1:replace varName="body" contents-only="true">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7b85</con3:id>
                                            <con1:expr>
                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                    <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                    <con3:param name="destinationBank">
                                                        <con3:path>$destinationBank</con3:path>
                                                    </con3:param>
                                                    <con3:param name="method">
                                                        <con3:path>$protocol</con3:path>
                                                    </con3:param>
                                                    <con3:param name="errorFlowName">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="channel">
                                                        <con3:path>$user</con3:path>
                                                    </con3:param>
                                                    <con3:param name="messageError">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="body">
                                                        <con3:path>$requestAPIGateway</con3:path>
                                                    </con3:param>
                                                    <con3:param name="version">
                                                        <con3:path>$version</con3:path>
                                                    </con3:param>
                                                    <con3:param name="targetSystem">
                                                        <con3:path>'APIGATEWAYPMSV'</con3:path>
                                                    </con3:param>
                                                    <con3:param name="GlobalId">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="sourceBank">
                                                        <con3:path>$sourceBank</con3:path>
                                                    </con3:param>
                                                    <con3:param name="endpoint">
                                                        <con3:path>$endPoint</con3:path>
                                                    </con3:param>
                                                    <con3:param name="messageType">
                                                        <con3:path>'REQUEST'</con3:path>
                                                    </con3:param>
                                                    <con3:param name="service">
                                                        <con3:path>$service</con3:path>
                                                    </con3:param>
                                                    <con3:param name="codeError">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="state">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="operation">
                                                        <con3:path>$operation</con3:path>
                                                    </con3:param>
                                                    <con3:param name="value">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="user">
                                                        <con3:path>$user</con3:path>
                                                    </con3:param>
                                                    <con3:param name="parameters">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="key">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="errorDetails">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                </con3:xqueryTransform>
                                            </con1:expr>
                                        </con1:replace>
                                    </con2:outboundTransform>
                                </con2:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fcd" name="CallAPIGateway">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7c24</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7c23">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fc6</con2:id>
                                    <con1:service ref="SBRG_MassivePayment_Router/BS/ApiPagosMasivosGatewayRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>System</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">requestAPIGateway</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">responseAPIGateway</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fc5" name="APIGatewayResponseDefinitions">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7c1b</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7c1a">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="state">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fc2</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$responseAPIGateway//successIndicator/text()</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="codeError">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fbf</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$responseAPIGateway//error/code/text()</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="messageError">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fbb</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$responseAPIGateway//error/message/text()</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="system">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fb8</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$responseAPIGateway//system/text()</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7a04" name="StageLoggingOutputApiGateway">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N79c8</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N79c7">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N79c6</con3:id>
                                    <con2:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con2:operation>SaveLogInFileSystem</con2:operation>
                                    <con2:outboundTransform>
                                        <con1:replace varName="body" contents-only="true">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N79c5</con3:id>
                                            <con1:expr>
                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                    <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                    <con3:param name="destinationBank">
                                                        <con3:path>$destinationBank</con3:path>
                                                    </con3:param>
                                                    <con3:param name="method">
                                                        <con3:path>$protocol</con3:path>
                                                    </con3:param>
                                                    <con3:param name="errorFlowName">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="channel">
                                                        <con3:path>$user</con3:path>
                                                    </con3:param>
                                                    <con3:param name="messageError">
                                                        <con3:path>$messageError</con3:path>
                                                    </con3:param>
                                                    <con3:param name="body">
                                                        <con3:path>$responseAPIGateway</con3:path>
                                                    </con3:param>
                                                    <con3:param name="version">
                                                        <con3:path>$version</con3:path>
                                                    </con3:param>
                                                    <con3:param name="targetSystem">
                                                        <con3:path>'APIGATEWAYPMSV'</con3:path>
                                                    </con3:param>
                                                    <con3:param name="GlobalId">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="sourceBank">
                                                        <con3:path>$sourceBank</con3:path>
                                                    </con3:param>
                                                    <con3:param name="endpoint">
                                                        <con3:path>$endPoint</con3:path>
                                                    </con3:param>
                                                    <con3:param name="messageType">
                                                        <con3:path>'RESPONSE'</con3:path>
                                                    </con3:param>
                                                    <con3:param name="service">
                                                        <con3:path>$service</con3:path>
                                                    </con3:param>
                                                    <con3:param name="codeError">
                                                        <con3:path>$codeError</con3:path>
                                                    </con3:param>
                                                    <con3:param name="state">
                                                        <con3:path>$state</con3:path>
                                                    </con3:param>
                                                    <con3:param name="operation">
                                                        <con3:path>$operation</con3:path>
                                                    </con3:param>
                                                    <con3:param name="value">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="user">
                                                        <con3:path>$user</con3:path>
                                                    </con3:param>
                                                    <con3:param name="parameters">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="key">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                    <con3:param name="errorDetails">
                                                        <con3:path>''</con3:path>
                                                    </con3:param>
                                                </con3:xqueryTransform>
                                            </con1:expr>
                                        </con1:replace>
                                    </con2:outboundTransform>
                                </con2:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79e1" name="APIErrorHandler">
                <con:context>
                    <con1:userNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pag" namespace="http://www.ficohsa.com.hn/middleware.services/pagosMasivosTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7bcf</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.23642cc8.0.190283d1c66.N7bce">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$callApiGateway='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79e0</con2:id>
                                    <con1:case id="_BranchId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79df">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($state) != 'SUCCESS'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7dd5</con2:id>
                                                <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7dd4">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCallOld='Active'</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e86</con2:id>
                                                            <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7e85">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='pagosMasivos'</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e84</con2:id>
                                                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>pagosMasivos</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform/>
                                                                    </con1:wsCallout>
                                                                    <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e83</con2:id>
                                                                    </con2:reply>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7e82">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='cargarArchivoLote'</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e81</con2:id>
                                                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>cargarArchivoLote</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform/>
                                                                    </con1:wsCallout>
                                                                    <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7e80</con2:id>
                                                                    </con2:reply>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N79b3">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='autorizarLote'</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N79b2</con2:id>
                                                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>autorizarLote</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform/>
                                                                    </con1:wsCallout>
                                                                    <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N79af</con2:id>
                                                                    </con2:reply>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N789e">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='cancelarLote'</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N789d</con2:id>
                                                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>cancelarLote</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform/>
                                                                    </con1:wsCallout>
                                                                    <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N789a</con2:id>
                                                                    </con2:reply>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N77b7">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='consultaTransaccionLote'</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N77b6</con2:id>
                                                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>consultaTransaccionLote</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="true">body</con1:body>
                                                                            <con1:header>header</con1:header>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform/>
                                                                    </con1:wsCallout>
                                                                    <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N77b3</con2:id>
                                                                    </con2:reply>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default/>
                                                        </con1:ifThenElse>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                            </con1:ifThenElse>
                                            <con1:replace varName="header" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79dc</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
    <messageId>{fn:data($codeError)}</messageId>
    <successIndicator>Error</successIndicator>
    <messages>{fn:data($messageError)}</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79d9</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[if ($operation = 'pagosMasivos') then
    <pag:pagosMasivosResponse/>
else if ($operation = 'consultaLotesCliente') then
    <pag:consultaLotesClienteResponse/>
else if ($operation = 'consultaDetalleLote') then
    <pag:consultaDetalleLoteResponse/>
else if ($operation = 'consultaTransaccionLote') then
    <pag:consultaTransaccionLoteResponse/>
else if ($operation = 'cargarArchivoLote') then
    <pag:cargarArchivoLoteResponse/>
else if ($operation = 'autorizarLote') then
    <pag:autorizarLoteResponse/>
else if ($operation = 'cancelarLote') then
    <pag:cancelarLoteResponse/>
else if ($operation = 'editarEstadoRegistroLote') then
    <pag:editarEstadoRegistroLoteResponse/>
else if ($operation = 'consultaEstadoLote') then
    <pag:consultaEstadoLoteResponse/>
else if ($operation = 'cargarProveedores') then
    <pag:cargarProveedoresResponse/>
else if ($operation = 'consultarProveedores') then
    <pag:consultarProveedoresResponse/>
else if ($operation = 'autorizarProveedores') then
    <pag:autorizarProveedoresResponse/>
else if ($operation = 'eliminarProveedores') then
    <pag:eliminarProveedoresResponse/>
else ()]]></con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N79d6</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fdc">
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7ae2" name="StageLoggingOutputRouter">
                <con:context/>
                <con:actions>
                    <con1:assign varName="state" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7847</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($header//successIndicator)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="codeError" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7846</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($header//messageId)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="messageError" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7845</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($header//messages)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7ae1</con2:id>
                        <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SaveLogInFileSystem</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N7ae0</con3:id>
                                <con2:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                        <con3:param name="destinationBank">
                                            <con3:path>$destinationBank</con3:path>
                                        </con3:param>
                                        <con3:param name="method">
                                            <con3:path>$protocol</con3:path>
                                        </con3:param>
                                        <con3:param name="errorFlowName">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="channel">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="messageError">
                                            <con3:path>$messageError</con3:path>
                                        </con3:param>
                                        <con3:param name="body">
                                            <con3:path>$body</con3:path>
                                        </con3:param>
                                        <con3:param name="version">
                                            <con3:path>$version</con3:path>
                                        </con3:param>
                                        <con3:param name="targetSystem">
                                            <con3:path>'OSB'</con3:path>
                                        </con3:param>
                                        <con3:param name="GlobalId">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="sourceBank">
                                            <con3:path>$sourceBank</con3:path>
                                        </con3:param>
                                        <con3:param name="endpoint">
                                            <con3:path>$endPoint</con3:path>
                                        </con3:param>
                                        <con3:param name="messageType">
                                            <con3:path>'RESPONSE'</con3:path>
                                        </con3:param>
                                        <con3:param name="service">
                                            <con3:path>$service</con3:path>
                                        </con3:param>
                                        <con3:param name="codeError">
                                            <con3:path>$codeError</con3:path>
                                        </con3:param>
                                        <con3:param name="state">
                                            <con3:path>$state</con3:path>
                                        </con3:param>
                                        <con3:param name="operation">
                                            <con3:path>$operation</con3:path>
                                        </con3:param>
                                        <con3:param name="value">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="user">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="parameters">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="key">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="errorDetails">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="error-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7cb5">
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7cb4" name="StageIT">
                <con:context/>
                <con:actions>
                    <con1:report xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7ca4</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
                        </con1:expr>
                        <con1:labels>
                            <con1:key>code</con1:key>
                            <con1:varName>fault</con1:varName>
                            <con1:value>
                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:errorCode</con2:xpathText>
                            </con1:value>
                        </con1:labels>
                        <con1:labels>
                            <con1:key>reason</con1:key>
                            <con1:varName>fault</con1:varName>
                            <con1:value>
                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:reason</con2:xpathText>
                            </con1:value>
                        </con1:labels>
                    </con1:report>
                    <con1:report xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7ca1</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
                        </con1:expr>
                        <con1:labels>
                            <con1:key>code</con1:key>
                            <con1:varName>fault</con1:varName>
                            <con1:value>
                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:errorCode</con2:xpathText>
                            </con1:value>
                        </con1:labels>
                        <con1:labels>
                            <con1:key>reason</con1:key>
                            <con1:varName>fault</con1:varName>
                            <con1:value>
                                <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:reason</con2:xpathText>
                            </con1:value>
                        </con1:labels>
                    </con1:report>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.66759ecf.0.191fe857844.N7fe4" name="StageCall11g">
                <con:context/>
                <con:actions>
                    <con1:assign varName="callOldEngineByErrorCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7fcd</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">dvm:lookup('SBRG_MassivePayment_Commons/DVM/CommonsParametersDVM','Param', fn:concat('Router.CALL.OLD.ENGINE.BY.ERROR.CODE.',$fault/ctx:errorCode/text()), 'Value', 'Inactive')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7dc3</con2:id>
                        <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7dc2">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCallOld='Active' and $callOldEngineByErrorCode='Active'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7fd6</con2:id>
                                    <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7fd5">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='pagosMasivos'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7f9f</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>pagosMasivos</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7ecf</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SaveLogInFileSystem</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7ece</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                                <con3:param name="destinationBank">
                                                                    <con3:path>$destinationBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="method">
                                                                    <con3:path>$protocol</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorFlowName">
                                                                    <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="channel">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageError">
                                                                    <con3:path>$fault/ctx:reason/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="body">
                                                                    <con3:path>$body</con3:path>
                                                                </con3:param>
                                                                <con3:param name="version">
                                                                    <con3:path>$version</con3:path>
                                                                </con3:param>
                                                                <con3:param name="targetSystem">
                                                                    <con3:path>'OSB'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="GlobalId">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="sourceBank">
                                                                    <con3:path>$sourceBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="endpoint">
                                                                    <con3:path>$endPoint</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageType">
                                                                    <con3:path>'RESPONSE'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="service">
                                                                    <con3:path>$service</con3:path>
                                                                </con3:param>
                                                                <con3:param name="codeError">
                                                                    <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="state">
                                                                    <con3:path>'Error'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="operation">
                                                                    <con3:path>$operation</con3:path>
                                                                </con3:param>
                                                                <con3:param name="value">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="user">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="parameters">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="key">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorDetails">
                                                                    <con3:path>fn-bea:serialize($fault)</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7f35</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case id="_BranchId-N53e8b9bd.66759ecf.0.191fe857844.N7f6b">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='cargarArchivoLote'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7f38</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>cargarArchivoLote</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7e99</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SaveLogInFileSystem</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7e98</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                                <con3:param name="destinationBank">
                                                                    <con3:path>$destinationBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="method">
                                                                    <con3:path>$protocol</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorFlowName">
                                                                    <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="channel">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageError">
                                                                    <con3:path>$fault/ctx:reason/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="body">
                                                                    <con3:path>$body</con3:path>
                                                                </con3:param>
                                                                <con3:param name="version">
                                                                    <con3:path>$version</con3:path>
                                                                </con3:param>
                                                                <con3:param name="targetSystem">
                                                                    <con3:path>'OSB'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="GlobalId">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="sourceBank">
                                                                    <con3:path>$sourceBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="endpoint">
                                                                    <con3:path>$endPoint</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageType">
                                                                    <con3:path>'RESPONSE'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="service">
                                                                    <con3:path>$service</con3:path>
                                                                </con3:param>
                                                                <con3:param name="codeError">
                                                                    <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="state">
                                                                    <con3:path>'Error'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="operation">
                                                                    <con3:path>$operation</con3:path>
                                                                </con3:param>
                                                                <con3:param name="value">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="user">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="parameters">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="key">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorDetails">
                                                                    <con3:path>fn-bea:serialize($fault)</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.66759ecf.0.191fe857844.N7f32</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7e29">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='autorizarLote'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7dc4</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>autorizarLote</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7d5c</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SaveLogInFileSystem</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7d5b</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                                <con3:param name="destinationBank">
                                                                    <con3:path>$destinationBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="method">
                                                                    <con3:path>$protocol</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorFlowName">
                                                                    <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="channel">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageError">
                                                                    <con3:path>$fault/ctx:reason/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="body">
                                                                    <con3:path>$body</con3:path>
                                                                </con3:param>
                                                                <con3:param name="version">
                                                                    <con3:path>$version</con3:path>
                                                                </con3:param>
                                                                <con3:param name="targetSystem">
                                                                    <con3:path>'OSB'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="GlobalId">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="sourceBank">
                                                                    <con3:path>$sourceBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="endpoint">
                                                                    <con3:path>$endPoint</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageType">
                                                                    <con3:path>'RESPONSE'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="service">
                                                                    <con3:path>$service</con3:path>
                                                                </con3:param>
                                                                <con3:param name="codeError">
                                                                    <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="state">
                                                                    <con3:path>'Error'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="operation">
                                                                    <con3:path>$operation</con3:path>
                                                                </con3:param>
                                                                <con3:param name="value">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="user">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="parameters">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="key">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorDetails">
                                                                    <con3:path>fn-bea:serialize($fault)</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7d56</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7d1e">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='cancelarLote'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7c4d</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>cancelarLote</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7cb6</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SaveLogInFileSystem</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7cb5</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                                <con3:param name="destinationBank">
                                                                    <con3:path>$destinationBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="method">
                                                                    <con3:path>$protocol</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorFlowName">
                                                                    <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="channel">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageError">
                                                                    <con3:path>$fault/ctx:reason/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="body">
                                                                    <con3:path>$body</con3:path>
                                                                </con3:param>
                                                                <con3:param name="version">
                                                                    <con3:path>$version</con3:path>
                                                                </con3:param>
                                                                <con3:param name="targetSystem">
                                                                    <con3:path>'OSB'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="GlobalId">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="sourceBank">
                                                                    <con3:path>$sourceBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="endpoint">
                                                                    <con3:path>$endPoint</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageType">
                                                                    <con3:path>'RESPONSE'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="service">
                                                                    <con3:path>$service</con3:path>
                                                                </con3:param>
                                                                <con3:param name="codeError">
                                                                    <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="state">
                                                                    <con3:path>'Error'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="operation">
                                                                    <con3:path>$operation</con3:path>
                                                                </con3:param>
                                                                <con3:param name="value">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="user">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="parameters">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="key">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorDetails">
                                                                    <con3:path>fn-bea:serialize($fault)</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7cb2</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case id="_BranchId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7c4b">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$operation='consultaTransaccionLote'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7b49</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>consultaTransaccionLote</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="true">body</con1:body>
                                                    <con1:header>header</con1:header>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7baf</con2:id>
                                                <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SaveLogInFileSystem</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7bae</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                                                <con3:param name="destinationBank">
                                                                    <con3:path>$destinationBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="method">
                                                                    <con3:path>$protocol</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorFlowName">
                                                                    <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="channel">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageError">
                                                                    <con3:path>$fault/ctx:reason/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="body">
                                                                    <con3:path>$body</con3:path>
                                                                </con3:param>
                                                                <con3:param name="version">
                                                                    <con3:path>$version</con3:path>
                                                                </con3:param>
                                                                <con3:param name="targetSystem">
                                                                    <con3:path>'OSB'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="GlobalId">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="sourceBank">
                                                                    <con3:path>$sourceBank</con3:path>
                                                                </con3:param>
                                                                <con3:param name="endpoint">
                                                                    <con3:path>$endPoint</con3:path>
                                                                </con3:param>
                                                                <con3:param name="messageType">
                                                                    <con3:path>'RESPONSE'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="service">
                                                                    <con3:path>$service</con3:path>
                                                                </con3:param>
                                                                <con3:param name="codeError">
                                                                    <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                                                </con3:param>
                                                                <con3:param name="state">
                                                                    <con3:path>'Error'</con3:path>
                                                                </con3:param>
                                                                <con3:param name="operation">
                                                                    <con3:path>$operation</con3:path>
                                                                </con3:param>
                                                                <con3:param name="value">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="user">
                                                                    <con3:path>$user</con3:path>
                                                                </con3:param>
                                                                <con3:param name="parameters">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="key">
                                                                    <con3:path>''</con3:path>
                                                                </con3:param>
                                                                <con3:param name="errorDetails">
                                                                    <con3:path>fn-bea:serialize($fault)</con3:path>
                                                                </con3:param>
                                                            </con3:xqueryTransform>
                                                        </con2:expr>
                                                    </con2:replace>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con2:reply xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-N53e8b9bd.5075ba1d.0.192556ae6f3.N7c17</con2:id>
                                            </con2:reply>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N70ae6bb.0.18d3f2ef3f0.N7f69" name="GetCustomError">
                <con:context/>
                <con:actions>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N70ae6bb.0.18d3f2ef3f0.N7f66</con2:id>
                        <con1:service ref="SBRG_MassivePayment_Commons/BS/GetCustomErrorByStackTraceRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>process</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">requestError</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">responseError</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                            <con1:replace varName="requestError">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N70ae6bb.0.18d3f2ef3f0.N7f63</con2:id>
                                <con1:expr>
                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                        <con2:resource ref="SBRG_MassivePayment_Commons/Transformations/ServicesToError"/>
                                        <con2:param name="systemApplication">
                                            <con2:path>'OSB'</con2:path>
                                        </con2:param>
                                        <con2:param name="service">
                                            <con2:path>'MassivePayment/Router'</con2:path>
                                        </con2:param>
                                        <con2:param name="errorMessage">
                                            <con2:path>$fault/ctx:reason/text()</con2:path>
                                        </con2:param>
                                        <con2:param name="errorCode">
                                            <con2:path>$fault/ctx:errorCode/text()</con2:path>
                                        </con2:param>
                                        <con2:param name="language">
                                            <con2:path>'es'</con2:path>
                                        </con2:param>
                                    </con2:xqueryTransform>
                                </con1:expr>
                            </con1:replace>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7ca0" name="ErrorToHeader">
                <con:context>
                    <con1:userNsDecl prefix="aut" namespace="http://www.ficohsa.com.hn/middleware.services/autType" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pag" namespace="http://www.ficohsa.com.hn/middleware.services/pagosMasivosTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="ns1" namespace="https://www.ficohsa.com/regional/constants" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7c9d</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aut:ResponseHeader>
    <messageId>{fn:data($responseError/ns1:error)}</messageId>
    <successIndicator>ERROR</successIndicator>
    <messages>{fn:data($responseError/ns1:description)}</messages>
</aut:ResponseHeader>]]></con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7c91</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[if ($operation = 'pagosMasivos') then
    <pag:pagosMasivosResponse/>
else if ($operation = 'consultaLotesCliente') then
    <pag:consultaLotesClienteResponse/>
else if ($operation = 'consultaDetalleLote') then
    <pag:consultaDetalleLoteResponse/>
else if ($operation = 'consultaTransaccionLote') then
    <pag:consultaTransaccionLoteResponse/>
else if ($operation = 'cargarArchivoLote') then
    <pag:cargarArchivoLoteResponse/>
else if ($operation = 'autorizarLote') then
    <pag:autorizarLoteResponse/>
else if ($operation = 'cancelarLote') then
    <pag:cancelarLoteResponse/>
else if ($operation = 'editarEstadoRegistroLote') then
    <pag:editarEstadoRegistroLoteResponse/>
else if ($operation = 'consultaEstadoLote') then
    <pag:consultaEstadoLoteResponse/>
else if ($operation = 'cargarProveedores') then
    <pag:cargarProveedoresResponse/>
else if ($operation = 'consultarProveedores') then
    <pag:consultarProveedoresResponse/>
else if ($operation = 'autorizarProveedores') then
    <pag:autorizarProveedoresResponse/>
else if ($operation = 'eliminarProveedores') then
    <pag:eliminarProveedoresResponse/>
else ()]]></con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.23642cc8.0.190283d1c66.N7991" name="StageLoggingOutputError">
                <con:context/>
                <con:actions>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N78f6</con2:id>
                        <con1:service ref="SBRG_MassivePayment_Commons/BS/LoggingRegionalRestBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SaveLogInFileSystem</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.23642cc8.0.190283d1c66.N78f5</con3:id>
                                <con2:expr>
                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                        <con3:resource ref="SBRG_MassivePayment_Commons/Transformations/ServiceToLog"/>
                                        <con3:param name="destinationBank">
                                            <con3:path>$destinationBank</con3:path>
                                        </con3:param>
                                        <con3:param name="method">
                                            <con3:path>$protocol</con3:path>
                                        </con3:param>
                                        <con3:param name="errorFlowName">
                                            <con3:path>$fault/ctx:location/ctx:stage/text()</con3:path>
                                        </con3:param>
                                        <con3:param name="channel">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="messageError">
                                            <con3:path>$fault/ctx:reason/text()</con3:path>
                                        </con3:param>
                                        <con3:param name="body">
                                            <con3:path>$body</con3:path>
                                        </con3:param>
                                        <con3:param name="version">
                                            <con3:path>$version</con3:path>
                                        </con3:param>
                                        <con3:param name="targetSystem">
                                            <con3:path>'OSB'</con3:path>
                                        </con3:param>
                                        <con3:param name="GlobalId">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="sourceBank">
                                            <con3:path>$sourceBank</con3:path>
                                        </con3:param>
                                        <con3:param name="endpoint">
                                            <con3:path>$endPoint</con3:path>
                                        </con3:param>
                                        <con3:param name="messageType">
                                            <con3:path>'RESPONSE'</con3:path>
                                        </con3:param>
                                        <con3:param name="service">
                                            <con3:path>$service</con3:path>
                                        </con3:param>
                                        <con3:param name="codeError">
                                            <con3:path>$fault/ctx:errorCode/text()</con3:path>
                                        </con3:param>
                                        <con3:param name="state">
                                            <con3:path>'Error'</con3:path>
                                        </con3:param>
                                        <con3:param name="operation">
                                            <con3:path>$operation</con3:path>
                                        </con3:param>
                                        <con3:param name="value">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="user">
                                            <con3:path>$user</con3:path>
                                        </con3:param>
                                        <con3:param name="parameters">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="key">
                                            <con3:path>''</con3:path>
                                        </con3:param>
                                        <con3:param name="errorDetails">
                                            <con3:path>fn-bea:serialize($fault)</con3:path>
                                        </con3:param>
                                    </con3:xqueryTransform>
                                </con2:expr>
                            </con2:replace>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7c9c" name="StageReply">
                <con:context/>
                <con:actions>
                    <con1:reply xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7c99</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="Pipeline Pair Node">
                <con:request>request-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fdd</con:request>
                <con:response>response-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7fdc</con:response>
            </con:pipeline-node>
            <con:branch-node type="condition" id="_FlowId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7ed0" name="BranchNode">
                <con:context/>
                <con:branch-table variable="system">
                    <con:branch name="OLD">
                        <con:operator>equals</con:operator>
                        <con:value>'OLD'</con:value>
                        <con:flow>
                            <con:route-node name="RouteToPagosMasivos11g">
                                <con:context/>
                                <con:actions>
                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/routing/config">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7e99</con2:id>
                                        <con1:service ref="SBRG_MassivePayment_Router/BS/PagosMasivos11gBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                        <con1:operation passThrough="true"/>
                                        <con1:outboundTransform/>
                                        <con1:responseTransform/>
                                    </con1:route>
                                </con:actions>
                            </con:route-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="NEW">
                        <con:operator>equals</con:operator>
                        <con:value>'NEW'</con:value>
                        <con:flow>
                            <con:route-node name="RouteToPagosMasivos12c">
                                <con:context/>
                                <con:actions>
                                    <con1:dynamic-route xmlns:con1="http://www.bea.com/wli/sb/stages/routing/config">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N7f42eb21.0.18c1d11a3d4.N7e95</con2:id>
                                        <con1:service>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;ctx:route>
    &lt;ctx:service isProxy='true'>{string('SBRG_MassivePayment_Commons_Virtual/PS/PagosMasivos/PagosMasivosSoapPS')}&lt;/ctx:service>
&lt;/ctx:route></con2:xqueryText>
                                        </con1:service>
                                        <con1:outboundTransform/>
                                        <con1:responseTransform/>
                                    </con1:dynamic-route>
                                </con:actions>
                            </con:route-node>
                        </con:flow>
                    </con:branch>
                    <con:branch name="BOTH">
                        <con:operator>equals</con:operator>
                        <con:value>'BOTH'</con:value>
                        <con:flow>
                            <con:route-node name="RouteToCallBothEngines">
                                <con:context/>
                                <con:actions>
                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/routing/config">
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N53e8b9bd.N6e665927.0.190dcb1fa6e.N6f8e</con2:id>
                                        <con1:service ref="SBRG_MassivePayment_Router/PP/CallBothEnginesPP" xsi:type="con:PipelineRef"/>
                                        <con1:operation passThrough="true"/>
                                        <con1:outboundTransform/>
                                        <con1:responseTransform/>
                                    </con1:route>
                                </con:actions>
                            </con:route-node>
                        </con:flow>
                    </con:branch>
                    <con:default-branch>
                        <con:flow/>
                    </con:default-branch>
                </con:branch-table>
            </con:branch-node>
        </con:flow>
        <con:shared-variables>
            <con:variable>sourceBank</con:variable>
            <con:variable>destinationBank</con:variable>
            <con:variable>method</con:variable>
            <con:variable>customerId</con:variable>
            <con:variable>queryType</con:variable>
            <con:variable>queryValue</con:variable>
            <con:variable>requestAPIGateway</con:variable>
            <con:variable>responseAPIGateway</con:variable>
            <con:variable>state</con:variable>
            <con:variable>codeError</con:variable>
            <con:variable>messageError</con:variable>
            <con:variable>system</con:variable>
            <con:variable>url</con:variable>
            <con:variable>requestError</con:variable>
            <con:variable>responseError</con:variable>
            <con:variable>callApiGateway</con:variable>
            <con:variable>originalBody</con:variable>
            <con:variable>originalHeader</con:variable>
            <con:variable>protocol</con:variable>
            <con:variable>user</con:variable>
            <con:variable>version</con:variable>
            <con:variable>service</con:variable>
            <con:variable>endPoint</con:variable>
            <con:variable>callBothEngines</con:variable>
            <con:variable>errorCallOld</con:variable>
            <con:variable>callOldEngineByErrorCode</con:variable>
        </con:shared-variables>
    </con:router>
</con:pipelineEntry>