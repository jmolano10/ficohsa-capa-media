<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/WSDL/GetCollection_PS"/>
            <con:binding>
                <con:name>GetCollection_PS_ptt-binding</con:name>
                <con:namespace>http://xmlns.oracle.com/GetCollection_PS</con:namespace>
            </con:binding>
        </con:binding>
        <con:xqConfiguration>
            <con:snippetVersion>1.0</con:snippetVersion>
        </con:xqConfiguration>
    </con:coreEntry>
    <con:router errorHandler="error-a51ea07.15b64e33.0.188c0c1eb02.N7b84">
        <con:pipeline type="request" name="request-a51ea07.15b64e33.0.188c0c1eb02.N7bb9">
            <con:stage id="_StageId-a51ea07.15b64e33.0.188c0c1eb02.N7bb7" name="ValidacionXSD">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7989</con2:id>
                        <con1:schema ref="MWBanking/Collection/RequestorServices/XSD/getCollectionTypes"/>
                        <con1:schemaElement xmlns:get="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes">get:getCollectionRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57c7ff.52597d12.0.188c6143cc3.N7f83" name="CommonParams">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="loan" namespace="http://www.ficohsa.com.hn/middleware.services/loansTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MigrationDynamo/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="mes" namespace="http://www.ficohsa.com.hn/middleware.services/messagingTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get1" namespace="http://xmlns.oracle.com/Dynamo/MWBanking/GetCustomerLists_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get2" namespace="http://xmlns.oracle.com/GetCustomerAssets_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get3" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="codigoServicio" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f82</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'54'</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyInput" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f81</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/get3:getCollectionRequest</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="uuid" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f80</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:uuid()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="sourceBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7f</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get3:getCollectionRequest/get3:GeneralInfo/com:SourceBank)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="destinationBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7e</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get3:getCollectionRequest/get3:GeneralInfo/com:DestinationBank)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="authToken" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7d</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$inbound/ctx:transport/ctx:request/tp:headers/tp:user-header[@name='Authorization']/@value</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="credentialsAuth" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7c</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/XQ/XqueryDecryptAuth"/>
                                <con2:param name="entrada">
                                    <con2:path>fn:substring-after($authToken, 'Basic ')</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="username" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7b</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:substring-before($credentialsAuth, ':')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="password" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57c7ff.52597d12.0.188c6143cc3.N7f7a</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:substring-after($credentialsAuth, ':')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N28208cb1.0.188cf62754a.N7f89" name="LogRequestInicial">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MigrationDynamo/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f88</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($bodyInput)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($bodyInput)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Request'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f87</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f86</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f85</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N28208cb1.0.188cf62754a.N7e84" name="Variables">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="isExtended" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cb4</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionRequest/get:ExtendedCollection)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="contractIdInput" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7ffe</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionRequest/get:ContractId)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="debtorCodeInput" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7ffb</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionRequest/get:DebtorCode)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N28208cb1.0.188cf62754a.N7e88" name="CollectionQueryRecord">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="REQCollectionQueryRecord" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f81</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/CollectionQueryRecordIn"/>
                                <con2:param name="Uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="user">
                                    <con2:path>$username</con2:path>
                                </con2:param>
                                <con2:param name="GetCollectionRequest">
                                    <con2:path>$body/get:getCollectionRequest</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f0b</con2:id>
                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/CollectionQueryRecord/CollectionQueryRecord_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>CollectionQueryRecord</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f0a</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$REQCollectionQueryRecord</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7f09</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N28208cb1.0.188cf62754a.N7db4" name="CollectionContractDetailSJ">
                <con:context>
                    <con1:userNsDecl prefix="col" namespace="http://www.ficohsa.com.hn/middleware.services/collectionContractDetailTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="CollectionContractDetailSJ" path="$RSPCollectionContractDetail" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XSD/collectionContractDetailTypes" element="CollectionContractDetailResponse"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:assign varName="REQCollectionContractDetail" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7dae</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/CollectionContractDetailIn"/>
                                <con2:param name="password">
                                    <con2:path>$password</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="GetCollectionRequest">
                                    <con2:path>$body/get:getCollectionRequest</con2:path>
                                </con2:param>
                                <con2:param name="username">
                                    <con2:path>$username</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7dab</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($REQContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($REQContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ContractsAgreements'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Request'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7d71</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7d70</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7d6f</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7d6b</con2:id>
                        <con1:service ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/Splitjoins/CollectionContractDetail_SJ" xsi:type="con2:FlowRef" xmlns:con2="http://www.bea.com/alsb/flow/resources/config"/>
                        <con1:operation>CollectionContractDetail</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQCollectionContractDetail</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPCollectionContractDetail</con1:body>
                        </con1:response>
                        <con1:requestTransform/>
                        <con1:responseTransform>
                            <con1:assign varName="errorCode">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cf0</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollectionContractDetail/col:ResponseCode)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="validationMessage">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7ced</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollectionContractDetail/col:ResponseMessage)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7d38</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($RSPContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($RSPContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ContractsAgreements'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Response'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cfe</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cfd</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cfc</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.1a259ab7.0.189086ac389.N7f36" name="GetCoreParameters">
                <con:context>
                    <con1:userNsDecl prefix="col" namespace="http://www.ficohsa.com.hn/middleware.services/collectionContractDetailTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="GetCoreParameters" path="$RSPGetCoreParameters" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/GetCoreParameters/GetCoreParameters" element="ConsultadeparametroscoreResponse"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:assign varName="REQGetCoreParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f35</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCoreParametersIn"/>
                                <con2:param name="password">
                                    <con2:path>$password</con2:path>
                                </con2:param>
                                <con2:param name="GetCollectionRequest">
                                    <con2:path>$body/get:getCollectionRequest</con2:path>
                                </con2:param>
                                <con2:param name="username">
                                    <con2:path>$username</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f34</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($REQContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($REQContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ContractsAgreements'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Request'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f33</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f32</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f31</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f30</con2:id>
                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetCoreParameters/GetCoreParameters_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>Consultadeparametroscore</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQGetCoreParameters</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPGetCoreParameters</con1:body>
                        </con1:response>
                        <con1:requestTransform/>
                        <con1:responseTransform>
                            <con1:assign varName="errorCode">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2f</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetCoreParameters/Status/successIndicator)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="validationMessage">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2e</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetCoreParameters/Status/messages)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2d</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($RSPContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($RSPContractsAgreements)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ContractsAgreements'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Response'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2c</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2b</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7f2a</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N28208cb1.0.188cf62754a.N7cf5" name="CollectionType">
                <con:context>
                    <con1:userNsDecl prefix="ass" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/AssembleMessageCollection" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="col" namespace="http://www.ficohsa.com.hn/middleware.services/collectionContractDetailTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="non" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/NonStandardAgreementOperRec" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="ContractsAgreements" path="$RSPContractsAgreements" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/ContractsAgreements/ContractsAgreements" element="ConsultadetallecontratorecaudoResponse"/>
                    </con1:variable>
                    <con1:variable name="AssembleMessageCollection" path="$RSPAssembleMessageCollection" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/AssembleMessageCollection/AssembleMessageCollection_sp" element="OutputParameters"/>
                    </con1:variable>
                    <con1:variable name="GetMobilePackeages" path="$RSPGetMobilePackeages" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/GetMobilePackeages/GetMobilePackeages" element="ConsultaPaquetesMovilesResponse"/>
                    </con1:variable>
                    <con1:variable name="CollectionContractDetailSJ" path="$RSPCollectionContractDetail" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XSD/collectionContractDetailTypes" element="CollectionContractDetailResponse"/>
                    </con1:variable>
                    <con1:variable name="Collection" path="$RSPCollection" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/Collection/Collection" element="ConsultadedetallederecaudoResponse"/>
                    </con1:variable>
                    <con1:variable name="NonStandardAgreementOperRec" path="$RSPNonStandardAgreementOperRec" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/NonStandardAgreementOperRec/NonStandardAgreementOperRec_sp" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:assign varName="type" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cea</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollectionContractDetail/col:CollectionContractDetailResponseType/col:CollectionContractDetailResponseRecordType/col:ContractType)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cf4</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.N28208cb1.0.188cf62754a.N7cf3">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e06</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.1a259ab7.0.189086ac389.N7ef7">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ("ONLINE","LOCAL")</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7cad</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.N28208cb1.0.188cf62754a.N7cac">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$isExtended = 'Yes'</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQNonStandardAgreementOperRec">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7ca9</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/NonStandardAgreementOperRecIn"/>
                                                        <con2:param name="userName">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                        <con2:param name="GetCollectionRequest">
                                                            <con2:path>$body/get:getCollectionRequest</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7ca6</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQNonStandardAgreementOperRec)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'18'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQNonStandardAgreementOperRec)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'NonStandardAgreementOperRec'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7c6c</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7c6b</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7c6a</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7c67</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/NonStandardAgreementOperRec/NonStandardAgreementOperRec_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>NonStandardAgreementOperRec</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQNonStandardAgreementOperRec</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPNonStandardAgreementOperRec</con1:body>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bf4</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPNonStandardAgreementOperRec/non:ERROR_CODE)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7be7</con2:id>
                                                        <con1:case id="_BranchId-N3f57ff92.N28208cb1.0.188cf62754a.N7be6">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bf1</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPNonStandardAgreementOperRec/non:ERROR_MESSAGE)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="idSolicitud">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bee</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPNonStandardAgreementOperRec/non:ID_SOLICITUD)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:replace varName="body" contents-only="true">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7be1</con2:id>
                                                                <con1:location>
                                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionRequest/get:DebtorCode</con2:xpathText>
                                                                </con1:location>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$idSolicitud</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7c33</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPNonStandardAgreementOperRec)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'18'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPNonStandardAgreementOperRec)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'NonStandardAgreementOperRec'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bf9</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bf8</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N28208cb1.0.188cf62754a.N7bf7</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.7d4688a6.0.1894644b586.N7ffe</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">''</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e47</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.1a259ab7.0.189086ac389.N7e46">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQCollection">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e45</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/CollectionIn"/>
                                                        <con2:param name="password">
                                                            <con2:path>$password</con2:path>
                                                        </con2:param>
                                                        <con2:param name="userName">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                        <con2:param name="GetCollectionRequest">
                                                            <con2:path>$body/get:getCollectionRequest</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e44</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQCollection)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQCollection)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'Collection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e43</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e42</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e41</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e40</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/Collection/Collection_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>Consultadedetallederecaudo</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQCollection</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPCollection</con1:body>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3f</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollection/Status/successIndicator)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3e</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollection/Status/messages[2])</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3d</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPCollection)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPCollection)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'NonStandardAgreementOperRec'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3c</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3b</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e3a</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7e03</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.N28208cb1.0.188cf62754a.N7ce8">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7dfc</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.1a259ab7.0.189086ac389.N7dfb">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($body/get:getCollectionRequest/get:BillAmount)='' and string($body/get:getCollectionRequest/get:BillDate)=''</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="billAmount">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7df4</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionRequest/get:AdditionalInfo/get:Data[3])</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="billDate">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7df1</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionRequest/get:AdditionalInfo/get:Data[2])</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7deb</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionRequest/get:BillAmount</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$billAmount</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7dee</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionRequest/get:BillDate</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$billDate</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con1:assign varName="REQCollection">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d47</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/ReferencedCollectionsIn"/>
                                            <con2:param name="password">
                                                <con2:path>$password</con2:path>
                                            </con2:param>
                                            <con2:param name="UserName">
                                                <con2:path>$username</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionRequest">
                                                <con2:path>$body/get:getCollectionRequest</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d46</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'Collection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d45</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d44</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d43</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d42</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/Collection/Collection_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>CalculoCobranzasReferenciadas</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQCollection</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPCollection</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d41</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollection/Status/successIndicator)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d40</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPCollection/Status/messages)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d3f</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'NonStandardAgreementOperRec'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d3e</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d3d</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7d3c</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.1a259ab7.0.189086ac389.N7cfc">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ("REFERENCED_ONLINE","REFERENCED_LOCAL")</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.1a259ab7.0.189086ac389.N7cf5</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.1a259ab7.0.189086ac389.N7cf4">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type="REFERENCED_LOCAL"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQGetAbanksCollections">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f62</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetAbanksCollectionsIn"/>
                                                        <con2:param name="GetCoreParametersResponse">
                                                            <con2:path>$RSPGetCoreParameters</con2:path>
                                                        </con2:param>
                                                        <con2:param name="GetCollectionRequest">
                                                            <con2:path>$body/get:getCollectionRequest</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f5c</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQGetAbanksCollections)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'3'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQGetAbanksCollections)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'GetAbanksCollections'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f22</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f21</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f20</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f65</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetAbanksCollections/GetAbanksCollections_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>GetAbanksCollections</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQGetAbanksCollections</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPGetAbanksCollections</con1:body>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7eec</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPGetAbanksCollections)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'3'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPGetAbanksCollections)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'GetAbanksCollections'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7eb2</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7eb1</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7eb0</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="REQAssembleMessageCollection">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f45</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/AssembleMessageCollectionIn"/>
                                                    <con2:param name="DestinationBank">
                                                        <con2:path>$destinationBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="UserName">
                                                        <con2:path>$username</con2:path>
                                                    </con2:param>
                                                    <con2:param name="ContractAgreementsResponse">
                                                        <con2:path>$RSPContractsAgreements</con2:path>
                                                    </con2:param>
                                                    <con2:param name="GetCoreParamsResponse">
                                                        <con2:path>$RSPGetCoreParameters</con2:path>
                                                    </con2:param>
                                                    <con2:param name="GetCollectionRequest">
                                                        <con2:path>$body/get:getCollectionRequest</con2:path>
                                                    </con2:param>
                                                    <con2:param name="Sourcebank">
                                                        <con2:path>$sourceBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="Password">
                                                        <con2:path>$password</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="bodyReqLog">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f44</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                    <con2:param name="codigoAplicacion">
                                                        <con2:path>1</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoServicio">
                                                        <con2:path>$codigoServicio</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="contenido">
                                                        <con2:path>fn-bea:serialize($REQAssembleMessageCollection)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="estado">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoSistema">
                                                        <con2:path>'18'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="nombreFlujoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaHora">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="parametros">
                                                        <con2:path>fn-bea:serialize($REQAssembleMessageCollection)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="uuid">
                                                        <con2:path>$uuid</con2:path>
                                                    </con2:param>
                                                    <con2:param name="version">
                                                        <con2:path>'1'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="operacionServicio">
                                                        <con2:path>'AssembleMessageCollection'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoDestino">
                                                        <con2:path>$destinationBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="endpoint">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoOrigen">
                                                        <con2:path>$sourceBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaTX">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="usuario">
                                                        <con2:path>$user</con2:path>
                                                    </con2:param>
                                                    <con2:param name="descripcionError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="tipoMensaje">
                                                        <con2:path>'Request'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="metodo">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f43</con2:id>
                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                            <con1:outboundTransform>
                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f42</con3:id>
                                                    <con2:expr>
                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f41</con3:id>
                                                    <con2:mode>request</con2:mode>
                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                </con2:routing-options>
                                            </con1:outboundTransform>
                                        </con1:route>
                                        <con1:wsCallout>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f40</con2:id>
                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/AssembleMessageCollection/AssembleMessageCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>AssembleMessageCollection</con1:operation>
                                            <con1:request>
                                                <con1:body wrapped="false">REQAssembleMessageCollection</con1:body>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body wrapped="false">RSPAssembleMessageCollection</con1:body>
                                            </con1:response>
                                            <con1:requestTransform/>
                                            <con1:responseTransform>
                                                <con1:assign varName="errorCode">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f3f</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAssembleMessageCollection/ass:CODIGO_RESPUESTA)</con2:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:assign varName="validationMessage">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7ffe</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAssembleMessageCollection/ass:MENSAJE_RESPUESTA)</con2:xqueryText>
                                                    </con1:expr>
                                                </con1:assign>
                                            </con1:responseTransform>
                                        </con1:wsCallout>
                                        <con1:assign varName="bodyReqLog">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f39</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                    <con2:param name="codigoAplicacion">
                                                        <con2:path>1</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoServicio">
                                                        <con2:path>$codigoServicio</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="contenido">
                                                        <con2:path>fn-bea:serialize($RSPAssembleMessageCollection)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="estado">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoSistema">
                                                        <con2:path>'18'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="nombreFlujoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaHora">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="parametros">
                                                        <con2:path>fn-bea:serialize($RSPAssembleMessageCollection)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="uuid">
                                                        <con2:path>$uuid</con2:path>
                                                    </con2:param>
                                                    <con2:param name="version">
                                                        <con2:path>'1'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="operacionServicio">
                                                        <con2:path>'AssembleMessageCollection'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoDestino">
                                                        <con2:path>$destinationBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="endpoint">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoOrigen">
                                                        <con2:path>$sourceBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaTX">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="usuario">
                                                        <con2:path>$user</con2:path>
                                                    </con2:param>
                                                    <con2:param name="descripcionError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="tipoMensaje">
                                                        <con2:path>'Response'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="metodo">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f38</con2:id>
                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                            <con1:outboundTransform>
                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f37</con3:id>
                                                    <con2:expr>
                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7f36</con3:id>
                                                    <con2:mode>request</con2:mode>
                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                </con2:routing-options>
                                            </con1:outboundTransform>
                                        </con1:route>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e7d</con2:id>
                                            <con1:case id="_BranchId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e7c">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="REQRouterConventions">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e7b</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RouterConventionsIn"/>
                                                                <con2:param name="AssembleMessageCollectionResponse">
                                                                    <con2:path>$RSPAssembleMessageCollection</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e7a</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($REQRouterConventions)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'18'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($REQRouterConventions)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'RouterConventions'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Request'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e79</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e78</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e77</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e76</con2:id>
                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RouterConventions/RouterConventions" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>invoke</con1:operation>
                                                        <con1:request>
                                                            <con1:param>
                                                                <con1:name>serviceRequest</con1:name>
                                                                <con1:variable>REQRouterConventions</con1:variable>
                                                            </con1:param>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:param>
                                                                <con1:name>serviceResponse</con1:name>
                                                                <con1:variable>RSPRouterConventions</con1:variable>
                                                            </con1:param>
                                                        </con1:response>
                                                        <con1:requestTransform/>
                                                        <con1:responseTransform/>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e6f</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($RSPRouterConventions)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'18'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($RSPRouterConventions)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'RouterConventions'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Response'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e6e</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e6d</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4ec1f9df.0.1890cfa0687.N7e6c</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:id>_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7f5f</con2:id>
                                                </con2:skip>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.131bf97c.0.18921e21571.N7ead">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "MOBILE_PACKAGE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQGetMobilePackeages">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7eaa</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetMobilePackeagesIn"/>
                                            <con2:param name="Username">
                                                <con2:path>$username</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionRequest">
                                                <con2:path>$body/get:getCollectionRequest</con2:path>
                                            </con2:param>
                                            <con2:param name="Password">
                                                <con2:path>$password</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7ea4</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQGetMobilePackeages)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQGetMobilePackeages)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'GetMobilePackeages'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7e6a</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7e69</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7e68</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7ea7</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetMobilePackeages/GetMobilePackeages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>ConsultaPaquetesMoviles</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQGetMobilePackeages</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPGetMobilePackeages</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7df5</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetMobilePackeages/Status/successIndicator)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7df2</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetMobilePackeages/Status/messages)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7e34</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPGetMobilePackeages)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPGetMobilePackeages)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'GetMobilePackeages'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7dfa</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7df9</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.131bf97c.0.18921e21571.N7df8</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="errorCode">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7e60</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'496'</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="validationMessage">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7e93</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'Error looking collection type.'</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-a51ea07.15b64e33.0.188c0c1eb02.N7bb8">
            <con:stage id="_StageId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7ed1" name="FlujoDeSalida">
                <con:context>
                    <con1:userNsDecl prefix="ass" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/AssembleMessageCollection" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="col" namespace="http://www.ficohsa.com.hn/middleware.services/collectionContractDetailTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="rec" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/RecordRelationOperationColletion" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="quer" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/QueryThirdPartyResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="CollectionContractDetail" path="$RSPCollectionContractDetail" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XSD/collectionContractDetailTypes" element="CollectionContractDetailResponse"/>
                    </con1:variable>
                    <con1:variable name="QueryThirdPartyResponse" path="$RSPQueryThirdPartyResponse" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/QueryThirdPartyResponse/QueryThirdPartyResponse_sp" element="OutputParameters"/>
                    </con1:variable>
                    <con1:variable name="GetCollection" path="$RSPGetCollection" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/Collection/Collection" element="ConsultadedetallederecaudoResponse"/>
                    </con1:variable>
                    <con1:variable name="RecordRelationOperationColletion" path="$RSPRecordRelationOperationColletion" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/RecordRelationOperationColletion/RecordRelationOperationColletion_sp" element="OutputParameters"/>
                    </con1:variable>
                    <con1:variable name="GetCoreParameters" path="$RSPGetCoreParameters" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/GetCoreParameters/GetCoreParameters" element="ConsultadeparametroscoreResponse"/>
                    </con1:variable>
                    <con1:variable name="AssembleMessageCollection" path="$RSPAssembleMessageCollection" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/AssembleMessageCollection/AssembleMessageCollection_sp" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7ec7</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7ec6">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ''</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ffe</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dbf">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ("ONLINE","LOCAL")</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7a9d</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCollectionByTypeOut"/>
                                            <con2:param name="ResponseCollectionT24">
                                                <con2:path>$RSPCollection</con2:path>
                                            </con2:param>
                                            <con2:param name="sellRate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                            </con2:param>
                                            <con2:param name="Currency">
                                                <con2:path>fn:data($body/get:getCollectionRequest/get:Currency)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="buyRate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/BUYRATE)</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa0</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.N6b4db739.0.1892708e718.N7fc3">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_ONLINE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQAssembleMessageCollection">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7f8f</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/AssambleMessageCollectionResIn"/>
                                            <con2:param name="GetCoreParametersResponse">
                                                <con2:path>$RSPGetCoreParameters</con2:path>
                                            </con2:param>
                                            <con2:param name="CollectionContractDetailResponse">
                                                <con2:path>$RSPCollectionContractDetail</con2:path>
                                            </con2:param>
                                            <con2:param name="RouterConventionsResponse">
                                                <con2:path>$RSPRouterConventions</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionRequest">
                                                <con2:path>$body/get:getCollectionRequest</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7f8c</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQAssembleMessageCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQAssembleMessageCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'AssembleMessageCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7f52</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7f51</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7f50</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ee5</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/AssembleMessageCollection/AssembleMessageCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>AssembleMessageCollection</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQAssembleMessageCollection</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPAssembleMessageCollection</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ee4</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAssembleMessageCollection/ass:CODIGO_RESPUESTA)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ee3</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAssembleMessageCollection/ass:MENSAJE_RESPUESTA)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7eaf</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPAssembleMessageCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPAssembleMessageCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'AssembleMessageCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7e75</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7e74</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7e73</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ddb</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.N6b4db739.0.1892708e718.N7dda">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="AssambleMessageResponse">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7dd9</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML($RSPAssembleMessageCollection/ass:MENSAJE)</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyResponse">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7d33</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCollectionReferencedOnlineOut"/>
                                                        <con2:param name="sellRate">
                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="CollectionResponse">
                                                            <con2:path>$RSPCollection</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="buyRate">
                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/BUYRATE)</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7d36</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7d39</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'Error'</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7dcf</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.N6b4db739.0.1892708e718.N7cad">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_LOCAL"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7c79</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCollectionAbanksOut"/>
                                            <con2:param name="GetCoreParametersResponse">
                                                <con2:path>$RSPGetCoreParameters</con2:path>
                                            </con2:param>
                                            <con2:param name="GetAbanksCollectionsResponse">
                                                <con2:path>$RSPGetAbanksCollections</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionRequest">
                                                <con2:path>$body/get:getCollectionRequest</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7c76</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7f21</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.71e26851.0.1892c532e34.N7f1f">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "MOBILE_PACKAGE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7eeb</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCollectionPackageOut"/>
                                            <con2:param name="contractName">
                                                <con2:path>fn:data($RSPCollectionContractDetail/col:CollectionContractDetailResponseType/col:CollectionContractDetailResponseRecordType/col:ContractName)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="GetMobilePackeagesResponse">
                                                <con2:path>$RSPGetMobilePackeages</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionRequest">
                                                <con2:path>$body/get:getCollectionRequest</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7ee8</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7ee5</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="bodyResponse">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7a69</con2:id>
                                <con1:expr>
                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetCollectionReferencedOut"/>
                                        <con2:param name="sellRate">
                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                        </con2:param>
                                        <con2:param name="CollectionResponse">
                                            <con2:path>$RSPCollection</con2:path>
                                        </con2:param>
                                        <con2:param name="uuid">
                                            <con2:path>$uuid</con2:path>
                                        </con2:param>
                                        <con2:param name="GetCollectionRequest">
                                            <con2:path>$body/get:getCollectionRequest</con2:path>
                                        </con2:param>
                                        <con2:param name="buyRate">
                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/BUYRATE)</con2:path>
                                        </con2:param>
                                        <con2:param name="ContractName">
                                            <con2:path>fn:data($RSPCollectionContractDetail/col:CollectionContractDetailResponseType/col:CollectionContractDetailResponseRecordType[1]/col:ContractName)</con2:path>
                                        </con2:param>
                                    </con2:xqueryTransform>
                                </con1:expr>
                            </con1:assign>
                            <con1:replace varName="body" contents-only="true">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7a66</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                </con1:expr>
                            </con1:replace>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-N3f57ff92.N6b4db739.0.1892708e718.N7ffb</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7c82</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7c81">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "ONLINE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQQueryThirdPartyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a9</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/QueryThirdPartyResponseIn"/>
                                            <con2:param name="GetCollectionResponse">
                                                <con2:path>$body/get:getCollectionResponse</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a8</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQQueryThirdPartyResponse)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQQueryThirdPartyResponse)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'$QueryThirdPartyResponse'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a7</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a6</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a5</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a4</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/QueryThirdPartyResponse/QueryThirdPartyResponse_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>QueryThirdPartyResponse</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQQueryThirdPartyResponse</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPQueryThirdPartyResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7260</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPQueryThirdPartyResponse/quer:CODIGO_ERROR)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="debtorName">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N725d</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $response := fn-bea:inlinedXML($RSPQueryThirdPartyResponse/quer:RESPUESTA_TERCERO)
    	return
    		fn:string($response//moreParameters/data[@fieldName="debtorName"]/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="dealslip">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7e5b</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/GetDealslipIn"/>
                                                    <con2:param name="QueryThirdPartyResponse">
                                                        <con2:path>$RSPQueryThirdPartyResponse</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a3</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPQueryThirdPartyResponse)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPQueryThirdPartyResponse)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'$QueryThirdPartyResponse'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a2</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a1</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N73a0</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N730e</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N730d">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7e58</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionResponse/get:DebtorName</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$debtorName</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.71e26851.0.1892c532e34.N7e55</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionResponse/get:BillDetail</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$dealslip</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                            <con1:assign varName="REQRecordRelationOperationColletion">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N730c</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                                        <con2:param name="esMonedaLocal">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>"1"</con2:path>
                                                        </con2:param>
                                                        <con2:param name="CollectionResponse">
                                                            <con2:path>$RSPCollection</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoDeudor">
                                                            <con2:path>$debtorCodeInput</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreDeudor">
                                                            <con2:path>$debtorName</con2:path>
                                                        </con2:param>
                                                        <con2:param name="sellrate">
                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="buyrate">
                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N730b</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'18'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N730a</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7309</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7308</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7307</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>RecordRelationOperationColletion</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQRecordRelationOperationColletion</con1:body>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPRecordRelationOperationColletion</con1:body>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ffe</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:CODIGO_ERROR)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ff4</con2:id>
                                                        <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7ff3">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7f8e</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="REQRecordRelationOperationColletionUSD">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7f5a</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                                                        <con2:param name="esMonedaLocal">
                                                                            <con2:path>'0'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="estado">
                                                                            <con2:path>"1"</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="CollectionResponse">
                                                                            <con2:path>$RSPCollection</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoDeudor">
                                                                            <con2:path>$debtorCodeInput</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="nombreDeudor">
                                                                            <con2:path>$debtorName</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="sellrate">
                                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="buyrate">
                                                                            <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="bodyReqLog">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7f57</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                        <con2:param name="codigoAplicacion">
                                                                            <con2:path>1</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoServicio">
                                                                            <con2:path>$codigoServicio</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="contenido">
                                                                            <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="estado">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoSistema">
                                                                            <con2:path>'18'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="nombreFlujoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaHora">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="parametros">
                                                                            <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="uuid">
                                                                            <con2:path>$uuid</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="version">
                                                                            <con2:path>'1'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="operacionServicio">
                                                                            <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoDestino">
                                                                            <con2:path>$destinationBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="endpoint">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoOrigen">
                                                                            <con2:path>$sourceBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaTX">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="usuario">
                                                                            <con2:path>$user</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="descripcionError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="tipoMensaje">
                                                                            <con2:path>'Request'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="metodo">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7eec</con2:id>
                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                <con1:outboundTransform>
                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7eeb</con3:id>
                                                                        <con2:expr>
                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7eea</con3:id>
                                                                        <con2:mode>request</con2:mode>
                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                    </con2:routing-options>
                                                                </con1:outboundTransform>
                                                            </con1:route>
                                                            <con1:wsCallout>
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ee6</con2:id>
                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>RecordRelationOperationColletion</con1:operation>
                                                                <con1:request>
                                                                    <con1:body wrapped="false">REQRecordRelationOperationColletionUSD</con1:body>
                                                                </con1:request>
                                                                <con1:response>
                                                                    <con1:body wrapped="false">RSPRecordRelationOperationColletionUSD</con1:body>
                                                                </con1:response>
                                                                <con1:requestTransform/>
                                                                <con1:responseTransform>
                                                                    <con1:assign varName="errorCode">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e73</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:CODIGO_ERROR)</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:ifThenElse>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e6c</con2:id>
                                                                        <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7e6b">
                                                                            <con1:condition>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:assign varName="validationMessage">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e37</con2:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default>
                                                                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:id>_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e34</con2:id>
                                                                            </con2:skip>
                                                                        </con1:default>
                                                                    </con1:ifThenElse>
                                                                </con1:responseTransform>
                                                            </con1:wsCallout>
                                                            <con1:assign varName="bodyReqLog">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7eb2</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                        <con2:param name="codigoAplicacion">
                                                                            <con2:path>1</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoServicio">
                                                                            <con2:path>$codigoServicio</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="contenido">
                                                                            <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="estado">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoSistema">
                                                                            <con2:path>'18'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="nombreFlujoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaHora">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="parametros">
                                                                            <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="uuid">
                                                                            <con2:path>$uuid</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="version">
                                                                            <con2:path>'1'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="operacionServicio">
                                                                            <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoDestino">
                                                                            <con2:path>$destinationBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="endpoint">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoOrigen">
                                                                            <con2:path>$sourceBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaTX">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="usuario">
                                                                            <con2:path>$user</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="descripcionError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="tipoMensaje">
                                                                            <con2:path>'Response'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="metodo">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e78</con2:id>
                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                <con1:outboundTransform>
                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e77</con3:id>
                                                                        <con2:expr>
                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e76</con3:id>
                                                                        <con2:mode>request</con2:mode>
                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                    </con2:routing-options>
                                                                </con1:outboundTransform>
                                                            </con1:route>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7306</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'18'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7305</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7304</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7303</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7c0a">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_ONLINE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="debtor_name">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bd6</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetCollection/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/DEBTORNAME)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="dealslip">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bd3</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetCollection/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/dealSlip)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bd0</con2:id>
                                    <con1:location>
                                        <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionResponse/get:DebtorName</con2:xpathText>
                                    </con1:location>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$debtor_name</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bcd</con2:id>
                                    <con1:location>
                                        <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionResponse/get:BillDetail</con2:xpathText>
                                    </con1:location>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$dealslip</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con1:assign varName="REQRecordRelationOperationColletion">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bca</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                            <con2:param name="esMonedaLocal">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>"1"</con2:path>
                                            </con2:param>
                                            <con2:param name="CollectionResponse">
                                                <con2:path>$RSPCollection</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoDeudor">
                                                <con2:path>$debtorCodeInput</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreDeudor">
                                                <con2:path>$debtor_name</con2:path>
                                            </con2:param>
                                            <con2:param name="sellrate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                            </con2:param>
                                            <con2:param name="buyrate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7bc7</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7b8d</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7b8c</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7b8b</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7abe</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>RecordRelationOperationColletion</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQRecordRelationOperationColletion</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPRecordRelationOperationColletion</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7abd</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:CODIGO_ERROR)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7abc</con2:id>
                                            <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7abb">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aba</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:assign varName="REQRecordRelationOperationColletionUSD">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab9</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                                            <con2:param name="esMonedaLocal">
                                                                <con2:path>'0'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>"1"</con2:path>
                                                            </con2:param>
                                                            <con2:param name="CollectionResponse">
                                                                <con2:path>$RSPCollection</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoDeudor">
                                                                <con2:path>$debtorCodeInput</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreDeudor">
                                                                <con2:path>$debtor_name</con2:path>
                                                            </con2:param>
                                                            <con2:param name="sellrate">
                                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="buyrate">
                                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab8</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'18'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Request'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab7</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab6</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab5</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                                <con1:wsCallout>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab4</con2:id>
                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>RecordRelationOperationColletion</con1:operation>
                                                    <con1:request>
                                                        <con1:body wrapped="false">REQRecordRelationOperationColletionUSD</con1:body>
                                                    </con1:request>
                                                    <con1:response>
                                                        <con1:body wrapped="false">RSPRecordRelationOperationColletionUSD</con1:body>
                                                    </con1:response>
                                                    <con1:requestTransform/>
                                                    <con1:responseTransform>
                                                        <con1:assign varName="errorCode">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab3</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:CODIGO_ERROR)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab2</con2:id>
                                                            <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7ab1">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="validationMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7ab0</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:id>_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aaf</con2:id>
                                                                </con2:skip>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                    </con1:responseTransform>
                                                </con1:wsCallout>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aae</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'18'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Response'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aad</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aac</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7aab</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7a77</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7a3d</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7a3c</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7a3b</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7bec">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "LOCAL"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="debtor_name">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7e31</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetCollection/LATAMAGWSPENDINGBILLSType[1]/gLATAMAGWSPENDINGBILLSDetailType[1]/mLATAMAGWSPENDINGBILLSDetailType[1]/DEBTORNAME)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="REQRecordRelationOperationColletion">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7d9b</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                            <con2:param name="esMonedaLocal">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>"1"</con2:path>
                                            </con2:param>
                                            <con2:param name="CollectionResponse">
                                                <con2:path>$RSPCollection</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoDeudor">
                                                <con2:path>$debtorCodeInput</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreDeudor">
                                                <con2:path>$debtor_name</con2:path>
                                            </con2:param>
                                            <con2:param name="sellrate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                            </con2:param>
                                            <con2:param name="buyrate">
                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7d98</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7d5e</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7d5d</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7d5c</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c8f</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>RecordRelationOperationColletion</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQRecordRelationOperationColletion</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPRecordRelationOperationColletion</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c8e</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:CODIGO_ERROR)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c8d</con2:id>
                                            <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7c8c">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c8b</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletion/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:assign varName="REQRecordRelationOperationColletionUSD">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c8a</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordRelationOperationColletionIn"/>
                                                            <con2:param name="esMonedaLocal">
                                                                <con2:path>'0'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>"1"</con2:path>
                                                            </con2:param>
                                                            <con2:param name="CollectionResponse">
                                                                <con2:path>$RSPCollection</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoDeudor">
                                                                <con2:path>$debtorCodeInput</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreDeudor">
                                                                <con2:path>$debtor_name</con2:path>
                                                            </con2:param>
                                                            <con2:param name="sellrate">
                                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="buyrate">
                                                                <con2:path>fn:data($RSPGetCoreParameters/WSCOREPARAMETERSType[1]/gWSCOREPARAMETERSDetailType/mWSCOREPARAMETERSDetailType[1]/SELLRATE)</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c89</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'18'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($REQRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Request'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c88</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c87</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c86</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                                <con1:wsCallout>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c85</con2:id>
                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordRelationOperationColletion/RecordRelationOperationColletion_db" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>RecordRelationOperationColletion</con1:operation>
                                                    <con1:request>
                                                        <con1:body wrapped="false">REQRecordRelationOperationColletionUSD</con1:body>
                                                    </con1:request>
                                                    <con1:response>
                                                        <con1:body wrapped="false">RSPRecordRelationOperationColletionUSD</con1:body>
                                                    </con1:response>
                                                    <con1:requestTransform/>
                                                    <con1:responseTransform>
                                                        <con1:assign varName="errorCode">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c84</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:CODIGO_ERROR)</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c83</con2:id>
                                                            <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7c82">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="validationMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c81</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPRecordRelationOperationColletionUSD/rec:MENSAJE_ERROR)</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:id>_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c80</con2:id>
                                                                </con2:skip>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                    </con1:responseTransform>
                                                </con1:wsCallout>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c7f</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'18'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletionUSD)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Response'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c7e</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c7d</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c7c</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c48</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPRecordRelationOperationColletion)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'RecordRelationOperationColletion'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c0e</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c0d</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7c0c</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.54d33df9.0.1893183da91.N7a09" name="ConvertirHTML">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="tran" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/TransformCollectionReceipt" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="TransformCollectionReceipt" path="$RSPTransformCollectionReceipt" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/TransformCollectionReceipt/TransformCollectionReceipt_sp" element="OutputParameters"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7a02</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7a01">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/get:getCollectionResponse/get:BillDetail) != ''</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQTransformCollectionReceipt">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N791b</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/TransformCollectionReceiptIn"/>
                                            <con2:param name="dealslip">
                                                <con2:path>fn:data($body/get:getCollectionResponse/get:BillDetail)</con2:path>
                                            </con2:param>
                                            <con2:param name="username">
                                                <con2:path>$username</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N79cd</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQTransformCollectionReceipt)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQTransformCollectionReceipt)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'TransformCollectionReceipt'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7993</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7992</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7991</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N798e</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/TransformCollectionReceipt/TransformCollectionReceipt_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>TransformCollectionReceipt</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQTransformCollectionReceipt</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPTransformCollectionReceipt</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7918</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPTransformCollectionReceipt/tran:CODIGO_RESPUESTA)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N795a</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPTransformCollectionReceipt)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPTransformCollectionReceipt)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'TransformCollectionReceipt'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7920</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N791f</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N791e</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7911</con2:id>
                                    <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7910">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace varName="body" contents-only="true">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N790d</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./get:getCollectionResponse/get:BillDetail</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPTransformCollectionReceipt/tran:PV_DEALSLIP)</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7bb9" name="MapeoError">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.54d33df9.0.1893183da91.N7906</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.54d33df9.0.1893183da91.N7905">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:data($body/get:getCollectionResponse/get:StatusInfo/com:Status)) != "SUCCESS"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="getErrorReq">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7b86</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_GetErrorBS"/>
                                            <con2:param name="codigoErrorSistema">
                                                <con2:path>$errorCode</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoLenguaje">
                                                <con2:path>if (fn:data($body/get:getCollectionRequest/get:GeneralInfo/com:Language)!='')
then
fn:data($body/get:getCollectionRequest/get:GeneralInfo/com:Language)
else
'es'</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>$validationMessage</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7b52</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/GetErrorMessages/v1.0/GetErrorMessages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>GetErrorMessages_BS</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">getErrorReq</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">getErrorRsp</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="errorResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7b1e</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/XQ/Tx_ErrorMap_To_ErrorInfo"/>
                                            <con2:param name="systemId">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="errorMapResponse">
                                                <con2:path>$getErrorRsp</con2:path>
                                            </con2:param>
                                            <con2:param name="systemStatus">
                                                <con2:path>'Error'</con2:path>
                                            </con2:param>
                                            <con2:param name="globalId">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="messageId">
                                                <con2:path>$errorCode</con2:path>
                                            </con2:param>
                                            <con2:param name="messages">
                                                <con2:path>$validationMessage</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7b1b</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/Tx_ErrorInfo_To_GetCollectionResponse"/>
                                            <con2:param name="errorInfo">
                                                <con2:path>$errorResponse</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7b18</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.71e26851.0.1892c532e34.N7f61" name="RecordCollectionResponse">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dcc</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dcb">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$logEnabled = "TRUE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQRecordCollectionResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dca</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RecordCollectionResponseIn"/>
                                            <con2:param name="Uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="debtorCode">
                                                <con2:path>$debtorCodeInput</con2:path>
                                            </con2:param>
                                            <con2:param name="GetCollectionResponse">
                                                <con2:path>$body/get:getCollectionResponse</con2:path>
                                            </con2:param>
                                            <con2:param name="validationMessage">
                                                <con2:path>$validationMessage</con2:path>
                                            </con2:param>
                                            <con2:param name="contractId">
                                                <con2:path>$contractIdInput</con2:path>
                                            </con2:param>
                                            <con2:param name="errorCode">
                                                <con2:path>$errorCode</con2:path>
                                            </con2:param>
                                            <con2:param name="userName">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc9</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQCollectionQueryRecord)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQCollectionQueryRecord)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'CollectionQueryRecord'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc8</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc7</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc6</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc5</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordCollectionResponse/RecordCollectionResponse_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>RecordCollectionResponse</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQRecordCollectionResponse</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPRecordCollectionResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc4</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPCollectionQueryRecord)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'18'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPCollectionQueryRecord)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'CollectionQueryRecord'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Response'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc3</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc2</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7dc1</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa7" name="TxLogResponse">
                <con:context/>
                <con:actions>
                    <con1:assign varName="varLogReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa6</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($bodyResponse)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ConsultaCliente'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Response'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa5</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa4</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.N5bc6d09d.0.188d9ef0ce5.N7aa3</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="error" name="error-a51ea07.15b64e33.0.188c0c1eb02.N7b84">
            <con:stage id="_StageId-a51ea07.15b64e33.0.188c0c1eb02.N7b14" name="GetErrors">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="loan" namespace="http://www.ficohsa.com.hn/middleware.services/loansTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/GetCustomerAssets_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get1" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="errorCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7b13</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($fault/ctx:errorCode)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="errorDesciption" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7b12</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($fault/ctx:reason)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="getErrorReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7b11</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_GetErrorBS"/>
                                <con2:param name="codigoErrorSistema">
                                    <con2:path>$errorCode</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="codigoLenguaje">
                                    <con2:path>if (fn:data($body/get1:getCollectionRequest/get1:GeneralInfo/com:Language)!='')
then
fn:data($body/get1:getCollectionRequest/get1:GeneralInfo/com:Language)
else
'es'</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>$errorDesciption</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7b10</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/GetErrorMessages/v1.0/GetErrorMessages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>GetErrorMessages_BS</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">getErrorReq</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">getErrorRsp</con1:body>
                        </con1:response>
                        <con1:requestTransform/>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea07.15b64e33.0.188c0c1eb02.N7a76" name="TxErrorMessage">
                <con:context/>
                <con:actions>
                    <con1:assign varName="errorResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7a75</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/XQ/Tx_ErrorMap_To_ErrorInfo"/>
                                <con2:param name="systemId">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="errorMapResponse">
                                    <con2:path>$getErrorRsp</con2:path>
                                </con2:param>
                                <con2:param name="systemStatus">
                                    <con2:path>'Error'</con2:path>
                                </con2:param>
                                <con2:param name="globalId">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="messageId">
                                    <con2:path>'OSBError'</con2:path>
                                </con2:param>
                                <con2:param name="messages">
                                    <con2:path>$errorDesciption</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7a74</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/Tx_ErrorInfo_To_GetCollectionResponse"/>
                                <con2:param name="errorInfo">
                                    <con2:path>$errorResponse</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea07.15b64e33.0.188c0c1eb02.N7a03" name="LogErrorRequest">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="varLogReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7a02</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>$errorCode</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($fault)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>'Error'</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Error Handler'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7a01</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N7a00</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N79ff</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea07.15b64e33.0.188c0c1eb02.N7990" name="Response">
                <con:context/>
                <con:actions>
                    <con1:insert varName="inbound" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N798f</con2:id>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:transport/ctx:response</con2:xpathText>
                        </con1:location>
                        <con1:where>last-child</con1:where>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;http:http-response-code>{fn:data($getErrorRsp/*:PN_CODIGO_ERROR_HTTP)}&lt;/http:http-response-code></con2:xqueryText>
                        </con1:expr>
                    </con1:insert>
                    <con1:insert varName="inbound" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N798e</con2:id>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:transport/ctx:response</con2:xpathText>
                        </con1:location>
                        <con1:where>last-child</con1:where>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;tp:response-message>{fn:data($getErrorRsp/*:PV_DESCRIPCION_MAPEO)}&lt;/tp:response-message></con2:xqueryText>
                        </con1:expr>
                    </con1:insert>
                    <con1:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N798d</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-a51ea07.15b64e33.0.188c0c1eb02.N798c</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="GetCollectionPP">
                <con:request>request-a51ea07.15b64e33.0.188c0c1eb02.N7bb9</con:request>
                <con:response>response-a51ea07.15b64e33.0.188c0c1eb02.N7bb8</con:response>
            </con:pipeline-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>