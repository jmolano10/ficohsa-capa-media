<?xml version="1.0" encoding="UTF-8"?>
<con:pipelineEntry xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:coreEntry>
        <con:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType">
            <con:wsdl ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/WSDL/PaymentCollection_PS"/>
            <con:binding>
                <con:name>PaymentCollection_PS_ptt-binding</con:name>
                <con:namespace>http://xmlns.oracle.com/PaymentCollection_PS</con:namespace>
            </con:binding>
        </con:binding>
        <con:xqConfiguration>
            <con:snippetVersion>1.0</con:snippetVersion>
        </con:xqConfiguration>
    </con:coreEntry>
    <con:router errorHandler="error-a51ea04.3efb8ea4.0.18948faea20.N7f61">
        <con:pipeline type="error" name="error-a51ea04.3efb8ea4.0.18948faea20.N7f61">
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7ee3" name="GetErrors">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="loan" namespace="http://www.ficohsa.com.hn/middleware.services/loansTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/GetCustomerAssets_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get1" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="errorCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ee2</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($fault/ctx:errorCode)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="errorDesciption" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ee1</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($fault/ctx:reason)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="getErrorReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ee0</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_GetErrorBS"/>
                                <con2:param name="codigoErrorSistema">
                                    <con2:path>$errorCode</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="codigoLenguaje">
                                    <con2:path>if (fn:data($body/get1:getCollectionRequest/get1:GeneralInfo/com:Language)!='')
then
fn:data($body/get1:getCollectionRequest/get1:GeneralInfo/com:Language)
else
'es'</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>$errorDesciption</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7edf</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/GetErrorMessages/v1.0/GetErrorMessages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>GetErrorMessages_BS</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">getErrorReq</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">getErrorRsp</con1:body>
                        </con1:response>
                        <con1:requestTransform/>
                        <con1:responseTransform/>
                    </con1:wsCallout>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7ed8" name="TxErrorMessage">
                <con:context/>
                <con:actions>
                    <con1:assign varName="errorResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ed7</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/XQ/Tx_ErrorMap_To_ErrorInfo"/>
                                <con2:param name="systemId">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="errorMapResponse">
                                    <con2:path>$getErrorRsp</con2:path>
                                </con2:param>
                                <con2:param name="systemStatus">
                                    <con2:path>'Error'</con2:path>
                                </con2:param>
                                <con2:param name="globalId">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="messageId">
                                    <con2:path>'OSBError'</con2:path>
                                </con2:param>
                                <con2:param name="messages">
                                    <con2:path>$errorDesciption</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ed6</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/Tx_ErrorInfo_To_PaymentCollectionResponse"/>
                                <con2:param name="errorInfo">
                                    <con2:path>$errorResponse</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7ec7" name="LogErrorRequest">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="varLogReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ec6</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>$errorCode</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($fault)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>'Error'</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Error Handler'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ec5</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ec4</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ec3</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7eb6" name="Response">
                <con:context/>
                <con:actions>
                    <con1:insert varName="inbound" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7eb5</con2:id>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:transport/ctx:response</con2:xpathText>
                        </con1:location>
                        <con1:where>last-child</con1:where>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;http:http-response-code>{fn:data($getErrorRsp/*:PN_CODIGO_ERROR_HTTP)}&lt;/http:http-response-code></con2:xqueryText>
                        </con1:expr>
                    </con1:insert>
                    <con1:insert varName="inbound" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7eb4</con2:id>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./ctx:transport/ctx:response</con2:xpathText>
                        </con1:location>
                        <con1:where>last-child</con1:where>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;tp:response-message>{fn:data($getErrorRsp/*:PV_DESCRIPCION_MAPEO)}&lt;/tp:response-message></con2:xqueryText>
                        </con1:expr>
                    </con1:insert>
                    <con1:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7eb3</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                    <con1:reply xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7eb2</con1:id>
                    </con1:reply>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="request" name="request-a51ea04.3e8649bd.0.189474b8e2d.N7e90">
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7e8e" name="ValdiacionXSD">
                <con:context>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:validate xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e8a</con2:id>
                        <con1:schema ref="MWBanking/Collection/RequestorServices/XSD/paymentCollectionTypes"/>
                        <con1:schemaElement xmlns:pay="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes">pay:paymentCollectionRequest</con1:schemaElement>
                        <con1:varName>body</con1:varName>
                        <con1:location>
                            <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./pay:paymentCollectionRequest</con2:xpathText>
                        </con1:location>
                    </con1:validate>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7e3d" name="CommonParams">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="loan" namespace="http://www.ficohsa.com.hn/middleware.services/loansTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MigrationDynamo/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="mes" namespace="http://www.ficohsa.com.hn/middleware.services/messagingTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get1" namespace="http://xmlns.oracle.com/Dynamo/MWBanking/GetCustomerLists_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get2" namespace="http://xmlns.oracle.com/GetCustomerAssets_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get3" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="codigoServicio" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e3c</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'58'</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyInput" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e3b</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/pay:paymentCollectionRequest</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="uuid" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e3a</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:uuid()</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="sourceBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e39</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/pay:paymentCollectionRequest/pay:GeneralInfo/com:SourceBank)</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="destinationBank" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e38</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data(fn:data($body/pay:paymentCollectionRequest/pay:GeneralInfo/com:DestinationBank))</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="authToken" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e37</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$inbound/ctx:transport/ctx:request/tp:headers/tp:user-header[@name='Authorization']/@value</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="credentialsAuth" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e36</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/XQ/XqueryDecryptAuth"/>
                                <con2:param name="entrada">
                                    <con2:path>fn:substring-after($authToken, 'Basic ')</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="username" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e35</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:substring-before($credentialsAuth, ':')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="password" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7e34</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:substring-after($credentialsAuth, ':')</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7dc3" name="LogRequestInicial">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/MigrationDynamo/MWBanking/GetAccountDetail_PS" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7dc2</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($bodyInput)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($bodyInput)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Request'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7dc1</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7dc0</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7dbf</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7d4e" name="PaymentCollectionRecord">
                <con:context>
                    <con1:userNsDecl prefix="get" namespace="http://www.ficohsa.com.hn/middleware.services/getCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="REQPaymentCollectionRecordIn" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d4d</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentCollectionRecordIn"/>
                                <con2:param name="paymentCollectionRequest">
                                    <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="user">
                                    <con2:path>$username</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d4c</con2:id>
                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/CollectionQueryRecord/CollectionQueryRecord_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>CollectionQueryRecord</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d4b</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$REQPaymentCollectionRecordIn</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d4a</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7d45" name="CollectionContractDetailSJ">
                <con:context>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:assign varName="validationMessage" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d39</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionValidate"/>
                                <con2:param name="paymentCollectionrequest">
                                    <con2:path>$bodyInput</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="paymentMethod" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d36</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($bodyInput/pay:PaymentInformation/pay:PaymentMethod/text())</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="debtorCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d42</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($bodyInput/pay:DebtorCode/text())</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="reqParams" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d3c</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat($username,"|",fn:string($bodyInput/pay:ContractId/text()),"|",fn:string($bodyInput/pay:DebtorCode/text()))</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="authorizationCode" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7d3f</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">''</con2:xqueryText>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="REQPaymentCollectionContractDetail" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7cf1</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionContractDetailIn"/>
                                <con2:param name="paymentCollectionRequest">
                                    <con2:path>$bodyInput</con2:path>
                                </con2:param>
                                <con2:param name="password">
                                    <con2:path>$password</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="username">
                                    <con2:path>$username</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7ced</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($REQPaymentCollectionContractDetail)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($REQPaymentCollectionContractDetail)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'paymentCollection'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Request'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7cb3</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7cb2</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7cb1</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                    <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c46</con2:id>
                        <con1:service ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/Splitjoins/CollectionContractDetail_SJ" xsi:type="con2:FlowRef" xmlns:con2="http://www.bea.com/alsb/flow/resources/config"/>
                        <con1:operation>CollectionContractDetail</con1:operation>
                        <con1:request>
                            <con1:body wrapped="false">REQPaymentCollectionContractDetail</con1:body>
                        </con1:request>
                        <con1:response>
                            <con1:body wrapped="false">RSPPaymentCollectionContractDetail</con1:body>
                        </con1:response>
                        <con1:requestTransform/>
                        <con1:responseTransform>
                            <con1:assign varName="type">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c3e</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentCollectionContractDetail/*:CollectionContractDetailResponseType/*:CollectionContractDetailResponseRecordType/*:ContractType/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="contractName">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c41</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentCollectionContractDetail/*:CollectionContractDetailResponseType/*:CollectionContractDetailResponseRecordType/*:ContractName/text())</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="errorCode">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c45</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentCollectionContractDetail/*:ResponseCode)</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                            <con1:assign varName="validationMessage">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c44</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSPPaymentCollectionContractDetail/*:ResponseMessage)
else('')</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:responseTransform>
                    </con1:wsCallout>
                    <con1:assign varName="bodyReqLog" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7c0a</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($RSPPaymentCollectionContractDetail)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>'2'</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>fn-bea:serialize($RSPPaymentCollectionContractDetail)</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'PaymentCollection'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Response'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>'POST'</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bd0</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bcf</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bce</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7bcd" name="Type">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="col" namespace="http://www.ficohsa.com.hn/middleware.services/collectionContractDetailTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="paq" namespace="http://www.ficohsa.com.hn/paquetesTigo" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="get" namespace="http://xmlns.oracle.com/pcbpel/adapter/db/sp/GetParameter" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay1" namespace="http://www.ficohsa.com.hn/middleware.services/PaymentRecordCreditCard" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="paqueteTigos" path="$RSPpaqueteTigos" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:service operation="paqueteTigo">
                            <con1:reference ref="CoreBankingHN/ProviderServices/BusinessServices/PaquetesTigo/paquetesTigo" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con1:service>
                    </con1:variable>
                    <con1:variable name="PaymentRecordCreditCard" path="$RSPPaymentRecordCreditCard" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="MWBanking/CreditCards/RequestorServices/XSD/paymentRecordCreditCardTypes" element="PaymentRecordCreditCardResponse"/>
                    </con1:variable>
                    <con1:variable name="PaymentCollection" path="$RSP" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/PaymentCollection/XMLSchema_-263071553" element="PagoderecaudoreferenciadodbctaResponse"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bc3</con2:id>
                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N79f0">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="validationMessage">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79cc</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"ERROR LOOKING COLLECTION TYPE"</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79c9</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7bc2">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "LOCAL"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQGetRelationOperationColectionIn">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bb7</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/getRelationOperationCollectionIn"/>
                                            <con2:param name="paymentCollectionRequest">
                                                <con2:path>$bodyInput</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7bb4</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b7a</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b79</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b78</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b73</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetRelationOperationCollection/GetRelationOperationCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>GetRelationOperationCollection</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQGetRelationOperationColectionIn</con1:body>
                                        <con1:header/>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPGetRelationOperationColectionIn</con1:body>
                                        <con1:header/>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79fb</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$RSPGetRelationOperationColectionIn/*:CODIGO_ERROR</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b6c</con2:id>
                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7b6b">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode != "SUCCESS"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b68</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetRelationOperationColectionIn/*:MENSAJE_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b65</con2:id>
                                                    </con2:skip>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default/>
                                        </con1:ifThenElse>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N777b</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPGetRelationOperationColectionIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPGetRelationOperationColectionIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7741</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7740</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N773f</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:assign varName="cantidadFacturas">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b60</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSPGetRelationOperationColectionIn/*:CODIGO_FACTURA/*:CODIGO_FACTURA_ITEM)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79bf</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N79be">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">number($cantidadFacturas) > 1</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="validationMessage">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79bb</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"MULTI BILL PAYMENTS FOR LOCAL COLLECTIONS ARE NOT AVAILABLE"</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79b7</con2:id>
                                            </con2:skip>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b59</con2:id>
                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7b58">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b53</con2:id>
                                                    </con2:skip>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7b56">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="REQPaymentCollection">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b4f</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionLocalDebtAcc"/>
                                                                <con2:param name="paymentCollectionRequest">
                                                                    <con2:path>$bodyInput</con2:path>
                                                                </con2:param>
                                                                <con2:param name="password">
                                                                    <con2:path>$password</con2:path>
                                                                </con2:param>
                                                                <con2:param name="getRelationOperationCollectionResponse">
                                                                    <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="username">
                                                                    <con2:path>$username</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b49</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Request'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b0f</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b0e</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b0d</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7b4c</con2:id>
                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>Pagoderecaudolocalylineadbcta</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">RSP</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform/>
                                                        <con1:responseTransform>
                                                            <con1:assign varName="errorCode">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79f8</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="validationMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79f5</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSP/Status/messages)
else('')</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:responseTransform>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ffa</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Response'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7a9f</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7a9e</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7a9d</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7da3">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "CREDIT_CARD"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="contractPaymentMethods">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7da2</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentCollectionContractDetail/col:CollectionContractDetailResponseType/col:CollectionContractDetailResponseRecordType/col:PaymentMethods/col:PaymentMethod)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7da1</con2:id>
                                                        <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7da0">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:contains($contractPaymentMethods,'CREDIT.CARD')</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:replace varName="proxyTrace" contents-only="false">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9f</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"prePagoRecaudoLineaTC"</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                                <con1:assign varName="paymentType">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9e</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'FICBCO0067.PAYMENT.SERVICE'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="debitAcctParamHNL">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9d</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.HNLDEBITAACCTNO'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="debitAcctParamUSD">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9c</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.USDDEBITACCTNO'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="REQGetParameter">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9b</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/XQ/GetParameterIn"/>
                                                                            <con2:param name="ParametersName">
                                                                                <con2:path>fn:concat("T24T113.HNLDEBITAACCTNO","||",$paymentType,"||",$debitAcctParamHNL,"||",$debitAcctParamUSD)</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d9a</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>17</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Request'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d99</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace varName="body" contents-only="true">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d98</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d97</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                                <con1:wsCallout>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d96</con2:id>
                                                                    <con1:service ref="CreditCardProcessor/ProviderServices/BusinessService/GetParameter/GetParameter_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>GetParameter</con1:operation>
                                                                    <con1:request>
                                                                        <con1:body wrapped="false">REQGetParameter</con1:body>
                                                                        <con1:header/>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:body wrapped="false">RSPGetParameter</con1:body>
                                                                        <con1:header/>
                                                                    </con1:response>
                                                                    <con1:requestTransform/>
                                                                    <con1:responseTransform>
                                                                        <con1:assign varName="errorCode">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d95</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_CODE/text())</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="validationMessage">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d94</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="paymentTypeValue">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d93</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME="FICBCO0067.PAYMENT.SERVICE"]/get:VALUE)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="debitAccount">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d92</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME="T24T113.HNLDEBITAACCTNO"]/get:VALUE)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:responseTransform>
                                                                </con1:wsCallout>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d91</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>17</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Response'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d90</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace contents-only="true" varName="body">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8f</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8e</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8d</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8c">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode='SUCCESS'</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="REQPaymentRecordCreditCard">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8b</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardIn"/>
                                                                                        <con2:param name="transactionType">
                                                                                            <con2:path>'Authorization'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="paymentTypeValue">
                                                                                            <con2:path>$paymentTypeValue</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="ORG">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contractName">
                                                                                            <con2:path>$contractName</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="PaymentCollectionRequest">
                                                                                            <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d8a</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d89</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d88</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d87</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                            <con1:wsCallout>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d86</con2:id>
                                                                                <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                                <con1:request>
                                                                                    <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:request>
                                                                                <con1:response>
                                                                                    <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:response>
                                                                                <con1:requestTransform>
                                                                                    <con1:transport-headers copy-all="true">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d85</con2:id>
                                                                                        <con1:header-set>outbound-request</con1:header-set>
                                                                                    </con1:transport-headers>
                                                                                </con1:requestTransform>
                                                                                <con1:responseTransform>
                                                                                    <con1:assign varName="errorCode">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d84</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="validationMessage">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d83</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="authorizationCode">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d82</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:AuthorizationCode)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="SEQ">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d81</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:SecuencialNumber)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="org">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d80</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:Org)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                </con1:responseTransform>
                                                                            </con1:wsCallout>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7f</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7e</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7d</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7c</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7b</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d7a">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage =''</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="REQPaymentCollection">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d79</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentCollectionLocalDBAcc"/>
                                                                                        <con2:param name="password">
                                                                                            <con2:path>$password</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="GetRelationOperationCollectionResponse">
                                                                                            <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="PaymentCollectionRequest">
                                                                                            <con2:path>$bodyInput</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="debidAccount">
                                                                                            <con2:path>$debitAccount</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="username">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="bodyReqLog">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d78</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>1</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>'2'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$user</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>'POST'</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d77</con2:id>
                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                <con1:outboundTransform>
                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d76</con3:id>
                                                                                        <con2:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:replace>
                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d75</con3:id>
                                                                                        <con2:mode>request</con2:mode>
                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                    </con2:routing-options>
                                                                                </con1:outboundTransform>
                                                                            </con1:route>
                                                                            <con1:wsCallout>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d74</con2:id>
                                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>Pagoderecaudolocalylineadbcta</con1:operation>
                                                                                <con1:request>
                                                                                    <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:request>
                                                                                <con1:response>
                                                                                    <con1:body wrapped="false">RSP</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:response>
                                                                                <con1:requestTransform/>
                                                                                <con1:responseTransform/>
                                                                            </con1:wsCallout>
                                                                            <con1:assign varName="bodyReqLog">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d71</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>1</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>'2'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$user</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Response'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>'POST'</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d70</con2:id>
                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                <con1:outboundTransform>
                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6f</con3:id>
                                                                                        <con2:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:replace>
                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6e</con3:id>
                                                                                        <con2:mode>request</con2:mode>
                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                    </con2:routing-options>
                                                                                </con1:outboundTransform>
                                                                            </con1:route>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6d</con2:id>
                                                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6c">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:data($RSP/Status/successIndicator))!='SUCCESS'</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="REQPaymentRecordCreditCard">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6b</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardReversionIn"/>
                                                                                                    <con2:param name="transactionType">
                                                                                                        <con2:path>'Reversion'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="paymentTypeValue">
                                                                                                        <con2:path>$paymentTypeValue</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="ORG">
                                                                                                        <con2:path>$org</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contractName">
                                                                                                        <con2:path>$contractName</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="PaymentCollectionRequest">
                                                                                                        <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="SEQ">
                                                                                                        <con2:path>$SEQ</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:assign varName="varLogReq">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d6a</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>$aplicationId</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>9</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$username</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d69</con3:id>
                                                                                            <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                            <con2:outboundTransform>
                                                                                                <con1:replace varName="body" contents-only="true">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d68</con3:id>
                                                                                                    <con1:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:replace>
                                                                                                <con1:routing-options>
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d67</con3:id>
                                                                                                    <con1:mode>request</con1:mode>
                                                                                                    <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                                </con1:routing-options>
                                                                                            </con2:outboundTransform>
                                                                                        </con2:route>
                                                                                        <con1:wsCallout>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d66</con2:id>
                                                                                            <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                                            <con1:request>
                                                                                                <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:request>
                                                                                            <con1:response>
                                                                                                <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:response>
                                                                                            <con1:requestTransform>
                                                                                                <con1:transport-headers copy-all="true">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d65</con2:id>
                                                                                                    <con1:header-set>outbound-request</con1:header-set>
                                                                                                </con1:transport-headers>
                                                                                            </con1:requestTransform>
                                                                                            <con1:responseTransform>
                                                                                                <con1:assign varName="errorCode">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d64</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                                <con1:assign varName="validationMessage">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d63</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                            </con1:responseTransform>
                                                                                        </con1:wsCallout>
                                                                                        <con1:assign varName="varLogReq">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d62</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>$aplicationId</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>9</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$username</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d61</con3:id>
                                                                                            <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                            <con2:outboundTransform>
                                                                                                <con1:replace varName="body" contents-only="true">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d60</con3:id>
                                                                                                    <con1:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:replace>
                                                                                                <con1:routing-options>
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d5f</con3:id>
                                                                                                    <con1:mode>request</con1:mode>
                                                                                                    <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                                </con1:routing-options>
                                                                                            </con2:outboundTransform>
                                                                                        </con2:route>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default/>
                                                                            </con1:ifThenElse>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d5e</con2:id>
                                                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d5d">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage !=''</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="validationMessage">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7d5c</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"UNHANDLED PAYMENT FAILURE"</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default/>
                                                                            </con1:ifThenElse>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default/>
                                                    </con1:ifThenElse>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default/>
                                        </con1:ifThenElse>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7bc0">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "ONLINE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="isExtended">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N79fc</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($bodyInput/pay:ExtendedCollectionYesNo/text())</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N79c0</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N79bf">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$isExtended = "YES"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQRecordOperationNonStandartAgreement">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N79bc</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/recordOperationNonStandartAgreementIn"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operationType">
                                                            <con2:path>"2"</con2:path>
                                                        </con2:param>
                                                        <con2:param name="username">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N79b4</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQRecordOperationNonStandartAgreement)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQRecordOperationNonStandartAgreement)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N797a</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7979</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7978</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N79b9</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordOperationNonStandartAgreement/RecordOperationNonStandartAgreement" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>RecordOperationNonStandartAgreement</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQRecordOperationNonStandartAgreement</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPRecordOperationNonStandartAgreement</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7905</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPRecordOperationNonStandartAgreement/*:ERROR_CODE/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78fe</con2:id>
                                                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N78fd">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78fa</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPRecordOperationNonStandartAgreement/*:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="idSolicitud">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78f7</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPRecordOperationNonStandartAgreement/*:ID_SOLICITUD/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7944</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPRecordOperationNonStandartAgreement)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPRecordOperationNonStandartAgreement)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N790a</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7909</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7908</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="idSolicitud">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79a4</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($bodyInput/pay:DebtorCode/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78ed</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N78ec">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQGetRelationOperationColectionIn">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7834</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/getRelationOperationCollectionIn"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7831</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78ac</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78ab</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N78aa</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77bb</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetRelationOperationCollection/GetRelationOperationCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>GetRelationOperationCollection</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQGetRelationOperationColectionIn</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPGetRelationOperationColectionIn</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79f2</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetRelationOperationColectionIn/*:CODIGO_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77ba</con2:id>
                                                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N77b9">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77b8</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetRelationOperationColectionIn/*:MENSAJE_ERROR/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77b7</con2:id>
                                                                </con2:skip>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:replace contents-only="true" varName="body">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77b4</con2:id>
                                                                <con1:location>
                                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./pay:paymentCollectionRequest/pay:DebtorCode</con2:xpathText>
                                                                </con1:location>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$idSolicitud</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ffe</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N783c</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N783b</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N783a</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79a1</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:assign varName="cantidadFacturas">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N77b1</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSPGetRelationOperationColectionIn/*:CODIGO_FACTURA/*:CODIGO_FACTURA_ITEM)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7997</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7996">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">number($cantidadFacturas) > 1</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="validationMessage">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7993</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"MULTI BILL PAYMENTS FOR ONLINE COLLECTIONS ARE NOT AVAILABLE"</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7990</con2:id>
                                            </con2:skip>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N76a2</con2:id>
                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N76a1">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N76a0</con2:id>
                                                    </con2:skip>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N769f">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="REQPaymentCollection">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75fe</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionLocalDebtAcc"/>
                                                                <con2:param name="paymentCollectionRequest">
                                                                    <con2:path>$bodyInput</con2:path>
                                                                </con2:param>
                                                                <con2:param name="password">
                                                                    <con2:path>$password</con2:path>
                                                                </con2:param>
                                                                <con2:param name="getRelationOperationCollectionResponse">
                                                                    <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="username">
                                                                    <con2:path>$username</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N769d</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Request'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N769c</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N769b</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N769a</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7699</con2:id>
                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>Pagoderecaudolocalylineadbcta</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">RSP</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform/>
                                                        <con1:responseTransform>
                                                            <con1:assign varName="errorCode">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N797f</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="validationMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N797c</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSP/Status/messages)
else('')</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="transactionId">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff3d.N5f7c2a38.0.18cf573a3dc.N7ffe</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/transactionId)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:responseTransform>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ffc</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Response'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7697</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7696</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7695</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b90">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "CREDIT_CARD"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:replace varName="proxyTrace" contents-only="false">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8f</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"prePagoRecaudoLineaTC"</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:replace>
                                                    <con1:assign varName="paymentType">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8e</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'FICBCO0067.PAYMENT.SERVICE'</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="debitAcctParamHNL">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8d</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.HNLDEBITAACCTNO'</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="debitAcctParamUSD">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8c</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.USDDEBITACCTNO'</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="REQGetParameter">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8b</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/XQ/GetParameterIn"/>
                                                                <con2:param name="ParametersName">
                                                                    <con2:path>fn:concat($debitAcctParamHNL,"||",$debitAcctParamUSD,"||",$paymentType)</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="varLogReq">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b8a</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>$aplicationId</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>17</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$username</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Request'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b89</con3:id>
                                                        <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con2:operation>SetLogInfoService_BS</con2:operation>
                                                        <con2:outboundTransform>
                                                            <con1:replace varName="body" contents-only="true">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b88</con3:id>
                                                                <con1:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                            <con1:routing-options>
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b87</con3:id>
                                                                <con1:mode>request</con1:mode>
                                                                <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                            </con1:routing-options>
                                                        </con2:outboundTransform>
                                                    </con2:route>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b86</con2:id>
                                                        <con1:service ref="CreditCardProcessor/ProviderServices/BusinessService/GetParameter/GetParameter_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>GetParameter</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">REQGetParameter</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">RSPGetParameter</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform/>
                                                        <con1:responseTransform>
                                                            <con1:assign varName="errorCode">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b85</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_CODE/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="validationMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b84</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="paymentTypeValue">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b83</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME="FICBCO0067.PAYMENT.SERVICE"]/get:VALUE)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="debitAccount">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b82</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:data($body/pay:paymentCollectionRequest/pay:PaymentInformation/pay:PaymentCurrency) = 'HNL')then(
    fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME=$debitAcctParamHNL]/get:VALUE)
)else(
    fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME=$debitAcctParamUSD]/get:VALUE)
)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:responseTransform>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="varLogReq">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b81</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>$aplicationId</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>17</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$username</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Response'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b80</con3:id>
                                                        <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con2:operation>SetLogInfoService_BS</con2:operation>
                                                        <con2:outboundTransform>
                                                            <con1:replace contents-only="true" varName="body">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7f</con3:id>
                                                                <con1:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                </con1:expr>
                                                            </con1:replace>
                                                            <con1:routing-options>
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7e</con3:id>
                                                                <con1:mode>request</con1:mode>
                                                                <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                            </con1:routing-options>
                                                        </con2:outboundTransform>
                                                    </con2:route>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7d</con2:id>
                                                        <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7c">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode='SUCCESS'</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="REQPaymentRecordCreditCard">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7b</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardIn"/>
                                                                            <con2:param name="transactionType">
                                                                                <con2:path>'Authorization'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="paymentTypeValue">
                                                                                <con2:path>$paymentTypeValue</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="ORG">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contractName">
                                                                                <con2:path>$contractName</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="PaymentCollectionRequest">
                                                                                <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b7a</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>9</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Request'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b79</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace varName="body" contents-only="true">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b78</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b77</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                                <con1:wsCallout>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b76</con2:id>
                                                                    <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                    <con1:request>
                                                                        <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                        <con1:header/>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                        <con1:header/>
                                                                    </con1:response>
                                                                    <con1:requestTransform>
                                                                        <con1:transport-headers copy-all="true">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b75</con2:id>
                                                                            <con1:header-set>outbound-request</con1:header-set>
                                                                        </con1:transport-headers>
                                                                    </con1:requestTransform>
                                                                    <con1:responseTransform>
                                                                        <con1:assign varName="errorCode">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b74</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="validationMessage">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b73</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="authorizationCode">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b72</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:AuthorizationCode)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="SEQ">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b71</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:SecuencialNumber)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="org">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b70</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:Org)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:responseTransform>
                                                                </con1:wsCallout>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6f</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>9</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Request'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6e</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace varName="body" contents-only="true">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6d</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6c</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default/>
                                                    </con1:ifThenElse>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6b</con2:id>
                                                        <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b6a">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage =''</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="REQPaymentCollection">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b69</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentCollectionLocalDBAcc"/>
                                                                            <con2:param name="password">
                                                                                <con2:path>$password</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="GetRelationOperationCollectionResponse">
                                                                                <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="PaymentCollectionRequest">
                                                                                <con2:path>$bodyInput</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="debidAccount">
                                                                                <con2:path>$debitAccount</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="username">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="bodyReqLog">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b68</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>1</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>'2'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$user</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Request'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>'POST'</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b67</con2:id>
                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                    <con1:outboundTransform>
                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b66</con3:id>
                                                                            <con2:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b65</con3:id>
                                                                            <con2:mode>request</con2:mode>
                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                        </con2:routing-options>
                                                                    </con1:outboundTransform>
                                                                </con1:route>
                                                                <con1:wsCallout>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b64</con2:id>
                                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>Pagoderecaudoreferenciadodbcta</con1:operation>
                                                                    <con1:request>
                                                                        <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                                        <con1:header/>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:body wrapped="false">RSP</con1:body>
                                                                        <con1:header/>
                                                                    </con1:response>
                                                                    <con1:requestTransform/>
                                                                    <con1:responseTransform/>
                                                                </con1:wsCallout>
                                                                <con1:assign varName="bodyReqLog">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b61</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>1</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>'2'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$user</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Response'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>'POST'</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b60</con2:id>
                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                    <con1:outboundTransform>
                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5f</con3:id>
                                                                            <con2:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5e</con3:id>
                                                                            <con2:mode>request</con2:mode>
                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                        </con2:routing-options>
                                                                    </con1:outboundTransform>
                                                                </con1:route>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5d</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5c">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:data($RSP/Status/successIndicator))!='SUCCESS'</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="REQPaymentRecordCreditCard">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5b</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardReversionIn"/>
                                                                                        <con2:param name="transactionType">
                                                                                            <con2:path>'Reversion'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="paymentTypeValue">
                                                                                            <con2:path>$paymentTypeValue</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="ORG">
                                                                                            <con2:path>$org</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contractName">
                                                                                            <con2:path>$contractName</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="PaymentCollectionRequest">
                                                                                            <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="SEQ">
                                                                                            <con2:path>$SEQ</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b5a</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b59</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b58</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b57</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                            <con1:wsCallout>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b56</con2:id>
                                                                                <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                                <con1:request>
                                                                                    <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:request>
                                                                                <con1:response>
                                                                                    <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:response>
                                                                                <con1:requestTransform>
                                                                                    <con1:transport-headers copy-all="true">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b55</con2:id>
                                                                                        <con1:header-set>outbound-request</con1:header-set>
                                                                                    </con1:transport-headers>
                                                                                </con1:requestTransform>
                                                                                <con1:responseTransform>
                                                                                    <con1:assign varName="errorCode">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b54</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="validationMessage">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b53</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                </con1:responseTransform>
                                                                            </con1:wsCallout>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b52</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b51</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b50</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b4f</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b4e</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b4d">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage !=''</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="validationMessage">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7b4c</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"UNHANDLED PAYMENT FAILURE"</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default/>
                                                    </con1:ifThenElse>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default>
                                                <con1:Error>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff3d.6ee772e2.0.18d0e098b9f.N7ff6</con2:id>
                                                    <con1:errCode>304</con1:errCode>
                                                    <con1:message>Metodo de pago no vlido.</con1:message>
                                                </con1:Error>
                                            </con1:default>
                                        </con1:ifThenElse>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7bbe">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = ("REFERENCED", "REFERENCED_LOCAL", "REFERENCED_ONLINE")</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N768e</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N768d">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_LOCAL"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="validationMessage">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7688</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentDebtCollectionsValidate"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N760d</con2:id>
                                                <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N760c">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7609</con2:id>
                                                        </con2:skip>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N768b">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_ONLINE"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQGetRelationOperationColectionIn">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7654</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/getRelationOperationCollectionIn"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7651</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7648</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7647</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7646</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N762d</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetRelationOperationCollection/GetRelationOperationCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>GetRelationOperationCollection</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQGetRelationOperationColectionIn</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPGetRelationOperationColectionIn</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7979</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetRelationOperationColectionIn/*:CODIGO_ERROR/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N762c</con2:id>
                                                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N762b">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode != "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N762a</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetRelationOperationColectionIn/*:MENSAJE_ERROR/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7629</con2:id>
                                                                </con2:skip>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="cantidadFacturas">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7614</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSPGetRelationOperationColectionIn/*:CODIGO_FACTURA/*:CODIGO_FACTURA_ITEM)</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7625</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPGetRelationOperationColectionIn)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N761c</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N761b</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N761a</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7972</con2:id>
                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7971">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "REFERENCED_ONLINE" and $cantidadFacturas > "1"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:assign varName="validationMessage">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N796e</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"MULTI BILL PAYMENTS FOR ONLINE COLLECTIONS ARE NOT AVAILABLE"</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N796b</con2:id>
                                                        </con2:skip>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                            </con1:ifThenElse>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7602</con2:id>
                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7969">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7955</con2:id>
                                                        </con2:skip>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7601">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75f7</con2:id>
                                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N75f6">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_ONLINE"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="REQPaymentCollection">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75f1</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionRefOnlineDebtAccIn"/>
                                                                                <con2:param name="paymentCollectionRequest">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="password">
                                                                                    <con2:path>$password</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getRelationOperationCollectionResponse">
                                                                                    <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="username">
                                                                                    <con2:path>$username</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N75f4">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_LOCAL"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="REQPaymentCollection">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75ee</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionRefDebAccIn"/>
                                                                                <con2:param name="paymentCollectionRequest">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="password">
                                                                                    <con2:path>$password</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="username">
                                                                                    <con2:path>$username</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con1:assign varName="REQPaymentCollection">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75eb</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionReferencedDebitAccountIn"/>
                                                                            <con2:param name="paymentCollectionRequest">
                                                                                <con2:path>$bodyInput</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="password">
                                                                                <con2:path>$password</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="username">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75e5</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($REQGetRelationOperationColectionIn)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Request'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75da</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75d9</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75d8</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                        <con1:wsCallout>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75c5</con2:id>
                                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>Pagoderecaudoreferenciadodbcta</con1:operation>
                                                            <con1:request>
                                                                <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                                <con1:header/>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body wrapped="false">RSP</con1:body>
                                                                <con1:header/>
                                                            </con1:response>
                                                            <con1:requestTransform/>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="errorCode">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N794e</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N794c</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSP/Status/messages)
else('')</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75d5</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Response'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75ca</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75c9</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75c8</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ec">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "CREDIT_CARD"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78eb</con2:id>
                                                            <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ea">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_LOCAL"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="validationMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e9</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"PAYMENT METHOD NOT AVAILABLE"</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e8</con2:id>
                                                                    </con2:skip>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con1:assign varName="paymentType">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e7</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'FICBCO0067.PAYMENT.SERVICE'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="debitAcctParamHNL">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e6</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.HNLDEBITAACCTNO'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="debitAcctParamUSD">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e5</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'T24T113.USDDEBITACCTNO'</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="REQGetParameter">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e4</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/XQ/GetParameterIn"/>
                                                                            <con2:param name="ParametersName">
                                                                                <con2:path>fn:concat($debitAcctParamHNL,"||",$debitAcctParamUSD,"||",$paymentType)</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e3</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>17</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Request'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e2</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace varName="body" contents-only="true">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e1</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78e0</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                                <con1:wsCallout>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78df</con2:id>
                                                                    <con1:service ref="CreditCardProcessor/ProviderServices/BusinessService/GetParameter/GetParameter_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>GetParameter</con1:operation>
                                                                    <con1:request>
                                                                        <con1:body wrapped="false">REQGetParameter</con1:body>
                                                                        <con1:header/>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:body wrapped="false">RSPGetParameter</con1:body>
                                                                        <con1:header/>
                                                                    </con1:response>
                                                                    <con1:requestTransform/>
                                                                    <con1:responseTransform>
                                                                        <con1:assign varName="errorCode">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78de</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_CODE/text())</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="validationMessage">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78dd</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">string($RSPGetParameter/get:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="paymentTypeValue">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78dc</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME=$paymentType]/get:VALUE)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="debitAccount">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78db</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:data($body/pay:paymentCollectionRequest/pay:PaymentInformation/pay:PaymentCurrency) = 'HNL')then(
    fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME=$debitAcctParamHNL]/get:VALUE)
)else(
    fn:data($RSPGetParameter/get:CONFIGURACIONES/get:CONFIGURACIONES_ITEM[get:NAME=$debitAcctParamUSD]/get:VALUE)
)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:responseTransform>
                                                                </con1:wsCallout>
                                                                <con1:assign varName="varLogReq">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78da</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>$aplicationId</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>17</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($RSPGetParameter)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'ObtenerParametrizacion'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$username</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Response'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d9</con3:id>
                                                                    <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace contents-only="true" varName="body">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d8</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                        <con1:routing-options>
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d7</con3:id>
                                                                            <con1:mode>request</con1:mode>
                                                                            <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                        </con1:routing-options>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d6</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d5">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode='SUCCESS'</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="REQPaymentRecordCreditCard">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d4</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardIn"/>
                                                                                        <con2:param name="transactionType">
                                                                                            <con2:path>'Authorization'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="paymentTypeValue">
                                                                                            <con2:path>$paymentTypeValue</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="ORG">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contractName">
                                                                                            <con2:path>$contractName</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="PaymentCollectionRequest">
                                                                                            <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d3</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d2</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d1</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78d0</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                            <con1:wsCallout>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78cf</con2:id>
                                                                                <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                                <con1:request>
                                                                                    <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:request>
                                                                                <con1:response>
                                                                                    <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:response>
                                                                                <con1:requestTransform>
                                                                                    <con1:transport-headers copy-all="true">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ce</con2:id>
                                                                                        <con1:header-set>outbound-request</con1:header-set>
                                                                                    </con1:transport-headers>
                                                                                </con1:requestTransform>
                                                                                <con1:responseTransform>
                                                                                    <con1:assign varName="errorCode">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78cd</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="validationMessage">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78cc</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="authorizationCode">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78cb</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:AuthorizationCode)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="SEQ">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ca</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:SecuencialNumber)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                    <con1:assign varName="org">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c9</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPPaymentRecordCreditCard/pay1:Org)</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                </con1:responseTransform>
                                                                            </con1:wsCallout>
                                                                            <con1:assign varName="varLogReq">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c8</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>$aplicationId</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>9</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c7</con3:id>
                                                                                <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                <con2:outboundTransform>
                                                                                    <con1:replace varName="body" contents-only="true">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c6</con3:id>
                                                                                        <con1:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:replace>
                                                                                    <con1:routing-options>
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c5</con3:id>
                                                                                        <con1:mode>request</con1:mode>
                                                                                        <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                    </con1:routing-options>
                                                                                </con2:outboundTransform>
                                                                            </con2:route>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c4</con2:id>
                                                                    <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c3">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage =''</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:assign varName="REQPaymentCollection">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c2</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentCollectionLocalDBAcc"/>
                                                                                        <con2:param name="password">
                                                                                            <con2:path>$password</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="GetRelationOperationCollectionResponse">
                                                                                            <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="PaymentCollectionRequest">
                                                                                            <con2:path>$bodyInput</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="debidAccount">
                                                                                            <con2:path>$debitAccount</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="username">
                                                                                            <con2:path>$username</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="bodyReqLog">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c1</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>1</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>'2'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollection)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$user</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Request'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>'POST'</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78c0</con2:id>
                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                <con1:outboundTransform>
                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78bf</con3:id>
                                                                                        <con2:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:replace>
                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78be</con3:id>
                                                                                        <con2:mode>request</con2:mode>
                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                    </con2:routing-options>
                                                                                </con1:outboundTransform>
                                                                            </con1:route>
                                                                            <con1:wsCallout>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78bd</con2:id>
                                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>Pagoderecaudolocalylineadbcta</con1:operation>
                                                                                <con1:request>
                                                                                    <con1:body wrapped="false">REQPaymentCollection</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:request>
                                                                                <con1:response>
                                                                                    <con1:body wrapped="false">RSP</con1:body>
                                                                                    <con1:header/>
                                                                                </con1:response>
                                                                                <con1:requestTransform/>
                                                                                <con1:responseTransform/>
                                                                            </con1:wsCallout>
                                                                            <con1:assign varName="bodyReqLog">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ba</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                        <con2:param name="codigoAplicacion">
                                                                                            <con2:path>1</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoServicio">
                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="contenido">
                                                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="estado">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="codigoSistema">
                                                                                            <con2:path>'2'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="nombreFlujoError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaHora">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="parametros">
                                                                                            <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="uuid">
                                                                                            <con2:path>$uuid</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="version">
                                                                                            <con2:path>'1'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="operacionServicio">
                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoDestino">
                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="endpoint">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="bancoOrigen">
                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="fechaTX">
                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="usuario">
                                                                                            <con2:path>$user</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="descripcionError">
                                                                                            <con2:path>''</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="tipoMensaje">
                                                                                            <con2:path>'Response'</con2:path>
                                                                                        </con2:param>
                                                                                        <con2:param name="metodo">
                                                                                            <con2:path>'POST'</con2:path>
                                                                                        </con2:param>
                                                                                    </con2:xqueryTransform>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b9</con2:id>
                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                <con1:outboundTransform>
                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b8</con3:id>
                                                                                        <con2:expr>
                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                        </con2:expr>
                                                                                    </con2:replace>
                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b7</con3:id>
                                                                                        <con2:mode>request</con2:mode>
                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                    </con2:routing-options>
                                                                                </con1:outboundTransform>
                                                                            </con1:route>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b6</con2:id>
                                                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b5">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:data($RSP/Status/successIndicator))!='SUCCESS'</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="REQPaymentRecordCreditCard">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b4</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/PaymentRecordCreditCardReversionIn"/>
                                                                                                    <con2:param name="transactionType">
                                                                                                        <con2:path>'Reversion'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="paymentTypeValue">
                                                                                                        <con2:path>$paymentTypeValue</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="ORG">
                                                                                                        <con2:path>$org</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contractName">
                                                                                                        <con2:path>$contractName</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="PaymentCollectionRequest">
                                                                                                        <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="SEQ">
                                                                                                        <con2:path>$SEQ</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:assign varName="varLogReq">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b3</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>$aplicationId</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>9</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$username</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b2</con3:id>
                                                                                            <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                            <con2:outboundTransform>
                                                                                                <con1:replace varName="body" contents-only="true">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b1</con3:id>
                                                                                                    <con1:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:replace>
                                                                                                <con1:routing-options>
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78b0</con3:id>
                                                                                                    <con1:mode>request</con1:mode>
                                                                                                    <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                                </con1:routing-options>
                                                                                            </con2:outboundTransform>
                                                                                        </con2:route>
                                                                                        <con1:wsCallout>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78af</con2:id>
                                                                                            <con1:service ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/ProxyServices/PaymentRecordCreditCard_PS" xsi:type="ref:ProxyRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>paymentRecordCreditCard</con1:operation>
                                                                                            <con1:request>
                                                                                                <con1:body wrapped="false">REQPaymentRecordCreditCard</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:request>
                                                                                            <con1:response>
                                                                                                <con1:body wrapped="false">RSPPaymentRecordCreditCard</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:response>
                                                                                            <con1:requestTransform>
                                                                                                <con1:transport-headers copy-all="true">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ae</con2:id>
                                                                                                    <con1:header-set>outbound-request</con1:header-set>
                                                                                                </con1:transport-headers>
                                                                                            </con1:requestTransform>
                                                                                            <con1:responseTransform>
                                                                                                <con1:assign varName="errorCode">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ad</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Code)</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                                <con1:assign varName="validationMessage">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ac</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentRecordCreditCard/pay1:ErrorInfo/com:Description)</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                            </con1:responseTransform>
                                                                                        </con1:wsCallout>
                                                                                        <con1:assign varName="varLogReq">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78ab</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>$aplicationId</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>9</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentRecordCreditCard)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'PaymentRecordCreditCard'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$username</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78aa</con3:id>
                                                                                            <con2:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con2:operation>SetLogInfoService_BS</con2:operation>
                                                                                            <con2:outboundTransform>
                                                                                                <con1:replace varName="body" contents-only="true">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78a9</con3:id>
                                                                                                    <con1:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:replace>
                                                                                                <con1:routing-options>
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78a8</con3:id>
                                                                                                    <con1:mode>request</con1:mode>
                                                                                                    <con1:qualityOfService>best-effort</con1:qualityOfService>
                                                                                                </con1:routing-options>
                                                                                            </con2:outboundTransform>
                                                                                        </con2:route>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default/>
                                                                            </con1:ifThenElse>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78a7</con2:id>
                                                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N78a6">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage !=''</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="validationMessage">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N78a5</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"UNHANDLED PAYMENT FAILURE"</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default/>
                                                                            </con1:ifThenElse>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default/>
                                                                </con1:ifThenElse>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e77</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7e76">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case(fn:string($errorCode/text())) = "SUCCESS" and fn:string($type) = ("REFERENCED_ONLINE", "REFERENCED_LOCAL")</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQGetCoreParameters">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e70</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/getCoreParametersIn"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                        <con2:param name="password">
                                                            <con2:path>$password</con2:path>
                                                        </con2:param>
                                                        <con2:param name="username">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e6a</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQGetCoreParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQGetCoreParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e61</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e60</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e5f</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e6d</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/CoreBS/CoreBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>Consultadeparametroscore</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQGetCoreParameters</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPGetCoreParameters</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7949</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7946</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSP/Status/messages)
else('')</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e5c</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPGetCoreParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPGetCoreParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e53</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e52</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e51</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e42</con2:id>
                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7e41">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_LOCAL"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e3a</con2:id>
                                                            <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7e39">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode/text()) = "SUCCESS"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="REQPaymentCollectionAbanks">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e36</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionAbanksIn"/>
                                                                                <con2:param name="paymentCollectionRequest">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="string1">
                                                                                    <con2:path>fn:string($RSP/Status/transactionId/text())</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getCoreParametersResponse">
                                                                                    <con2:path>$RSPGetCoreParameters</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="bodyReqLog">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e24</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                <con2:param name="codigoAplicacion">
                                                                                    <con2:path>1</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoServicio">
                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="contenido">
                                                                                    <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="estado">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoSistema">
                                                                                    <con2:path>'2'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="nombreFlujoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaHora">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="parametros">
                                                                                    <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="version">
                                                                                    <con2:path>'1'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="operacionServicio">
                                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoDestino">
                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="endpoint">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoOrigen">
                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaTX">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="usuario">
                                                                                    <con2:path>$user</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="descripcionError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="tipoMensaje">
                                                                                    <con2:path>'Request'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="metodo">
                                                                                    <con2:path>'POST'</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e1b</con2:id>
                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                        <con1:outboundTransform>
                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e1a</con3:id>
                                                                                <con2:expr>
                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                </con2:expr>
                                                                            </con2:replace>
                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e19</con3:id>
                                                                                <con2:mode>request</con2:mode>
                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                            </con2:routing-options>
                                                                        </con1:outboundTransform>
                                                                    </con1:route>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e33</con2:id>
                                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollectionAbanks/PaymentCollectionAbanks" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>PaymentCollectionAbanks</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="false">REQPaymentCollectionAbanks</con1:body>
                                                                            <con1:header/>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="false">RSPPaymentCollectionAbanks</con1:body>
                                                                            <con1:header/>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform>
                                                                            <con1:assign varName="errorCode">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e30</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentCollectionAbanks/*:PV_CODIGO_ERROR/text())</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:assign varName="validationMessage">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7838</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPPaymentCollectionAbanks/*:PV_MENSAJE_ERROR/text())</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                        </con1:responseTransform>
                                                                    </con1:wsCallout>
                                                                    <con1:assign varName="bodyReqLog">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e0d</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                <con2:param name="codigoAplicacion">
                                                                                    <con2:path>1</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoServicio">
                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="contenido">
                                                                                    <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="estado">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoSistema">
                                                                                    <con2:path>'2'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="nombreFlujoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaHora">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="parametros">
                                                                                    <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="version">
                                                                                    <con2:path>'1'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="operacionServicio">
                                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoDestino">
                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="endpoint">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoOrigen">
                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaTX">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="usuario">
                                                                                    <con2:path>$user</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="descripcionError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="tipoMensaje">
                                                                                    <con2:path>'Response'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="metodo">
                                                                                    <con2:path>'POST'</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e13</con2:id>
                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                        <con1:outboundTransform>
                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e12</con3:id>
                                                                                <con2:expr>
                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                </con2:expr>
                                                                            </con2:replace>
                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e11</con3:id>
                                                                                <con2:mode>request</con2:mode>
                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                            </con2:routing-options>
                                                                        </con1:outboundTransform>
                                                                    </con1:route>
                                                                    <con1:ifThenElse>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e06</con2:id>
                                                                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7e05">
                                                                            <con1:condition>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = "0"</con2:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:ifThenElse>
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dfe</con2:id>
                                                                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7dfd">
                                                                                        <con1:condition>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                                                                        </con1:condition>
                                                                                        <con1:actions>
                                                                                            <con1:assign varName="REQAuthorization">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dfa</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/authorizePaymentCollectionRefDebtAccIn"/>
                                                                                                        <con2:param name="paymentCollectionRefDebtAccResponse">
                                                                                                            <con2:path>$RSP</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:assign varName="bodyReqLog">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7df4</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                        <con2:param name="codigoAplicacion">
                                                                                                            <con2:path>1</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoServicio">
                                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="contenido">
                                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="estado">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoSistema">
                                                                                                            <con2:path>'2'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="nombreFlujoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaHora">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="parametros">
                                                                                                            <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="uuid">
                                                                                                            <con2:path>$uuid</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="version">
                                                                                                            <con2:path>'1'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="operacionServicio">
                                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoDestino">
                                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="endpoint">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoOrigen">
                                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaTX">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="usuario">
                                                                                                            <con2:path>$user</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="descripcionError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="tipoMensaje">
                                                                                                            <con2:path>'Request'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="metodo">
                                                                                                            <con2:path>'POST'</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7deb</con2:id>
                                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                <con1:outboundTransform>
                                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dea</con3:id>
                                                                                                        <con2:expr>
                                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                        </con2:expr>
                                                                                                    </con2:replace>
                                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7de9</con3:id>
                                                                                                        <con2:mode>request</con2:mode>
                                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                    </con2:routing-options>
                                                                                                </con1:outboundTransform>
                                                                                            </con1:route>
                                                                                            <con1:wsCallout>
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7df7</con2:id>
                                                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>Autorizacionpagorecaudorefdbcta</con1:operation>
                                                                                                <con1:request>
                                                                                                    <con1:body wrapped="false">REQAuthorization</con1:body>
                                                                                                    <con1:header/>
                                                                                                </con1:request>
                                                                                                <con1:response>
                                                                                                    <con1:body wrapped="false">RSPAuthorization</con1:body>
                                                                                                    <con1:header/>
                                                                                                </con1:response>
                                                                                                <con1:requestTransform/>
                                                                                                <con1:responseTransform>
                                                                                                    <con1:assign varName="errorCode">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7825</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAuthorization/Status/successIndicator)</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:assign varName="validationMessage">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7822</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSPAuthorization/Status/messages)
else('')</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                </con1:responseTransform>
                                                                                            </con1:wsCallout>
                                                                                            <con1:assign varName="bodyReqLog">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7de6</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                        <con2:param name="codigoAplicacion">
                                                                                                            <con2:path>1</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoServicio">
                                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="contenido">
                                                                                                            <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="estado">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoSistema">
                                                                                                            <con2:path>'2'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="nombreFlujoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaHora">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="parametros">
                                                                                                            <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="uuid">
                                                                                                            <con2:path>$uuid</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="version">
                                                                                                            <con2:path>'1'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="operacionServicio">
                                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoDestino">
                                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="endpoint">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoOrigen">
                                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaTX">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="usuario">
                                                                                                            <con2:path>$user</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="descripcionError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="tipoMensaje">
                                                                                                            <con2:path>'Response'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="metodo">
                                                                                                            <con2:path>'POST'</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ddd</con2:id>
                                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                <con1:outboundTransform>
                                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ddc</con3:id>
                                                                                                        <con2:expr>
                                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                        </con2:expr>
                                                                                                    </con2:replace>
                                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ddb</con3:id>
                                                                                                        <con2:mode>request</con2:mode>
                                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                    </con2:routing-options>
                                                                                                </con1:outboundTransform>
                                                                                            </con1:route>
                                                                                        </con1:actions>
                                                                                    </con1:case>
                                                                                    <con1:default/>
                                                                                </con1:ifThenElse>
                                                                                <con1:assign varName="validationMessage">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dd8</con2:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:upper-case($errorCode) = "SUCCESS") then (
	""
) else (
	fn:concat("ERROR AUTORIZANDO: ", fn:string-join($validationMessage, "."))
)</con2:xqueryText>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                    <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dd5</con2:id>
                                                                                </con2:skip>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default>
                                                                            <con1:assign varName="validationMessage">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7835</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("ERROR COBRANZA: ", fn:string($validationMessage/text()))</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                        </con1:default>
                                                                    </con1:ifThenElse>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N783b</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetCoreParameters/Status/messages/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N78d6</con2:id>
                                                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N78d5">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSP/TELLERType) > 0</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="REQAssembleMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N78d4</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/assembleMessageRequestTTIn"/>
                                                                            <con2:param name="getRelationOperationCollectionResponse">
                                                                                <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="getCollectionContractDetailResponse">
                                                                                <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tellerType">
                                                                                <con2:path>$RSP/TELLERType</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="getCoreParametersResponse">
                                                                                <con2:path>$RSPGetCoreParameters</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="paymentCollectionrequest">
                                                                                <con2:path>$bodyRequest</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="status">
                                                                                <con2:path>$RSP/Status</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="REQAssembleMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N78d3</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/assembleMessageRequestFTIn"/>
                                                                        <con2:param name="getRelationOperationCollectionresponse">
                                                                            <con2:path>$RSPGetRelationOperationColectionIn</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="paymentCollectionRequest">
                                                                            <con2:path>$bodyInput</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fundsTransferType">
                                                                            <con2:path>$RSP/FUNDSTRANSFERType</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="getCollectionContractDetailResponse">
                                                                            <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="getCoreParametersResponse">
                                                                            <con2:path>$RSPGetCoreParameters</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="status">
                                                                            <con2:path>$RSP/Status</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dc0</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($REQAssembleMessage)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($REQAssembleMessage)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Request'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7db7</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7db6</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7db5</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                    <con1:wsCallout>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7dcf</con2:id>
                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/AssembleMessageCollection/AssembleMessageCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>AssembleMessageCollection</con1:operation>
                                                        <con1:request>
                                                            <con1:body wrapped="false">REQAssembleMessage</con1:body>
                                                            <con1:header/>
                                                        </con1:request>
                                                        <con1:response>
                                                            <con1:body wrapped="false">RSPAssembleMessage</con1:body>
                                                            <con1:header/>
                                                        </con1:response>
                                                        <con1:requestTransform/>
                                                        <con1:responseTransform>
                                                            <con1:assign varName="errorCode">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7da4</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAssembleMessage/*:CODIGO_RESPUESTA/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:assign varName="validationMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N781f</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAssembleMessage/*:MENSAJE_RESPUESTA/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:responseTransform>
                                                    </con1:wsCallout>
                                                    <con1:assign varName="bodyReqLog">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7db2</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                <con2:param name="codigoAplicacion">
                                                                    <con2:path>1</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoServicio">
                                                                    <con2:path>$codigoServicio</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="contenido">
                                                                    <con2:path>fn-bea:serialize($RSPAssembleMessage)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="estado">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="codigoSistema">
                                                                    <con2:path>'2'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="nombreFlujoError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaHora">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="parametros">
                                                                    <con2:path>fn-bea:serialize($RSPAssembleMessage)</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="version">
                                                                    <con2:path>'1'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="operacionServicio">
                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoDestino">
                                                                    <con2:path>$destinationBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="endpoint">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="bancoOrigen">
                                                                    <con2:path>$sourceBank</con2:path>
                                                                </con2:param>
                                                                <con2:param name="fechaTX">
                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                </con2:param>
                                                                <con2:param name="usuario">
                                                                    <con2:path>$user</con2:path>
                                                                </con2:param>
                                                                <con2:param name="descripcionError">
                                                                    <con2:path>''</con2:path>
                                                                </con2:param>
                                                                <con2:param name="tipoMensaje">
                                                                    <con2:path>'Response'</con2:path>
                                                                </con2:param>
                                                                <con2:param name="metodo">
                                                                    <con2:path>'POST'</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7da9</con2:id>
                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                        <con1:outboundTransform>
                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7da8</con3:id>
                                                                <con2:expr>
                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                </con2:expr>
                                                            </con2:replace>
                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7da7</con3:id>
                                                                <con2:mode>request</con2:mode>
                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                            </con2:routing-options>
                                                        </con1:outboundTransform>
                                                    </con1:route>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d9d</con2:id>
                                                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7d9c">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="REQRouterConventions">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d82</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/GetCollection/XQ/RouterConventionsIn"/>
                                                                            <con2:param name="AssembleMessageCollectionResponse">
                                                                                <con2:path>$RSPAssembleMessage</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="bodyReqLog">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d66</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>1</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($REQRouterConventions)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>'2'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($REQRouterConventions)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$user</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Response'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>'POST'</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d73</con2:id>
                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                    <con1:outboundTransform>
                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d72</con3:id>
                                                                            <con2:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d71</con3:id>
                                                                            <con2:mode>request</con2:mode>
                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                        </con2:routing-options>
                                                                    </con1:outboundTransform>
                                                                </con1:route>
                                                                <con1:wsCallout>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d86</con2:id>
                                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/RouterConventions/RouterConventions" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>invoke</con1:operation>
                                                                    <con1:request>
                                                                        <con1:param>
                                                                            <con1:name>serviceRequest</con1:name>
                                                                            <con1:variable>REQRouterConventions</con1:variable>
                                                                        </con1:param>
                                                                        <con1:header/>
                                                                    </con1:request>
                                                                    <con1:response>
                                                                        <con1:param>
                                                                            <con1:name>serviceResponse</con1:name>
                                                                            <con1:variable>RSPRouterConventions</con1:variable>
                                                                        </con1:param>
                                                                        <con1:header/>
                                                                    </con1:response>
                                                                    <con1:requestTransform/>
                                                                    <con1:responseTransform>
                                                                        <con1:assign varName="responseData">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d62</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML($RSPRouterConventions/responseData)</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:assign varName="errorCode">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d5f</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($responseData/errorCode/text())</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:responseTransform>
                                                                </con1:wsCallout>
                                                                <con1:assign varName="bodyReqLog">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d7c</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                            <con2:param name="codigoAplicacion">
                                                                                <con2:path>1</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoServicio">
                                                                                <con2:path>$codigoServicio</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="contenido">
                                                                                <con2:path>fn-bea:serialize($RSPRouterConventions)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="estado">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="codigoSistema">
                                                                                <con2:path>'2'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="nombreFlujoError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaHora">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="parametros">
                                                                                <con2:path>fn-bea:serialize($RSPRouterConventions)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="version">
                                                                                <con2:path>'1'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="operacionServicio">
                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoDestino">
                                                                                <con2:path>$destinationBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="endpoint">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="bancoOrigen">
                                                                                <con2:path>$sourceBank</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="fechaTX">
                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="usuario">
                                                                                <con2:path>$user</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="descripcionError">
                                                                                <con2:path>''</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="tipoMensaje">
                                                                                <con2:path>'Response'</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="metodo">
                                                                                <con2:path>'POST'</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d6b</con2:id>
                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                    <con1:outboundTransform>
                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d6a</con3:id>
                                                                            <con2:expr>
                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                            </con2:expr>
                                                                        </con2:replace>
                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d69</con3:id>
                                                                            <con2:mode>request</con2:mode>
                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                        </con2:routing-options>
                                                                    </con1:outboundTransform>
                                                                </con1:route>
                                                                <con1:ifThenElse>
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d58</con2:id>
                                                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7d57">
                                                                        <con1:condition>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = "0"</con2:xqueryText>
                                                                        </con1:condition>
                                                                        <con1:actions>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d50</con2:id>
                                                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7d4f">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="REQAuthorization">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d17</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/authorizePaymentCollectionRefDebtAccIn"/>
                                                                                                    <con2:param name="paymentCollectionRefDebtAccResponse">
                                                                                                        <con2:path>$RSP</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:assign varName="bodyReqLog">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d14</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>1</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>'2'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$user</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>'POST'</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d08</con2:id>
                                                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                            <con1:outboundTransform>
                                                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d07</con3:id>
                                                                                                    <con2:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                    </con2:expr>
                                                                                                </con2:replace>
                                                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d06</con3:id>
                                                                                                    <con2:mode>request</con2:mode>
                                                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                </con2:routing-options>
                                                                                            </con1:outboundTransform>
                                                                                        </con1:route>
                                                                                        <con1:wsCallout>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d03</con2:id>
                                                                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>Autorizacionpagorecaudorefdbcta</con1:operation>
                                                                                            <con1:request>
                                                                                                <con1:body wrapped="false">REQAuthorization</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:request>
                                                                                            <con1:response>
                                                                                                <con1:body wrapped="false">RSPAuthorization</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:response>
                                                                                            <con1:requestTransform/>
                                                                                            <con1:responseTransform>
                                                                                                <con1:assign varName="errorCode">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7819</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAuthorization/Status/succesIndicator/text())</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                                <con1:assign varName="validationMessage">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7816</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAuthorization/Status/messages/text())</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                            </con1:responseTransform>
                                                                                        </con1:wsCallout>
                                                                                        <con1:assign varName="bodyReqLog">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d00</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>1</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>'2'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$user</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Response'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>'POST'</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cf7</con2:id>
                                                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                            <con1:outboundTransform>
                                                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cf6</con3:id>
                                                                                                    <con2:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                    </con2:expr>
                                                                                                </con2:replace>
                                                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cf5</con3:id>
                                                                                                    <con2:mode>request</con2:mode>
                                                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                </con2:routing-options>
                                                                                            </con1:outboundTransform>
                                                                                        </con1:route>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:case id="_BranchId-N3f57ff92.4c6e4f63.0.18a1df30552.N7816">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "CREDIT_CARD"</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="REQAuthorization">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7815</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/authorizePaymentCollectionRefDebtAccIn"/>
                                                                                                    <con2:param name="paymentCollectionRefDebtAccResponse">
                                                                                                        <con2:path>$RSP</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:assign varName="bodyReqLog">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7814</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>1</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>'2'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($REQPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$user</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Request'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>'POST'</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7813</con2:id>
                                                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                            <con1:outboundTransform>
                                                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7812</con3:id>
                                                                                                    <con2:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                    </con2:expr>
                                                                                                </con2:replace>
                                                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7811</con3:id>
                                                                                                    <con2:mode>request</con2:mode>
                                                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                </con2:routing-options>
                                                                                            </con1:outboundTransform>
                                                                                        </con1:route>
                                                                                        <con1:wsCallout>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N7810</con2:id>
                                                                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>Autorizacionpagorecaudorefdbcta</con1:operation>
                                                                                            <con1:request>
                                                                                                <con1:body wrapped="false">REQAuthorization</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:request>
                                                                                            <con1:response>
                                                                                                <con1:body wrapped="false">RSPAuthorization</con1:body>
                                                                                                <con1:header/>
                                                                                            </con1:response>
                                                                                            <con1:requestTransform/>
                                                                                            <con1:responseTransform>
                                                                                                <con1:assign varName="errorCode">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780f</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPAuthorization/Status/successIndicator)</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                                <con1:assign varName="validationMessage">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780e</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:data($RSPAuthorization/Status/messages)
else('')</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                            </con1:responseTransform>
                                                                                        </con1:wsCallout>
                                                                                        <con1:assign varName="bodyReqLog">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780d</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                    <con2:param name="codigoAplicacion">
                                                                                                        <con2:path>1</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoServicio">
                                                                                                        <con2:path>$codigoServicio</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="contenido">
                                                                                                        <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="estado">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="codigoSistema">
                                                                                                        <con2:path>'2'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="nombreFlujoError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaHora">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="parametros">
                                                                                                        <con2:path>fn-bea:serialize($RSPPaymentCollectionAbanks)</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="uuid">
                                                                                                        <con2:path>$uuid</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="version">
                                                                                                        <con2:path>'1'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="operacionServicio">
                                                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoDestino">
                                                                                                        <con2:path>$destinationBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="endpoint">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="bancoOrigen">
                                                                                                        <con2:path>$sourceBank</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="fechaTX">
                                                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="usuario">
                                                                                                        <con2:path>$user</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="descripcionError">
                                                                                                        <con2:path>''</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="tipoMensaje">
                                                                                                        <con2:path>'Response'</con2:path>
                                                                                                    </con2:param>
                                                                                                    <con2:param name="metodo">
                                                                                                        <con2:path>'POST'</con2:path>
                                                                                                    </con2:param>
                                                                                                </con2:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780c</con2:id>
                                                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                            <con1:outboundTransform>
                                                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780b</con3:id>
                                                                                                    <con2:expr>
                                                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                    </con2:expr>
                                                                                                </con2:replace>
                                                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.4c6e4f63.0.18a1df30552.N780a</con3:id>
                                                                                                    <con2:mode>request</con2:mode>
                                                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                </con2:routing-options>
                                                                                            </con1:outboundTransform>
                                                                                        </con1:route>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default/>
                                                                            </con1:ifThenElse>
                                                                            <con1:assign varName="validationMessage">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cf1</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:upper-case($errorCode) = "SUCCESS") then (
	""
) else (
	fn:concat("ERROR AUTORIZANDO: ", fn:string-join($validationMessage, "."))
)</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cea</con2:id>
                                                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7ce9">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="manejaConceptos">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ce6</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'N'</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:ifThenElse>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cdc</con2:id>
                                                                                            <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7cdb">
                                                                                                <con1:condition>
                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($manejaConceptos) = "S"</con2:xqueryText>
                                                                                                </con1:condition>
                                                                                                <con1:actions>
                                                                                                    <con1:assign varName="idTransaccion">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cd8</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAuthorization/Status/transactionId/text())</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cd5</con3:id>
                                                                                                        <con2:service ref="CoreBankingHN/ProviderServices/BusinessServices/CollectionConceptDistribution/CollectionConceptDistribution" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                        <con2:operation>distribuirConceptosRecaudos</con2:operation>
                                                                                                        <con2:outboundTransform>
                                                                                                            <con1:replace contents-only="true" varName="body">
                                                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cd2</con3:id>
                                                                                                                <con1:expr>
                                                                                                                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                                                                        <con3:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/collectionConceptDistributionIn"/>
                                                                                                                        <con3:param name="paymentCollectionRequest">
                                                                                                                            <con3:path>$bodyInput</con3:path>
                                                                                                                        </con3:param>
                                                                                                                        <con3:param name="serviceResponse">
                                                                                                                            <con3:path>$RSPRouterConventions</con3:path>
                                                                                                                        </con3:param>
                                                                                                                        <con3:param name="getCoreParametersResponse">
                                                                                                                            <con3:path>$RSPGetCoreParameters</con3:path>
                                                                                                                        </con3:param>
                                                                                                                        <con3:param name="transactionId">
                                                                                                                            <con3:path>fn:string($idTransaccion)</con3:path>
                                                                                                                        </con3:param>
                                                                                                                    </con3:xqueryTransform>
                                                                                                                </con1:expr>
                                                                                                            </con1:replace>
                                                                                                        </con2:outboundTransform>
                                                                                                    </con2:route>
                                                                                                </con1:actions>
                                                                                            </con1:case>
                                                                                            <con1:default/>
                                                                                        </con1:ifThenElse>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default>
                                                                                    <con1:assign varName="validationMessage">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ce3</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("ERROR AUTORIZANDO: ", fn:string-join($validationMessage, "."))</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                </con1:default>
                                                                            </con1:ifThenElse>
                                                                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ccf</con2:id>
                                                                            </con2:skip>
                                                                        </con1:actions>
                                                                    </con1:case>
                                                                    <con1:default>
                                                                        <con1:assign varName="validationMessage">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7d4b</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("ERROR ENRUTADOR: ", fn:string($responseData/errorMessage/text()))</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:default>
                                                                </con1:ifThenElse>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default>
                                                            <con1:assign varName="validationMessage">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N781c</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAssembleMessage/*:MENSAJE_RESPUESTA/text())</con2:xqueryText>
                                                                </con1:expr>
                                                            </con1:assign>
                                                        </con1:default>
                                                    </con1:ifThenElse>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e73</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cc6</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7cc5">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSPTELLERType) > 0</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQEliminate">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cbc</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/eliminatePaymenTCollectionRefTTIn"/>
                                                        <con2:param name="password">
                                                            <con2:path>$password</con2:path>
                                                        </con2:param>
                                                        <con2:param name="status">
                                                            <con2:path>$RSP/Status</con2:path>
                                                        </con2:param>
                                                        <con2:param name="username">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cb5</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQEliminate)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQEliminate)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c76</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c75</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c74</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cc2</con2:id>
                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>EliminacionpagorecaudorefTT</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQEliminate</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPEliminate</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform/>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c59</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPEliminate)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPEliminate)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c66</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c65</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c64</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="REQEliminate">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cb9</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/eliminatePaymentCollectionRefFTIn"/>
                                                    <con2:param name="password">
                                                        <con2:path>$password</con2:path>
                                                    </con2:param>
                                                    <con2:param name="status">
                                                        <con2:path>$RSP/Status</con2:path>
                                                    </con2:param>
                                                    <con2:param name="username">
                                                        <con2:path>$username</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="bodyReqLog">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cb3</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                    <con2:param name="codigoAplicacion">
                                                        <con2:path>1</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoServicio">
                                                        <con2:path>$codigoServicio</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="contenido">
                                                        <con2:path>fn-bea:serialize($REQEliminate)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="estado">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoSistema">
                                                        <con2:path>'2'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="nombreFlujoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaHora">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="parametros">
                                                        <con2:path>fn-bea:serialize($REQEliminate)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="uuid">
                                                        <con2:path>$uuid</con2:path>
                                                    </con2:param>
                                                    <con2:param name="version">
                                                        <con2:path>'1'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="operacionServicio">
                                                        <con2:path>'paymentCollection'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoDestino">
                                                        <con2:path>$destinationBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="endpoint">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoOrigen">
                                                        <con2:path>$sourceBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaTX">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="usuario">
                                                        <con2:path>$user</con2:path>
                                                    </con2:param>
                                                    <con2:param name="descripcionError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="tipoMensaje">
                                                        <con2:path>'Request'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="metodo">
                                                        <con2:path>'POST'</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c6e</con2:id>
                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                            <con1:outboundTransform>
                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c6d</con3:id>
                                                    <con2:expr>
                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c6c</con3:id>
                                                    <con2:mode>request</con2:mode>
                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                </con2:routing-options>
                                            </con1:outboundTransform>
                                        </con1:route>
                                        <con1:wsCallout>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7cbf</con2:id>
                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>EliminacionpagorecaudorefFT</con1:operation>
                                            <con1:request>
                                                <con1:body wrapped="false">REQEliminate</con1:body>
                                                <con1:header/>
                                            </con1:request>
                                            <con1:response>
                                                <con1:body wrapped="false">RSPEliminate</con1:body>
                                                <con1:header/>
                                            </con1:response>
                                            <con1:requestTransform/>
                                            <con1:responseTransform/>
                                        </con1:wsCallout>
                                        <con1:assign varName="bodyReqLog">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c57</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                    <con2:param name="codigoAplicacion">
                                                        <con2:path>1</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoServicio">
                                                        <con2:path>$codigoServicio</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="contenido">
                                                        <con2:path>fn-bea:serialize($RSPEliminatePaymentCollectionRefFT)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="estado">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="codigoSistema">
                                                        <con2:path>'2'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="nombreFlujoError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaHora">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="parametros">
                                                        <con2:path>fn-bea:serialize($RSPEliminatePaymentCollectionRefFT)</con2:path>
                                                    </con2:param>
                                                    <con2:param name="uuid">
                                                        <con2:path>$uuid</con2:path>
                                                    </con2:param>
                                                    <con2:param name="version">
                                                        <con2:path>'1'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="operacionServicio">
                                                        <con2:path>'paymentCollection'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoDestino">
                                                        <con2:path>$destinationBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="endpoint">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="bancoOrigen">
                                                        <con2:path>$sourceBank</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fechaTX">
                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                    </con2:param>
                                                    <con2:param name="usuario">
                                                        <con2:path>$user</con2:path>
                                                    </con2:param>
                                                    <con2:param name="descripcionError">
                                                        <con2:path>''</con2:path>
                                                    </con2:param>
                                                    <con2:param name="tipoMensaje">
                                                        <con2:path>'Response'</con2:path>
                                                    </con2:param>
                                                    <con2:param name="metodo">
                                                        <con2:path>'POST'</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c5e</con2:id>
                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                            <con1:outboundTransform>
                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c5d</con3:id>
                                                    <con2:expr>
                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                    </con2:expr>
                                                </con2:replace>
                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c5c</con3:id>
                                                    <con2:mode>request</con2:mode>
                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                </con2:routing-options>
                                            </con1:outboundTransform>
                                        </con1:route>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:assign varName="validationMessage">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c54</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (fn:upper-case($RSPEliminate/Status/successIndicator) = "SUCCESS") then (
	$validationMessage
) else (
	fn:concat($validationMessage, ". ERROR ELIMINANDO TRX: ", fn:string-join($RSPEliminate/Status/messages, "."))
)</con2:xqueryText>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7bbc">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "MOBILE_RECHARGE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75b8</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N75b7">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="isValidRequest">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7579</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/purchaseRechargeValidateRequiredIn"/>
                                                        <con2:param name="paymentCollectionRequest">
                                                            <con2:path>$bodyInput</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7572</con2:id>
                                                <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7571">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$isValidRequest = "true"</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:assign varName="REQPurchaseRecharge">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75c2</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/purchaseRechargeIn"/>
                                                                    <con2:param name="paymentCollectionRequest">
                                                                        <con2:path>$bodyInput</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="password">
                                                                        <con2:path>$password</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="username">
                                                                        <con2:path>$username</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75b3</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($REQPurchaseRecharge)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($REQPurchaseRecharge)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Request'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75aa</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75a9</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N75a8</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                        <con1:wsCallout>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7594</con2:id>
                                                            <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/Recharges/Recharges" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>Compraderecargacondbcta</con1:operation>
                                                            <con1:request>
                                                                <con1:body wrapped="false">REQPurchaseRecharge</con1:body>
                                                                <con1:header/>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body wrapped="false">RSP</con1:body>
                                                                <con1:header/>
                                                            </con1:response>
                                                            <con1:requestTransform/>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="errorCode">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ffe</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSP/Status/successIndicator/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ffb</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then(
fn:string($RSP/Status/messages/text()))
else( "" )</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ff8</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($RSP)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Response'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7584</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7583</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N7582</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N755f</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"NOT YET IMPLEMENTED"</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N755c</con2:id>
                                                    </con2:skip>
                                                </con1:default>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N757f</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"NOT YET IMPLEMENTED"</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N757c</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N7bba">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$type = "MOBILE_PACKAGE"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ff4</con2:id>
                                    <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7ff3">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$paymentMethod = "ACCT_DEBIT"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="phoneCarrierParam">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ff0</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0067",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank/text()),".",
			"PHONE.CARRIER", ".",
			data($bodyInput/pay:ContractId/text()))</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="REQGetParameters">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fed</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/XQ/GetParameterIn"/>
                                                        <con2:param name="ParametersName">
                                                            <con2:path>$phoneCarrierParam</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fca</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($REQGetParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($REQGetParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Request'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fc1</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fc0</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fbf</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:wsCallout>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fea</con2:id>
                                                <con1:service ref="CreditCardProcessor/ProviderServices/BusinessService/GetParameter/GetParameter_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>GetParameter</con1:operation>
                                                <con1:request>
                                                    <con1:body wrapped="false">REQGetParameters</con1:body>
                                                    <con1:header/>
                                                </con1:request>
                                                <con1:response>
                                                    <con1:body wrapped="false">RSPGetParameters</con1:body>
                                                    <con1:header/>
                                                </con1:response>
                                                <con1:requestTransform/>
                                                <con1:responseTransform>
                                                    <con1:assign varName="errorCode">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fe3</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetParameters/*:ERROR_CODE/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="validationMessage">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fe0</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetParameters/*:ERROR_MESSAGE/text())</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:assign varName="phoneCarrier">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fe7</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $phoneCarrier := fn:string($RSPGetParameters/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$phoneCarrierParam]/*:VALUE/text())
return
	if ($phoneCarrier != "") then (
		$phoneCarrier
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:ifThenElse>
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fd7</con2:id>
                                                        <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7fd6">
                                                            <con1:condition>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$phoneCarrier = "NO_RECORD"</con2:xqueryText>
                                                            </con1:condition>
                                                            <con1:actions>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fd3</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string("No se encontro parametrizacin de Operador Telefonico. ")</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:actions>
                                                        </con1:case>
                                                        <con1:default/>
                                                    </con1:ifThenElse>
                                                </con1:responseTransform>
                                            </con1:wsCallout>
                                            <con1:assign varName="bodyReqLog">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fbc</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                        <con2:param name="codigoAplicacion">
                                                            <con2:path>1</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoServicio">
                                                            <con2:path>$codigoServicio</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="contenido">
                                                            <con2:path>fn-bea:serialize($RSPGetParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="estado">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="codigoSistema">
                                                            <con2:path>'2'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="nombreFlujoError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaHora">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="parametros">
                                                            <con2:path>fn-bea:serialize($RSPGetParameters)</con2:path>
                                                        </con2:param>
                                                        <con2:param name="uuid">
                                                            <con2:path>$uuid</con2:path>
                                                        </con2:param>
                                                        <con2:param name="version">
                                                            <con2:path>'1'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="operacionServicio">
                                                            <con2:path>'paymentCollection'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoDestino">
                                                            <con2:path>$destinationBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="endpoint">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="bancoOrigen">
                                                            <con2:path>$sourceBank</con2:path>
                                                        </con2:param>
                                                        <con2:param name="fechaTX">
                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                        </con2:param>
                                                        <con2:param name="usuario">
                                                            <con2:path>$user</con2:path>
                                                        </con2:param>
                                                        <con2:param name="descripcionError">
                                                            <con2:path>''</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tipoMensaje">
                                                            <con2:path>'Response'</con2:path>
                                                        </con2:param>
                                                        <con2:param name="metodo">
                                                            <con2:path>'POST'</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fb3</con2:id>
                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                <con1:outboundTransform>
                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fb2</con3:id>
                                                        <con2:expr>
                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                        </con2:expr>
                                                    </con2:replace>
                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fb1</con3:id>
                                                        <con2:mode>request</con2:mode>
                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                    </con2:routing-options>
                                                </con1:outboundTransform>
                                            </con1:route>
                                            <con1:ifThenElse>
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7faa</con2:id>
                                                <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7fa9">
                                                    <con1:condition>
                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                                    </con1:condition>
                                                    <con1:actions>
                                                        <con1:assign varName="transIdFT">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fa0</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="operatorReference">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f9d</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="validationMessage">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f9b</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="extnwcodeParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f99</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"EXTNWCODE", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="typePParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f97</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"TYPE", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="msidnParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f95</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"MSISDN", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="extCodeParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f93</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"EXTCODE", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="phoneCarrierParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f91</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"PHONE.CARRIER", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="serviceAccountParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f8f</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"SERVICE.ACCOUNT", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="contractIdParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f8d</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"CONTRACT.ID", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="distCategoryParam">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f8b</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:concat("FICBCO0337",".",
			data($bodyInput/pay:GeneralInfo/com:SourceBank),".",
			"DIST.CATEGORY", ".",
			data($phoneCarrier))</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="REQGetParams">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f89</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CreditCardProcessor/RequestorServices/ProxyServices/v1.0/PaymentRecordCreditCard/XQ/GetParameterIn"/>
                                                                    <con2:param name="ParametersName">
                                                                        <con2:path>fn:concat($phoneCarrierParam, "||",
$serviceAccountParam, "||",
$contractIdParam, "||",
$typePParam, "||",
$extCodeParam, "||",
$msidnParam, "||",
$extnwcodeParam, "||",
$distCategoryParam)</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.4edc5a88.0.189b33fa515.N7ffd</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($REQGetParams)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($REQGetParams)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Request'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f42</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f41</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f40</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                        <con1:wsCallout>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f86</con2:id>
                                                            <con1:service ref="CreditCardProcessor/ProviderServices/BusinessService/GetParameter/GetParameter_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>GetParameter</con1:operation>
                                                            <con1:request>
                                                                <con1:body wrapped="false">REQGetParams</con1:body>
                                                                <con1:header/>
                                                            </con1:request>
                                                            <con1:response>
                                                                <con1:body wrapped="false">RSPGetParams</con1:body>
                                                                <con1:header/>
                                                            </con1:response>
                                                            <con1:requestTransform/>
                                                            <con1:responseTransform>
                                                                <con1:assign varName="errorCode">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f83</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetParams/*:ERROR_CODE/text())</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="validationMessage">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f7f</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="extnwcode">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f21</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $extnwcode := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$extnwcodeParam]/*:VALUE/text())
return
	if ($extnwcode != "") then (
		$extnwcode
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="typeP">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f32</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $type := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$typePParam]/*:VALUE/text())
return
	if ($type != "") then (
		$type
	) else (
		"MOBILE_PACKAGE"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="msidn">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f2f</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $msidn := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$msidnParam]/*:VALUE/text())
return
	if ($msidn != "") then (
		$msidn
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="extCode">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f2d</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $extCode := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$extCodeParam]/*:VALUE/text())
return
	if ($extCode != "") then (
		$extCode
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="phoneCarrier">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f2b</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $phoneCarrier := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$phoneCarrierParam]/*:VALUE/text())
return
	if ($phoneCarrier != "") then (
		$phoneCarrier
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="serviceAccount">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f29</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $serviceAccount := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$serviceAccountParam]/*:VALUE/text())
return
	if ($serviceAccount != "") then (
		$serviceAccount
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="contractId">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f27</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $contractId := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$contractIdParam]/*:VALUE/text())
return
	if ($contractId != "") then (
		$contractId
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:assign varName="distCategory">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f25</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">let $distCategory := fn:string($RSPGetParams/*:CONFIGURACIONES/*:CONFIGURACIONES_ITEM[*:NAME=$distCategoryParam]/*:VALUE/text())
return
	if ($distCategory != "") then (
		$distCategory
	) else (
		"NO_RECORD"
	)</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                            </con1:responseTransform>
                                                        </con1:wsCallout>
                                                        <con1:assign varName="bodyReqLog">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f35</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                    <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                    <con2:param name="codigoAplicacion">
                                                                        <con2:path>1</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoServicio">
                                                                        <con2:path>$codigoServicio</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="contenido">
                                                                        <con2:path>fn-bea:serialize($RSPGetParams)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="estado">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="codigoSistema">
                                                                        <con2:path>'2'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="nombreFlujoError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaHora">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="parametros">
                                                                        <con2:path>fn-bea:serialize($RSPGetParams)</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="uuid">
                                                                        <con2:path>$uuid</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="version">
                                                                        <con2:path>'1'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="operacionServicio">
                                                                        <con2:path>'paymentCollection'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoDestino">
                                                                        <con2:path>$destinationBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="endpoint">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="bancoOrigen">
                                                                        <con2:path>$sourceBank</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="fechaTX">
                                                                        <con2:path>fn:current-dateTime()</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="usuario">
                                                                        <con2:path>$user</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="descripcionError">
                                                                        <con2:path>''</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="tipoMensaje">
                                                                        <con2:path>'Request'</con2:path>
                                                                    </con2:param>
                                                                    <con2:param name="metodo">
                                                                        <con2:path>'POST'</con2:path>
                                                                    </con2:param>
                                                                </con2:xqueryTransform>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f3a</con2:id>
                                                            <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                            <con1:operation>SetLogInfoService_BS</con1:operation>
                                                            <con1:outboundTransform>
                                                                <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f39</con3:id>
                                                                    <con2:expr>
                                                                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                    </con2:expr>
                                                                </con2:replace>
                                                                <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f38</con3:id>
                                                                    <con2:mode>request</con2:mode>
                                                                    <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                </con2:routing-options>
                                                            </con1:outboundTransform>
                                                        </con1:route>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f19</con2:id>
                                                            <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7f18">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$phoneCarrier = "NO_RECORD" or $serviceAccount = "NO_RECORD"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="validationMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f15</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetParams/*:ERROR_MESSAGE/text())</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default/>
                                                        </con1:ifThenElse>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f0b</con2:id>
                                                            <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7f0a">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="REQMobilePackages">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f07</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionPurchasePackageIn"/>
                                                                                <con2:param name="paymentCollectionRequest.">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="password">
                                                                                    <con2:path>$password</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="contractId">
                                                                                    <con2:path>$contractId</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="username">
                                                                                    <con2:path>$username</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="bodyReqLog">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e99</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                <con2:param name="codigoAplicacion">
                                                                                    <con2:path>1</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoServicio">
                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="contenido">
                                                                                    <con2:path>fn-bea:serialize($REQMobilePackages)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="estado">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoSistema">
                                                                                    <con2:path>'2'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="nombreFlujoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaHora">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="parametros">
                                                                                    <con2:path>fn-bea:serialize($REQMobilePackages)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="version">
                                                                                    <con2:path>'1'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="operacionServicio">
                                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoDestino">
                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="endpoint">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoOrigen">
                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaTX">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="usuario">
                                                                                    <con2:path>$user</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="descripcionError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="tipoMensaje">
                                                                                    <con2:path>'Request'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="metodo">
                                                                                    <con2:path>'POST'</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ea9</con2:id>
                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                        <con1:outboundTransform>
                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ea8</con3:id>
                                                                                <con2:expr>
                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                </con2:expr>
                                                                            </con2:replace>
                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ea7</con3:id>
                                                                                <con2:mode>request</con2:mode>
                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                            </con2:routing-options>
                                                                        </con1:outboundTransform>
                                                                    </con1:route>
                                                                    <con1:wsCallout>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f04</con2:id>
                                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/MobilePackages/MobilePackages" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>PagoDePaquetesMovilesFT</con1:operation>
                                                                        <con1:request>
                                                                            <con1:body wrapped="false">REQMobilePackages</con1:body>
                                                                            <con1:header/>
                                                                        </con1:request>
                                                                        <con1:response>
                                                                            <con1:body wrapped="false">RSPMobilePackages</con1:body>
                                                                            <con1:header/>
                                                                        </con1:response>
                                                                        <con1:requestTransform/>
                                                                        <con1:responseTransform>
                                                                            <con1:assign varName="errorCode">
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7f00</con2:id>
                                                                                <con1:expr>
                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPMobilePackages/Status/successIndicator/text())</con2:xqueryText>
                                                                                </con1:expr>
                                                                            </con1:assign>
                                                                            <con1:ifThenElse>
                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ef9</con2:id>
                                                                                <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7ef8">
                                                                                    <con1:condition>
                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) != "SUCCESS"</con2:xqueryText>
                                                                                    </con1:condition>
                                                                                    <con1:actions>
                                                                                        <con1:assign varName="validationMessage">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ef5</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">for $d in $RSPMobilePackages/Status/messages
let $e := fn:concat($e, "|", $d)
return $e</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:assign varName="transIdFT">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7eee</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                    </con1:actions>
                                                                                </con1:case>
                                                                                <con1:default>
                                                                                    <con1:assign varName="transIdFT">
                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ef1</con2:id>
                                                                                        <con1:expr>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPMobilePackages/Status/transactionId/text())</con2:xqueryText>
                                                                                        </con1:expr>
                                                                                    </con1:assign>
                                                                                </con1:default>
                                                                            </con1:ifThenElse>
                                                                        </con1:responseTransform>
                                                                    </con1:wsCallout>
                                                                    <con1:assign varName="bodyReqLog">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e9c</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                <con2:param name="codigoAplicacion">
                                                                                    <con2:path>1</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoServicio">
                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="contenido">
                                                                                    <con2:path>fn-bea:serialize($RSPMobilePackages)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="estado">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="codigoSistema">
                                                                                    <con2:path>'2'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="nombreFlujoError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaHora">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="parametros">
                                                                                    <con2:path>fn-bea:serialize($RSPMobilePackages)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="version">
                                                                                    <con2:path>'1'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="operacionServicio">
                                                                                    <con2:path>'paymentCollection'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoDestino">
                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="endpoint">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="bancoOrigen">
                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fechaTX">
                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="usuario">
                                                                                    <con2:path>$user</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="descripcionError">
                                                                                    <con2:path>''</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="tipoMensaje">
                                                                                    <con2:path>'Request'</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="metodo">
                                                                                    <con2:path>'POST'</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ea1</con2:id>
                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                        <con1:outboundTransform>
                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ea0</con3:id>
                                                                                <con2:expr>
                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                </con2:expr>
                                                                            </con2:replace>
                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e9f</con3:id>
                                                                                <con2:mode>request</con2:mode>
                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                            </con2:routing-options>
                                                                        </con1:outboundTransform>
                                                                    </con1:route>
                                                                    <con1:ifThenElse>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e92</con2:id>
                                                                        <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7e91">
                                                                            <con1:condition>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = ""</con2:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:ifThenElse>
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e84</con2:id>
                                                                                    <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7e83">
                                                                                        <con1:condition>
                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$phoneCarrier = 'PHOCARRIER01'</con2:xqueryText>
                                                                                        </con1:condition>
                                                                                        <con1:actions>
                                                                                            <con1:assign varName="REQClaroMobilePackage">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e80</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/purchasePackageClaroMobileIn"/>
                                                                                                        <con2:param name="paymentCollectionRequest">
                                                                                                            <con2:path>$bodyInput</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="password">
                                                                                                            <con2:path>$password</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="transId">
                                                                                                            <con2:path>$transIdFT</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="distCategory">
                                                                                                            <con2:path>$distCategory</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="username">
                                                                                                            <con2:path>$username</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:assign varName="bodyReqLog">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dd9</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                        <con2:param name="codigoAplicacion">
                                                                                                            <con2:path>1</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoServicio">
                                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="contenido">
                                                                                                            <con2:path>fn-bea:serialize($REQClaroMobilePackage)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="estado">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoSistema">
                                                                                                            <con2:path>'2'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="nombreFlujoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaHora">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="parametros">
                                                                                                            <con2:path>fn-bea:serialize($REQClaroMobilePackage)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="uuid">
                                                                                                            <con2:path>$uuid</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="version">
                                                                                                            <con2:path>'1'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="operacionServicio">
                                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoDestino">
                                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="endpoint">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoOrigen">
                                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaTX">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="usuario">
                                                                                                            <con2:path>$user</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="descripcionError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="tipoMensaje">
                                                                                                            <con2:path>'Request'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="metodo">
                                                                                                            <con2:path>'POST'</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7de6</con2:id>
                                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                <con1:outboundTransform>
                                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7de5</con3:id>
                                                                                                        <con2:expr>
                                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                        </con2:expr>
                                                                                                    </con2:replace>
                                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7de4</con3:id>
                                                                                                        <con2:mode>request</con2:mode>
                                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                    </con2:routing-options>
                                                                                                </con1:outboundTransform>
                                                                                            </con1:route>
                                                                                            <con1:wsCallout>
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e7a</con2:id>
                                                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/ClaroMobilePackages/ClaroMobilePackages" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>buyPack</con1:operation>
                                                                                                <con1:request>
                                                                                                    <con1:body wrapped="false">REQClaroMobilePackage</con1:body>
                                                                                                    <con1:header/>
                                                                                                </con1:request>
                                                                                                <con1:response>
                                                                                                    <con1:body wrapped="false">RSPClaroMobilePackage</con1:body>
                                                                                                    <con1:header/>
                                                                                                </con1:response>
                                                                                                <con1:requestTransform/>
                                                                                                <con1:responseTransform>
                                                                                                    <con1:assign varName="errorCode">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e38</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($RSPClaroMobilePackage/result/responseCode)</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:assign varName="validationMessage">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e35</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != '0') then "Error"
else('')</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:ifThenElse>
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e2e</con2:id>
                                                                                                        <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7e2d">
                                                                                                            <con1:condition>
                                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode != "0"</con2:xqueryText>
                                                                                                            </con1:condition>
                                                                                                            <con1:actions>
                                                                                                                <con1:assign varName="validationMessage">
                                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e2a</con2:id>
                                                                                                                    <con1:expr>
                                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($RSPClaroMobilePackage/result/responseCode/text())</con2:xqueryText>
                                                                                                                    </con1:expr>
                                                                                                                </con1:assign>
                                                                                                            </con1:actions>
                                                                                                        </con1:case>
                                                                                                        <con1:default>
                                                                                                            <con1:assign varName="operatorReference">
                                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e27</con2:id>
                                                                                                                <con1:expr>
                                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">data($RSPClaroMobilePackage/result/idTrans/text())</con2:xqueryText>
                                                                                                                </con1:expr>
                                                                                                            </con1:assign>
                                                                                                            <con1:assign varName="errorCode">
                                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.4edc5a88.0.189b33fa515.N7ffa</con2:id>
                                                                                                                <con1:expr>
                                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">'Success'</con2:xqueryText>
                                                                                                                </con1:expr>
                                                                                                            </con1:assign>
                                                                                                        </con1:default>
                                                                                                    </con1:ifThenElse>
                                                                                                </con1:responseTransform>
                                                                                            </con1:wsCallout>
                                                                                            <con1:assign varName="bodyReqLog">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dd7</con2:id>
                                                                                                <con1:expr>
                                                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                        <con2:param name="codigoAplicacion">
                                                                                                            <con2:path>1</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoServicio">
                                                                                                            <con2:path>$codigoServicio</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="contenido">
                                                                                                            <con2:path>fn-bea:serialize($RSPClaroMobilePackage)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="estado">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="codigoSistema">
                                                                                                            <con2:path>'2'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="nombreFlujoError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaHora">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="parametros">
                                                                                                            <con2:path>fn-bea:serialize($RSPClaroMobilePackage)</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="uuid">
                                                                                                            <con2:path>$uuid</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="version">
                                                                                                            <con2:path>'1'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="operacionServicio">
                                                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoDestino">
                                                                                                            <con2:path>$destinationBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="endpoint">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="bancoOrigen">
                                                                                                            <con2:path>$sourceBank</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="fechaTX">
                                                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="usuario">
                                                                                                            <con2:path>$user</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="descripcionError">
                                                                                                            <con2:path>''</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="tipoMensaje">
                                                                                                            <con2:path>'Request'</con2:path>
                                                                                                        </con2:param>
                                                                                                        <con2:param name="metodo">
                                                                                                            <con2:path>'POST'</con2:path>
                                                                                                        </con2:param>
                                                                                                    </con2:xqueryTransform>
                                                                                                </con1:expr>
                                                                                            </con1:assign>
                                                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dde</con2:id>
                                                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                <con1:outboundTransform>
                                                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ddd</con3:id>
                                                                                                        <con2:expr>
                                                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                        </con2:expr>
                                                                                                    </con2:replace>
                                                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7ddc</con3:id>
                                                                                                        <con2:mode>request</con2:mode>
                                                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                    </con2:routing-options>
                                                                                                </con1:outboundTransform>
                                                                                            </con1:route>
                                                                                        </con1:actions>
                                                                                    </con1:case>
                                                                                    <con1:default>
                                                                                        <con1:ifThenElse>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7fee</con2:id>
                                                                                            <con1:case id="_BranchId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7fed">
                                                                                                <con1:condition>
                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$phoneCarrier = 'PHOCARRIER02'</con2:xqueryText>
                                                                                                </con1:condition>
                                                                                                <con1:actions>
                                                                                                    <con1:assign varName="REQpaqueteTigo">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7ffa</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/CompraPaquetesTigoIn"/>
                                                                                                                <con2:param name="Type">
                                                                                                                    <con2:path>$typeP</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="MSISDN">
                                                                                                                    <con2:path>$msidn</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="EXTCODE">
                                                                                                                    <con2:path>$extCode</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="PaymentCollectionRequest">
                                                                                                                    <con2:path>$body/pay:paymentCollectionRequest</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="TransactionId">
                                                                                                                    <con2:path>$transIdFT</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="EXTNWCODE">
                                                                                                                    <con2:path>$extnwcode</con2:path>
                                                                                                                </con2:param>
                                                                                                            </con2:xqueryTransform>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:assign varName="bodyReqLog">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7ff7</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                                <con2:param name="codigoAplicacion">
                                                                                                                    <con2:path>1</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoServicio">
                                                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="contenido">
                                                                                                                    <con2:path>fn-bea:serialize($REQpaqueteTigo)</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="estado">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoSistema">
                                                                                                                    <con2:path>'2'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="nombreFlujoError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="fechaHora">
                                                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="parametros">
                                                                                                                    <con2:path>fn-bea:serialize($REQpaqueteTigo)</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="uuid">
                                                                                                                    <con2:path>$uuid</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="version">
                                                                                                                    <con2:path>'1'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="operacionServicio">
                                                                                                                    <con2:path>'PaquetesTigo'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="bancoDestino">
                                                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="endpoint">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="bancoOrigen">
                                                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="fechaTX">
                                                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="usuario">
                                                                                                                    <con2:path>$user</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="descripcionError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="tipoMensaje">
                                                                                                                    <con2:path>'Request'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="metodo">
                                                                                                                    <con2:path>'POST'</con2:path>
                                                                                                                </con2:param>
                                                                                                            </con2:xqueryTransform>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f8c</con2:id>
                                                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                        <con1:outboundTransform>
                                                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f8b</con3:id>
                                                                                                                <con2:expr>
                                                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                                </con2:expr>
                                                                                                            </con2:replace>
                                                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f8a</con3:id>
                                                                                                                <con2:mode>request</con2:mode>
                                                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                            </con2:routing-options>
                                                                                                        </con1:outboundTransform>
                                                                                                    </con1:route>
                                                                                                    <con1:wsCallout>
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7ffd</con2:id>
                                                                                                        <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/PaquetesTigo/paquetesTigo" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                        <con1:operation>paqueteTigo</con1:operation>
                                                                                                        <con1:request>
                                                                                                            <con1:body wrapped="false">REQpaqueteTigo</con1:body>
                                                                                                            <con1:header/>
                                                                                                        </con1:request>
                                                                                                        <con1:response>
                                                                                                            <con1:body wrapped="false">RSPpaqueteTigo</con1:body>
                                                                                                            <con1:header/>
                                                                                                        </con1:response>
                                                                                                        <con1:requestTransform/>
                                                                                                        <con1:responseTransform>
                                                                                                            <con1:assign varName="errorCode">
                                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7ee6</con2:id>
                                                                                                                <con1:expr>
                                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPpaqueteTigo/COMMAND/TXNSTATUS)</con2:xqueryText>
                                                                                                                </con1:expr>
                                                                                                            </con1:assign>
                                                                                                            <con1:ifThenElse>
                                                                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff48.N8f43f7a.0.18f07700289.N7f05</con2:id>
                                                                                                                <con1:case id="_BranchId-N3f57ff48.N8f43f7a.0.18f07700289.N7f04">
                                                                                                                    <con1:condition>
                                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = '200'</con2:xqueryText>
                                                                                                                    </con1:condition>
                                                                                                                    <con1:actions>
                                                                                                                        <con1:assign varName="errorCode">
                                                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff48.N8f43f7a.0.18f07700289.N7eff</con2:id>
                                                                                                                            <con1:expr>
                                                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"Success"</con2:xqueryText>
                                                                                                                            </con1:expr>
                                                                                                                        </con1:assign>
                                                                                                                        <con1:assign varName="operatorReference">
                                                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7e9d</con2:id>
                                                                                                                            <con1:expr>
                                                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPpaqueteTigo/COMMAND/TXNID/text())</con2:xqueryText>
                                                                                                                            </con1:expr>
                                                                                                                        </con1:assign>
                                                                                                                    </con1:actions>
                                                                                                                </con1:case>
                                                                                                                <con1:default>
                                                                                                                    <con1:assign varName="validationMessage">
                                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7ee3</con2:id>
                                                                                                                        <con1:expr>
                                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if (exists($RSPpaqueteTigo/COMMAND/MESSAGE) = true())
then xs:string($RSPpaqueteTigo/COMMAND/MESSAGE/text())
else data("Tigo no envio mensaje de error")</con2:xqueryText>
                                                                                                                        </con1:expr>
                                                                                                                    </con1:assign>
                                                                                                                </con1:default>
                                                                                                            </con1:ifThenElse>
                                                                                                        </con1:responseTransform>
                                                                                                    </con1:wsCallout>
                                                                                                    <con1:assign varName="bodyReqLog">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f56</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                                                <con2:param name="codigoAplicacion">
                                                                                                                    <con2:path>1</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoServicio">
                                                                                                                    <con2:path>$codigoServicio</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="contenido">
                                                                                                                    <con2:path>fn-bea:serialize($RSPpaqueteTigo)</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="estado">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="codigoSistema">
                                                                                                                    <con2:path>'2'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="nombreFlujoError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="fechaHora">
                                                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="parametros">
                                                                                                                    <con2:path>fn-bea:serialize($RSPpaqueteTigo)</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="uuid">
                                                                                                                    <con2:path>$uuid</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="version">
                                                                                                                    <con2:path>'1'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="operacionServicio">
                                                                                                                    <con2:path>'PaquetesTigo'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="bancoDestino">
                                                                                                                    <con2:path>$destinationBank</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="endpoint">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="bancoOrigen">
                                                                                                                    <con2:path>$sourceBank</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="fechaTX">
                                                                                                                    <con2:path>fn:current-dateTime()</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="usuario">
                                                                                                                    <con2:path>$user</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="descripcionError">
                                                                                                                    <con2:path>''</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="tipoMensaje">
                                                                                                                    <con2:path>'Response'</con2:path>
                                                                                                                </con2:param>
                                                                                                                <con2:param name="metodo">
                                                                                                                    <con2:path>'POST'</con2:path>
                                                                                                                </con2:param>
                                                                                                            </con2:xqueryTransform>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f1c</con2:id>
                                                                                                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                                        <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                                        <con1:outboundTransform>
                                                                                                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f1b</con3:id>
                                                                                                                <con2:expr>
                                                                                                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                                                </con2:expr>
                                                                                                            </con2:replace>
                                                                                                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff40.581254ae.0.18eecedd734.N7f1a</con3:id>
                                                                                                                <con2:mode>request</con2:mode>
                                                                                                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                                            </con2:routing-options>
                                                                                                        </con1:outboundTransform>
                                                                                                    </con1:route>
                                                                                                </con1:actions>
                                                                                            </con1:case>
                                                                                            <con1:default>
                                                                                                <con1:assign varName="validationMessage">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7fea</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string("Cdigo de Operador Telefonico no permitido")</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con2:id>_ActionId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7fe7</con2:id>
                                                                                                </con2:skip>
                                                                                            </con1:default>
                                                                                        </con1:ifThenElse>
                                                                                    </con1:default>
                                                                                </con1:ifThenElse>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default/>
                                                                    </con1:ifThenElse>
                                                                    <con1:ifThenElse>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dd0</con2:id>
                                                                        <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7dcf">
                                                                            <con1:condition>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage = "" and $transIdFT != "" and $operatorReference != ""</con2:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dcc</con3:id>
                                                                                    <con2:service ref="CoreBankingHN/ProviderServices/BusinessServices/MobilePackages/MobilePackages" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                    <con2:operation>RegistraReferenciaPaqueteMovil</con2:operation>
                                                                                    <con2:outboundTransform>
                                                                                        <con1:replace varName="body" contents-only="true">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dc9</con3:id>
                                                                                            <con1:expr>
                                                                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                                                    <con3:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/purchaseMovilePckRecordRefT24In"/>
                                                                                                    <con3:param name="PhoneOperatorRef">
                                                                                                        <con3:path>$operatorReference</con3:path>
                                                                                                    </con3:param>
                                                                                                    <con3:param name="password">
                                                                                                        <con3:path>$password</con3:path>
                                                                                                    </con3:param>
                                                                                                    <con3:param name="uuid">
                                                                                                        <con3:path>$uuid</con3:path>
                                                                                                    </con3:param>
                                                                                                    <con3:param name="T24Ref">
                                                                                                        <con3:path>$transIdFT</con3:path>
                                                                                                    </con3:param>
                                                                                                    <con3:param name="username">
                                                                                                        <con3:path>$username</con3:path>
                                                                                                    </con3:param>
                                                                                                </con3:xqueryTransform>
                                                                                            </con1:expr>
                                                                                        </con1:replace>
                                                                                    </con2:outboundTransform>
                                                                                </con2:route>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default/>
                                                                    </con1:ifThenElse>
                                                                    <con1:ifThenElse>
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dbf</con2:id>
                                                                        <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7dbe">
                                                                            <con1:condition>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != "" and $transIdFT != ""</con2:xqueryText>
                                                                            </con1:condition>
                                                                            <con1:actions>
                                                                                <con1:assign varName="REQMobilePackageRever">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7dbb</con2:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/reversionMovilePackage"/>
                                                                                            <con2:param name="password">
                                                                                                <con2:path>$password</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="purchaseMovilePackageResponse">
                                                                                                <con2:path>$RSPMobilePackages</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="username">
                                                                                                <con2:path>$username</con2:path>
                                                                                            </con2:param>
                                                                                        </con2:xqueryTransform>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                                <con1:assign varName="bodyReqLog">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d70</con2:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                            <con2:param name="codigoAplicacion">
                                                                                                <con2:path>1</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoServicio">
                                                                                                <con2:path>$codigoServicio</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="contenido">
                                                                                                <con2:path>fn-bea:serialize($REQMobilePackageRever)</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="estado">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoSistema">
                                                                                                <con2:path>'2'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="nombreFlujoError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="fechaHora">
                                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="parametros">
                                                                                                <con2:path>fn-bea:serialize($REQMobilePackageRever)</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="uuid">
                                                                                                <con2:path>$uuid</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="version">
                                                                                                <con2:path>'1'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="operacionServicio">
                                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="bancoDestino">
                                                                                                <con2:path>$destinationBank</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="endpoint">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="bancoOrigen">
                                                                                                <con2:path>$sourceBank</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="fechaTX">
                                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="usuario">
                                                                                                <con2:path>$user</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="descripcionError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="tipoMensaje">
                                                                                                <con2:path>'Request'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="metodo">
                                                                                                <con2:path>'POST'</con2:path>
                                                                                            </con2:param>
                                                                                        </con2:xqueryTransform>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d7d</con2:id>
                                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                    <con1:outboundTransform>
                                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d7c</con3:id>
                                                                                            <con2:expr>
                                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                            </con2:expr>
                                                                                        </con2:replace>
                                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d7b</con3:id>
                                                                                            <con2:mode>request</con2:mode>
                                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                        </con2:routing-options>
                                                                                    </con1:outboundTransform>
                                                                                </con1:route>
                                                                                <con1:wsCallout>
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7db7</con2:id>
                                                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/MobilePackages/MobilePackages" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                    <con1:operation>ReversionDePaquetesMovilesFT</con1:operation>
                                                                                    <con1:request>
                                                                                        <con1:body wrapped="false">REQMobilePackageRever</con1:body>
                                                                                        <con1:header/>
                                                                                    </con1:request>
                                                                                    <con1:response>
                                                                                        <con1:body wrapped="false">RSPMobilePackageRever</con1:body>
                                                                                        <con1:header/>
                                                                                    </con1:response>
                                                                                    <con1:requestTransform/>
                                                                                    <con1:responseTransform>
                                                                                        <con1:assign varName="errorCodeRever">
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d6a</con2:id>
                                                                                            <con1:expr>
                                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPMobilePackageRever/Status/successIndicator/text())</con2:xqueryText>
                                                                                            </con1:expr>
                                                                                        </con1:assign>
                                                                                        <con1:ifThenElse>
                                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d63</con2:id>
                                                                                            <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7d62">
                                                                                                <con1:condition>
                                                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCodeRever) != "SUCCESS"</con2:xqueryText>
                                                                                                </con1:condition>
                                                                                                <con1:actions>
                                                                                                    <con1:assign varName="errorCode">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff49.56901051.0.18f3aa80ee6.N7fca</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPMobilePackageRever/Status/successIndicator/text())</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                    <con1:assign varName="validationMessage">
                                                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d5f</con2:id>
                                                                                                        <con1:expr>
                                                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">for $d in $RSPMobilePackageRever/Status/messages
let $e := fn:concat($e, "|", $d)
return $e</con2:xqueryText>
                                                                                                        </con1:expr>
                                                                                                    </con1:assign>
                                                                                                </con1:actions>
                                                                                            </con1:case>
                                                                                            <con1:default>
                                                                                                <con1:assign varName="validationMessageRever">
                                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d5c</con2:id>
                                                                                                    <con1:expr>
                                                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                                                                                    </con1:expr>
                                                                                                </con1:assign>
                                                                                            </con1:default>
                                                                                        </con1:ifThenElse>
                                                                                    </con1:responseTransform>
                                                                                </con1:wsCallout>
                                                                                <con1:assign varName="bodyReqLog">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d6d</con2:id>
                                                                                    <con1:expr>
                                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                                            <con2:param name="codigoAplicacion">
                                                                                                <con2:path>1</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoServicio">
                                                                                                <con2:path>$codigoServicio</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="contenido">
                                                                                                <con2:path>fn-bea:serialize($RSPMobilePackageRever)</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="estado">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="codigoSistema">
                                                                                                <con2:path>'2'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="nombreFlujoError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="fechaHora">
                                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="parametros">
                                                                                                <con2:path>fn-bea:serialize($RSPMobilePackageRever)</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="uuid">
                                                                                                <con2:path>$uuid</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="version">
                                                                                                <con2:path>'1'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="operacionServicio">
                                                                                                <con2:path>'paymentCollection'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="bancoDestino">
                                                                                                <con2:path>$destinationBank</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="endpoint">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="bancoOrigen">
                                                                                                <con2:path>$sourceBank</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="fechaTX">
                                                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="usuario">
                                                                                                <con2:path>$user</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="descripcionError">
                                                                                                <con2:path>''</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="tipoMensaje">
                                                                                                <con2:path>'Request'</con2:path>
                                                                                            </con2:param>
                                                                                            <con2:param name="metodo">
                                                                                                <con2:path>'POST'</con2:path>
                                                                                            </con2:param>
                                                                                        </con2:xqueryTransform>
                                                                                    </con1:expr>
                                                                                </con1:assign>
                                                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d75</con2:id>
                                                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                                    <con1:outboundTransform>
                                                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d74</con3:id>
                                                                                            <con2:expr>
                                                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                                            </con2:expr>
                                                                                        </con2:replace>
                                                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7d73</con3:id>
                                                                                            <con2:mode>request</con2:mode>
                                                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                                        </con2:routing-options>
                                                                                    </con1:outboundTransform>
                                                                                </con1:route>
                                                                            </con1:actions>
                                                                        </con1:case>
                                                                        <con1:default/>
                                                                    </con1:ifThenElse>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default/>
                                                        </con1:ifThenElse>
                                                    </con1:actions>
                                                </con1:case>
                                                <con1:default/>
                                            </con1:ifThenElse>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fd0</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"NOT YET IMPLEMENTED"</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:id>_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7fcd</con2:id>
                                        </con2:skip>
                                    </con1:default>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79c6</con2:id>
                            </con2:skip>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:pipeline type="response" name="response-a51ea04.3e8649bd.0.189474b8e2d.N7e8f">
            <con:stage id="_StageId-a51ea04.3e8649bd.0.189474b8e2d.N7e8d" name="getUser">
                <con:context>
                    <con1:userNsDecl prefix="t24" namespace="T24WebServicesImpl" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="PaymentCollection" path="$RSP" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:service>
                            <con1:reference ref="CoreBankingHN/ProviderServices/BusinessServices/PaymentCollection/PaymentCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        </con1:service>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3e8649bd.0.189474b8e2d.N74b8</con2:id>
                        <con1:case id="_BranchId-a51ea04.3e8649bd.0.189474b8e2d.N74b7">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator) = "Success" and $validationMessage = ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ff1</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7ff0">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSP/TELLERType) > 0</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:assign varName="REQGetUser">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fed</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                        <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionGetUserTellerIn"/>
                                                        <con2:param name="password">
                                                            <con2:path>$password</con2:path>
                                                        </con2:param>
                                                        <con2:param name="tellerType">
                                                            <con2:path>$RSP/TELLERType</con2:path>
                                                        </con2:param>
                                                        <con2:param name="username">
                                                            <con2:path>$username</con2:path>
                                                        </con2:param>
                                                    </con2:xqueryTransform>
                                                </con1:expr>
                                            </con1:assign>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                        <con1:assign varName="REQGetUser">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fea</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectiongetUserTransferIn"/>
                                                    <con2:param name="password">
                                                        <con2:path>$password</con2:path>
                                                    </con2:param>
                                                    <con2:param name="fundsTransferType">
                                                        <con2:path>$RSP/FUNDSTRANSFERType</con2:path>
                                                    </con2:param>
                                                    <con2:param name="username">
                                                        <con2:path>$username</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="cuentaTemp">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fe7</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSP/FUNDSTRANSFERType/DEBITACCTNO/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:default>
                                </con1:ifThenElse>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fe1</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQGetUser)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQGetUser)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fd8</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fd7</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fd6</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fd3</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/CoreBS/CoreBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>Consultadeusuariosdelsistema</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQGetUser</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPGetUser</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e65</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetUser/Status/successIndicator/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e62</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:string($RSPGetUser/Status/messages/text())
else('')</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="branchName">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fd0</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetUser/WSUSERType/gWSUSERDetailType/mWSUSERDetailType/BRANCHNAME/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fcc</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPGetUser)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPGetUser)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fc2</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fc1</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fc0</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7fcf" name="getAccount">
                <con:context/>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fb9</con2:id>
                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7fb8">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($cuentaTemp) != "" and
fn:string($RSP/Status/successIndicator/text()) = "Success" and
$validationMessage = ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQGetAccountDetailsIn">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fb5</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionGetDetailAccountIn"/>
                                            <con2:param name="password">
                                                <con2:path>$password</con2:path>
                                            </con2:param>
                                            <con2:param name="cuentaTemp">
                                                <con2:path>$cuentaTemp</con2:path>
                                            </con2:param>
                                            <con2:param name="username">
                                                <con2:path>$username</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fad</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQGetAccountDetailsIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQGetAccountDetailsIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fa4</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fa3</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fa2</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f9f</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/GetAccountBS/GetAccountyBS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>Consultadedetallesdelacuenta</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQGetAccountDetailsIn</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPGetAccountDetailsIn</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e5f</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPGetAccountDetailsIn/Status/successIndicator/text())</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e5c</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if($errorCode != 'Success')then
fn:string($RSPGetAccountDetailsIn/Status/messages/text())
else('')</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="cuenta">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f9c</con2:id>
                                            <con1:expr>
                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionGetDetailAccountOut"/>
                                                    <con2:param name="getDetailAccountResponse">
                                                        <con2:path>$RSPGetAccountDetailsIn</con2:path>
                                                    </con2:param>
                                                </con2:xqueryTransform>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f99</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPGetAccountDetailsIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPGetAccountDetailsIn)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f8f</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f8e</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f8d</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:assign varName="cuenta">
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7fb0</con2:id>
                                <con1:expr>
                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">""</con2:xqueryText>
                                </con1:expr>
                            </con1:assign>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7f8c" name="ProxyResponse">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:variable name="PaymentCollection" path="$RSP" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
                        <con1:schema ref="CoreBankingHN/ProviderServices/XSD/PaymentCollection/XMLSchema_-263071553" element="PagoderecaudoreferenciadodbctaResponse"/>
                    </con1:variable>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f85</con2:id>
                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7f84">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validationMessage != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="getErrorReq">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.44453a04.0.1896516bff9.N7f3a</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_GetErrorBS"/>
                                            <con2:param name="codigoErrorSistema">
                                                <con2:path>$errorCode</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoLenguaje">
                                                <con2:path>if (fn:data($bodyInput/pay:GeneralInfo/com:Language)!='')
then
fn:data($bodyInput/pay:GeneralInfo/com:Language)
else
'es'</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>$validationMessage</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.44453a04.0.1896516bff9.N7f06</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/GetErrorMessages/v1.0/GetErrorMessages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>GetErrorMessages_BS</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">getErrorReq</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">getErrorRsp</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="errorResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.44453a04.0.1896516bff9.N7ed2</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/XQ/Tx_ErrorMap_To_ErrorInfo"/>
                                            <con2:param name="systemId">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="errorMapResponse">
                                                <con2:path>$getErrorRsp</con2:path>
                                            </con2:param>
                                            <con2:param name="systemStatus">
                                                <con2:path>'Error'</con2:path>
                                            </con2:param>
                                            <con2:param name="globalId">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="messageId">
                                                <con2:path>$errorCode</con2:path>
                                            </con2:param>
                                            <con2:param name="messages">
                                                <con2:path>$validationMessage</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.44453a04.0.1896516bff9.N7ecf</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/Tx_ErrorInfo_To_PaymentCollectionResponse"/>
                                            <con2:param name="errorInfo">
                                                <con2:path>$errorResponse</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:replace varName="body" contents-only="true">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea07.44453a04.0.1896516bff9.N7ecc</con2:id>
                                    <con1:expr>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                    </con1:expr>
                                </con1:replace>
                                <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                    <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7eaa</con2:id>
                                </con2:skip>
                            </con1:actions>
                        </con1:case>
                        <con1:default>
                            <con1:ifThenElse>
                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f7b</con2:id>
                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7f7a">
                                    <con1:condition>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "MOBILE_RECHARGE"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7ea3</con2:id>
                                            <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7ea2">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = "Success"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="bodyResponse">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e97</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionPurchaseRechargeOut"/>
                                                                <con2:param name="paymentCollectionContractDetailResponse">
                                                                    <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                </con2:param>
                                                                <con2:param name="branchName">
                                                                    <con2:path>$branchName</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="purchaseRechargeResponse">
                                                                    <con2:path>$RSP</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:replace varName="body" contents-only="true">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e48</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:replace>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default/>
                                        </con1:ifThenElse>
                                    </con1:actions>
                                </con1:case>
                                <con1:case id="_BranchId-a51ea03.756e651.0.189b9730423.N7f9d">
                                    <con1:condition>
                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "MOBILE_PACKAGE"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                        <con1:ifThenElse>
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e55</con2:id>
                                            <con1:case id="_BranchId-a51ea09.N57513537.0.1894c7bdea9.N7e54">
                                                <con1:condition>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorCode = "Success"</con2:xqueryText>
                                                </con1:condition>
                                                <con1:actions>
                                                    <con1:assign varName="bodyResponse">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7ffe</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionPurchasePackageOut"/>
                                                                <con2:param name="paymentCollectionRequest">
                                                                    <con2:path>$bodyInput</con2:path>
                                                                </con2:param>
                                                                <con2:param name="getCollectionContractDetailResponse">
                                                                    <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                </con2:param>
                                                                <con2:param name="mobilePackagesResponse">
                                                                    <con2:path>$RSPMobilePackages</con2:path>
                                                                </con2:param>
                                                                <con2:param name="uuid">
                                                                    <con2:path>$uuid</con2:path>
                                                                </con2:param>
                                                                <con2:param name="transactionId">
                                                                    <con2:path>$transIdFT</con2:path>
                                                                </con2:param>
                                                            </con2:xqueryTransform>
                                                        </con1:expr>
                                                    </con1:assign>
                                                    <con1:replace varName="body" contents-only="true">
                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57fe4e.N2a43ee3.0.1894e9ddcce.N7ff8</con2:id>
                                                        <con1:expr>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                        </con1:expr>
                                                    </con1:replace>
                                                </con1:actions>
                                            </con1:case>
                                            <con1:default/>
                                        </con1:ifThenElse>
                                    </con1:actions>
                                </con1:case>
                                <con1:default>
                                    <con1:ifThenElse>
                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f6b</con2:id>
                                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7f6a">
                                            <con1:condition>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator) = "Success"</con2:xqueryText>
                                            </con1:condition>
                                            <con1:actions>
                                                <con1:ifThenElse>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7f63</con2:id>
                                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7f62">
                                                        <con1:condition>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_ONLINE"</con2:xqueryText>
                                                        </con1:condition>
                                                        <con1:actions>
                                                            <con1:ifThenElse>
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e85</con2:id>
                                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7e84">
                                                                    <con1:condition>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSP/TELLERType) > 0</con2:xqueryText>
                                                                    </con1:condition>
                                                                    <con1:actions>
                                                                        <con1:assign varName="REQAssembleCollectionMessage">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e81</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/assembleMessageResponseTTIn"/>
                                                                                    <con2:param name="paymentCollectionRequest">
                                                                                        <con2:path>$bodyInput</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="getCollectionContractDetailResponse">
                                                                                        <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="tellerType">
                                                                                        <con2:path>$RSP/TELLERType</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="serviceResponse">
                                                                                        <con2:path>$RSPRouterConventions</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="getCoreParametersResponse">
                                                                                        <con2:path>$RSPGetCoreParameters</con2:path>
                                                                                    </con2:param>
                                                                                </con2:xqueryTransform>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:actions>
                                                                </con1:case>
                                                                <con1:default>
                                                                    <con1:assign varName="REQAssembleCollectionMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7e7e</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/assembleMessageResponseFTIn"/>
                                                                                <con2:param name="paymentCollectionRequest">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="fundsTransferType">
                                                                                    <con2:path>$RSP/FUNDSTRANSFERType</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getCollectionContractDetailResponse">
                                                                                    <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="serviceResponse">
                                                                                    <con2:path>$RSPRouterConventions</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getCoreParametersResponse">
                                                                                    <con2:path>$RSPGetCoreParameters</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:default>
                                                            </con1:ifThenElse>
                                                            <con1:assign varName="bodyReqLog">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c49</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                        <con2:param name="codigoAplicacion">
                                                                            <con2:path>1</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoServicio">
                                                                            <con2:path>$codigoServicio</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="contenido">
                                                                            <con2:path>fn-bea:serialize($REQAssembleCollectionMessage)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="estado">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoSistema">
                                                                            <con2:path>'2'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="nombreFlujoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaHora">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="parametros">
                                                                            <con2:path>fn-bea:serialize($REQAssembleCollectionMessage)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="uuid">
                                                                            <con2:path>$uuid</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="version">
                                                                            <con2:path>'1'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="operacionServicio">
                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoDestino">
                                                                            <con2:path>$destinationBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="endpoint">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoOrigen">
                                                                            <con2:path>$sourceBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaTX">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="usuario">
                                                                            <con2:path>$user</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="descripcionError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="tipoMensaje">
                                                                            <con2:path>'Request'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="metodo">
                                                                            <con2:path>'POST'</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c0f</con2:id>
                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                <con1:outboundTransform>
                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c0e</con3:id>
                                                                        <con2:expr>
                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c0d</con3:id>
                                                                        <con2:mode>request</con2:mode>
                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                    </con2:routing-options>
                                                                </con1:outboundTransform>
                                                            </con1:route>
                                                            <con1:wsCallout>
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7c4c</con2:id>
                                                                <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/AssembleMessageCollection/AssembleMessageCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>AssembleMessageCollection</con1:operation>
                                                                <con1:request>
                                                                    <con1:body wrapped="false">REQAssembleCollectionMessage</con1:body>
                                                                </con1:request>
                                                                <con1:response>
                                                                    <con1:body wrapped="false">RSPAssembleCollectionMessage</con1:body>
                                                                </con1:response>
                                                                <con1:requestTransform/>
                                                                <con1:responseTransform>
                                                                    <con1:assign varName="errorCode">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b9a</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPAssembleCollectionMessage/*:CODIGO_RESPUESTA/text())</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:assign varName="validationMessage">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e51</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:upper-case($errorCode) != 'SUCCESS')then
fn:string($RSPAssembleCollectionMessage/*:MENSAJE_RESPUESTA/text())
else('')</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                </con1:responseTransform>
                                                            </con1:wsCallout>
                                                            <con1:assign varName="bodyReqLog">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7bd9</con2:id>
                                                                <con1:expr>
                                                                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                                        <con2:param name="codigoAplicacion">
                                                                            <con2:path>1</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoServicio">
                                                                            <con2:path>$codigoServicio</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="contenido">
                                                                            <con2:path>fn-bea:serialize($RSPAssembleCollectionMessage)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="estado">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="codigoSistema">
                                                                            <con2:path>'2'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="nombreFlujoError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaHora">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="parametros">
                                                                            <con2:path>fn-bea:serialize($RSPAssembleCollectionMessage)</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="uuid">
                                                                            <con2:path>$uuid</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="version">
                                                                            <con2:path>'1'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="operacionServicio">
                                                                            <con2:path>'paymentCollection'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoDestino">
                                                                            <con2:path>$destinationBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="endpoint">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="bancoOrigen">
                                                                            <con2:path>$sourceBank</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="fechaTX">
                                                                            <con2:path>fn:current-dateTime()</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="usuario">
                                                                            <con2:path>$user</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="descripcionError">
                                                                            <con2:path>''</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="tipoMensaje">
                                                                            <con2:path>'Request'</con2:path>
                                                                        </con2:param>
                                                                        <con2:param name="metodo">
                                                                            <con2:path>'POST'</con2:path>
                                                                        </con2:param>
                                                                    </con2:xqueryTransform>
                                                                </con1:expr>
                                                            </con1:assign>
                                                            <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b9f</con2:id>
                                                                <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                <con1:operation>SetLogInfoService_BS</con1:operation>
                                                                <con1:outboundTransform>
                                                                    <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b9e</con3:id>
                                                                        <con2:expr>
                                                                            <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                                        </con2:expr>
                                                                    </con2:replace>
                                                                    <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                                        <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b9d</con3:id>
                                                                        <con2:mode>request</con2:mode>
                                                                        <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                                    </con2:routing-options>
                                                                </con1:outboundTransform>
                                                            </con1:route>
                                                            <con1:ifThenElse>
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b8b</con2:id>
                                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b8a">
                                                                    <con1:condition>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                                                    </con1:condition>
                                                                    <con1:actions>
                                                                        <con1:assign varName="RESPONSE">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b87</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn-bea:inlinedXML(fn:string($RSPAssembleCollectionMessage/*:MENSAJE/text()))</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                    </con1:actions>
                                                                </con1:case>
                                                                <con1:default>
                                                                    <con2:skip xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                        <con2:id>_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b84</con2:id>
                                                                    </con2:skip>
                                                                </con1:default>
                                                            </con1:ifThenElse>
                                                        </con1:actions>
                                                    </con1:case>
                                                    <con1:default/>
                                                </con1:ifThenElse>
                                                <con1:assign varName="REQUpdate">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b81</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/updateStatePaymentCollectionIn"/>
                                                            <con2:param name="estadoNuevo">
                                                                <con2:path>"2"</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoDeudor">
                                                                <con2:path>fn:string($bodyInput/pay:DebtorCode/text())</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoFactura">
                                                                <con2:path>fn:string($bodyInput/pay:BillInformation/pay:BillNumber/text())</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoContrato">
                                                                <con2:path>fn:string($bodyInput/pay:ContractId/text())</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estadoAnterior">
                                                                <con2:path>"1"</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b7b</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($REQUpdate)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'2'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($REQUpdate)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'paymentCollection'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Request'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>'POST'</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b72</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b71</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b70</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                                <con1:wsCallout>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b7e</con2:id>
                                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/UpdateStateRelationOperationCollection/UpdateStateRelationOperationCollection" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>UpdateStateRelationOperationCollection</con1:operation>
                                                    <con1:request>
                                                        <con1:body wrapped="false">REQUpdate</con1:body>
                                                    </con1:request>
                                                    <con1:response>
                                                        <con1:body wrapped="false">RSPUpdate</con1:body>
                                                    </con1:response>
                                                    <con1:requestTransform/>
                                                    <con1:responseTransform>
                                                        <con1:assign varName="errorCode">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e4e</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPUpdate/CODIGO_ERROR/text())</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                        <con1:assign varName="validationMessage">
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e4b</con2:id>
                                                            <con1:expr>
                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:upper-case($errorCode) != 'SUCCESS')then
fn:string($RSPUpdate/MENSAJE_ERROR/text())
else('')</con2:xqueryText>
                                                            </con1:expr>
                                                        </con1:assign>
                                                    </con1:responseTransform>
                                                </con1:wsCallout>
                                                <con1:assign varName="bodyReqLog">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b6d</con2:id>
                                                    <con1:expr>
                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                                            <con2:param name="codigoAplicacion">
                                                                <con2:path>1</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoServicio">
                                                                <con2:path>$codigoServicio</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="contenido">
                                                                <con2:path>fn-bea:serialize($RSPUpdate)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="estado">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="codigoSistema">
                                                                <con2:path>'2'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="nombreFlujoError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaHora">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="parametros">
                                                                <con2:path>fn-bea:serialize($RSPUpdate)</con2:path>
                                                            </con2:param>
                                                            <con2:param name="uuid">
                                                                <con2:path>$uuid</con2:path>
                                                            </con2:param>
                                                            <con2:param name="version">
                                                                <con2:path>'1'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="operacionServicio">
                                                                <con2:path>'paymentCollection'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoDestino">
                                                                <con2:path>$destinationBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="endpoint">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="bancoOrigen">
                                                                <con2:path>$sourceBank</con2:path>
                                                            </con2:param>
                                                            <con2:param name="fechaTX">
                                                                <con2:path>fn:current-dateTime()</con2:path>
                                                            </con2:param>
                                                            <con2:param name="usuario">
                                                                <con2:path>$user</con2:path>
                                                            </con2:param>
                                                            <con2:param name="descripcionError">
                                                                <con2:path>''</con2:path>
                                                            </con2:param>
                                                            <con2:param name="tipoMensaje">
                                                                <con2:path>'Request'</con2:path>
                                                            </con2:param>
                                                            <con2:param name="metodo">
                                                                <con2:path>'POST'</con2:path>
                                                            </con2:param>
                                                        </con2:xqueryTransform>
                                                    </con1:expr>
                                                </con1:assign>
                                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b64</con2:id>
                                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                                    <con1:outboundTransform>
                                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b63</con3:id>
                                                            <con2:expr>
                                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                                            </con2:expr>
                                                        </con2:replace>
                                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b62</con3:id>
                                                            <con2:mode>request</con2:mode>
                                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                                        </con2:routing-options>
                                                    </con1:outboundTransform>
                                                </con1:route>
                                                <con1:ifThenElse>
                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b5b</con2:id>
                                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b5a">
                                                        <con1:condition>
                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">count($RSP/TELLERType) > 0</con2:xqueryText>
                                                        </con1:condition>
                                                        <con1:actions>
                                                            <con1:ifThenElse>
                                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b53</con2:id>
                                                                <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b52">
                                                                    <con1:condition>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_LOCAL"</con2:xqueryText>
                                                                    </con1:condition>
                                                                    <con1:actions>
                                                                        <con1:assign varName="bodyResponse">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b4f</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                    <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionAbanksTTOut"/>
                                                                                    <con2:param name="paymentCollectionRequest">
                                                                                        <con2:path>$bodyInput</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="authorizationCode">
                                                                                        <con2:path>$authorizationCode</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="paymentCollectionAbanksResponse">
                                                                                        <con2:path>$RSPPaymentCollectionAbanks</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="tellerType">
                                                                                        <con2:path>$RSP/TELLERType</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="getCoreParametersResponse">
                                                                                        <con2:path>$RSPGetCoreParameters</con2:path>
                                                                                    </con2:param>
                                                                                    <con2:param name="uuid">
                                                                                        <con2:path>$uuid</con2:path>
                                                                                    </con2:param>
                                                                                </con2:xqueryTransform>
                                                                            </con1:expr>
                                                                        </con1:assign>
                                                                        <con1:replace varName="body" contents-only="true">
                                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e45</con2:id>
                                                                            <con1:expr>
                                                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                    </con1:actions>
                                                                </con1:case>
                                                                <con1:default>
                                                                    <con1:assign varName="bodyResponse">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b4c</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionTellerOut"/>
                                                                                <con2:param name="getUserResponse">
                                                                                    <con2:path>$RSPGetUser</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="authorizationCode">
                                                                                    <con2:path>$authorizationCode</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="tellerType">
                                                                                    <con2:path>$RSP/TELLERType</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getCollectionContractDetailsResponse">
                                                                                    <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:replace varName="body" contents-only="true">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e43</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:replace>
                                                                </con1:default>
                                                            </con1:ifThenElse>
                                                        </con1:actions>
                                                    </con1:case>
                                                    <con1:default>
                                                        <con1:ifThenElse>
                                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b45</con2:id>
                                                            <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b44">
                                                                <con1:condition>
                                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($type) = "REFERENCED_LOCAL"</con2:xqueryText>
                                                                </con1:condition>
                                                                <con1:actions>
                                                                    <con1:assign varName="bodyResponse">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b41</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                                <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionAbanksFTOut"/>
                                                                                <con2:param name="fundsTransferType">
                                                                                    <con2:path>$RSP/FUNDSTRANSFERType</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="authorizationCode">
                                                                                    <con2:path>$authorizationCode</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="paymentCollectionAbanksResponse">
                                                                                    <con2:path>$RSPPaymentCollectionAbanks</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="cuenta">
                                                                                    <con2:path>fn:string($cuenta)</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="getCoreParametersResponse">
                                                                                    <con2:path>$RSPGetCoreParameters</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="paymentCollectionrequest">
                                                                                    <con2:path>$bodyInput</con2:path>
                                                                                </con2:param>
                                                                                <con2:param name="uuid">
                                                                                    <con2:path>$uuid</con2:path>
                                                                                </con2:param>
                                                                            </con2:xqueryTransform>
                                                                        </con1:expr>
                                                                    </con1:assign>
                                                                    <con1:replace varName="body" contents-only="true">
                                                                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e41</con2:id>
                                                                        <con1:expr>
                                                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                                        </con1:expr>
                                                                    </con1:replace>
                                                                </con1:actions>
                                                            </con1:case>
                                                            <con1:default>
                                                                <con1:assign varName="bodyResponse">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b3e</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionTransferOut"/>
                                                                            <con2:param name="fundTransferType">
                                                                                <con2:path>$RSP/FUNDSTRANSFERType</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="getCollectionContractDetailResponse">
                                                                                <con2:path>$RSPPaymentCollectionContractDetail</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="authorizationCode">
                                                                                <con2:path>$authorizationCode</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="cuenta">
                                                                                <con2:path>fn:string($cuenta)</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="branchName">
                                                                                <con2:path>$branchName</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="uuid">
                                                                                <con2:path>$uuid</con2:path>
                                                                            </con2:param>
                                                                            <con2:param name="transactionId">
                                                                                <con2:path>$transactionId</con2:path>
                                                                            </con2:param>
                                                                        </con2:xqueryTransform>
                                                                    </con1:expr>
                                                                </con1:assign>
                                                                <con1:replace varName="body" contents-only="true">
                                                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e3f</con2:id>
                                                                    <con1:expr>
                                                                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                                                                    </con1:expr>
                                                                </con1:replace>
                                                                <con2:route xmlns:con2="http://www.bea.com/wli/sb/stages/publish/config">
                                                                    <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b3b</con3:id>
                                                                    <con2:service ref="CoreBankingHN/ProviderServices/BusinessServices/RecordReceipt/RecordReceipt" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                                                    <con2:operation>RecordReceipt</con2:operation>
                                                                    <con2:outboundTransform>
                                                                        <con1:replace contents-only="true" varName="body">
                                                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b38</con3:id>
                                                                            <con1:expr>
                                                                                <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                                                                                    <con3:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/paymentCollectionRecordReceiptIn"/>
                                                                                    <con3:param name="altTxnld">
                                                                                        <con3:path>""</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="dealslip">
                                                                                        <con3:path>fn:string($body/pay:paymentCollectionResponse/pay:paymentCollectionResponse/pay:BillDetail/text())</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="debtorCode">
                                                                                        <con3:path>fn:string(fn:tokenize($reqParams,"\|")[3])</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="contractId">
                                                                                        <con3:path>fn:string(fn:tokenize($reqParams,"\|")[2])</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="inputter">
                                                                                        <con3:path>fn:string($body/pay:paymentCollectionResponse/pay:paymentCollectionResponse/pay:Inputter/text())</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="transactionId">
                                                                                        <con3:path>fn:string($body/pay:paymentCollectionResponse/pay:StatusInfo/com:TransactionId/text())</con3:path>
                                                                                    </con3:param>
                                                                                    <con3:param name="txnDate">
                                                                                        <con3:path>$body/pay:paymentCollectionResponse/pay:paymentCollectionResponse/pay:DateTime</con3:path>
                                                                                    </con3:param>
                                                                                </con3:xqueryTransform>
                                                                            </con1:expr>
                                                                        </con1:replace>
                                                                    </con2:outboundTransform>
                                                                </con2:route>
                                                            </con1:default>
                                                        </con1:ifThenElse>
                                                    </con1:default>
                                                </con1:ifThenElse>
                                            </con1:actions>
                                        </con1:case>
                                        <con1:default>
                                            <con1:assign varName="errorCode">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7ffe</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/successIndicator)</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                            <con1:assign varName="validationMessage">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7ff8</con2:id>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSP/Status/messages[1])</con2:xqueryText>
                                                </con1:expr>
                                            </con1:assign>
                                        </con1:default>
                                    </con1:ifThenElse>
                                </con1:default>
                            </con1:ifThenElse>
                        </con1:default>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7b37" name="ConvertToHTML">
                <con:context>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b30</con2:id>
                        <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b2f">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($bodyResponse/pay:paymentCollectionResponse/pay:BillDetail/text()) != ""</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="REQtransformCollection">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b2c</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/transformCollectionReceiptIn"/>
                                            <con2:param name="dealslip">
                                                <con2:path>fn:string($bodyResponse/pay:paymentCollectionResponse/pay:BillDetail/text())</con2:path>
                                            </con2:param>
                                            <con2:param name="username">
                                                <con2:path>$username</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b25</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($REQtransformCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($REQtransformCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b1c</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b1b</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b1a</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b28</con2:id>
                                    <con1:service ref="CoreBankingHN/ProviderServices/BusinessServices/TransformCollectionReceipt/TransformCollectionReceipt_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>TransformCollectionReceipt</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">REQtransformCollection</con1:body>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">RSPtransformCollection</con1:body>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform>
                                        <con1:assign varName="errorCode">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7af8</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($RSPtransformCollection/*:CODIGO_RESPUESTA)</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="validationMessage">
                                            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea09.N57513537.0.1894c7bdea9.N7e3c</con2:id>
                                            <con1:expr>
                                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">if(fn:upper-case($errorCode) != 'SUCCESS')then
fn:data($RSPtransformCollection/*:MENSAJE_RESPUESTA)
else('')</con2:xqueryText>
                                            </con1:expr>
                                        </con1:assign>
                                    </con1:responseTransform>
                                </con1:wsCallout>
                                <con1:assign varName="bodyReqLog">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b0f</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                            <con2:param name="codigoAplicacion">
                                                <con2:path>1</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="contenido">
                                                <con2:path>fn-bea:serialize($RSPtransformCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="estado">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="nombreFlujoError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaHora">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="parametros">
                                                <con2:path>fn-bea:serialize($RSPtransformCollection)</con2:path>
                                            </con2:param>
                                            <con2:param name="uuid">
                                                <con2:path>$uuid</con2:path>
                                            </con2:param>
                                            <con2:param name="version">
                                                <con2:path>'1'</con2:path>
                                            </con2:param>
                                            <con2:param name="operacionServicio">
                                                <con2:path>'paymentCollection'</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoDestino">
                                                <con2:path>$destinationBank</con2:path>
                                            </con2:param>
                                            <con2:param name="endpoint">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="bancoOrigen">
                                                <con2:path>$sourceBank</con2:path>
                                            </con2:param>
                                            <con2:param name="fechaTX">
                                                <con2:path>fn:current-dateTime()</con2:path>
                                            </con2:param>
                                            <con2:param name="usuario">
                                                <con2:path>$user</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>''</con2:path>
                                            </con2:param>
                                            <con2:param name="tipoMensaje">
                                                <con2:path>'Request'</con2:path>
                                            </con2:param>
                                            <con2:param name="metodo">
                                                <con2:path>'POST'</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b14</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>SetLogInfoService_BS</con1:operation>
                                    <con1:outboundTransform>
                                        <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b13</con3:id>
                                            <con2:expr>
                                                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$bodyReqLog</con3:xqueryText>
                                            </con2:expr>
                                        </con2:replace>
                                        <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                            <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b12</con3:id>
                                            <con2:mode>request</con2:mode>
                                            <con2:qualityOfService>best-effort</con2:qualityOfService>
                                        </con2:routing-options>
                                    </con1:outboundTransform>
                                </con1:route>
                                <con1:ifThenElse>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b08</con2:id>
                                    <con1:case id="_BranchId-a51ea04.3efb8ea4.0.18948faea20.N7b07">
                                        <con1:condition>
                                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:upper-case($errorCode) = "SUCCESS"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                            <con1:replace contents-only="true" varName="body">
                                                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7b04</con2:id>
                                                <con1:location>
                                                    <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">./pay:paymentCollectionResponse/pay:paymentCollectionResponse/pay:BillDetail</con2:xpathText>
                                                </con1:location>
                                                <con1:expr>
                                                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:string($RSPtransformCollection/*:PV_DEALSLIP/text())</con2:xqueryText>
                                                </con1:expr>
                                            </con1:replace>
                                        </con1:actions>
                                    </con1:case>
                                    <con1:default/>
                                </con1:ifThenElse>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea02.4c0e3c40.0.1897395e50c.N7f5c" name="Tx_FinalResponse">
                <con:context>
                    <con1:userNsDecl prefix="com" namespace="http://www.ficohsa.com.hn/middleware.services/commonTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                    <con1:userNsDecl prefix="pay" namespace="http://www.ficohsa.com.hn/middleware.services/paymentCollectionTypes" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
                </con:context>
                <con:actions>
                    <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7f4e</con2:id>
                        <con1:case id="_BranchId-N3f57ff92.16f3f631.0.18a28a38a6a.N7f4d">
                            <con1:condition>
                                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($body/pay:paymentCollectionResponse/pay:StatusInfo/com:Status) != 'Success'</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                                <con1:assign varName="getErrorReq">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7ff5</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_GetErrorBS"/>
                                            <con2:param name="codigoErrorSistema">
                                                <con2:path>fn:data($RSP/Status/successIndicator)</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoServicio">
                                                <con2:path>$codigoServicio</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoSistema">
                                                <con2:path>'2'</con2:path>
                                            </con2:param>
                                            <con2:param name="codigoLenguaje">
                                                <con2:path>if (fn:data($bodyInput/*:GeneralInfo/*:Language)!='')
then
fn:data($bodyInput/*:GeneralInfo/*:Language)
else
'es'</con2:path>
                                            </con2:param>
                                            <con2:param name="descripcionError">
                                                <con2:path>fn:data($RSP/Status/messages[1])</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7fc0</con2:id>
                                    <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/GetErrorMessages/v1.0/GetErrorMessages_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>GetErrorMessages_BS</con1:operation>
                                    <con1:request>
                                        <con1:body wrapped="false">getErrorReq</con1:body>
                                        <con1:header/>
                                    </con1:request>
                                    <con1:response>
                                        <con1:body wrapped="false">getErrorRsp</con1:body>
                                        <con1:header/>
                                    </con1:response>
                                    <con1:requestTransform/>
                                    <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:assign varName="errorResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7f8c</con2:id>
                                    <con1:expr>
                                        <con:xqueryTransform xmlns:con="http://www.bea.com/wli/sb/stages/config">
                                            <con:resource ref="CommonResources/XQ/Tx_ErrorMap_To_ErrorInfo"/>
                                            <con:param name="systemId">
                                                <con:path>'2'</con:path>
                                            </con:param>
                                            <con:param name="errorMapResponse">
                                                <con:path>$getErrorRsp</con:path>
                                            </con:param>
                                            <con:param name="systemStatus">
                                                <con:path>'Error'</con:path>
                                            </con:param>
                                            <con:param name="globalId">
                                                <con:path>$uuid</con:path>
                                            </con:param>
                                            <con:param name="messageId">
                                                <con:path>$errorCode</con:path>
                                            </con:param>
                                            <con:param name="messages">
                                                <con:path>$validationMessage</con:path>
                                            </con:param>
                                        </con:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bodyResponse">
                                    <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7f89</con2:id>
                                    <con1:expr>
                                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                            <con2:resource ref="CoreBankingHN/RequestorServices/v1.0/PaymentCollection/XQ/Tx_ErrorInfo_To_PaymentCollectionResponse"/>
                                            <con2:param name="errorInfo">
                                                <con2:path>$errorResponse</con2:path>
                                            </con2:param>
                                        </con2:xqueryTransform>
                                    </con1:expr>
                                </con1:assign>
                            </con1:actions>
                        </con1:case>
                        <con1:default/>
                    </con1:ifThenElse>
                </con:actions>
            </con:stage>
            <con:stage id="_StageId-a51ea04.3efb8ea4.0.18948faea20.N7a02" name="TxLogResponse">
                <con:context/>
                <con:actions>
                    <con1:assign varName="varLogReq" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7a01</con2:id>
                        <con1:expr>
                            <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                                <con2:resource ref="CommonResources/MiddlewareDB/ProviderServices/XQ/Tx_Msg_To_SetLogInfo"/>
                                <con2:param name="codigoAplicacion">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="codigoServicio">
                                    <con2:path>$codigoServicio</con2:path>
                                </con2:param>
                                <con2:param name="codigoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="contenido">
                                    <con2:path>fn-bea:serialize($bodyResponse)</con2:path>
                                </con2:param>
                                <con2:param name="estado">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="codigoSistema">
                                    <con2:path>1</con2:path>
                                </con2:param>
                                <con2:param name="nombreFlujoError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="fechaHora">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="uuid">
                                    <con2:path>$uuid</con2:path>
                                </con2:param>
                                <con2:param name="version">
                                    <con2:path>'1'</con2:path>
                                </con2:param>
                                <con2:param name="operacionServicio">
                                    <con2:path>'ConsultaCliente'</con2:path>
                                </con2:param>
                                <con2:param name="bancoDestino">
                                    <con2:path>$destinationBank</con2:path>
                                </con2:param>
                                <con2:param name="endpoint">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="bancoOrigen">
                                    <con2:path>$sourceBank</con2:path>
                                </con2:param>
                                <con2:param name="fechaTX">
                                    <con2:path>fn:current-dateTime()</con2:path>
                                </con2:param>
                                <con2:param name="usuario">
                                    <con2:path>$user</con2:path>
                                </con2:param>
                                <con2:param name="descripcionError">
                                    <con2:path>''</con2:path>
                                </con2:param>
                                <con2:param name="tipoMensaje">
                                    <con2:path>'Response'</con2:path>
                                </con2:param>
                                <con2:param name="metodo">
                                    <con2:path>''</con2:path>
                                </con2:param>
                            </con2:xqueryTransform>
                        </con1:expr>
                    </con1:assign>
                    <con1:route xmlns:con1="http://www.bea.com/wli/sb/stages/publish/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N7a00</con2:id>
                        <con1:service ref="CommonResources/MiddlewareDB/ProviderServices/BusinessServices/SetLogInfoService/v1.0/SetLogInfoService_BS" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>SetLogInfoService_BS</con1:operation>
                        <con1:outboundTransform>
                            <con2:replace varName="body" contents-only="true" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79ff</con3:id>
                                <con2:expr>
                                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$varLogReq</con3:xqueryText>
                                </con2:expr>
                            </con2:replace>
                            <con2:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config">
                                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-a51ea04.3efb8ea4.0.18948faea20.N79fe</con3:id>
                                <con2:mode>request</con2:mode>
                                <con2:qualityOfService>best-effort</con2:qualityOfService>
                            </con2:routing-options>
                        </con1:outboundTransform>
                    </con1:route>
                    <con1:replace varName="body" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-N3f57ff92.16f3f631.0.18a28a38a6a.N7f55</con2:id>
                        <con1:expr>
                            <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$bodyResponse</con2:xqueryText>
                        </con1:expr>
                    </con1:replace>
                </con:actions>
            </con:stage>
        </con:pipeline>
        <con:flow>
            <con:pipeline-node name="PaymentCollectionPP">
                <con:request>request-a51ea04.3e8649bd.0.189474b8e2d.N7e90</con:request>
                <con:response>response-a51ea04.3e8649bd.0.189474b8e2d.N7e8f</con:response>
            </con:pipeline-node>
        </con:flow>
    </con:router>
</con:pipelineEntry>